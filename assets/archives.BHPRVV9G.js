import{_ as D}from"./SakuraPage.vue_vue_type_style_index_0_lang.CjoIdmB9.js";import{j as N,r as f,w as E,f as P,M as w,O as r,L as a,S as u,V as _,y as k,F as L,X as M,K as b,a1 as x,W as I,P as $,u as C,Z as R,ac as T,J as Y,Y as J,a0 as A}from"./framework.DzQMb1nT.js";import{s as F,f as S,a as W,b as z,d as G}from"./app.NFAAdwm6.js";import"./chunks/dayjs.CPPL_t8N.js";import{u as K}from"./chunks/vue-i18n.BMpzDVHc.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.DHaAMvDf.js";import"./chunks/vue-router.CwyAnJZE.js";import"./chunks/pinia.j8_R8H-A.js";import"./chunks/nprogress.D6qpKeA8.js";const X={w:"full",class:"post-collapse mx-auto px-10 lt-sm:px-5"},Z={w:"full",text:"center",class:"yun-text-light",p:"2"},q={class:"post-collapse-action",text:"center"},H={key:0,"i-ri-sort-desc":""},Q={key:1,"i-ri-sort-asc":""},U=["id"],j={key:0,class:"post-meta absolute right-100% my-[1rem] mr-[1.2rem]"},ee={key:0,class:"post-time",font:"mono",opacity:"80"},te={class:"text-$sakura-color-text"},se={key:1,class:"post-meta my-[1rem] ml-[1.2rem]"},ae={key:0,class:"post-time text-$sakura-timeline-text-color",font:"mono",opacity:"80"},oe={class:"post-title","inline-flex":"","items-center":"",font:"serif black"},ne=N({__name:"SakuraTimeLine",props:{posts:{}},setup(y){const v=y,{t:g}=K(),i=f(!0),p=f([]),m=f({}),s=f({}),d=f({});E(()=>v.posts,()=>{s.value={},p.value=[],m.value={},v.posts.forEach(t=>{if(!(t.hide&&t.hide!=="index")&&t.date){const e=Number.parseInt(S(t.date,"yyyy")),n=Number.parseInt(S(t.date,"MM"));s.value[e]||(p.value.push(e),m.value[e]=[],s.value[e]={}),s.value[e][n]||(m.value[e].push(n),s.value[e][n]=[],s.value[e][n].push(t)),s.value[e][n].push(t)}}),d.value=JSON.parse(JSON.stringify(s.value)),Object.keys(s.value).forEach(t=>{Object.keys(s.value[t]).forEach(e=>{s.value[t][e].length>1&&(s.value[t][e]=[s.value[t][e][0]])})})},{immediate:!0});const B=P(()=>{const e=[...p.value].sort((n,o)=>o-n);return i.value?e:e.reverse()});function V(t){const n=[...m.value[t]].sort((o,l)=>l-o);return i.value?n:n.reverse()}function O(t,e){s.value[t][e]=[...d.value[t][e]]}return(t,e)=>{const n=w("RouterLink");return a(),r("div",X,[u("div",Z,_(k(g)("counter.archives",y.posts.length)),1),u("div",q,[u("button",{onClick:e[0]||(e[0]=o=>i.value=!i.value)},[i.value?(a(),r("div",H)):(a(),r("div",Q))])]),(a(!0),r(L,null,M(B.value,o=>(a(),r("div",{key:o,class:"ml-1/3"},[u("h2",{id:`#archive-year-${o}`,class:"archive-year ml--8",text:"2xl"},_(o)+"年 ",9,U),(a(!0),r(L,null,M(V(o),l=>(a(),b(T,{key:l,name:"timeline",tag:"ul",class:"relative p-0",onMouseenter:c=>O(o,l)},{default:x(()=>[(a(!0),r(L,null,M(k(F)(s.value[o][l],i.value),(c,h)=>(a(),r("li",{key:`post-${o}-${l}-${h}`,class:"post-item relative"},[u("header",{class:I(["post-header",[h===0?"circle-indicator":"hover-indicator",h!==s.value[o][l].length&&"h-$sakura-timeline-height"]]),flex:"","items-center":""},[h===0?(a(),r("div",j,[c.date?(a(),r("time",ee,_(k(S)(c.date,"MM"))+"月 ",1)):$("v-if",!0),u("span",te," ("+_(d.value[o][l].length)+" 篇文章) ",1)])):$("v-if",!0),h!==0?(a(),r("div",se,[c.date?(a(),r("time",ae,_(k(S)(c.date,"dd"))+"日 ",1)):$("v-if",!0),u("h2",oe,[C(n,{to:c.path||"",class:"post-title-link text-$sakura-color-text hover:text-$sakura-color-action"},{default:x(()=>[R(_(c.title),1)]),_:2},1032,["to"])])])):$("v-if",!0)],2)]))),128))]),_:2},1032,["onMouseenter"]))),128))]))),128))])}}}),re=Y(ne,[["__scopeId","data-v-8ab192ab"]]),ie=N({__name:"SakuraArchivesLayout",setup(y){const v=W();return(g,i)=>{const p=re,m=w("RouterView"),s=D;return a(),b(s,{class:"sakura-archivers-page"},{default:x(()=>[C(m,null,{default:x(({Component:d})=>[(a(),b(J(d),null,{"main-content":x(()=>[A(g.$slots,"content",{},()=>[C(p,{posts:k(v).postList},null,8,["posts"])])]),_:3}))]),_:3})]),_:3})}}}),fe=N({__name:"archives",setup(y){return z([G({"@type":"CollectionPage"})]),(v,g)=>{const i=ie;return a(),b(i)}}});export{fe as default};
