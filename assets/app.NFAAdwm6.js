const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/view-transition.IkvUpX_n.css","assets/404.CZVRuG-n.js","assets/chunks/vue-router.CwyAnJZE.js","assets/framework.DzQMb1nT.js","assets/chunks/dayjs.CPPL_t8N.js","assets/chunks/vue-i18n.BMpzDVHc.js","assets/chunks/pinia.j8_R8H-A.js","assets/chunks/nprogress.D6qpKeA8.js","assets/404.BVla_BTh.css","assets/empty.CWWz1j03.js","assets/post.CWWz1j03.js","assets/anime.bxUsHUM8.js","assets/SakuraPage.vue_vue_type_style_index_0_lang.CjoIdmB9.js","assets/SakuraMultiColumns.vue_vue_type_script_setup_true_lang.DHaAMvDf.js","assets/SakuraPage.Cfl31x9h.css","assets/anime.pRyB0Qdd.css","assets/archives.BHPRVV9G.js","assets/archives.CunYAfFJ.css","assets/categories.DHksslv6.js","assets/SakuraPostList.Cb4pQHXo.js","assets/SakuraPostDate.DVDv30Iz.js","assets/SakuraPostDate.CQWV6bLq.css","assets/SakuraPostList.BdVe3Ztz.css","assets/categories.FiO9idAV.css","assets/comment.DRq-mR3z.js","assets/hitokoto.DS5EjaPP.js","assets/comment.BzTpJtlv.css","assets/home.DNoWjMXA.js","assets/home.BbDjia3H.css","assets/links.BLoMsg3g.js","assets/links.3SwEtdCV.css","assets/post.DDuAjm8m.js","assets/content.Cem8cOM1.js","assets/post.B1giPUxD.css","assets/search.D4FXMx8x.js","assets/search.DmypUj8z.css","assets/tags.YiLo_QEQ.js","assets/tags.CdPrbPBx.css","assets/animation-in.BI4ri2UH.css","assets/index.aV6FsLUp.js","assets/Live2DApp.Bm3mni3B.js","assets/SakuraAlgoliaSearch.bt4kMs3f.js","assets/rolling.Cq7_JC1c.js","assets/router.C1axOHAx.js"])))=>i.map(i=>d[i]);
var Q_=Object.defineProperty;var Ed=r=>{throw TypeError(r)};var J_=(r,t,e)=>t in r?Q_(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var it=(r,t,e)=>J_(r,typeof t!="symbol"?t+"":t,e),t0=(r,t,e)=>t.has(r)||Ed("Cannot "+e);var Vs=(r,t,e)=>(t0(r,t,"read from private field"),e?e.call(r):t.get(r)),Sd=(r,t,e)=>t.has(r)?Ed("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import{B as Ot,b as $h,h as Gh,i as Hh,r as _t,C as zh,D as e0,v as r0,x as i0,l as wa,E as s0,s as Vt,f as tt,y as Q,w as qt,p as Xr,n as Ui,g as n0,o as o0,q as lm,G as a0,H as cm,I as l0,a as Pc,_ as pe,J as me,K as zt,L as W,M as je,j as It,N as hm,O as at,F as Ie,P as At,Q as _n,R as Xo,S as vt,U as Hr,V as te,W as re,X as kn,Y as um,Z as hi,$ as c0,u as Ht,a0 as Nt,a1 as jt,a2 as br,a3 as dm,a4 as h0,a5 as pm,a6 as u0,a7 as jh,a8 as fm,a9 as d0,aa as p0,ab as f0,k as m0}from"./framework.DzQMb1nT.js";import{u as Vh,a as Wi,c as g0,b as v0,r as Wh,D as y0}from"./chunks/vue-router.CwyAnJZE.js";import{d as fi,r as _0,t as b0,u as x0,g as Xh,c as ms,a as w0}from"./chunks/dayjs.CPPL_t8N.js";import{c as T0,d as Ta,i as E0}from"./chunks/pinia.j8_R8H-A.js";import{u as Yr,c as S0}from"./chunks/vue-i18n.BMpzDVHc.js";import{i as A0}from"./chunks/nprogress.D6qpKeA8.js";const Yh="virtual:valaxy-addons:empty",mm=Yh;function gm(r){return r&&r.name===Yh}const C0={name:mm},oD=Object.freeze(Object.defineProperty({__proto__:null,default:C0,emptyAddonName:Yh,isEmptyAddon:gm,name:mm},Symbol.toStringTag,{value:"Module"}));function wl(r){if(r===null||typeof r!="object")return!1;const t=Object.getPrototypeOf(r);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Ic(r,t,e=".",i){if(!wl(t))return Ic(r,{},e,i);const s=Object.assign({},t);for(const n in r){if(n==="__proto__"||n==="constructor")continue;const o=r[n];o!=null&&(i&&i(s,n,o,e)||(Array.isArray(o)&&Array.isArray(s[n])?s[n]=[...o,...s[n]]:wl(o)&&wl(s[n])?s[n]=Ic(o,s[n],(e?`${e}.`:"")+n.toString(),i):s[n]=o))}return s}function qh(r){return(...t)=>t.reduce((e,i)=>Ic(e,i,"",r),{})}const P0=qh(),I0=new Set(["link","style","script","noscript"]),R0=new Set(["title","titleTemplate","script","style","noscript"]),Ad=new Set(["base","meta","link","style","script","noscript"]),M0=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),k0=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),D0=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),O0=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Kh=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),bn={META:new Set(["twitter"]),OG:new Set(["og","book","article","profile","fb"]),MEDIA:new Set(["ogImage","ogVideo","ogAudio","twitterImage"]),HTTP_EQUIV:new Set(["contentType","defaultStyle","xUaCompatible"])},L0={articleExpirationTime:"article:expiration_time",articleModifiedTime:"article:modified_time",articlePublishedTime:"article:published_time",bookReleaseDate:"book:release_date",fbAppId:"fb:app_id",ogAudioSecureUrl:"og:audio:secure_url",ogAudioUrl:"og:audio",ogImageSecureUrl:"og:image:secure_url",ogImageUrl:"og:image",ogSiteName:"og:site_name",ogVideoSecureUrl:"og:video:secure_url",ogVideoUrl:"og:video",profileFirstName:"profile:first_name",profileLastName:"profile:last_name",profileUsername:"profile:username",msapplicationConfig:"msapplication-Config",msapplicationTileColor:"msapplication-TileColor",msapplicationTileImage:"msapplication-TileImage"},vm={appleItunesApp:{unpack:{entrySeparator:", ",resolve:({key:r,value:t})=>`${Br(r)}=${t}`}},refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve:({key:r,value:t})=>r==="seconds"?`${t}`:void 0}},robots:{unpack:{entrySeparator:", ",resolve:({key:r,value:t})=>typeof t=="boolean"?Br(r):`${Br(r)}:${t}`}},contentSecurityPolicy:{metaKey:"http-equiv",unpack:{entrySeparator:"; ",resolve:({key:r,value:t})=>`${Br(r)} ${t}`}},charset:{}};function Br(r){const t=r.replace(/([A-Z])/g,"-$1").toLowerCase(),e=t.indexOf("-");return e===-1?t:bn.META.has(t.slice(0,e))||bn.OG.has(t.slice(0,e))?r.replace(/([A-Z])/g,":$1").toLowerCase():t}function ym(r){return Object.fromEntries(Object.entries(r).filter(([t,e])=>String(e)!=="false"&&t))}function Rc(r){return Array.isArray(r)?r.map(Rc):!r||typeof r!="object"?r:Object.fromEntries(Object.entries(r).map(([t,e])=>[Br(t),Rc(e)]))}function _m(r,t={}){const{entrySeparator:e="",keyValueSeparator:i="",wrapValue:s,resolve:n}=t;return Object.entries(r).map(([o,a])=>{if(n){const u=n({key:o,value:a});if(u!==void 0)return u}const l=typeof a=="object"?_m(a,t):typeof a=="number"?a.toString():typeof a=="string"&&s?`${s}${a.replace(new RegExp(s,"g"),`\\${s}`)}${s}`:a;return`${o}${i}${l}`}).join(e)}function Cd(r,t){const e=ym(t),i=Br(r),s=bm(i);if(!Kh.has(i))return[{[s]:i,...e}];const n=Object.fromEntries(Object.entries(e).map(([o,a])=>[`${r}${o==="url"?"":`${o[0].toUpperCase()}${o.slice(1)}`}`,a]));return Yo(n||{}).sort((o,a)=>{var l,u;return(((l=o[s])==null?void 0:l.length)||0)-(((u=a[s])==null?void 0:u.length)||0)})}function bm(r){var i;if(((i=vm[r])==null?void 0:i.metaKey)==="http-equiv"||bn.HTTP_EQUIV.has(r))return"http-equiv";const t=Br(r),e=t.indexOf(":");return e===-1?"name":bn.OG.has(t.slice(0,e))?"property":"name"}function B0(r){return L0[r]||Br(r)}function F0(r,t){var e;return t==="refresh"?`${r.seconds};url=${r.url}`:_m(Rc(r),{keyValueSeparator:"=",entrySeparator:", ",resolve:({value:i,key:s})=>i===null?"":typeof i=="boolean"?s:void 0,...(e=vm[t])==null?void 0:e.unpack})}function Yo(r){const t=[],e={};for(const[s,n]of Object.entries(r)){if(Array.isArray(n)){if(s==="themeColor"){n.forEach(o=>{typeof o=="object"&&o!==null&&t.push({name:"theme-color",...o})});continue}for(const o of n)if(typeof o=="object"&&o!==null){const a=[],l=[];for(const[u,d]of Object.entries(o)){const f=`${s}${u==="url"?"":`:${u}`}`,m=Yo({[f]:d});(u==="url"?a:l).push(...m)}t.push(...a,...l)}else t.push(...typeof o=="string"?Yo({[s]:o}):Cd(s,o));continue}if(typeof n=="object"&&n)if(bn.MEDIA.has(s)){const o=s.startsWith("twitter")?"twitter":"og",a=s.replace(/^(og|twitter)/,"").toLowerCase(),l=o==="twitter"?"name":"property";n.url&&t.push({[l]:`${o}:${a}`,content:n.url}),n.secureUrl&&t.push({[l]:`${o}:${a}:secure_url`,content:n.secureUrl});for(const[u,d]of Object.entries(n))u!=="url"&&u!=="secureUrl"&&t.push({[l]:`${o}:${a}:${u}`,content:d})}else Kh.has(Br(s))?t.push(...Cd(s,n)):e[s]=ym(n);else e[s]=n}const i=Object.entries(e).map(([s,n])=>{if(s==="charset")return{charset:n===null?"_null":n};const o=bm(s),a=B0(s),l=n===null?"_null":typeof n=="object"?F0(n,s):typeof n=="number"?n.toString():n;return o==="http-equiv"?{"http-equiv":a,content:l}:{[o]:a,content:l}});return[...t,...i].map(s=>"content"in s&&s.content==="_null"?{...s,content:null}:s)}const N0={key:"flatMeta",hooks:{"entries:normalize":r=>{const t=[];r.tags=r.tags.map(e=>e.tag!=="_flatMeta"?e:(t.push(Yo(e.props).map(i=>({...e,tag:"meta",props:i}))),!1)).filter(Boolean).concat(...t)}}},Pd=(r,t)=>r._w===t._w?r._p-t._p:r._w-t._w,Id={base:-10,title:10},U0={critical:-8,high:-1,low:2},Rd={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},$0=/@import/,Ws=r=>r===""||r===!0;function G0(r,t){var n;if(typeof t.tagPriority=="number")return t.tagPriority;let e=100;const i=U0[t.tagPriority]||0,s=r.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Rd;if(t.tag in Id)e=Id[t.tag];else if(t.tag==="meta"){const o=t.props["http-equiv"]==="content-security-policy"?"content-security-policy":t.props.charset?"charset":t.props.name==="viewport"?"viewport":null;o&&(e=Rd.meta[o])}else t.tag==="link"&&t.props.rel?e=s.link[t.props.rel]:t.tag==="script"?Ws(t.props.async)?e=s.script.async:t.props.src&&!Ws(t.props.defer)&&!Ws(t.props.async)&&t.props.type!=="module"&&!((n=t.props.type)!=null&&n.endsWith("json"))?e=s.script.sync:Ws(t.props.defer)&&t.props.src&&!Ws(t.props.async)&&(e=s.script.defer):t.tag==="style"&&(e=t.innerHTML&&$0.test(t.innerHTML)?s.style.imported:s.style.sync);return(e||100)+i}const Tl="%separator";function H0(r,t,e=!1){var s;let i;if(t==="s"||t==="pageTitle")i=r.pageTitle;else if(t.includes(".")){const n=t.indexOf(".");i=(s=r[t.substring(0,n)])==null?void 0:s[t.substring(n+1)]}else i=r[t];if(i!==void 0)return e?(i||"").replace(/\\/g,"\\\\").replace(/</g,"\\u003C").replace(/"/g,'\\"'):i||""}function Qs(r,t,e,i=!1){if(typeof r!="string"||!r.includes("%"))return r;let s=r;try{s=decodeURI(r)}catch{}const n=s.match(/%\w+(?:\.\w+)?/g);if(!n)return r;const o=r.includes(Tl);return r=r.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===Tl||!n.includes(a))return a;const l=H0(t,a.slice(1),i);return l!==void 0?l:a}).trim(),o&&(r=r.split(Tl).map(a=>a.trim()).filter(a=>a!=="").join(e?` ${e} `:" ")),r}const z0={meta:"content",link:"href",htmlAttrs:"lang"},j0=["innerHTML","textContent"],V0=r=>({key:"template-params",hooks:{"entries:normalize":t=>{var i,s,n;const e=((s=(i=t.tags.filter(o=>o.tag==="templateParams"&&o.mode==="server"))==null?void 0:i[0])==null?void 0:s.props)||{};Object.keys(e).length&&(r._ssrPayload={templateParams:{...((n=r._ssrPayload)==null?void 0:n.templateParams)||{},...e}})},"tags:resolve":({tagMap:t,tags:e})=>{var n;const i=((n=t.get("templateParams"))==null?void 0:n.props)||{},s=i.separator||"|";delete i.separator,i.pageTitle=Qs(i.pageTitle||r._title||"",i,s);for(const o of e){if(o.processTemplateParams===!1)continue;const a=z0[o.tag];if(a&&typeof o.props[a]=="string")o.props[a]=Qs(o.props[a],i,s);else if(o.processTemplateParams||o.tag==="titleTemplate"||o.tag==="title")for(const l of j0)typeof o[l]=="string"&&(o[l]=Qs(o[l],i,s,o.tag==="script"&&o.props.type.endsWith("json")))}r._templateParams=i,r._separator=s},"tags:afterResolve":({tagMap:t})=>{const e=t.get("title");e!=null&&e.textContent&&e.processTemplateParams!==!1&&(e.textContent=Qs(e.textContent,r._templateParams,r._separator))}}});function W0(r={}){return t=>(t.push({meta:[{name:"twitter:card",content:r.twitterCard||"summary_large_image",tagPriority:"low"},{property:"og:title",tagPriority:"low","data-infer":""},{property:"og:description",tagPriority:"low","data-infer":""}]}),{key:"infer-seo-meta",hooks:{"tags:beforeResolve":({tagMap:e})=>{var a,l;let i=t._titleTemplate||t._title;const s=e.get("meta:og:title");typeof(s==null?void 0:s.props["data-infer"])<"u"&&(typeof i=="function"&&(i=i(t._title)),s.props.content=r.ogTitle?r.ogTitle(i):i||"",s.processTemplateParams=!0);const n=(l=(a=e.get("meta:description"))==null?void 0:a.props)==null?void 0:l.content,o=e.get("meta:og:description");typeof(o==null?void 0:o.props["data-infer"])<"u"&&(o.props.content=r.ogDescription?r.ogDescription(n):n||"",o.processTemplateParams=!0)}}})}const X0=["name","property","http-equiv"],Y0=new Set(["viewport","description","keywords","robots"]);function xm(r){const t=r.split(":");return t.length?Kh.has(t[1]):!1}function Mc(r){const{props:t,tag:e}=r;if(k0.has(e))return e;if(e==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(r.tag==="meta"){for(const i of X0)if(t[i]!==void 0){const s=t[i],n=s.includes(":"),o=Y0.has(s),l=!(n||o)&&r.key?`:key:${r.key}`:"";return`${e}:${s}${l}`}}if(r.key)return`${e}:key:${r.key}`;if(t.id)return`${e}:id:${t.id}`;if(R0.has(e)){const i=r.textContent||r.innerHTML;if(i)return`${e}:content:${i}`}}function Md(r){const t=r._h||r._d;if(t)return t;const e=r.textContent||r.innerHTML;return e||`${r.tag}:${Object.entries(r.props).map(([i,s])=>`${i}:${String(s)}`).join(",")}`}function qo(r,t,e){typeof r==="function"&&(!e||e!=="titleTemplate"&&!(e[0]==="o"&&e[1]==="n"))&&(r=r());let s;if(t&&(s=t(e,r)),Array.isArray(s))return s.map(n=>qo(n,t));if((s==null?void 0:s.constructor)===Object){const n={};for(const o of Object.keys(s))n[o]=qo(s[o],t,o);return n}return s}function q0(r,t){const e=r==="style"?new Map:new Set;function i(s){const n=s.trim();if(n)if(r==="style"){const[o,...a]=n.split(":").map(l=>l.trim());o&&a.length&&e.set(o,a.join(":"))}else n.split(" ").filter(Boolean).forEach(o=>e.add(o))}return typeof t=="string"?r==="style"?t.split(";").forEach(i):i(t):Array.isArray(t)?t.forEach(s=>i(s)):t&&typeof t=="object"&&Object.entries(t).forEach(([s,n])=>{n&&n!=="false"&&(r==="style"?e.set(s.trim(),n):i(s))}),e}function wm(r,t){return r.props=r.props||{},t?r.tag==="templateParams"?(r.props=t,r):(Object.entries(t).forEach(([e,i])=>{if(i===null){r.props[e]=null;return}if(e==="class"||e==="style"){r.props[e]=q0(e,i);return}if(D0.has(e)){if(["textContent","innerHTML"].includes(e)&&typeof i=="object"){let o=t.type;if(t.type||(o="application/json"),!(o!=null&&o.endsWith("json"))&&o!=="speculationrules")return;t.type=o,r.props.type=o,r[e]=JSON.stringify(i)}else r[e]=i;return}const s=String(i),n=e.startsWith("data-");s==="true"||s===""?r.props[e]=n?s:!0:!i&&n&&s==="false"?r.props[e]="false":i!==void 0&&(r.props[e]=i)}),r):r}function K0(r,t){const e=typeof t=="object"&&typeof t!="function"?t:{[r==="script"||r==="noscript"||r==="style"?"innerHTML":"textContent"]:t},i=wm({tag:r,props:{}},e);return i.key&&I0.has(i.tag)&&(i.props["data-hid"]=i._h=i.key),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(s=>({...i,props:{...i.props,content:s}})):i}function Z0(r,t){if(!r)return[];typeof r=="function"&&(r=r());const e=(s,n)=>{for(let o=0;o<t.length;o++)n=t[o](s,n);return n};r=e(void 0,r);const i=[];return r=qo(r,e),Object.entries(r||{}).forEach(([s,n])=>{if(n!==void 0)for(const o of Array.isArray(n)?n:[n])i.push(K0(s,o))}),i.flat()}const Q0=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,J0=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,tb=/^([/\\]\s*){2,}[^/\\]/,eb=/^\.?\//;function Zh(r,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?Q0.test(r):J0.test(r)||(t.acceptRelative?tb.test(r):!1)}function kc(r="",t){return r.endsWith("/")}function Qh(r="",t){return(kc(r)?r.slice(0,-1):r)||"/"}function Tm(r="",t){return r.endsWith("/")?r:r+"/"}function xr(r,t){if(rb(t)||Zh(r))return r;const e=Qh(t);return r.startsWith(e)?r:Em(e,r)}function rb(r){return!r||r==="/"}function ib(r){return r&&r!=="/"}function Em(r,...t){let e=r||"";for(const i of t.filter(s=>ib(s)))if(e){const s=i.replace(eb,"");e=Tm(e)+s}else e=i;return e}function sb(r){return typeof r=="string"?`'${r}'`:new nb().serialize(r)}const nb=function(){var t;class r{constructor(){Sd(this,t,new Map)}compare(i,s){const n=typeof i,o=typeof s;return n==="string"&&o==="string"?i.localeCompare(s):n==="number"&&o==="number"?i-s:String.prototype.localeCompare.call(this.serialize(i,!0),this.serialize(s,!0))}serialize(i,s){if(i===null)return"null";switch(typeof i){case"string":return s?i:`'${i}'`;case"bigint":return`${i}n`;case"object":return this.$object(i);case"function":return this.$function(i)}return String(i)}serializeObject(i){const s=Object.prototype.toString.call(i);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),i);const n=i.constructor,o=n===Object||n===void 0?"":n.name;if(o!==""&&globalThis[o]===n)return this.serializeBuiltInType(o,i);if(typeof i.toJSON=="function"){const a=i.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(i))}serializeBuiltInType(i,s){const n=this["$"+i];if(n)return n.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(i,s.entries());throw new Error(`Cannot serialize ${i}`)}serializeObjectEntries(i,s){const n=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${i}{`;for(let a=0;a<n.length;a++){const[l,u]=n[a];o+=`${this.serialize(l,!0)}:${this.serialize(u)}`,a<n.length-1&&(o+=",")}return o+"}"}$object(i){let s=Vs(this,t).get(i);return s===void 0&&(Vs(this,t).set(i,`#${Vs(this,t).size}`),s=this.serializeObject(i),Vs(this,t).set(i,s)),s}$function(i){const s=Function.prototype.toString.call(i);return s.slice(-15)==="[native code] }"?`${i.name||""}()[native]`:`${i.name}(${i.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(i){let s="[";for(let n=0;n<i.length;n++)s+=this.serialize(i[n]),n<i.length-1&&(s+=",");return s+"]"}$Date(i){try{return`Date(${i.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(i){return`ArrayBuffer[${new Uint8Array(i).join(",")}]`}$Set(i){return`Set${this.$Array(Array.from(i).sort((s,n)=>this.compare(s,n)))}`}$Map(i){return this.serializeObjectEntries("Map",i.entries())}}t=new WeakMap;for(const e of["Error","RegExp","URL"])r.prototype["$"+e]=function(i){return`${e}(${i})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])r.prototype["$"+e]=function(i){return`${e}[${i.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])r.prototype["$"+e]=function(i){return`${e}[${i.join("n,")}${i.length>0?"n":""}]`};return r}(),ob=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ab=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],lb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Ti=[];let cb=class{constructor(){it(this,"_data",new io);it(this,"_hash",new io([...ob]));it(this,"_nDataBytes",0);it(this,"_minBufferSize",0)}finalize(t){t&&this._append(t);const e=this._nDataBytes*8,i=this._data.sigBytes*8;return this._data.words[i>>>5]|=128<<24-i%32,this._data.words[(i+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(i+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,e){const i=this._hash.words;let s=i[0],n=i[1],o=i[2],a=i[3],l=i[4],u=i[5],d=i[6],f=i[7];for(let m=0;m<64;m++){if(m<16)Ti[m]=t[e+m]|0;else{const E=Ti[m-15],R=(E<<25|E>>>7)^(E<<14|E>>>18)^E>>>3,k=Ti[m-2],N=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;Ti[m]=R+Ti[m-7]+N+Ti[m-16]}const v=l&u^~l&d,y=s&n^s&o^n&o,b=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),S=f+w+v+ab[m]+Ti[m],C=b+y;f=d,d=u,u=l,l=a+S|0,a=o,o=n,n=s,s=S+C|0}i[0]=i[0]+s|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0,i[5]=i[5]+u|0,i[6]=i[6]+d|0,i[7]=i[7]+f|0}_append(t){typeof t=="string"&&(t=io.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let e,i=this._data.sigBytes/64;t?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const s=i*16,n=Math.min(s*4,this._data.sigBytes);if(s){for(let o=0;o<s;o+=16)this._doProcessBlock(this._data.words,o);e=this._data.words.splice(0,s),this._data.sigBytes-=n}return new io(e,n)}},io=class Sm{constructor(t,e){it(this,"words");it(this,"sigBytes");t=this.words=t||[],this.sigBytes=e===void 0?t.length*4:e}static fromUtf8(t){const e=unescape(encodeURIComponent(t)),i=e.length,s=[];for(let n=0;n<i;n++)s[n>>>2]|=(e.charCodeAt(n)&255)<<24-n%4*8;return new Sm(s,i)}toBase64(){const t=[];for(let e=0;e<this.sigBytes;e+=3){const i=this.words[e>>>2]>>>24-e%4*8&255,s=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,n=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,o=i<<16|s<<8|n;for(let a=0;a<4&&e*8+a*6<this.sigBytes*8;a++)t.push(lb.charAt(o>>>6*(3-a)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const i=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=i<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];this.sigBytes+=t.sigBytes}};function hb(r){return new cb().finalize(r).toBase64()}function Jh(r){return hb(sb(r))}function Ut(r){return{"@id":typeof r!="string"?r["@id"]:r}}function tu(r){try{const t=r instanceof Date?r:new Date(Date.parse(r));return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`}catch{}return typeof r=="string"?r:r.toString()}const ub=[/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,/^\d{4}-[01]\d-[0-3]\d$/,/^\d{4}-[01]\d$/,/^\d{4}$/];function db(r){return ub.some(t=>t.test(r))}function zr(r){if(!r)return r;try{return r instanceof Date?r.toISOString():db(r)?r:new Date(Date.parse(r)).toISOString()}catch{}return typeof r=="string"?r:r.toString()}const Pe="#identity";function xt(r,t,e){!(r!=null&&r[t])&&e&&(r[t]=e)}function nr(r){return Array.isArray(r)?r:[r]}function pb(r,t,e){const i=new Set(nr(r[t]));i.add(e),r[t]=[...i].filter(Boolean)}function an(r,t){return Zh(t)?t:(t.includes("#")||(t=`#${t}`),`${r||""}${t}`)}function fb(r,t){if(!r)return r;if(r.length>t){const e=r.substring(0,t);return e.substring(0,Math.min(e.length,e.lastIndexOf(" ")))}return r}function Is(r,t){const e=r["@type"];if(e===t)return;const i=new Set([...nr(t),...nr(e)]);r["@type"]=i.size===1?e:[...i.values()]}function jr(r,t){return!t||Zh(t)||t[0]!=="/"&&t[0]!=="#"?t:xr(t,r)}function Rs(r){return r&&r.substring(r.lastIndexOf("#"))}function Am(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){if(r[t]&&typeof r[t]=="object"){if(r[t].__v_isReadonly||r[t].__v_isRef)return;Am(r[t]);return}(r[t]===""||r[t]===null||r[t]===void 0)&&delete r[t]}return r}function Cm(r){let t=9;for(let e=0;e<r.length;)t=Math.imul(t^r.charCodeAt(e++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}const Dc={cast(r){return typeof r=="number"?{value:r}:r},defaults:{"@type":"QuantitativeValue"}},eu={defaults:{"@type":"MonetaryAmount"},resolve(r,t){return typeof r.value!="number"&&(r.value=ht(r.value,t,Dc)),r}},mb={defaults:{"@type":"MerchantReturnPolicy"},resolve(r,t){return r.returnPolicyCategory&&(r.returnPolicyCategory=xr(r.returnPolicyCategory,"https://schema.org/")),r.returnFees&&(r.returnFees=xr(r.returnFees,"https://schema.org/")),r.returnMethod&&(r.returnMethod=xr(r.returnMethod,"https://schema.org/")),r.returnShippingFeesAmount=ht(r.returnShippingFeesAmount,t,eu),r}},gb={defaults:{"@type":"DefinedRegion"}},vb={defaults:{"@type":"ShippingDeliveryTime"},resolve(r,t){return r.handlingTime=ht(r.handlingTime,t,Dc),r.transitTime=ht(r.transitTime,t,Dc),r}},yb={defaults:{"@type":"OfferShippingDetails"},resolve(r,t){return r.deliveryTime=ht(r.deliveryTime,t,vb),r.shippingDestination=ht(r.shippingDestination,t,gb),r.shippingRate=ht(r.shippingRate,t,eu),r}},Dn={cast(r){return typeof r=="number"||typeof r=="string"?{price:r}:r},defaults:{"@type":"Offer",availability:"InStock"},resolve(r,t){return xt(r,"priceCurrency",t.meta.currency),xt(r,"priceValidUntil",new Date(Date.UTC(new Date().getFullYear()+1,12,-1,0,0,0))),r.url&&jr(t.meta.host,r.url),r.availability&&(r.availability=xr(r.availability,"https://schema.org/")),r.itemCondition&&(r.itemCondition=xr(r.itemCondition,"https://schema.org/")),r.priceValidUntil&&(r.priceValidUntil=zr(r.priceValidUntil)),r.hasMerchantReturnPolicy=ht(r.hasMerchantReturnPolicy,t,mb),r.shippingDetails=ht(r.shippingDetails,t,yb),r}},Pm={defaults:{"@type":"AggregateOffer"},inheritMeta:[{meta:"currency",key:"priceCurrency"}],resolve(r,t){return r.offers=ht(r.offers,t,Dn),r.offers&&xt(r,"offerCount",nr(r.offers).length),r}},Ea={defaults:{"@type":"AggregateRating"}},ru={cast(r){return typeof r=="string"&&(r={name:r}),r},defaults:{"@type":"ListItem"},resolve(r,t){return typeof r.item=="string"?r.item=jr(t.meta.host,r.item):typeof r.item=="object"&&(r.item=ht(r.item,t)),r}},Im="#breadcrumb",Rm={defaults:{"@type":"BreadcrumbList"},idPrefix:["url",Im],resolve(r,t){if(r.itemListElement){let e=1;r.itemListElement=ht(r.itemListElement,t,ru,{array:!0,afterResolve(i){xt(i,"position",e++)}})}return r},resolveRootNode(r,{find:t}){const e=t(ar);e&&xt(e,"breadcrumb",Ut(r))}},$i={alias:"image",cast(r){return typeof r=="string"&&(r={url:r}),r},defaults:{"@type":"ImageObject"},inheritMeta:["inLanguage"],idPrefix:"host",resolve(r,{meta:t}){return r.url=jr(t.host,r.url),xt(r,"contentUrl",r.url),r.height&&!r.width&&delete r.height,r.width&&!r.height&&delete r.width,r}},Sa={defaults:{"@type":"PostalAddress"}},Mm={defaults:{"@type":"SearchAction",target:{"@type":"EntryPoint"},"query-input":{"@type":"PropertyValueSpecification",valueRequired:!0,valueName:"search_term_string"}},resolve(r,t){return typeof r.target=="string"&&(r.target={"@type":"EntryPoint",urlTemplate:jr(t.meta.host,r.target)}),r}},xn="#website",_b={defaults:{"@type":"WebSite"},inheritMeta:["inLanguage",{meta:"host",key:"url"}],idPrefix:["host",xn],resolve(r,t){return r.potentialAction=ht(r.potentialAction,t,Mm,{array:!0}),r.publisher=ht(r.publisher,t),r},resolveRootNode(r,{find:t}){if(Rs(r["@id"])===xn){const e=t(Pe);e&&xt(r,"publisher",Ut(e));const i=t(ar);i&&xt(i,"isPartOf",Ut(r))}return r}},Gi={defaults:{"@type":"Organization"},idPrefix:["host",Pe],inheritMeta:[{meta:"host",key:"url"}],resolve(r,t){return Is(r,"Organization"),r.address=ht(r.address,t,Sa),r},resolveRootNode(r,t){const e=Rs(r["@id"])===Pe,i=t.find(ar);if(r.logo&&e){if(!t.find("#organization")){const n=ht(r.logo,t,$i,{root:!0,afterResolve(o){o["@id"]=an(t.meta.host,"#logo"),xt(o,"caption",r.name)}});i&&n&&xt(i,"primaryImageOfPage",Ut(n)),t.nodes.push({"@type":"Organization",name:r.name,url:r.url,sameAs:r.sameAs,address:r.address,logo:ht(r.logo,t,$i,{root:!1}).url,_priority:-1,"@id":an(t.meta.host,"#organization")})}delete r.logo}e&&i&&xt(i,"about",Ut(r));const s=t.find(xn);s&&xt(s,"publisher",Ut(r))}},km={defaults:{"@type":"ReadAction"},resolve(r,t){return r.target.includes(t.meta.url)||r.target.unshift(t.meta.url),r}},ar="#webpage",bb={defaults({meta:r}){const t=Qh(r.url.substring(r.url.lastIndexOf("/")+1));let e="WebPage";switch(t){case"about":case"about-us":e="AboutPage";break;case"search":e="SearchResultsPage";break;case"checkout":e="CheckoutPage";break;case"contact":case"get-in-touch":case"contact-us":e="ContactPage";break;case"faq":e="FAQPage";break}return{"@type":e}},idPrefix:["url",ar],inheritMeta:[{meta:"title",key:"name"},"description","datePublished","dateModified","url"],resolve(r,t){return r.dateModified=zr(r.dateModified),r.datePublished=zr(r.datePublished),Is(r,"WebPage"),r.about=ht(r.about,t,Gi),r.breadcrumb=ht(r.breadcrumb,t,Rm),r.author=ht(r.author,t,mi),r.primaryImageOfPage=ht(r.primaryImageOfPage,t,$i),r.potentialAction=ht(r.potentialAction,t,km),r["@type"]==="WebPage"&&t.meta.url&&xt(r,"potentialAction",[{"@type":"ReadAction",target:[t.meta.url]}]),r},resolveRootNode(r,{find:t,meta:e}){const i=t(Pe),s=t(xn),n=t("#logo");i&&e.url===e.host&&xt(r,"about",Ut(i)),n&&xt(r,"primaryImageOfPage",Ut(n)),s&&xt(r,"isPartOf",Ut(s));const o=t(Im);return o&&xt(r,"breadcrumb",Ut(o)),r}},mi={cast(r){return typeof r=="string"?{name:r}:r},defaults:{"@type":"Person"},idPrefix:["host",Pe],resolve(r,t){return r.url&&(r.url=jr(t.meta.host,r.url)),r},resolveRootNode(r,{find:t,meta:e}){if(Rs(r["@id"])===Pe){xt(r,"url",e.host);const s=t(ar);s&&xt(s,"about",Ut(r));const n=t(xn);n&&xt(n,"publisher",Ut(r))}const i=t(Aa);i&&xt(i,"author",Ut(r))}},Aa="#article",xb={defaults:{"@type":"Article"},inheritMeta:["inLanguage","description","image","dateModified","datePublished",{meta:"title",key:"headline"}],idPrefix:["url",Aa],resolve(r,t){return r.author=ht(r.author,t,mi,{root:!0}),r.publisher=ht(r.publisher,t),r.dateModified=zr(r.dateModified),r.datePublished=zr(r.datePublished),Is(r,"Article"),r.headline=fb(r.headline,110),r},resolveRootNode(r,{find:t,meta:e}){var n;const i=t(ar),s=t(Pe);if(r.image&&!r.thumbnailUrl){const o=nr(r.image)[0];typeof o=="string"?xt(r,"thumbnailUrl",jr(e.host,o)):o!=null&&o["@id"]&&xt(r,"thumbnailUrl",(n=t(o["@id"]))==null?void 0:n.url)}return s&&(xt(r,"publisher",Ut(s)),xt(r,"author",Ut(s))),i&&(xt(r,"isPartOf",Ut(i)),xt(r,"mainEntityOfPage",Ut(i)),xt(i,"potentialAction",[{"@type":"ReadAction",target:[e.url]}]),xt(i,"dateModified",r.dateModified),xt(i,"datePublished",r.datePublished)),r}},Dm={defaults:{"@type":"Book"},inheritMeta:["inLanguage"],resolve(r,t){return r.bookFormat&&(r.bookFormat=xr(r.bookFormat,"https://schema.org/")),r.datePublished&&(r.datePublished=tu(r.datePublished)),r.author=ht(r.author,t),r},resolveRootNode(r,{find:t}){const e=t(Pe);return e&&xt(r,"provider",Ut(e)),r}},wb="#book",Tb={defaults:{"@type":"Book"},inheritMeta:["description","url",{meta:"title",key:"name"}],idPrefix:["url",wb],resolve(r,t){return r.workExample=ht(r.workExample,t,Dm),r.author=ht(r.author,t),r.url&&xr(r.url,t.meta.host),r},resolveRootNode(r,{find:t}){const e=t(Pe);return e&&xt(r,"author",Ut(e)),r}},Eb={defaults:{"@type":"Comment"},idPrefix:"url",resolve(r,t){return r.author=ht(r.author,t,mi,{root:!0}),r},resolveRootNode(r,{find:t}){const e=t(Aa);e&&xt(r,"about",Ut(e))}},Sb={defaults:{"@type":"Course"},resolve(r,t){return r.provider=ht(r.provider,t,Gi,{root:!0}),r},resolveRootNode(r,{find:t}){const e=t(Pe);return e&&xt(r,"provider",Ut(e)),r}},iu={defaults:{"@type":"Place"},resolve(r,t){return typeof r.address!="string"&&(r.address=ht(r.address,t,Sa)),r}},Om={cast(r){return typeof r=="string"?{url:r}:r},defaults:{"@type":"VirtualLocation"}},Ab="#event",Cb={defaults:{"@type":"Event"},inheritMeta:["inLanguage","description","image",{meta:"title",key:"name"}],idPrefix:["url",Ab],resolve(r,t){var s;if(r.location){const n=r.location==="string"||((s=r.location)==null?void 0:s.url)!=="undefined";r.location=ht(r.location,t,n?Om:iu)}r.performer=ht(r.performer,t,mi,{root:!0}),r.organizer=ht(r.organizer,t,Gi,{root:!0}),r.offers=ht(r.offers,t,Dn),r.eventAttendanceMode&&(r.eventAttendanceMode=xr(r.eventAttendanceMode,"https://schema.org/")),r.eventStatus&&(r.eventStatus=xr(r.eventStatus,"https://schema.org/"));const e=r.eventStatus==="https://schema.org/EventMovedOnline";return["startDate","previousStartDate","endDate"].forEach(n=>{e?r[n]=zr(r[n]):r[n]instanceof Date&&r[n].getHours()===0&&r[n].getMinutes()===0&&(r[n]=tu(r[n]))}),xt(r,"endDate",r.startDate),r},resolveRootNode(r,{find:t}){const e=t(Pe);e&&xt(r,"organizer",Ut(e))}},Lm={defaults:{"@type":"OpeningHoursSpecification",opens:"00:00",closes:"23:59"}},Oc={defaults:{"@type":["Organization","LocalBusiness"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",Pe],resolve(r,t){return Is(r,["Organization","LocalBusiness"]),r.address=ht(r.address,t,Sa),r.openingHoursSpecification=ht(r.openingHoursSpecification,t,Lm),r=Pa({...r},t,Gi),r},resolveRootNode(r,t){return Gi.resolveRootNode(r,t),r}},Bm={cast(r){return r==="number"?{ratingValue:r}:r},defaults:{"@type":"Rating",bestRating:5,worstRating:1}},Pb={defaults:{"@type":["Organization","LocalBusiness","FoodEstablishment"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",Pe],resolve(r,t){return Is(r,["Organization","LocalBusiness","FoodEstablishment"]),r.starRating=ht(r.starRating,t,Bm),r=Pa(r,t,Oc),r},resolveRootNode(r,t){return Oc.resolveRootNode(r,t),r}},Ib={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToDirection"}},su={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToStep"},resolve(r,t){return r.url&&(r.url=jr(t.meta.url,r.url)),r.image&&(r.image=ht(r.image,t,$i,{root:!0})),r.itemListElement&&(r.itemListElement=ht(r.itemListElement,t,Ib)),r}},Rb="#howto",Mb={defaults:{"@type":"HowTo"},inheritMeta:["description","image","inLanguage",{meta:"title",key:"name"}],idPrefix:["url",Rb],resolve(r,t){return r.step=ht(r.step,t,su),r},resolveRootNode(r,{find:t}){const e=t(ar);e&&xt(r,"mainEntityOfPage",Ut(e))}},kb={defaults:{"@type":"ItemList"},resolve(r,t){if(r.itemListElement){let e=1;r.itemListElement=ht(r.itemListElement,t,ru,{array:!0,afterResolve(i){xt(i,"position",e++)}})}return r}},Db={defaults:{"@type":"JobPosting"},idPrefix:["url","#job-posting"],resolve(r,t){return r.datePosted=zr(r.datePosted),r.hiringOrganization=ht(r.hiringOrganization,t,Gi),r.jobLocation=ht(r.jobLocation,t,iu),r.baseSalary=ht(r.baseSalary,t,eu),r.validThrough=zr(r.validThrough),r},resolveRootNode(r,{find:t}){const e=t(ar),i=t(Pe);return i&&xt(r,"hiringOrganization",Ut(i)),e&&xt(r,"mainEntityOfPage",Ut(e)),r}},Ca={defaults:{"@type":"Review"},inheritMeta:["inLanguage"],resolve(r,t){return r.reviewRating=ht(r.reviewRating,t,Bm),r.author=ht(r.author,t,mi),r}},Fm={cast(r){return typeof r=="string"&&(r={url:r}),r},alias:"video",defaults:{"@type":"VideoObject"},inheritMeta:[{meta:"title",key:"name"},"description","image","inLanguage",{meta:"datePublished",key:"uploadDate"}],idPrefix:"host",resolve(r,t){if(r.uploadDate&&(r.uploadDate=zr(r.uploadDate)),r.url=jr(t.meta.host,r.url),r.caption&&!r.description&&(r.description=r.caption),r.description||(r.description="No description"),r.thumbnailUrl&&(typeof r.thumbnailUrl=="string"||Array.isArray(r.thumbnailUrl))){const e=nr(r.thumbnailUrl).map(i=>jr(t.meta.host,i));r.thumbnailUrl=e.length>1?e:e[0]}return r.thumbnail&&(r.thumbnail=ht(r.thumbnailUrl,t,$i)),r},resolveRootNode(r,{find:t}){var e;if(r.image&&!r.thumbnail){const i=nr(r.image)[0];xt(r,"thumbnail",(e=t(i["@id"]))==null?void 0:e.url)}}},Ob={defaults:{"@type":"Movie"},resolve(r,t){return r.aggregateRating=ht(r.aggregateRating,t,Ea),r.review=ht(r.review,t,Ca),r.director=ht(r.director,t,mi),r.actor=ht(r.actor,t,mi),r.trailer=ht(r.trailer,t,Fm),r.dateCreated&&(r.dateCreated=tu(r.dateCreated)),r}},Lb="#product",Bb={defaults:{"@type":"Product"},inheritMeta:["description","image",{meta:"title",key:"name"}],idPrefix:["url",Lb],resolve(r,t){return xt(r,"sku",Cm(r.name)),r.aggregateOffer=ht(r.aggregateOffer,t,Pm),r.aggregateRating=ht(r.aggregateRating,t,Ea),r.offers=ht(r.offers,t,Dn),r.review=ht(r.review,t,Ca),r},resolveRootNode(r,{find:t}){const e=t(ar),i=t(Pe);return i&&xt(r,"brand",Ut(i)),e&&xt(r,"mainEntityOfPage",Ut(e)),r}},Fb={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"Answer"}},Nb={defaults:{"@type":"Question"},inheritMeta:["inLanguage"],idPrefix:"url",resolve(r,t){return r.question&&(r.name=r.question,delete r.question),r.answer&&(r.acceptedAnswer=r.answer,delete r.answer),r.acceptedAnswer=ht(r.acceptedAnswer,t,Fb),r},resolveRootNode(r,{find:t}){const e=t(ar);e&&nr(e["@type"]).includes("FAQPage")&&pb(e,"mainEntity",Ut(r))}},Ub="#recipe",$b={defaults:{"@type":"Recipe"},inheritMeta:[{meta:"title",key:"name"},"description","image","datePublished"],idPrefix:["url",Ub],resolve(r,t){return r.recipeInstructions=ht(r.recipeInstructions,t,su),r},resolveRootNode(r,{find:t}){const e=t(Aa),i=t(ar);return e?xt(r,"mainEntityOfPage",Ut(e)):i&&xt(r,"mainEntityOfPage",Ut(i)),e!=null&&e.author&&xt(r,"author",e.author),r}},Gb={defaults:{"@type":"SoftwareApplication"},resolve(r,t){return Is(r,"SoftwareApplication"),r.offers=ht(r.offers,t,Dn),r.aggregateRating=ht(r.aggregateRating,t,Ea),r.review=ht(r.review,t,Ca),r}};function Nm(r){switch(r){case"address":return Sa;case"aggregateOffer":return Pm;case"aggregateRating":return Ea;case"article":return xb;case"breadcrumb":return Rm;case"comment":return Eb;case"event":return Cb;case"foodEstablishment":return Pb;case"virtualLocation":return Om;case"place":return iu;case"howTo":return Mb;case"howToStep":return su;case"image":return $i;case"localBusiness":return Oc;case"offer":return Dn;case"openingHours":return Lm;case"organization":return Gi;case"person":return mi;case"product":return Bb;case"question":return Nb;case"recipe":return $b;case"review":return Ca;case"video":return Fm;case"webPage":return bb;case"webSite":return _b;case"book":return Tb;case"course":return Sb;case"itemList":return kb;case"jobPosting":return Db;case"listItem":return ru;case"movie":return Ob;case"searchAction":return Mm;case"readAction":return km;case"softwareApp":return Gb;case"bookEdition":return Dm}return null}function Um(r){return!r.host&&r.canonicalHost&&(r.host=r.canonicalHost),!r.tagPosition&&r.position&&(r.tagPosition=r.position),!r.currency&&r.defaultCurrency&&(r.currency=r.defaultCurrency),!r.inLanguage&&r.defaultLanguage&&(r.inLanguage=r.defaultLanguage),r.path||(r.path="/"),!r.host&&typeof document<"u"&&(r.host=document.location.host),!r.url&&r.canonicalUrl&&(r.url=r.canonicalUrl),r.path!=="/"&&(r.trailingSlash&&!kc(r.path)?r.path=Tm(r.path):!r.trailingSlash&&kc(r.path)&&(r.path=Qh(r.path))),r.url=Em(r.host||"",r.path),{...r,host:r.host,url:r.url,currency:r.currency,image:r.image,inLanguage:r.inLanguage,title:r.title,description:r.description,datePublished:r.datePublished,dateModified:r.dateModified}}function Pa(r,t,e){var i;if(e!=null&&e.cast&&(r=e.cast(r,t)),e!=null&&e.defaults){let s=e.defaults||{};typeof s=="function"&&(s=s(t)),r={...s,...r}}(i=e==null?void 0:e.inheritMeta)==null||i.forEach(s=>{typeof s=="string"?xt(r,s,t.meta[s]):xt(r,s.key,t.meta[s.meta])}),e!=null&&e.resolve&&(r=e.resolve(r,t));for(const s in r){const n=r[s];Array.isArray(n)&&n.forEach((o,a)=>{typeof o=="object"&&(o!=null&&o._resolver)&&(r[s][a]=ht(o,t,o._resolver))}),typeof n=="object"&&(n!=null&&n._resolver)&&(r[s]=ht(n,t,n._resolver))}return Am(r),r}function Lc(r,t,e,i=!1){var l,u,d,f;if(r["@id"]&&r["@id"].startsWith("http"))return r;const s=e&&(Array.isArray(e.idPrefix)?e.idPrefix[0]:e.idPrefix)||"url",n=r["@id"]||(e?Array.isArray(e.idPrefix)?(l=e.idPrefix)==null?void 0:l[1]:void 0:"");if(!r["@id"]&&i&&n)return r["@id"]=an(t.meta[s],n),r;if((u=r["@id"])!=null&&u.startsWith("#/schema/")||(d=r["@id"])!=null&&d.startsWith("/"))return r["@id"]=an(t.meta[s],r["@id"]),r;let o=e==null?void 0:e.alias;o||(o=(((f=nr(r["@type"]))==null?void 0:f[0])||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase());const a={};for(const m in r)m[0]!=="_"&&Object.prototype.hasOwnProperty.call(r,m)&&(a[m]=r[m]);return r["@id"]=an(t.meta[s],`#/schema/${o}/${r["@id"]||Cm(JSON.stringify(a))}`),r}function ht(r,t,e,i={}){if(!r)return r;const s=nr(r).map(n=>{var u;const o=Object.keys(n).length;if(o===1&&n["@id"]||o===2&&n["@id"]&&n["@type"])return Lc({"@id":((u=t.find(n["@id"]))==null?void 0:u["@id"])||n["@id"]},t);let a=e;if(n._resolver&&(a=n._resolver,typeof a=="string"&&(a=Nm(a)),delete n._resolver),!a)return n;let l=Pa(n,t,a);return i.afterResolve&&i.afterResolve(l),(i.generateId||i.root)&&(l=Lc(l,t,a,!1)),i.root?(a.resolveRootNode&&a.resolveRootNode(l,t),t.push(l),Ut(l["@id"])):l});return!i.array&&s.length===1?s[0]:s}function $m(r,t){return r.reduce((e,i,s,n)=>{const o=t(i,s,n);return e[o]||(e[o]=[]),e[o].push(i),e},{})}function Hb(r,t){return Object.values($m(r,t)).map(e=>e[e.length-1])}const nu=qh((r,t,e)=>{if(Array.isArray(r[t])){if(Array.isArray(e)){const i={};for(const s of[...r[t],...e])i[Jh(s)]=s;return r[t]=Object.values(i),t==="itemListElement"&&(r[t]=[...Hb(r[t],s=>s.position)]),!0}return r[t]=nu(r[t],Array.isArray(e)?e:[e]),!0}});function zb(r){const t={};for(const e of r.keys()){const i=r[e],s=Rs(i["@id"]||Jh(i));t[s]&&i._dedupeStrategy!=="replace"?t[s]=nu(r[e],t[s]):t[s]=r[e]}return Object.values(t)}function jb(r){const t=r.keys(),e={};for(const i of t){const s=r[i],n=Rs(s["@id"]||Jh(s)),o=$m(Object.keys(s),u=>{const d=s[u];return u[0]==="_"?"ignored":Array.isArray(d)||typeof d=="object"?"relations":"primitives"}),a=[...(o.primitives||[]).sort(),...(o.relations||[]).sort()];let l={};for(const u of a)l[u]=s[u];e[n]&&(l=nu(l,e[n])),e[n]=l}return Object.values(e)}const Vb=["translationOfWork","workTranslation"];function Wb(){const r={find(t){let e=s=>s;t[0]==="#"?e=Rs:t[0]==="/"&&(e=s=>s.replace(/(https?:)?\/\//,"").split("/")[0]);const i=e(t);return r.nodes.filter(s=>!!s["@id"]).find(s=>e(s["@id"])===i)},push(t){nr(t).forEach(e=>{const i=e;r.nodes.push(i)})},resolveGraph(t){return r.meta=Um({...t}),r.nodes.forEach((e,i)=>{const s=e._resolver;e=Pa(e,r,s),e=Lc(e,r,s,!0),r.nodes[i]=e}),r.nodes=zb(r.nodes),r.nodes.forEach(e=>{var i;e.image&&typeof e.image=="string"&&(e.image=ht(e.image,r,$i,{root:!0})),Vb.forEach(s=>{e[s]=ht(e[s],r)}),(i=e._resolver)!=null&&i.resolveRootNode&&e._resolver.resolveRootNode(e,r),delete e._resolver}),jb(r.nodes)},nodes:[],meta:{}};return r}function Xb(r){return Yb({},()=>({}))}function Yb(r,t,e){r=Um({...r});let i,s={};return n=>(n.use(V0),{key:"schema-org",hooks:{"entries:normalize":async({tags:o})=>{i=i||Wb();for(const a of o){if(a.tag==="script"&&a.props.type==="application/ld+json"&&a.props.nodes){const l=await a.props.nodes;for(const u of Array.isArray(l)?l:[l]){if(typeof u!="object"||Object.keys(u).length===0)continue;const d={...u,_dedupeStrategy:a.tagDuplicateStrategy,_resolver:Nm(await u._resolver)};i.push(d)}a.tagPosition=a.tagPosition||r.tagPosition==="head"?"head":"bodyClose"}if(a.tag==="htmlAttrs"&&a.props.lang)s.inLanguage=a.props.lang;else if(a.tag==="title")s.title=a.textContent;else if(a.tag==="meta"&&a.props.name==="description")s.description=a.props.content;else if(a.tag==="link"&&a.props.rel==="canonical"){if(s.url=a.props.href,s.url&&!s.host)try{s.host=new URL(s.url).origin}catch{}}else a.tag==="meta"&&a.props.property==="og:image"?s.image=a.props.content:a.tag==="templateParams"&&a.props.schemaOrg&&(s={...s,...a.props.schemaOrg},delete a.props.schemaOrg)}},"tags:resolve":async o=>{for(const a in o.tags){const l=o.tags[a];if(l.tag==="script"&&l.props.type==="application/ld+json"&&l.props.nodes){delete l.props.nodes;const u=i.resolveGraph({...await(t==null?void 0:t())||{},...r,...s});if(!u.length){l.props={};return}l.innerHTML=JSON.stringify({"@context":"https://schema.org","@graph":u},(d,f)=>typeof f!="object"?Qs(f,n._templateParams,n._separator):f,0);return}}},"tags:afterResolve":o=>{let a;for(const l in o.tags){const u=o.tags[l];if(u.props.type==="application/ld+json"&&u.props.nodes||u.key==="schema-org-graph"){if(delete u.props.nodes,typeof a>"u"){a=l;continue}o.tags[a].props=P0(o.tags[a].props,u.props),delete o.tags[a].props.nodes,o.tags[l]=!1}}o.tags=o.tags.filter(Boolean)}}})}function kd(r){return r.script?r:{script:[{type:"application/ld+json",key:"schema-org-graph",nodes:r}]}}function Dd(r,t){const e=typeof t=="function"?t(r):t,i=e.key||String(r.plugins.size+1);r.plugins.get(i)||(r.plugins.set(i,e),r.hooks.addHooks(e.hooks||{}))}function qb(r={}){var a;const t=T0();t.addHooks(r.hooks||{});const e=!r.document,i=new Map,s=new Map,n=new Set,o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:r,hooks:t,ssr:e,entries:i,headEntries(){return[...i.values()]},use:l=>Dd(o,l),push(l,u){const d={...u||{}};delete d.head;const f=d._index??o._entryCount++,m={_i:f,input:l,options:d},v={_poll(y=!1){o.dirty=!0,!y&&n.add(f),t.callHook("entries:updated",o)},dispose(){i.delete(f)&&o.invalidate()},patch(y){(!d.mode||d.mode==="server"&&e||d.mode==="client"&&!e)&&(m.input=y,i.set(f,m),v._poll())}};return v.patch(l),v},async resolveTags(){var v;const l={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await t.callHook("entries:resolve",l);n.size;){const y=n.values().next().value;n.delete(y);const b=i.get(y);if(b){const w={tags:Z0(b.input,r.propResolvers||[]).map(S=>Object.assign(S,b.options)),entry:b};await t.callHook("entries:normalize",w),b._tags=w.tags.map((S,C)=>(S._w=G0(o,S),S._p=(b._i<<10)+C,S._d=Mc(S),S))}}let u=!1;l.entries.flatMap(y=>(y._tags||[]).map(b=>({...b,props:{...b.props}}))).sort(Pd).reduce((y,b)=>{const w=String(b._d||b._p);if(!y.has(w))return y.set(w,b);const S=y.get(w);if(((b==null?void 0:b.tagDuplicateStrategy)||(O0.has(b.tag)?"merge":null)||(b.key&&b.key===S.key?"merge":null))==="merge"){const E={...S.props};Object.entries(b.props).forEach(([R,k])=>E[R]=R==="style"?new Map([...S.props.style||new Map,...k]):R==="class"?new Set([...S.props.class||new Set,...k]):k),y.set(w,{...b,props:E})}else b._p>>10===S._p>>10&&b.tag==="meta"&&xm(w)?(y.set(w,Object.assign([...Array.isArray(S)?S:[S],b],b)),u=!0):(b._w===S._w?b._p>S._p:(b==null?void 0:b._w)<(S==null?void 0:S._w))&&y.set(w,b);return y},l.tagMap);const d=l.tagMap.get("title"),f=l.tagMap.get("titleTemplate");if(o._title=d==null?void 0:d.textContent,f){const y=f==null?void 0:f.textContent;if(o._titleTemplate=y,y){let b=typeof y=="function"?y(d==null?void 0:d.textContent):y;typeof b=="string"&&!o.plugins.has("template-params")&&(b=b.replace("%s",(d==null?void 0:d.textContent)||"")),d?b===null?l.tagMap.delete("title"):l.tagMap.set("title",{...d,textContent:b}):(f.tag="title",f.textContent=b)}}l.tags=Array.from(l.tagMap.values()),u&&(l.tags=l.tags.flat().sort(Pd)),await t.callHook("tags:beforeResolve",l),await t.callHook("tags:resolve",l),await t.callHook("tags:afterResolve",l);const m=[];for(const y of l.tags){const{innerHTML:b,tag:w,props:S}=y;if(M0.has(w)&&!(Object.keys(S).length===0&&!y.innerHTML&&!y.textContent)&&!(w==="meta"&&!S.content&&!S["http-equiv"]&&!S.charset)){if(w==="script"&&b){if((v=S.type)!=null&&v.endsWith("json")){const C=typeof b=="string"?b:JSON.stringify(b);y.innerHTML=C.replace(/</g,"\\u003C")}else typeof b=="string"&&(y.innerHTML=b.replace(new RegExp(`</${w}`,"g"),`<\\/${w}`));y._d=Mc(y)}m.push(y)}}return m},invalidate(){for(const l of i.values())n.add(l._i);o.dirty=!0,t.callHook("entries:updated",o)}};return((r==null?void 0:r.plugins)||[]).forEach(l=>Dd(o,l)),o.hooks.callHook("init",o),(a=r.init)==null||a.forEach(l=>l&&o.push(l)),o}const Kb=(r,t)=>$h(t)?Ot(t):t,Gm="usehead";function Zb(r){return{install(e){e.config.globalProperties.$unhead=r,e.config.globalProperties.$head=r,e.provide(Gm,r)}}.install}function ou(){if(Gh()){const r=Hh(Gm);if(!r)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return r}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function On(r,t={}){const e=t.head||ou();return e.ssr?e.push(r||{},t):Qb(e,r,t)}function Qb(r,t,e={}){const i=_t(!1);let s;return zh(()=>{const o=i.value?{}:qo(t,Kb);s?s.patch(o):s=r.push(o,e)}),wa()&&(e0(()=>{s.dispose()}),r0(()=>{i.value=!0}),i0(()=>{i.value=!1})),s}function Jb(r={},t={}){(t.head||ou()).use(N0);const{title:i,titleTemplate:s,...n}=r;return On({title:i,titleTemplate:s,_flatMeta:n},t)}function Ia(r,t){return r||(r={}),r._resolver=t,r}function lD(r){return Ia(r,"article")}function tx(r){return Ia(r,"person")}function ex(r){return Ia(r,"webPage")}function rx(r){return Ia(r,"webSite")}function ix(r=[],t={}){(t.head||ou()).use(Xb());const i=On(kd(r),t),s=i.patch;return i.patch=n=>s(kd(n)),i}fi.extend(_0);fi.extend(b0);fi.extend(x0);function cD(r,t={}){return typeof r=="string"&&(r=new Date(r)),fi.tz(fi.utc(r),t.timezone).format(t.template||"YYYY-MM-DD")}function Od(r,t=!0){return r.sort((e,i)=>{const s=+new Date(e.date||""),n=+new Date(i.date||"");return t?n-s:s-n})}function sx(){const r=Ve();s0(()=>{r.value.timezone&&fi.tz.setDefault(r.value.timezone)})}const Hm='{"siteConfig":{"mode":"auto","url":"/","lang":"zh-CN","languages":["en","zh-CN"],"timezone":"","title":"È¢®„ÅÆÂüé","description":"ÂÖ≠Êúù‰Ωï‰∫ã,Âè™ÊàêÈó®Êà∑ÁßÅËÆ°","subtitle":"ÊáíÁãóÈöèÁºòÊõ¥Êñ∞ing...","author":{"avatar":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/%E7%97%85%E5%A8%87%E9%B8%BD%E5%AD%90%281%29%281%29.png","email":"i@valaxy.site","link":"https://valaxy.site","name":"È¢®‰∏∂Breeze","status":{"emoji":"üêÄ","message":"The moonlight is beautiful."}},"favicon":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/%E5%8D%AB%E6%98%9F.svg","feed":{"name":"","favicon":"/favicon.svg"},"social":[{"name":"GitHub","link":"https://github.com/wzdxslzgzbdm","icon":"i-ri-github-line","color":"#6e5494"},{"name":"ÁΩëÊòì‰∫ëÈü≥‰πê","link":"https://music.163.com/#/user/home?id=1623545907","icon":"i-ri-netease-cloud-music-line","color":"#C20C0C"},{"name":"ÂìîÂì©ÂìîÂì©","link":"https://space.bilibili.com/285247009?spm_id_from=444.41.0.0","icon":"i-ri-bilibili-line","color":"#FF8EB3"},{"name":"E-Mail","link":"mailto:fx17628692325@163.com","icon":"i-ri-mail-line","color":"#8E71C1"},{"name":"Travelling","link":"https://www.travellings.cn/go.html","icon":"i-ri-train-line","color":"var(--va-c-text)"}],"lastUpdated":true,"license":{"enabled":true,"language":"","type":"by-nc-sa"},"sponsor":{"enable":true,"description":"Ëµû....ËµûÂä©‰ªÄ‰πàÁöÑ ËØ∑Â§öÊù•‰∏ÄÁÇπ","methods":[{"name":"ÊîØ‰ªòÂÆù","url":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/zfb.jpg","color":"#00A3EE","icon":"i-ri-alipay-line"},{"name":"QQ ÊîØ‰ªò","url":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/qq.jpg","color":"#12B7F5","icon":"i-ri-qq-line"},{"name":"ÂæÆ‰ø°ÊîØ‰ªò","url":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/wx.png","color":"#2DC100","icon":"i-ri-wechat-pay-line"}],"title":"ÁîüÊ¥ª‰∏çÊòìÔºåÊáíÁãóÂçñËâ∫ÔºåÂ§ßÂì•Â§ßÂ´ÇË°åË°åÂ•Ω"},"search":{"enable":false,"type":"fuse"},"fuse":{"dataPath":"valaxy-fuse-list.json","options":{"keys":[]}},"comment":{"enable":false},"frontmatter":{"time_warning":15552000000},"cdn":{"prefix":"https://unpkg.com/"},"mediumZoom":{"enable":false,"selector":"","options":{}},"vanillaLazyload":{"enable":false,"options":{}},"floatingVue":{"disabled":false,"distance":5,"skidding":0,"container":"body","instantMove":false,"disposeTimeout":150,"popperTriggers":[],"strategy":"absolute","preventOverflow":true,"flip":true,"shift":true,"overflowPadding":0,"arrowPadding":0,"arrowOverflow":true,"autoHideOnMousedown":false,"themes":{"tooltip":{"placement":"top","triggers":["hover","focus","touch"],"delay":{"show":200,"hide":0},"handleResize":false,"html":false,"loadingContent":"..."},"dropdown":{"placement":"bottom","triggers":["click"],"delay":0,"handleResize":true,"autoHide":true},"menu":{"$extend":"dropdown","triggers":["hover","focus"],"popperTriggers":["hover"],"delay":{"show":0,"hide":400}}}},"statistics":{"enable":false,"readTime":{"speed":{"cn":300,"en":100}}},"pageSize":7,"encrypt":{"enable":false,"algorithm":"AES-CBC","salt":{"0":73,"1":142,"2":91,"3":199,"4":27,"5":49,"6":79,"7":27,"8":214,"9":21,"10":55,"11":65,"12":155,"13":92,"14":86,"15":109},"iv":{"0":8,"1":251,"2":255,"3":89,"4":11,"5":108,"6":109,"7":91,"8":163,"9":3,"10":173,"11":249,"12":167,"13":66,"14":154,"15":170}},"redirects":{"useVueRouter":true,"rules":[]}},"theme":"sakura","themeConfig":{"pkg":{"name":"valaxy-theme-sakura","version":"0.9.4","author":{"email":"3322543587@qq.com","name":"WRXinYue","url":"https://wrxinyue.org"},"homepage":"https://github.com/WRXinYue/valaxy-theme-sakura","repository":{"type":"git","url":"https://github.com/WRXinYue/valaxy-theme-sakura.git"},"publishConfig":{"@wrxinyue:registry":"https://npm.pkg.github.com"},"keywords":["valaxy","theme","sakura","vue"],"main":"client/index.ts","types":"types/index.d.ts","peerDependencies":{"valaxy-addon-hitokoto":"^0.0.1","valaxy-addon-vercount":"^0.0.6"},"dependencies":{"@ctrl/tinycolor":"^4.1.0","@iconify-json/fa6-solid":"^1.2.3","@iconify-json/mdi":"^1.2.3","interactjs":"^1.10.27","lenis":"^1.2.3","typeit":"^8.8.7"},"devDependencies":{"@interactjs/types":"^1.10.27","valaxy":"^0.23.3"},"scripts":{"release":"bumpp && npm publish"}},"valaxyDarkOptions":{"circleTransition":true},"ui":{"primary":"#fe9500","notice":{"icon":"i-fa6-solid:bullhorn"},"pageHeader":{"image":{"scale":1}},"postList":{"icon":"i-fa-envira","image":{"rotate":5,"scale":1.1,"transitionDuration":"0.45s"},"responsive":{}},"pinnedPost":{"icon":"i-fa-anchor","image":{"scale":1.1}},"links":{"image":{"scale":1,"rotate":360}},"scrollDown":{"icon":"i-fa-chevron-down"},"toggleLocaleButton":{"icon":"i-ri-translate"},"toggleDarkButton":{"darkIcon":"i-line-md-sunny-outline-to-moon-loop-transition","lightIcon":"i-line-md-moon-alt-to-sunny-outline-loop-transition"}},"navbarTitle":"","favicon":false,"hero":{"title":"Breeze„ÅÆÁ¨îËÆ∞Á´ô","motto":"You got to put the past behind you before you can move on.","urls":["https://img.mnorg.com/imgs/2025/06/16/684f7788b1f0d.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b8be752.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b709909.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b8ad1f8.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b7d2a68.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b7d19c6.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b7e00ff.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b5ee4fe.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b6000c6.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b6d4a44.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b6e0919.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b5d0981.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76504102c.jpg","https://img.mnorg.com/imgs/2025/06/16/684f765061d42.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76506e081.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764f3ea22.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764f42daf.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764f9f5e0.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764e5b019.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764e54b36.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764e6994f.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764d57dc5.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764d73cf7.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764da4a0c.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764c5d2ef.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764c59f67.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764c5dd5a.jpg","https://img.mnorg.com/imgs/2025/06/13/684bea22b6e23.png","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper/yae-miko-sunset-sakura-genshin-impact-moewalls-com.mp4"],"randomUrls":true,"fixedImg":true,"style":"","typewriter":true,"enableHitokoto":true,"disablePictureInPicture":false,"socialStyle":"merge","playerUrl":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/%E6%98%8E%E6%97%A5%E9%A6%99.mp4","waveTheme":"horizontal"},"navbar":[{"icon":"i-fa-fort-awesome","locale":"menu.home","link":"/"},{"text":"ÂøÉÁà±‰πã‰∫∫","link":"/girls","icon":"i-ri-women-line"},{"text":"ÂèãÊÉÖÈìæÊé•","icon":"i-ri-genderless-line","link":"/links"},{"text":"ÂÖ≥‰∫é","icon":"i-fa-leaf","link":"/about"}],"navbarOptions":{"title":["Breeze","È¢®"],"animIn":"sakura-fade-in-left","animOut":"sakura-fade-out-left","showMarker":false,"offset":0,"enableHover":true,"tools":["toggleDark","search"],"hamburgerStyle":"uneven","subTitle":"È£éËøáÊó†ÁóïÔºåÂΩ±Â≠òÁâáÂàªÔºõÊ≠§Âàπ‰πãÂÖâÔºå‰∫¶ÊòØÂêæÊâÄÂîØ‰∏Ä‰πãËØÅ„ÄÇ","invert":["home"],"autoHide":["home"]},"sidebar":[{"text":"üåà","locale":"menu.home","link":"/"}],"sidebarOptions":{"position":"left","offset":true,"initialState":false,"persistence":"session","enableOnDesktop":false,"showCounts":true},"postList":{"text":"ÊñáÁ´†ÂàóË°®","isImageReversed":true,"defaultImage":["https://www.dmoe.cc/random.php?random","https://img.xjh.me/random_img.php?random?type=bg&return=302"]},"pinnedPost":{"text":"START:DASH!!"},"footer":{"since":2019,"icon":{"animated":true,"url":"https://sponsors.yunyoujun.cn","title":"Breeze","img":"https://img.mnorg.com/imgs/2025/06/16/684f7abb92859.png"},"powered":true},"tags":{"rainbow":true},"pagination":{"type":"infinite-scroll","animation":true,"infiniteScrollOptions":{"preload":true}},"scrollDamping":false,"scrollAnimation":true,"scrollIndicator":true,"scrollLock":false,"scrollToTop":true,"scrollDown":{"enable":true},"notice":{"message":"<b>ËøôÊòØBreezeÁöÑÊñ∞Á´ôÁÇπÔºåÊ¨¢ËøéËÆøÈóÆÔºÅÂèãÈìæ‰∫íÊç¢ËØ∑‰ªé‰ª•‰∏äÊñπÂºè‰ªªÊÑèËÅîÁ≥ª</b></br>"},"postFooter":{"navigationMerge":true}},"build":{"ssgForPagination":false},"deploy":{},"runtimeConfig":{"addons":{"valaxy-addon-waline":{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://waline.wrxinyue.org","pageview":true,"comment":true},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-waline","props":{},"pkg":{"name":"valaxy-addon-waline","version":"0.2.1","description":"Waline Composition API for Valaxy","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-waline"},"keywords":["valaxy","addon","waline"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":">=0.22"},"dependencies":{"@waline/client":"3.4.1"}},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-waline/valaxy.config.ts"},"valaxy-addon-meting":{"name":"valaxy-addon-meting","enable":true,"global":true,"props":{"id":"2489775340","server":"netease","type":"playlist"},"options":{"autoHidden":true,"animationIn":true,"lyricHidden":true},"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-meting","pkg":{"name":"valaxy-addon-meting","global":true,"version":"0.1.4","license":"MIT","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-meting","type":"git"},"keywords":["valaxy","addon","meting"]},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-meting/valaxy.config.ts"},"valaxy-addon-live2d":{"name":"valaxy-addon-live2d","enable":true,"global":true,"options":{"enableLive2D":["Tia","Pio","XiaoYun"],"live2DCollection":{"Asuna":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_01/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_02/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_03/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_04/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_05/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_06/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_07/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_08/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_09/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_12/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_13/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_14/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_15/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_16/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_17/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_18/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_19/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_20/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_21/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_22/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_23/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_24/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_25/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_26/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_27/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_28/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_29/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_30/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_31/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_33/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_34/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_35/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_36/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_37/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_38/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_39/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_40/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_41/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_43/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_44/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_45/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_46/index.json"]},"Type95":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/destroy/index.json"]},"HK416":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/destroy/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/destroy/index.json"]}}},"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-live2d","props":{},"pkg":{"name":"valaxy-addon-live2d","global":true,"version":"0.3.0","packageManager":"pnpm@9.5.0","description":"","repository":{"url":"git+https://github.com/valaxyjs/valaxy-addon-live2d.git"},"keywords":["valaxy","addon","valaxy-addon","live2d"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"cd dist && npm publish --access public","build":"tsx scripts/build.ts"},"dependencies":{"pixi-live2d-display":"^0.5.0-beta","pixi.js":"^7.4.2","stats.js":"^1.0.0","url":"^0.11.4"},"devDependencies":{"@types/lodash-es":"^4.17.12","@types/stats.js":"^0.17.3","consola":"^3.2.3","tsx":"^4.16.2","vue-tsc":"^2.0.28"}},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-live2d/valaxy.config.ts"},"valaxy-addon-bangumi":{"name":"valaxy-addon-bangumi","enable":true,"options":{"api":"https://yi_xiao_jiu-bangumi.web.val.run","bilibiliUid":"1579790","bgmEnabled":false},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-bangumi","props":{},"pkg":{"name":"valaxy-addon-bangumi","type":"module","version":"0.2.2","description":"Bangumi addon for Valaxy","repository":{"type":"git","url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-bangumi"},"keywords":["valaxy","addon","bangumi"],"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":"latest"},"dependencies":{"bilibili-bangumi-component":"^0.3.1"}},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-bangumi/valaxy.config.ts"},"valaxy-addon-vercount":{"name":"valaxy-addon-vercount","enable":true,"options":{},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-vercount","props":{},"pkg":{"name":"valaxy-addon-vercount","version":"0.0.6","description":"A Vercount API based counting plugin for Valaxy, serving as an alternative to Busuanzi counting","repository":"https://github.com/valaxyjs/valaxy-addon-vercount","keywords":["valaxy","addon","valaxy-addon","vercount","busuanzi"],"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"npm publish --access public"},"dependencies":{"peerjs":"^1.5.4","uuid":"^10.0.0"},"devDependencies":{"@types/uuid":"^10.0.0"}}},"valaxy-addon-hitokoto":{"name":"valaxy-addon-hitokoto","enable":true,"options":{},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-hitokoto","props":{},"pkg":{"name":"valaxy-addon-hitokoto","version":"0.0.1","description":"Hitokoto Composition API for Valaxy","repository":"https://github.com/valaxyjs/valaxy-addon-hitokoto","keywords":["valaxy","addon","valaxy-addon","hitokoto"],"main":"index.ts","types":"index.d.ts"}}},"redirects":{"useVueRouter":true,"redirectRoutes":[]}},"modules":{"rss":{"enable":true,"fullText":false}},"features":{"katex":true},"vite":{"build":{"emptyOutDir":true,"rollupOptions":{"external":[],"preserveEntrySignatures":"allow-extension","output":{"assetFileNames":"assets/[name].[hash].[ext]","entryFileNames":"assets/[name].[hash].js"}}},"optimizeDeps":{"include":["@waline/client/component","@pixi/utils","@pixi/graphics","@pixi/settings","@pixi/app","@pixi/core","@pixi/extract","@pixi/ticker","interactjs","d3","lodash-es"]},"plugins":[{"name":"valaxy-theme-sakura","enforce":"pre"}]},"devtools":true,"vue":{"isCustomElement":[null,null]},"unocss":{"safelist":["https://img.mnorg.com/imgs/2025/06/16/684f7abb92859.png","i-fa-fort-awesome","i-ri-women-line","i-ri-genderless-line","i-fa-leaf","i-fa6-solid:bullhorn","i-fa-chevron-down","i-ri-translate","i-line-md-sunny-outline-to-moon-loop-transition","i-line-md-moon-alt-to-sunny-outline-loop-transition","i-fa-envira","i-fa-anchor"]},"addons":[{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://waline.wrxinyue.org","pageview":true,"comment":true}},{"name":"valaxy-addon-meting","enable":true,"global":true,"props":{"id":"2489775340","server":"netease","type":"playlist"},"options":{"autoHidden":true,"animationIn":true,"lyricHidden":true}},{"name":"valaxy-addon-live2d","enable":true,"global":false,"options":{"enableLive2D":["Tia","Pio","XiaoYun"],"live2DCollection":{"Asuna":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_01/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_02/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_03/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_04/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_05/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_06/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_07/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_08/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_09/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_12/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_13/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_14/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_15/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_16/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_17/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_18/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_19/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_20/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_21/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_22/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_23/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_24/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_25/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_26/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_27/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_28/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_29/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_30/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_31/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_33/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_34/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_35/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_36/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_37/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_38/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_39/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_40/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_41/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_43/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_44/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_45/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_46/index.json"]},"Type95":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/destroy/index.json"]},"HK416":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/destroy/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/destroy/index.json"]}}}},{"name":"valaxy-addon-bangumi","enable":true,"options":{"api":"https://yi_xiao_jiu-bangumi.web.val.run","bilibiliUid":"1579790","bgmEnabled":false}},{"name":"valaxy-addon-vercount","enable":true},{"name":"valaxy-addon-hitokoto","enable":true}],"fuse":{"extendKeys":["cover","date"]}}',zm='{"userRoot":"/home/runner/work/Breeze/Breeze"}';function Ra(r){return JSON.parse(r)}const jm=Symbol("valaxy:config"),Vm=Vt(Ra(Hm)),nx=Symbol("ValaxyData"),ox=Vt(Ra(zm));Vm.value=Ra(Hm);ox.value=Ra(zm);function ax(){return tt(()=>Vm.value)}function Ln(){const r=Hh(jm);if(!r)throw new Error("[Valaxy] site config not properly injected in app");return r}function lx(){return Ln()}function Ve(){const r=Ln();return tt(()=>r.value.siteConfig)}function cx(){const r=Ln();return tt(()=>r.value.themeConfig)}function au(){const r=Ln();return tt(()=>r.value.runtimeConfig)}function hx(){const r=Ve(),t=Da(),{locale:e}=Yr(),i=tt(()=>t.value[`title_${e.value}`]||t.value.title),s=tt(()=>t.value.url||r.value.url),n=tt(()=>t.value.excerpt||t.value.description||r.value.description);Jb({description:n,ogDescription:n,ogLocale:tt(()=>e.value||t.value.lang||r.value.lang||"en"),ogLocaleAlternate:tt(()=>r.value.languages.filter(o=>o!==e.value)),ogSiteName:tt(()=>r.value.title),ogTitle:tt(()=>t.value.title||r.value.title),ogImage:tt(()=>t.value.ogImage||t.value.cover||r.value.favicon),ogType:"website",ogUrl:s}),ix([tx({name:r.value.author.name,url:s.value,image:r.value.author.avatar,sameAs:r.value.social.map(o=>o.link)}),rx({name:i.value,datePublished:tt(()=>t.value.date),dateModified:tt(()=>t.value.updated)}),ex()]),sx(),px()}const ux="0.23.3",dx={url:"https://github.com/YunYouJun/valaxy"},Bc={version:ux,repository:dx};function px(){var s;const{locale:r}=Yr(),t=Da(),e=Ve(),i=tt(()=>t.value[`title_${r.value}`]||t.value.title);On({title:i,titleTemplate:n=>t.value.titleTemplate||(n?`${n} - ${e.value.title}`:e.value.title),link:[{rel:"icon",href:e.value.favicon,type:(s=e.value.favicon)!=null&&s.endsWith("svg")?"image/svg+xml":"image/png"}],meta:[tt(()=>({name:"description",content:t.value.description||e.value.description})),{name:"generator",content:`Valaxy ${Bc.version}`}],templateParams:{schemaOrg:{host:e.value.url}},script:[{id:"check-mac-os",innerHTML:"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))",async:!0}]})}const Wm=Ta("app",()=>{const r=Ve(),t=cx(),{isDark:e,toggleDark:i,toggleDarkWithTransition:s,themeColor:n}=qx(t.value.valaxyDarkOptions),o=Zx(),a=_t(!0),l=tt(()=>r.value.languages.length>1);return{isMobile:o,isDark:e,showToggleLocale:l,themeColor:n,toggleDark:i,toggleDarkWithTransition:s,showLoading:a}}),Xm=Ta("routerStore",()=>({router:Vh()})),lu=Ta("site",()=>{const t=Xm().router,e=_t(1),i=tt(()=>{const s=tw().value;return e.value&&s,s});return t&&t.isReady().then(()=>{}),{postList:i}});function hD(r){return r.children}function fx(r,t=[]){return tt(()=>{const e=Q(r);t.length||(t=lu().postList);const i={name:"All",total:t.length,children:new Map([["Uncategorized",{name:"Uncategorized",total:0,children:new Map}]])},s=i.children.get("Uncategorized");if(t.forEach(n=>{if(n.categories)if(Array.isArray(n.categories)){const o=n.categories.length;let a=i,l=a;n.categories.forEach((u,d)=>{a.total+=1,a=a.children.get(u),a||(a={name:u,total:0,children:new Map},l.children.set(u,a)),d===o-1&&(a.children.set(n.path,n),a.total+=1),l=a})}else{const o=n.categories,a=i.children.get(o);a?(a.total+=1,a.children.set(n.path,n)):i.children.set(o,{name:o,total:1,children:new Map([[n.path,n]])})}else s.total+=1,s.children.set(n.path,n)}),s.total===0&&i.children.delete("Uncategorized"),e){let n=i;const o=e.split("/");for(const a of o){const l=n.children.get(a);if(l&&l.children)n=l;else return console.warn(`Do not have category: ${r}`),i}return n}else return i})}function Bn(r){return n0()?(o0(r),!0):!1}const El=new WeakMap,mx=(...r)=>{var t;const e=r[0],i=(t=wa())==null?void 0:t.proxy;if(i==null&&!Gh())throw new Error("injectLocal must be called in setup");return i&&El.has(i)&&e in El.get(i)?El.get(i)[e]:Hh(...r)},Pr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ym=r=>r!=null,gx=Object.prototype.toString,vx=r=>gx.call(r)==="[object Object]",Je=()=>{},Ld=yx();function yx(){var r,t;return Pr&&((r=window==null?void 0:window.navigator)==null?void 0:r.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function cu(...r){if(r.length!==1)return a0(...r);const t=r[0];return typeof t=="function"?cm(l0(()=>({get:t,set:Je}))):_t(t)}function hu(r,t){function e(...i){return new Promise((s,n)=>{Promise.resolve(r(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(s).catch(n)})}return e}const qm=r=>r();function _x(r,t={}){let e,i,s=Je;const n=l=>{clearTimeout(l),s(),s=Je};let o;return l=>{const u=Ot(r),d=Ot(t.maxWait);return e&&n(e),u<=0||d!==void 0&&d<=0?(i&&(n(i),i=void 0),Promise.resolve(l())):new Promise((f,m)=>{s=t.rejectOnCancel?m:f,o=l,d&&!i&&(i=setTimeout(()=>{e&&n(e),i=void 0,f(o())},d)),e=setTimeout(()=>{i&&n(i),i=void 0,f(l())},u)})}}function bx(...r){let t=0,e,i=!0,s=Je,n,o,a,l,u;!$h(r[0])&&typeof r[0]=="object"?{delay:o,trailing:a=!0,leading:l=!0,rejectOnCancel:u=!1}=r[0]:[o,a=!0,l=!0,u=!1]=r;const d=()=>{e&&(clearTimeout(e),e=void 0,s(),s=Je)};return m=>{const v=Ot(o),y=Date.now()-t,b=()=>n=m();return d(),v<=0?(t=Date.now(),b()):(y>v&&(l||!i)?(t=Date.now(),b()):a&&(n=new Promise((w,S)=>{s=u?S:w,e=setTimeout(()=>{t=Date.now(),i=!0,w(b()),d()},Math.max(0,v-y))})),!l&&!e&&(e=setTimeout(()=>i=!0,v)),i=!1,n)}}function xx(r=qm,t={}){const{initialState:e="active"}=t,i=cu(e==="active");function s(){i.value=!1}function n(){i.value=!0}const o=(...a)=>{i.value&&r(...a)};return{isActive:cm(i),pause:s,resume:n,eventFilter:o}}function wx(r,t){var e;if(typeof r=="number")return r+t;const i=((e=r.match(/^-?\d+\.?\d*/))==null?void 0:e[0])||"",s=r.slice(i.length),n=Number.parseFloat(i)+t;return Number.isNaN(n)?r:n+s}function ln(r){return r.endsWith("rem")?Number.parseFloat(r)*16:Number.parseFloat(r)}function Tx(r){return Object.entries(r)}function cn(r){return Array.isArray(r)?r:[r]}function Km(r){return wa()}function Ex(r,t=200,e={}){return hu(_x(t,e),r)}function Sx(r,t=200,e=!1,i=!0,s=!1){return hu(bx(t,e,i,s),r)}function Ax(r,t,e={}){const{eventFilter:i=qm,...s}=e;return qt(r,hu(i,t),s)}function Cx(r,t,e={}){const{eventFilter:i,initialState:s="active",...n}=e,{eventFilter:o,pause:a,resume:l,isActive:u}=xx(i,{initialState:s});return{stop:Ax(r,t,{...n,eventFilter:o}),pause:a,resume:l,isActive:u}}function Xi(r,t=!0,e){Km()?Xr(r,e):t?r():Ui(r)}function Px(r,t){Km()&&lm(r,t)}function Ix(r=!1,t={}){const{truthyValue:e=!0,falsyValue:i=!1}=t,s=$h(r),n=Vt(r);function o(a){if(arguments.length)return n.value=a,n.value;{const l=Ot(e);return n.value=n.value===l?Ot(i):l,n.value}}return s?o:[n,o]}function Rx(r,t,e){return qt(r,t,{...e,immediate:!0})}function uD(r,t,e){return qt(r,t,{...e,once:!0})}const Me=Pr?window:void 0,Mx=Pr?window.document:void 0;function ze(r){var t;const e=Ot(r);return(t=e==null?void 0:e.$el)!=null?t:e}function fe(...r){const t=[],e=()=>{t.forEach(a=>a()),t.length=0},i=(a,l,u,d)=>(a.addEventListener(l,u,d),()=>a.removeEventListener(l,u,d)),s=tt(()=>{const a=cn(Ot(r[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),n=Rx(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(u=>ze(u)))!=null?l:[Me].filter(u=>u!=null),cn(Ot(s.value?r[1]:r[0])),cn(Q(s.value?r[2]:r[1])),Ot(s.value?r[3]:r[2])]},([a,l,u,d])=>{if(e(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const f=vx(d)?{...d}:d;t.push(...a.flatMap(m=>l.flatMap(v=>u.map(y=>i(m,v,y,f)))))},{flush:"post"}),o=()=>{n(),e()};return Bn(e),o}function kx(){const r=Vt(!1),t=wa();return t&&Xr(()=>{r.value=!0},t),r}function Ma(r){const t=kx();return tt(()=>(t.value,!!r()))}function uu(r,t,e={}){const{window:i=Me,...s}=e;let n;const o=Ma(()=>i&&"MutationObserver"in i),a=()=>{n&&(n.disconnect(),n=void 0)},l=tt(()=>{const m=Ot(r),v=cn(m).map(ze).filter(Ym);return new Set(v)}),u=qt(l,m=>{a(),o.value&&m.size&&(n=new MutationObserver(t),m.forEach(v=>n.observe(v,s)))},{immediate:!0,flush:"post"}),d=()=>n==null?void 0:n.takeRecords(),f=()=>{u(),a()};return Bn(f),{isSupported:o,stop:f,takeRecords:d}}const Dx=Symbol("vueuse-ssr-width");function Zm(){const r=Gh()?mx(Dx,null):null;return typeof r=="number"?r:void 0}function Ae(r,t={}){const{window:e=Me,ssrWidth:i=Zm()}=t,s=Ma(()=>e&&"matchMedia"in e&&typeof e.matchMedia=="function"),n=Vt(typeof i=="number"),o=Vt(),a=Vt(!1),l=u=>{a.value=u.matches};return zh(()=>{if(n.value){n.value=!s.value;const u=Ot(r).split(",");a.value=u.some(d=>{const f=d.includes("not all"),m=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),v=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let y=!!(m||v);return m&&y&&(y=i>=ln(m[1])),v&&y&&(y=i<=ln(v[1])),f?!y:y});return}s.value&&(o.value=e.matchMedia(Ot(r)),a.value=o.value.matches)}),fe(o,"change",l,{passive:!0}),tt(()=>a.value)}const Ox={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function dD(r,t={}){function e(v,y){let b=Ot(r[Ot(v)]);return y!=null&&(b=wx(b,y)),typeof b=="number"&&(b=`${b}px`),b}const{window:i=Me,strategy:s="min-width",ssrWidth:n=Zm()}=t,o=typeof n=="number",a=o?Vt(!1):{value:!0};o&&Xi(()=>a.value=!!i);function l(v,y){return!a.value&&o?v==="min"?n>=ln(y):n<=ln(y):i?i.matchMedia(`(${v}-width: ${y})`).matches:!1}const u=v=>Ae(()=>`(min-width: ${e(v)})`,t),d=v=>Ae(()=>`(max-width: ${e(v)})`,t),f=Object.keys(r).reduce((v,y)=>(Object.defineProperty(v,y,{get:()=>s==="min-width"?u(y):d(y),enumerable:!0,configurable:!0}),v),{});function m(){const v=Object.keys(r).map(y=>[y,f[y],ln(e(y))]).sort((y,b)=>y[2]-b[2]);return tt(()=>v.filter(([,y])=>y.value).map(([y])=>y))}return Object.assign(f,{greaterOrEqual:u,smallerOrEqual:d,greater(v){return Ae(()=>`(min-width: ${e(v,.1)})`,t)},smaller(v){return Ae(()=>`(max-width: ${e(v,-.1)})`,t)},between(v,y){return Ae(()=>`(min-width: ${e(v)}) and (max-width: ${e(y,-.1)})`,t)},isGreater(v){return l("min",e(v,.1))},isGreaterOrEqual(v){return l("min",e(v))},isSmaller(v){return l("max",e(v,-.1))},isSmallerOrEqual(v){return l("max",e(v))},isInBetween(v,y){return l("min",e(v))&&l("max",e(y,-.1))},current:m,active(){const v=m();return tt(()=>v.value.length===0?"":v.value.at(s==="min-width"?-1:0))}})}const Bd=["hash","host","hostname","href","pathname","port","protocol","search"];function pD(r={}){const{window:t=Me}=r,e=Object.fromEntries(Bd.map(n=>[n,_t()]));for(const[n,o]of Tx(e))qt(o,a=>{!(t!=null&&t.location)||t.location[n]===a||(t.location[n]=a)});const i=n=>{var o;const{state:a,length:l}=(t==null?void 0:t.history)||{},{origin:u}=(t==null?void 0:t.location)||{};for(const d of Bd)e[d].value=(o=t==null?void 0:t.location)==null?void 0:o[d];return Pc({trigger:n,state:a,length:l,origin:u,...e})},s=_t(i("load"));if(t){const n={passive:!0};fe(t,"popstate",()=>s.value=i("popstate"),n),fe(t,"hashchange",()=>s.value=i("hashchange"),n)}return s}const so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},no="__vueuse_ssr_handlers__",Lx=Bx();function Bx(){return no in so||(so[no]=so[no]||{}),so[no]}function Qm(r,t){return Lx[r]||t}function Fx(r){return Ae("(prefers-color-scheme: dark)",r)}function Nx(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const Ux={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},Fd="vueuse-storage";function ka(r,t,e,i={}){var s;const{flush:n="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:u=!1,shallow:d,window:f=Me,eventFilter:m,onError:v=F=>{console.error(F)},initOnMounted:y}=i,b=(d?Vt:_t)(typeof t=="function"?t():t),w=tt(()=>Ot(r));if(!e)try{e=Qm("getDefaultStorage",()=>{var F;return(F=Me)==null?void 0:F.localStorage})()}catch(F){v(F)}if(!e)return b;const S=Ot(t),C=Nx(S),E=(s=i.serializer)!=null?s:Ux[C],{pause:R,resume:k}=Cx(b,F=>$(F),{flush:n,deep:o,eventFilter:m});qt(w,()=>H(),{flush:n});let N=!1;const P=F=>{y&&!N||H(F)},O=F=>{y&&!N||B(F)};f&&a&&(e instanceof Storage?fe(f,"storage",P,{passive:!0}):fe(f,Fd,O)),y?Xi(()=>{N=!0,H()}):H();function U(F,z){if(f){const Z={key:w.value,oldValue:F,newValue:z,storageArea:e};f.dispatchEvent(e instanceof Storage?new StorageEvent("storage",Z):new CustomEvent(Fd,{detail:Z}))}}function $(F){try{const z=e.getItem(w.value);if(F==null)U(z,null),e.removeItem(w.value);else{const Z=E.write(F);z!==Z&&(e.setItem(w.value,Z),U(z,Z))}}catch(z){v(z)}}function Y(F){const z=F?F.newValue:e.getItem(w.value);if(z==null)return l&&S!=null&&e.setItem(w.value,E.write(S)),S;if(!F&&u){const Z=E.read(z);return typeof u=="function"?u(Z,S):C==="object"&&!Array.isArray(Z)?{...S,...Z}:Z}else return typeof z!="string"?z:E.read(z)}function H(F){if(!(F&&F.storageArea!==e)){if(F&&F.key==null){b.value=S;return}if(!(F&&F.key!==w.value)){R();try{const z=E.write(b.value);(F===void 0||(F==null?void 0:F.newValue)!==z)&&(b.value=Y(F))}catch(z){v(z)}finally{F?Ui(k):k()}}}}function B(F){H(F.detail)}return b}const $x="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Gx(r={}){const{selector:t="html",attribute:e="class",initialValue:i="auto",window:s=Me,storage:n,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:u,disableTransition:d=!0}=r,f={auto:"",light:"light",dark:"dark",...r.modes||{}},m=Fx({window:s}),v=tt(()=>m.value?"dark":"light"),y=l||(o==null?cu(i):ka(o,i,n,{window:s,listenToStorageChanges:a})),b=tt(()=>y.value==="auto"?v.value:y.value),w=Qm("updateHTMLAttrs",(R,k,N)=>{const P=typeof R=="string"?s==null?void 0:s.document.querySelector(R):ze(R);if(!P)return;const O=new Set,U=new Set;let $=null;if(k==="class"){const H=N.split(/\s/g);Object.values(f).flatMap(B=>(B||"").split(/\s/g)).filter(Boolean).forEach(B=>{H.includes(B)?O.add(B):U.add(B)})}else $={key:k,value:N};if(O.size===0&&U.size===0&&$===null)return;let Y;d&&(Y=s.document.createElement("style"),Y.appendChild(document.createTextNode($x)),s.document.head.appendChild(Y));for(const H of O)P.classList.add(H);for(const H of U)P.classList.remove(H);$&&P.setAttribute($.key,$.value),d&&(s.getComputedStyle(Y).opacity,document.head.removeChild(Y))});function S(R){var k;w(t,e,(k=f[R])!=null?k:R)}function C(R){r.onChanged?r.onChanged(R,S):S(R)}qt(b,C,{flush:"post",immediate:!0}),Xi(()=>C(b.value));const E=tt({get(){return u?y.value:b.value},set(R){y.value=R}});return Object.assign(E,{store:y,system:v,state:b})}function Hx(r,t,e={}){const{window:i=Me,initialValue:s,observe:n=!1}=e,o=Vt(s),a=tt(()=>{var u;return ze(t)||((u=i==null?void 0:i.document)==null?void 0:u.documentElement)});function l(){var u;const d=Ot(r),f=Ot(a);if(f&&i&&d){const m=(u=i.getComputedStyle(f).getPropertyValue(d))==null?void 0:u.trim();o.value=m||o.value||s}}return n&&uu(a,l,{attributeFilter:["style","class"],window:i}),qt([a,()=>Ot(r)],(u,d)=>{d[0]&&d[1]&&d[0].style.removeProperty(d[1]),l()},{immediate:!0}),qt([o,a],([u,d])=>{const f=Ot(r);d!=null&&d.style&&f&&(u==null?d.style.removeProperty(f):d.style.setProperty(f,u))},{immediate:!0}),o}function zx(r={}){const{valueDark:t="dark",valueLight:e=""}=r,i=Gx({...r,onChanged:(o,a)=>{var l;r.onChanged?(l=r.onChanged)==null||l.call(r,o==="dark",a,o):a(o)},modes:{dark:t,light:e}}),s=tt(()=>i.system.value);return tt({get(){return i.value==="dark"},set(o){const a=o?"dark":"light";s.value===a?i.value="auto":i.value=a}})}function jx(r,t,e={}){const{window:i=Me,...s}=e;let n;const o=Ma(()=>i&&"ResizeObserver"in i),a=()=>{n&&(n.disconnect(),n=void 0)},l=tt(()=>{const f=Ot(r);return Array.isArray(f)?f.map(m=>ze(m)):[ze(f)]}),u=qt(l,f=>{if(a(),o.value&&i){n=new ResizeObserver(t);for(const m of f)m&&n.observe(m,s)}},{immediate:!0,flush:"post"}),d=()=>{a(),u()};return Bn(d),{isSupported:o,stop:d}}function fD(r,t={}){const{reset:e=!0,windowResize:i=!0,windowScroll:s=!0,immediate:n=!0,updateTiming:o="sync"}=t,a=Vt(0),l=Vt(0),u=Vt(0),d=Vt(0),f=Vt(0),m=Vt(0),v=Vt(0),y=Vt(0);function b(){const S=ze(r);if(!S){e&&(a.value=0,l.value=0,u.value=0,d.value=0,f.value=0,m.value=0,v.value=0,y.value=0);return}const C=S.getBoundingClientRect();a.value=C.height,l.value=C.bottom,u.value=C.left,d.value=C.right,f.value=C.top,m.value=C.width,v.value=C.x,y.value=C.y}function w(){o==="sync"?b():o==="next-frame"&&requestAnimationFrame(()=>b())}return jx(r,w),qt(()=>ze(r),S=>!S&&w()),uu(r,w,{attributeFilter:["style","class"]}),s&&fe("scroll",w,{capture:!0,passive:!0}),i&&fe("resize",w,{passive:!0}),Xi(()=>{n&&w()}),{height:a,bottom:l,left:u,right:d,top:f,width:m,x:v,y,update:w}}function mD(r,t,e={}){const{root:i,rootMargin:s="0px",threshold:n=0,window:o=Me,immediate:a=!0}=e,l=Ma(()=>o&&"IntersectionObserver"in o),u=tt(()=>{const y=Ot(r);return cn(y).map(ze).filter(Ym)});let d=Je;const f=Vt(a),m=l.value?qt(()=>[u.value,ze(i),f.value],([y,b])=>{if(d(),!f.value||!y.length)return;const w=new IntersectionObserver(t,{root:ze(b),rootMargin:s,threshold:n});y.forEach(S=>S&&w.observe(S)),d=()=>{w.disconnect(),d=Je}},{immediate:a,flush:"post"}):Je,v=()=>{d(),m(),f.value=!1};return Bn(v),{isSupported:l,isActive:f,pause(){d(),f.value=!1},resume(){f.value=!0},stop:v}}function Sl(r){return typeof Window<"u"&&r instanceof Window?r.document.documentElement:typeof Document<"u"&&r instanceof Document?r.documentElement:r}const Nd=1;function Vx(r,t={}){const{throttle:e=0,idle:i=200,onStop:s=Je,onScroll:n=Je,offset:o={left:0,right:0,top:0,bottom:0},observe:a={mutation:!1},eventListenerOptions:l={capture:!1,passive:!0},behavior:u="auto",window:d=Me,onError:f=U=>{console.error(U)}}=t,m=typeof a=="boolean"?{mutation:a}:a,v=Vt(0),y=Vt(0),b=tt({get(){return v.value},set(U){S(U,void 0)}}),w=tt({get(){return y.value},set(U){S(void 0,U)}});function S(U,$){var Y,H,B,F;if(!d)return;const z=Ot(r);if(!z)return;(B=z instanceof Document?d.document.body:z)==null||B.scrollTo({top:(Y=Ot($))!=null?Y:w.value,left:(H=Ot(U))!=null?H:b.value,behavior:Ot(u)});const Z=((F=z==null?void 0:z.document)==null?void 0:F.documentElement)||(z==null?void 0:z.documentElement)||z;b!=null&&(v.value=Z.scrollLeft),w!=null&&(y.value=Z.scrollTop)}const C=Vt(!1),E=Pc({left:!0,right:!1,top:!0,bottom:!1}),R=Pc({left:!1,right:!1,top:!1,bottom:!1}),k=U=>{C.value&&(C.value=!1,R.left=!1,R.right=!1,R.top=!1,R.bottom=!1,s(U))},N=Ex(k,e+i),P=U=>{var $;if(!d)return;const Y=(($=U==null?void 0:U.document)==null?void 0:$.documentElement)||(U==null?void 0:U.documentElement)||ze(U),{display:H,flexDirection:B,direction:F}=getComputedStyle(Y),z=F==="rtl"?-1:1,Z=Y.scrollLeft;R.left=Z<v.value,R.right=Z>v.value;const et=Math.abs(Z*z)<=(o.left||0),ut=Math.abs(Z*z)+Y.clientWidth>=Y.scrollWidth-(o.right||0)-Nd;H==="flex"&&B==="row-reverse"?(E.left=ut,E.right=et):(E.left=et,E.right=ut),v.value=Z;let yt=Y.scrollTop;U===d.document&&!yt&&(yt=d.document.body.scrollTop),R.top=yt<y.value,R.bottom=yt>y.value;const X=Math.abs(yt)<=(o.top||0),J=Math.abs(yt)+Y.clientHeight>=Y.scrollHeight-(o.bottom||0)-Nd;H==="flex"&&B==="column-reverse"?(E.top=J,E.bottom=X):(E.top=X,E.bottom=J),y.value=yt},O=U=>{var $;if(!d)return;const Y=($=U.target.documentElement)!=null?$:U.target;P(Y),C.value=!0,N(U),n(U)};return fe(r,"scroll",e?Sx(O,e,!0,!1):O,l),Xi(()=>{try{const U=Ot(r);if(!U)return;P(U)}catch(U){f(U)}}),m!=null&&m.mutation&&r!=null&&r!==d&&r!==document&&uu(r,()=>{const U=Ot(r);U&&P(U)},{attributes:!0,childList:!0,subtree:!0}),fe(r,"scrollend",k,l),{x:b,y:w,isScrolling:C,arrivedState:E,directions:R,measure(){const U=Ot(r);d&&U&&P(U)}}}function Ud(r,t=Je,e={}){const{immediate:i=!0,manual:s=!1,type:n="text/javascript",async:o=!0,crossOrigin:a,referrerPolicy:l,noModule:u,defer:d,document:f=Mx,attrs:m={},nonce:v=void 0}=e,y=Vt(null);let b=null;const w=E=>new Promise((R,k)=>{const N=$=>(y.value=$,R($),$);if(!f){R(!1);return}let P=!1,O=f.querySelector(`script[src="${Ot(r)}"]`);O?O.hasAttribute("data-loaded")&&N(O):(O=f.createElement("script"),O.type=n,O.async=o,O.src=Ot(r),d&&(O.defer=d),a&&(O.crossOrigin=a),u&&(O.noModule=u),l&&(O.referrerPolicy=l),v&&(O.nonce=v),Object.entries(m).forEach(([$,Y])=>O==null?void 0:O.setAttribute($,Y)),P=!0);const U={passive:!0};fe(O,"error",$=>k($),U),fe(O,"abort",$=>k($),U),fe(O,"load",()=>{O.setAttribute("data-loaded","true"),t(O),N(O)},U),P&&(O=f.head.appendChild(O)),E||N(O)}),S=(E=!0)=>(b||(b=w(E)),b),C=()=>{if(!f)return;b=null,y.value&&(y.value=null);const E=f.querySelector(`script[src="${Ot(r)}"]`);E&&f.head.removeChild(E)};return i&&!s&&Xi(S),s||Px(C),{scriptTag:y,load:S,unload:C}}function Jm(r){const t=window.getComputedStyle(r);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&r.clientWidth<r.scrollWidth||t.overflowY==="auto"&&r.clientHeight<r.scrollHeight)return!0;{const e=r.parentNode;return!e||e.tagName==="BODY"?!1:Jm(e)}}function Wx(r){const t=r||window.event,e=t.target;return Jm(e)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const Al=new WeakMap;function Xx(r,t=!1){const e=Vt(t);let i=null,s="";qt(cu(r),a=>{const l=Sl(Ot(a));if(l){const u=l;if(Al.get(u)||Al.set(u,u.style.overflow),u.style.overflow!=="hidden"&&(s=u.style.overflow),u.style.overflow==="hidden")return e.value=!0;if(e.value)return u.style.overflow="hidden"}},{immediate:!0});const n=()=>{const a=Sl(Ot(r));!a||e.value||(Ld&&(i=fe(a,"touchmove",l=>{Wx(l)},{passive:!1})),a.style.overflow="hidden",e.value=!0)},o=()=>{const a=Sl(Ot(r));!a||!e.value||(Ld&&(i==null||i()),a.style.overflow=s,Al.delete(a),e.value=!1)};return Bn(o),tt({get(){return e.value},set(a){a?n():o()}})}function du(r={}){const{window:t=Me,...e}=r;return Vx(t,e)}function Yx(r={}){const{window:t=Me,initialWidth:e=Number.POSITIVE_INFINITY,initialHeight:i=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:n=!0,type:o="inner"}=r,a=Vt(e),l=Vt(i),u=()=>{if(t)if(o==="outer")a.value=t.outerWidth,l.value=t.outerHeight;else if(o==="visual"&&t.visualViewport){const{width:f,height:m,scale:v}=t.visualViewport;a.value=Math.round(f*v),l.value=Math.round(m*v)}else n?(a.value=t.innerWidth,l.value=t.innerHeight):(a.value=t.document.documentElement.clientWidth,l.value=t.document.documentElement.clientHeight)};u(),Xi(u);const d={passive:!0};if(fe("resize",u,d),t&&o==="visual"&&t.visualViewport&&fe(t.visualViewport,"resize",u,d),s){const f=Ae("(orientation: portrait)");qt(f,()=>u())}return{width:a,height:l}}function Da(){const r=Wi();return tt(()=>r.meta.frontmatter||{})}function gD(){const r=Ve(),t=Wi();return tt(()=>((r.value.url.endsWith("/")?r.value.url.slice(0,-1):r.value.url)||Pr&&window.location.origin)+t.path)}function qx(r={}){const t=zx(r.useDarkOptions),e=Ix(t),i=tt(()=>{var n,o;return t.value?((n=r.themeColor)==null?void 0:n.dark)||"#000":((o=r.themeColor)==null?void 0:o.light)||"#fff"});r.circleTransition&&pe(()=>Promise.resolve({}),__vite__mapDeps([0]));function s(n,o={}){if(!document.startViewTransition){e();return}const a=n.clientX,l=n.clientY,u=Math.hypot(Math.max(a,innerWidth-a),Math.max(l,innerHeight-l));document.startViewTransition(()=>{e()}).ready.then(()=>{const f=[`circle(0px at ${a}px ${l}px)`,`circle(${u}px at ${a}px ${l}px)`];document.documentElement.animate({clipPath:t.value?f.reverse():f},{duration:o.duration||300,easing:o.easing||"ease-in",pseudoElement:t.value?"::view-transition-old(root)":"::view-transition-new(root)"})})}return{isDark:t,themeColor:i,toggleDark:e,toggleDarkWithTransition:s}}function Kx(){const r=Ae("(max-width: 639px)"),t=Ae("(min-width: 640px)"),e=Ae("(min-width: 768px)"),i=Ae("(min-width: 1024px)"),s=Ae("(min-width: 1280px)"),n=Ae("(min-width: 1536px)");return{isXs:r,isSm:t,isMd:e,isLg:i,isXl:s,is2xl:n}}function tg(r){const t=Wi();return tt(()=>{var e;return(e=t.meta)==null?void 0:e.layout})}function Zx(){return Ae("(max-width: 768px)")}function Qx(){const{availableLocales:r,locale:t}=Yr(),e=ka("valaxy-locale",t.value);return fi.locale(t.value==="zh-CN"?"zh-cn":"en"),{lang:e,toggleLocales:()=>{const s=r;t.value=s[(s.indexOf(t.value)+1)%s.length],e.value=t.value,fi.locale(t.value==="zh-CN"?"zh-cn":"en"),Pr&&document.documentElement.setAttribute("lang",t.value)}}}function Jx(){const t=Xm().router;return tt(()=>{const e=["/:..all","/:all(.*)*","/","/:path(.*)"];return t.getRoutes().filter(s=>s.name).filter(s=>s.meta).filter(s=>s.meta.frontmatter).filter(s=>s.path&&!e.includes(s.path)).map(s=>Object.assign({path:s.path,excerpt:s.meta.excerpt},s.meta.frontmatter||{}))})}function tw(r={}){const t=Jx();return tt(()=>{const e=t.value.filter(n=>{var o,a;return((o=n.path)==null?void 0:o.startsWith("/posts"))&&!((a=n.path)!=null&&a.endsWith(".html"))&&n.date&&(!r.type||n.type===r.type)&&(!n.hide||n.hide==="index")}),i=Od(e.filter(n=>n.top)).sort((n,o)=>o.top-n.top),s=Od(e.filter(n=>!n.top));return i.concat(s)})}function ew(){const r=lu();return tt(()=>{const t=new Map;return r.postList.forEach(e=>{if(e.tags){let i;typeof e.tags=="string"?i=[e.tags]:i=e.tags,i.forEach(s=>{if(t.has(s)){const n=t.get(s);t.set(s,{...n,count:n.count+1})}else t.set(s,{count:1})})}}),t})}function rw(r={offset:100}){if(!Pr)return{percentage:_t(0),show:_t(!1)};const{y:t}=du(),e=tt(()=>t.value/(document.body.scrollHeight-window.innerHeight)),i=tt(()=>t.value>r.offset);return{percentage:e,show:i,backToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}}const iw={};function sw(r,t){const e=je("RouterView");return W(),zt(e)}const nw=me(iw,[["render",sw]]),$d={404:()=>pe(()=>import("./404.CZVRuG-n.js"),__vite__mapDeps([1,2,3,4,5,6,7,8])),default:nw,empty:()=>pe(()=>import("./empty.CWWz1j03.js"),__vite__mapDeps([9,3])),post:()=>pe(()=>import("./post.CWWz1j03.js"),__vite__mapDeps([10,3])),anime:()=>pe(()=>import("./anime.bxUsHUM8.js"),__vite__mapDeps([11,12,13,3,4,14,2,6,5,7,15])),archives:()=>pe(()=>import("./archives.BHPRVV9G.js"),__vite__mapDeps([16,12,13,3,4,14,5,2,6,7,17])),categories:()=>pe(()=>import("./categories.DHksslv6.js"),__vite__mapDeps([18,12,13,3,4,14,19,20,5,21,22,2,6,7,23])),comment:()=>pe(()=>import("./comment.DRq-mR3z.js"),__vite__mapDeps([24,12,13,3,4,14,25,2,6,5,7,26])),home:()=>pe(()=>import("./home.DNoWjMXA.js"),__vite__mapDeps([27,3,4,13,19,20,5,21,22,2,25,6,7,28])),links:()=>pe(()=>import("./links.BLoMsg3g.js"),__vite__mapDeps([29,12,13,3,4,14,2,6,5,7,30])),post:()=>pe(()=>import("./post.DDuAjm8m.js"),__vite__mapDeps([31,12,13,3,4,14,5,32,2,20,21,6,7,33])),search:()=>pe(()=>import("./search.D4FXMx8x.js"),__vite__mapDeps([34,3,2,4,6,5,7,35])),tags:()=>pe(()=>import("./tags.YiLo_QEQ.js"),__vite__mapDeps([36,12,13,3,4,14,19,20,5,21,22,2,6,7,37]))};function ow(r){function t(e,i=!0){return e.map(s=>{var n,o,a,l,u,d;if(((n=s.children)==null?void 0:n.length)>0&&(s.children=t(s.children,!1)),i){if(!s.component&&((o=s.children)==null?void 0:o.find(m=>{var v;return(m.path===""||m.path==="/")&&((v=m.meta)==null?void 0:v.isLayout)})))return s;if(((a=s.meta)==null?void 0:a.layout)!==!1)return{path:s.path,component:$d[((l=s.meta)==null?void 0:l.layout)||"default"],children:s.path==="/"?[s]:[{...s,path:""}],meta:{isLayout:!0}}}return(u=s.meta)!=null&&u.layout?{path:s.path,component:$d[(d=s.meta)==null?void 0:d.layout],children:[{...s,path:""}],meta:{isLayout:!0}}:s})}return t(r)}async function eg(r,t={}){const e=t.document||r.resolvedOptions.document;if(!e||!r.dirty)return;const i={shouldRender:!0,tags:[]};if(await r.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return r._domUpdatePromise||(r._domUpdatePromise=new Promise(async s=>{var v;const n=new Map,o=new Promise(y=>{r.resolveTags().then(b=>{y(b.map(w=>{const S=n.get(w._d)||0,C={tag:w,id:(S?`${w._d}:${S}`:w._d)||Md(w),shouldRender:!0};return w._d&&xm(w._d)&&n.set(w._d,S+1),C}))})});let a=r._dom;if(!a){a={title:e.title,elMap:new Map().set("htmlAttrs",e.documentElement).set("bodyAttrs",e.body)};for(const y of["body","head"]){const b=(v=e[y])==null?void 0:v.children;for(const w of b){const S=w.tagName.toLowerCase();if(!Ad.has(S))continue;const C=wm({tag:S,props:{}},{innerHTML:w.innerHTML,...w.getAttributeNames().reduce((E,R)=>(E[R]=w.getAttribute(R),E),{})||{}});if(C.key=w.getAttribute("data-hid")||void 0,C._d=Mc(C)||Md(C),a.elMap.has(C._d)){let E=1,R=C._d;for(;a.elMap.has(R);)R=`${C._d}:${E++}`;a.elMap.set(R,w)}else a.elMap.set(C._d,w)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(y,b,w){const S=`${y}:${b}`;a.sideEffects[S]=w,delete a.pendingSideEffects[S]}function u({id:y,$el:b,tag:w}){const S=w.tag.endsWith("Attrs");a.elMap.set(y,b),S||(w.textContent&&w.textContent!==b.textContent&&(b.textContent=w.textContent),w.innerHTML&&w.innerHTML!==b.innerHTML&&(b.innerHTML=w.innerHTML),l(y,"el",()=>{b==null||b.remove(),a.elMap.delete(y)}));for(const C in w.props){if(!Object.prototype.hasOwnProperty.call(w.props,C))continue;const E=w.props[C];if(C.startsWith("on")&&typeof E=="function"){const k=b==null?void 0:b.dataset;if(k&&k[`${C}fired`]){const N=C.slice(0,-5);E.call(b,new Event(N.substring(2)))}b.getAttribute(`data-${C}`)!==""&&((w.tag==="bodyAttrs"?e.defaultView:b).addEventListener(C.substring(2),E.bind(b)),b.setAttribute(`data-${C}`,""));continue}const R=`attr:${C}`;if(C==="class"){if(!E)continue;for(const k of E)S&&l(y,`${R}:${k}`,()=>b.classList.remove(k)),!b.classList.contains(k)&&b.classList.add(k)}else if(C==="style"){if(!E)continue;for(const[k,N]of E)l(y,`${R}:${k}`,()=>{b.style.removeProperty(k)}),b.style.setProperty(k,N)}else E!==!1&&E!==null&&(b.getAttribute(C)!==E&&b.setAttribute(C,E===!0?"":String(E)),S&&l(y,R,()=>b.removeAttribute(C)))}}const d=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},m=await o;for(const y of m){const{tag:b,shouldRender:w,id:S}=y;if(w){if(b.tag==="title"){e.title=b.textContent,l("title","",()=>e.title=a.title);continue}y.$el=y.$el||a.elMap.get(S),y.$el?u(y):Ad.has(b.tag)&&d.push(y)}}for(const y of d){const b=y.tag.tagPosition||"head";y.$el=e.createElement(y.tag.tag),u(y),f[b]=f[b]||e.createDocumentFragment(),f[b].appendChild(y.$el)}for(const y of m)await r.hooks.callHook("dom:renderTag",y,e,l);f.head&&e.head.appendChild(f.head),f.bodyOpen&&e.body.insertBefore(f.bodyOpen,e.body.firstChild),f.bodyClose&&e.body.appendChild(f.bodyClose);for(const y in a.pendingSideEffects)a.pendingSideEffects[y]();r._dom=a,await r.hooks.callHook("dom:rendered",{renders:m}),s()}).finally(()=>{r._domUpdatePromise=void 0,r.dirty=!1})),r._domUpdatePromise}function aw(r={}){var i,s,n;const t=((i=r.domOptions)==null?void 0:i.render)||eg;r.document=r.document||(typeof window<"u"?document:void 0);const e=((n=(s=r.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:n.innerHTML)||!1;return qb({...r,plugins:[...r.plugins||[],{key:"client",hooks:{"entries:updated":t}}],init:[e?JSON.parse(e):!1,...r.init||[]]})}function lw(r,t){let e=0;return()=>{const i=++e;t(()=>{e===i&&r()})}}function cw(r={}){const t=aw({domOptions:{render:lw(()=>eg(t),e=>setTimeout(e,0))},...r});return t.install=Zb(t),t}function hw(r){return document.readyState==="loading"?new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>t(r))}):Promise.resolve(r)}const uw=It({setup(r,{slots:t}){const e=_t(!1);return Xr(()=>e.value=!0),()=>e.value?t.default&&t.default({}):t.placeholder&&t.placeholder({})}});function dw(r){try{return JSON.parse(r||"{}")}catch(t){return console.error("[SSG] On state deserialization -",t,r),{}}}function pw(r,t,e,i){const{transformState:s,registerComponents:n=!0,useHead:o=!0,rootContainer:a="#app"}={};async function l(u=!1,d){const f=hm(r);let m;o&&f.use(m=cw());const v=g0({history:v0(t.base),...t}),{routes:y}=t;n&&f.component("ClientOnly",uw);const b=[],C={app:f,head:m,isClient:!0,router:v,routes:y,onSSRAppRendered:()=>{},triggerOnSSRAppRendered:()=>Promise.all(b.map(N=>N())),initialState:{},transformState:s,routePath:d};await hw(),C.initialState=(s==null?void 0:s(window.__INITIAL_STATE__||{}))||dw(window.__INITIAL_STATE__),await(e==null?void 0:e(C)),f.use(v);let E,R=!0;v.beforeEach((N,P,O)=>{(R||E&&E===N.path)&&(R=!1,E=N.path,N.meta.state=C.initialState),O()});const k=C.initialState;return{...C,initialState:k}}return(async()=>{const{app:u,router:d}=await l();await d.isReady(),u.mount(a,!0)})(),l}function pu(r,t){r&&Object.entries(t).forEach(([e,i])=>{r[e]&&i()})}function fw(){const r=document.querySelector(".aplayer.aplayer-fixed .aplayer-body"),t=document.querySelector(".aplayer-body .aplayer-miniswitcher .aplayer-icon");let e=!0;function i(){e=!e}function s(){e&&(r.style.left="-66px")}function n(){r.style.left="0"}fe(r,"mouseenter",n),fe(r,"mouseleave",s),fe(t,"click",i)}function rg(r,t){const e=document.querySelector(".aplayer.aplayer-fixed.aplayer-narrow .aplayer-body");e&&(r===Fc.metingLoadBefore?e.style.display="initial":r===Fc.metingLoad&&(e.style.left=t))}function ig(r){rg(r,"0")}function mw(r){rg(r,"-66px")}var Fc=(r=>(r.metingInit="metingInit",r.metingLoadBefore="metingLoadBefore",r.metingLoad="metingLoad",r))(Fc||{});function gw({options:r}){pu(r,{animationIn:()=>Xr(()=>pe(()=>Promise.resolve({}),__vite__mapDeps([38])))})}function vw({options:r}){pu(r,{animationIn:()=>ig("metingLoadBefore")})}function yw({options:r}){pu(r,{lyricHidden:()=>_w(),animationIn:()=>{ig("metingLoad")},autoHidden:()=>{fw(),mw("metingLoad")}})}function _w(){const r=new MutationObserver(t=>{const e=document.querySelector(".aplayer-lrc .aplayer-lrc-contents .aplayer-lrc-current"),i=document.querySelector(".aplayer-icon-lrc");function s(){e&&(e.style.display="none",e.textContent!=="Loading"&&(i.click(),e.style.display="",r==null||r.disconnect()))}t.forEach(n=>{s()})});r.observe(document.body,{childList:!0,subtree:!0})}function bw(r){let t=!1,e;Xr(()=>{e=new MutationObserver(i=>{function s(){if(t)return;document.querySelector(".aplayer.aplayer-fixed.aplayer-narrow .aplayer-body")&&(t=!0,setTimeout(()=>{vw(r),requestAnimationFrame(()=>{yw(r),e==null||e.disconnect(),e=null})},0))}i.forEach(n=>{s()})}),e.observe(document.body,{childList:!0,subtree:!0})}),lm(()=>{e==null||e.disconnect(),e=null})}function sg(){const r=au();return tt(()=>r.value.addons["valaxy-addon-meting"])}function xw(){const r=Ve(),t=sg(),e=tt(()=>r.value.cdn.prefix);On({link:[{rel:"stylesheet",href:`${e.value}aplayer/dist/APlayer.min.css`}]}),Ud(`${e.value}aplayer/dist/APlayer.min.js`,()=>{Ud(`${e.value}meting@2/dist/Meting.min.js`)}),gw(t.value),bw(t.value)}function ww(){const r=Wi(),t=sg(),e=Da(),i=_t(!0);return qt(()=>r.path,()=>{var s,n;i.value=((s=e.value)==null?void 0:s.aplayer)??((n=t.value)==null?void 0:n.global)??!0},{immediate:!0}),i}const Tw=It({__name:"App",props:{id:{default:"308168565"},server:{default:"netease"},type:{default:"playlist"}},setup(r){const t=r;xw();const e=ww();return(i,s)=>(W(),at(Ie,null,[At(" eslint-disable-next-line vue/component-name-in-template-casing "),_n(vt("meting-js",Hr(t,{fixed:!0}),null,16),[[Xo,Q(e)]])],2112))}});class Ew{constructor(t){it(this,"live2dTips");it(this,"messageArray",[]);it(this,"messageTimer",null);this.live2dTips=t}init(){this.setupEvents(),this.setupSeasonalTips(this.live2dTips.seasons),this.welcomeMessage(),this.activityBasedMessages(),this.setupAdditionalEvents(),this.showMessage(this.generateReferrerMessage(),7e3,10)}setupEvents(){this.setupEventHandlers(this.live2dTips.mouseover,"mouseover"),this.setupEventHandlers(this.live2dTips.click,"click")}setupEventHandlers(t,e){t.forEach(i=>{window.addEventListener(e,s=>{const n=s.target;if(n.matches(i.selector)){const o=this.randomSelection(i.text).replace("{text}",n.textContent||"");this.showMessage(o,4e3,8)}})})}setupSeasonalTips(t){const e=new Date;t.forEach(i=>{const[s,n]=i.date.split("-"),[o,a]=s.split("/").map(Number),[l,u]=n?n.split("/").map(Number):[o,a],d=e.getMonth()+1,f=e.getDate();if(o<=d&&d<=l&&a<=f&&f<=u){let m=this.randomSelection(i.text);m=m.replace("{year}",String(e.getFullYear())),this.showMessage(m,7e3,100),this.messageArray.push(m)}})}randomSelection(t){return Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:t}welcomeMessage(){const t=new Date().getHours();let e;const i=this.live2dTips.time;for(let s=0;s<i.length;s++){const n=i[s].hour.split("-"),o=Number.parseInt(n[0]),a=Number.parseInt(n[1]);if(t>=o&&t<=a){const l=i[s].text;Array.isArray(l)?e=this.randomSelection(l):e=l;break}}setTimeout(()=>{this.showMessage(e,7e3,8)},3e3)}generateReferrerMessage(){var t,e;if(document.referrer!==""){const i=new URL(document.referrer),s=i.hostname.split(".")[1];if(location.hostname===i.hostname)return`Ê¨¢ËøéÈòÖËØª<span>„Äå${document.title.split(" - ")[0]}„Äç</span>`;{const n=i.search.split("&");return s==="baidu"?`HelloÔºÅÊù•Ëá™ ÁôæÂ∫¶ÊêúÁ¥¢ ÁöÑÊúãÂèã<br>‰Ω†ÊòØÊêúÁ¥¢ <span>${(t=n.find(o=>o.startsWith("wd=")))==null?void 0:t.split("=")[1]}</span> ÊâæÂà∞ÁöÑÊàëÂêóÔºü`:s==="so"?`HelloÔºÅÊù•Ëá™ 360ÊêúÁ¥¢ ÁöÑÊúãÂèã<br>‰Ω†ÊòØÊêúÁ¥¢ <span>${(e=n.find(o=>o.startsWith("q=")))==null?void 0:e.split("=")[1]}</span> ÊâæÂà∞ÁöÑÊàëÂêóÔºü`:s==="google"?`HelloÔºÅÊù•Ëá™ Ë∞∑Ê≠åÊêúÁ¥¢ ÁöÑÊúãÂèã<br>Ê¨¢ËøéÈòÖËØª<span>„Äå${document.title.split(" - ")[0]}„Äç</span>`:`HelloÔºÅÊù•Ëá™ <span>${i.hostname}</span> ÁöÑÊúãÂèã`}}else return`Ê¨¢ËøéÈòÖËØª<span>„Äå${document.title.split(" - ")[0]}„Äç</span>`}activityBasedMessages(){let t=!1,e=null;const i=this.live2dTips.message.default;window.addEventListener("mousemove",()=>t=!0),window.addEventListener("keydown",()=>t=!0),setInterval(()=>{t?(t=!1,e!==null&&(clearInterval(e),e=null)):e||(e=setInterval(()=>{this.showMessage(this.randomSelection(i),6e3,9)},2e4))},1e3)}setupAdditionalEvents(){window.addEventListener("copy",()=>{this.showMessage(this.live2dTips.message.copy,6e3,9)}),window.addEventListener("visibilitychange",()=>{document.hidden||this.showMessage(this.live2dTips.message.visibilitychange,6e3,9)})}showHitokoto(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{const e=`ËøôÂè•‰∏ÄË®ÄÊòØ <span>${t.creator}</span>ÊäïÁ®øÁöÑ„ÄÇ`;this.showMessage(t.hitokoto,6e3,9),setTimeout(()=>{this.showMessage(e,4e3,9)},6e3)})}showMessage(t,e=3e3,i){const s=document.getElementById("live2d-tips");if(!t){s.classList.remove("live2d-tips-active");return}const n=sessionStorage.getItem("live2d-text");Number(n)<=i&&(this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null),sessionStorage.setItem("live2d-text",i.toString()),s.innerHTML=typeof t=="string"?t:this.randomSelection(t),s.classList.add("live2d-tips-active"),this.messageTimer=window.setTimeout(()=>{sessionStorage.removeItem("live2d-text"),s.classList.remove("live2d-tips-active")},e))}}function Gd(r,t,e){let i="";{const s=new Date;s.setTime(s.getTime()+24*e*60*60*1e3),i=`; expires=${s.toUTCString()}`}document.cookie=`${encodeURIComponent(r)}=${encodeURIComponent(t)}${i}; path=/`}function Hd(r){const t=`${encodeURIComponent(r)}=`,e=document.cookie.split(";");for(let i of e)if(i=i.trim(),i.startsWith(t))return decodeURIComponent(i.substring(t.length));return null}async function Sw(r){try{const t=await fetch(r);if(!t.ok)throw new Error(`ËØ∑Ê±ÇÂ§±Ë¥•ÔºåÁä∂ÊÄÅÁ†Å: ${t.status}`);return await t.json()}catch(t){return console.error(`ËØ∑Ê±ÇÊàñËß£ÊûêÈîôËØØ: ${t}`),null}}function ng(r){const t=/https:\/\/cdn\.jsdelivr\.net\/gh\/([\w-]+)\/([\w-]+)\/([\w\-/]+)\/index\.json/,e=r.match(t);if(e){const i=e[1],s=e[2],n=e[3];return`https://api.github.com/repos/${i}/${s}/contents/${n}/textures`}else throw new Error("URLÊ†ºÂºè‰∏çÊ≠£Á°Æ")}async function og(r){const t=`live2d-cache-${r}`,e=`live2d-cacheTime-${r}`,i=24*60*60*1e3,s=localStorage.getItem(t),n=localStorage.getItem(e);if(s&&n&&Date.now()-Number.parseInt(n)<i)return JSON.parse(s);try{const o=await fetch(r);if(!o.ok)throw new Error(`Network request failed, status code: ${o.status}`);const a=await o.json();if(!Array.isArray(a))throw new TypeError("ÁõÆÂΩïÂÜÖÂÆπËé∑ÂèñÂ§±Ë¥•");const l=a.map(u=>u.name);return localStorage.setItem(t,JSON.stringify(l)),localStorage.setItem(e,Date.now().toString()),l}catch(o){throw console.error("Ëé∑ÂèñÊñá‰ª∂ÂêçÂ§±Ë¥•:",o),o}}const ag="modelKey",lg="skinKey";async function oo(r){const t=localStorage.getItem(ag),e=localStorage.getItem(lg),i=t||Object.keys(r)[0];let s=Number.parseInt(e||"0",10),n=r[i];if(!n){const a=Object.keys(r)[0];n=r[a],ds(Object.keys(r)[0],0),console.warn(`ÁºìÂ≠ò‰∏≠ÁöÑ‰∫∫Áâ©KeyÂÄº"${i}"‰∏çÂ≠òÂú®ÔºåÂ∑≤ÂàùÂßãÂåñ‰∏∫ÈªòËÆ§ÂÄº`)}s>=n.models.length&&(s=0,console.warn("ÁöÆËÇ§Á¥¢ÂºïË∂äÁïåÔºåÂ∑≤ÂàùÂßãÂåñÁöÆËÇ§Á¥¢Âºï„ÄÇÂ¶ÇÊûúËøôÊòØÁî±‰∫éÊÇ®Âà†Èô§‰∫ÜÊüê‰∫õ‰∫∫Áâ© models ÂØºËá¥ÁöÑÔºåËØ∑ÊîæÂøÉÂøΩÁï•Ê≠§Ê∂àÊÅØ"));const o=typeof n.models=="string"?await Oo(n.models,s):n.models[s];return{currentCharacterKey:i,currentSkinIndex:s,availableModels:n,selectedModel:o}}function ds(r,t){r!==null&&localStorage.setItem(ag,r.toString()),t!==null&&localStorage.setItem(lg,t.toString())}async function Oo(r,t){const e=ng(r);try{const i=await og(e),s=await Sw(r);return s.url=r,s.textures[0]=`textures/${i[t]}`,ds(null,t),s}catch(i){console.error(i)}}const Aw={XiaoYun:{message:"Êù•Ëá™‰∫ëÊ∏∏ÂêõÁöÑÂ∞è‰∫ë ~",models:["https://cdn.jsdelivr.net/npm/@yunyoujun/live2d@latest/Â∞è‰∫ë.model3.json"]},Tia:{message:"Êù•Ëá™ Potion Maker ÁöÑ Tia ÈÖ± ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Tia/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Tia/textures"},Pio:{message:"Êù•Ëá™ Potion Maker ÁöÑ Pio ÈÖ± ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Pio/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Pio/textures"},ShizukuTalk:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-48/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-pajama/index.json"]},BiliBili22:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/22/index.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.cba-normal.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.newyear.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.school.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.2.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.high.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.low.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.valley.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.vdays.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.lover.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.spring.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.default.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.2.model.json"]},BiliBili33:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/33/index.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.cba-normal.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.newyear.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.school.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.high.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.low.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.valley.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.vdays.json","https://summerscar.me/live2dDemo/assets/33.default/model.2018.lover.json","https://summerscar.me/live2dDemo/assets/33.defaultmodel.2018.spring.json"]}},Cw={mouseover:[{selector:"#live2d-canvas",text:["Âπ≤ÂòõÂë¢‰Ω†ÔºåÂø´ÊääÊâãÊãøÂºÄÔΩûÔΩû","Èº†‚Ä¶Èº†Ê†áÊîæÈîôÂú∞Êñπ‰∫ÜÔºÅ","‰Ω†Ë¶ÅÂπ≤ÂòõÂëÄÔºü","ÂñµÂñµÂñµÔºü","ÊÄïÊÄï(„Éé‚âß‚àá‚â¶)„Éé","ÈùûÁ§ºÂëÄÔºÅÊïëÂëΩÔºÅ","ËøôÊ†∑ÁöÑËØùÔºåÂè™ËÉΩ‰ΩøÁî®Ê≠¶Âäõ‰∫ÜÔºÅ","ÊàëË¶ÅÁîüÊ∞î‰∫ÜÂì¶","‰∏çË¶ÅÂä®ÊâãÂä®ËÑöÁöÑÔºÅ","Áúü‚Ä¶ÁúüÁöÑÊòØ‰∏çÁü•ÁæûËÄªÔºÅ","HentaiÔºÅ"]},{selector:"#live2d-tool-hitokoto",text:["ÁåúÁåúÊàëË¶ÅËØ¥‰∫õ‰ªÄ‰πàÔºü","Êàë‰ªéÈùíËõôÁéãÂ≠êÈÇ£ÈáåÂê¨Âà∞‰∫Ü‰∏çÂ∞ë‰∫∫ÁîüÁªèÈ™å„ÄÇ"]},{selector:"#live2d-tool-asteroids",text:["Ë¶Å‰∏çË¶ÅÊù•Áé©È£ûÊú∫Â§ßÊàòÔºü","Ëøô‰∏™ÊåâÈíÆ‰∏äÂÜôÁùÄ„Äå‰∏çË¶ÅÁÇπÂáª„Äç„ÄÇ","ÊÄé‰πàÔºå‰Ω†ÊÉ≥Êù•ÂíåÊàëÁé©‰∏™Ê∏∏ÊàèÔºü","Âê¨ËØ¥ËøôÊ†∑ÂèØ‰ª•Ëπ¶Ëø™ÔºÅ"]},{selector:"#live2d-tool-switch-model",text:["‰Ω†ÊòØ‰∏çÊòØ‰∏çÁà±‰∫∫ÂÆ∂‰∫ÜÂëÄÔºåÂëúÂëúÂëúÔΩû","Ë¶ÅËßÅËßÅÊàëÁöÑÂßêÂßêÂòõÔºü","ÊÉ≥Ë¶ÅÁúãÊàëÂ¶πÂ¶πÂòõÔºü","Ë¶ÅÂàáÊç¢ÁúãÊùøÂ®òÂêóÔºü"]},{selector:"#live2d-tool-switch-texture",text:["ÂñúÊ¨¢Êç¢Ë£Ö PLAY ÂêóÔºü","ËøôÊ¨°Ë¶ÅÊâÆÊºî‰ªÄ‰πàÂë¢Ôºü","ÂèòË£ÖÔºÅ","ËÆ©Êàë‰ª¨ÁúãÁúãÊé•‰∏ãÊù•‰ºöÂèëÁîü‰ªÄ‰πàÔºÅ"]},{selector:"#live2d-tool-photo",text:["‰Ω†Ë¶ÅÁªôÊàëÊãçÁÖßÂëÄÔºü‰∏Ä‰∫å‰∏âÔΩûËåÑÂ≠êÔΩû","Ë¶Å‰∏çÔºåÊàë‰ª¨Êù•ÂêàÂΩ±ÂêßÔºÅ","‰øùÊåÅÂæÆÁ¨ëÂ∞±Â•Ω‰∫ÜÔΩû"]},{selector:"#live2d-tool-info",text:["ÊÉ≥Ë¶ÅÁü•ÈÅìÊõ¥Â§öÂÖ≥‰∫éÊàëÁöÑ‰∫ã‰πàÔºü","ËøôÈáåËÆ∞ÂΩïÁùÄÊàëÊê¨ÂÆ∂ÁöÑÂéÜÂè≤Âë¢„ÄÇ","‰Ω†ÊÉ≥Ê∑±ÂÖ•‰∫ÜËß£Êàë‰ªÄ‰πàÂë¢Ôºü"]},{selector:"#live2d-tool-quit",text:["Âà∞‰∫ÜË¶ÅËØ¥ÂÜçËßÅÁöÑÊó∂ÂÄô‰∫ÜÂêóÔºü","ÂëúÂëú QAQ Âêé‰ºöÊúâÊúü‚Ä¶‚Ä¶","‰∏çË¶ÅÊäõÂºÉÊàëÂëÄ‚Ä¶‚Ä¶","Êàë‰ª¨ÔºåËøòËÉΩÂÜçËßÅÈù¢Âêó‚Ä¶‚Ä¶","ÂìºÔºå‰Ω†‰ºöÂêéÊÇîÁöÑÔºÅ"]},{selector:".menu-item-home a",text:["ÁÇπÂáªÂâçÂæÄÈ¶ñÈ°µÔºåÊÉ≥ÂõûÂà∞‰∏ä‰∏ÄÈ°µÂèØ‰ª•‰ΩøÁî®ÊµèËßàÂô®ÁöÑÂêéÈÄÄÂäüËÉΩÂì¶„ÄÇ","ÁÇπÂÆÉÂ∞±ÂèØ‰ª•ÂõûÂà∞È¶ñÈ°µÂï¶ÔºÅ","ÂõûÈ¶ñÈ°µÁúãÁúãÂêß„ÄÇ"]},{selector:".menu-item-about a",text:["‰Ω†ÊÉ≥Áü•ÈÅìÊàëÂÆ∂‰∏ª‰∫∫ÊòØË∞ÅÂêóÔºü","ËøôÈáåÊúâ‰∏Ä‰∫õÂÖ≥‰∫éÊàëÂÆ∂‰∏ª‰∫∫ÁöÑÁßòÂØÜÂì¶ÔºåË¶Å‰∏çË¶ÅÁúãÁúãÂë¢Ôºü","ÂèëÁé∞‰∏ª‰∫∫Âá∫Ê≤°Âú∞ÁÇπÔºÅ"]},{selector:".menu-item-tags a",text:["ÁÇπÂáªÂ∞±ÂèØ‰ª•ÁúãÊñáÁ´†ÁöÑÊ†áÁ≠æÂï¶ÔºÅ","ÁÇπÂáªÊù•Êü•ÁúãÊâÄÊúâÊ†áÁ≠æÂì¶„ÄÇ"]},{selector:".menu-item-categories a",text:["ÊñáÁ´†ÈÉΩÂàÜÁ±ªÂ•ΩÂï¶ÔΩû","ÁÇπÂáªÊù•Êü•ÁúãÊñáÁ´†ÂàÜÁ±ªÂì¶„ÄÇ"]},{selector:".menu-item-archives a",text:["ÁøªÈ°µÊØîËæÉÈ∫ªÁÉ¶ÂêóÔºåÈÇ£Â∞±Êù•ÁúãÁúãÊñáÁ´†ÂΩíÊ°£Âêß„ÄÇ","ÊñáÁ´†ÁõÆÂΩïÈÉΩÊï¥ÁêÜÂú®ËøôÈáåÂï¶ÔºÅ"]},{selector:".menu-item-friends a",text:["ËøôÊòØÊàëÁöÑÊúãÂèã‰ª¨Âì¶„Éæ(‚óç¬∞‚àá¬∞‚óç)ÔæâÔæû","Ë¶ÅÂéªÂ§ß‰Ω¨‰ª¨ÁöÑÂÆ∂ÁúãÁúãÂêóÔºü","Ë¶ÅÂéªÊãúËÆø‰∏Ä‰∏ãÊàëÁöÑÊúãÂèã‰ª¨ÂêóÔºü"]},{selector:".menu-item-search a",text:["Êâæ‰∏çÂà∞ÊÉ≥ÁúãÁöÑÂÜÖÂÆπÔºüÊêúÁ¥¢ÁúãÁúãÂêßÔºÅ","Âú®Êâæ‰ªÄ‰πà‰∏úË•øÂë¢ÔºåÈúÄË¶ÅÂ∏ÆÂøôÂêóÔºü"]},{selector:".menu-item a",text:["Âø´ÁúãÁúãËøôÈáåÈÉΩÊúâ‰ªÄ‰πàÂë¢Ôºü"]},{selector:".site-author",text:["ÊàëÂÆ∂‰∏ª‰∫∫Â•ΩÁúãÂêóÔºü","ËøôÊòØÊàëÂÆ∂‰∏ª‰∫∫(*¬¥‚àáÔΩÄ*)"]},{selector:".site-state",text:["ËøôÊòØÊñáÁ´†ÁöÑÁªüËÆ°‰ø°ÊÅØÔΩû","Ë¶Å‰∏çË¶ÅÁÇπËøõÂéªÁúãÁúãÔºü"]},{selector:".feed-link a",text:["ËøôÈáåÂèØ‰ª•‰ΩøÁî® RSS ËÆ¢ÈòÖÂë¢ÔºÅ","Âà©Áî® feed ËÆ¢ÈòÖÂô®ÔºåÂ∞±ËÉΩÂø´ÈÄüÁü•ÈÅìÂçöÂÆ¢ÊúâÊ≤°ÊúâÊõ¥Êñ∞‰∫ÜÂë¢„ÄÇ"]},{selector:".cc-opacity, .post-copyright-author",text:["Ë¶ÅËÆ∞ÂæóËßÑËåÉËΩ¨ËΩΩÂì¶„ÄÇ","ÊâÄÊúâÊñáÁ´†ÂùáÈááÁî® CC BY-NC-SA 4.0 ËÆ∏ÂèØÂçèËÆÆÔΩû","ËΩ¨ËΩΩÂâçË¶ÅÂÖàÊ≥®ÊÑè‰∏ãÊñáÁ´†ÁöÑÁâàÊùÉÂçèËÆÆÂë¢„ÄÇ"]},{selector:".links-of-author",text:["ËøôÈáåÊòØ‰∏ª‰∫∫ÁöÑÂ∏∏È©ªÂú∞ÂùÄÂì¶„ÄÇ","ËøôÈáåÊúâ‰∏ª‰∫∫ÁöÑËÅîÁ≥ªÊñπÂºèÔºÅ"]},{selector:".followme",text:["ÊâãÊú∫Êâ´‰∏Ä‰∏ãÂ∞±ËÉΩÁªßÁª≠ÁúãÔºåÂæàÊñπ‰æøÂë¢ÔΩû","Êâ´‰∏ÄÊâ´ÔºåÊâìÂºÄÊñ∞‰∏ñÁïåÁöÑÂ§ßÈó®ÔºÅ"]},{selector:".fancybox img, img.medium-zoom-image",text:["ÁÇπÂáªÂõæÁâáÂèØ‰ª•ÊîæÂ§ßÂë¢ÔºÅ"]},{selector:".copy-btn",text:["‰ª£Á†ÅÂèØ‰ª•Áõ¥Êé•ÁÇπÂáªÂ§çÂà∂Âìü„ÄÇ"]},{selector:".highlight .table-container, .gist",text:["GitHubÔºÅÊàëÊòØÊñ∞ÊâãÔºÅ","PHP ÊòØÊúÄÂ•ΩÁöÑËØ≠Ë®ÄÔºÅ"]},{selector:"a[href^='mailto']",text:["ÈÇÆ‰ª∂Êàë‰ºöÂèäÊó∂ÂõûÂ§çÁöÑÔºÅ","ÁÇπÂáªÂ∞±ÂèØ‰ª•ÂèëÈÄÅÈÇÆ‰ª∂Âï¶ÔΩû"]},{selector:"a[href^='/tags/']",text:["Ë¶ÅÂéªÁúãÁúã <span>{text}</span> Ê†áÁ≠æ‰πàÔºü","ÁÇπÂÆÉÂèØ‰ª•Êü•ÁúãÊ≠§Ê†áÁ≠æ‰∏ãÁöÑÊâÄÊúâÊñáÁ´†ÂìüÔºÅ"]},{selector:"a[href^='/categories/']",text:["Ë¶ÅÂéªÁúãÁúã <span>{text}</span> ÂàÜÁ±ª‰πàÔºü","ÁÇπÂÆÉÂèØ‰ª•Êü•ÁúãÊ≠§ÂàÜÁ±ª‰∏ãÁöÑÊâÄÊúâÊñáÁ´†ÂìüÔºÅ"]},{selector:".post-title-link",text:["Ë¶ÅÁúãÁúã <span>{text}</span> ËøôÁØáÊñáÁ´†ÂêóÔºü"]},{selector:"a[rel='contents']",text:["ÁÇπÂáªÊù•ÈòÖËØªÂÖ®ÊñáÂì¶„ÄÇ"]},{selector:"a[itemprop='discussionUrl']",text:["Ë¶ÅÂéªÁúãÁúãËØÑËÆ∫ÂêóÔºü"]},{selector:".beian a",text:["Êàë‰πüÊòØÊúâÊà∑Âè£ÁöÑ‰∫∫Âì¶„ÄÇ","ÊàëÁöÑ‰∏ª‰∫∫ÂèØÊòØÈÅµÁ∫™ÂÆàÊ≥ïÁöÑÂ•Ω‰∏ª‰∫∫„ÄÇ"]},{selector:".container a[href^='http'], .nav-link .nav-text",text:["Ë¶ÅÂéªÁúãÁúã <span>{text}</span> ‰πàÔºü","Âéª <span>{text}</span> ÈÄõÈÄõÂêß„ÄÇ","Âà∞ <span>{text}</span> ÁúãÁúãÂêß„ÄÇ"]},{selector:".back-to-top",text:["ÁÇπÂÆÉÂ∞±ÂèØ‰ª•ÂõûÂà∞È°∂ÈÉ®Âï¶ÔºÅ","ÂèàÂõûÂà∞ÊúÄÂàùÁöÑËµ∑ÁÇπÔΩû","Ë¶ÅÂõûÂà∞ÂºÄÂßãÁöÑÂú∞Êñπ‰πàÔºü"]},{selector:".reward-container",text:["ÊàëÊòØ‰∏çÊòØÊ£íÊ£íÂìíÔΩûÂø´ÁªôÊàëÁÇπËµûÂêßÔºÅ","Ë¶ÅÊâìËµèÊàëÂòõÔºüÂ•ΩÊúüÂæÖÂïäÔΩû","‰∏ª‰∫∫ÊúÄËøëÂú®ÂêÉÂúüÂë¢ÔºåÂæàËæõËã¶ÁöÑÊ†∑Â≠êÔºåÁªô‰ªñ‰∏Ä‰∫õÈí±Èí±ÂêßÔΩû"]},{selector:"#wechat",text:["ËøôÊòØÊàëÁöÑÂæÆ‰ø°‰∫åÁª¥Á†ÅÔΩû"]},{selector:"#alipay",text:["ËøôÊòØÊàëÁöÑÊîØ‰ªòÂÆùÂì¶ÔºÅ"]},{selector:"#bitcoin",text:["ËøôÊòØÊàëÁöÑÊØîÁâπÂ∏ÅË¥¶Âè∑ÔºÅ"]},{selector:"#needsharebutton-postbottom .btn",text:["Â•Ω‰∏úË•øË¶ÅËÆ©Êõ¥Â§ö‰∫∫Áü•ÈÅìÊâçË°åÂì¶„ÄÇ","ËßâÂæóÊñáÁ´†ÊúâÂ∏ÆÂä©ÁöÑËØùÔºåÂèØ‰ª•ÂàÜ‰∫´ÁªôÊõ¥Â§öÈúÄË¶ÅÁöÑÊúãÂèãÂë¢„ÄÇ"]},{selector:".need-share-button_weibo",text:["ÂæÆÂçöÔºüÊù•ÂàÜ‰∫´‰∏ÄÊ≥¢ÂñµÔºÅ"]},{selector:".need-share-button_wechat",text:["ÂàÜ‰∫´Âà∞ÂæÆ‰ø°ÂêßÔºÅ"]},{selector:".need-share-button_douban",text:["ÂàÜ‰∫´Âà∞Ë±ÜÁì£Â•ΩÂÉè‰πü‰∏çÈîôÔºÅ"]},{selector:".need-share-button_qqzone",text:["QQ Á©∫Èó¥Ôºå‰∏ÄÈîÆËΩ¨ÂèëÔºåËÄ∂ÔΩû"]},{selector:".need-share-button_twitter",text:["TwitterÔºüÂ•ΩÂÉèÊòØ‰∏çÂ≠òÂú®ÁöÑ‰∏úË•øÔºü"]},{selector:".need-share-button_facebook",text:["emmm‚Ä¶FB Â•ΩÂÉè‰πüÊòØ‰∏çÂ≠òÂú®ÁöÑ‰∏úË•øÔºü"]},{selector:".post-nav-item a[rel='next']",text:["Êù•ÁúãÁúã‰∏ã‰∏ÄÁØáÊñáÁ´†Âêß„ÄÇ","ÁÇπÂÆÉÂèØ‰ª•Áúã‰∏ã‰∏ÄÁØáÊñáÁ´†Âì¶ÔºÅ","Ë¶ÅÁøªÂà∞‰∏ã‰∏ÄÁØáÊñáÁ´†ÂêóÔºü"]},{selector:".post-nav-item a[rel='prev']",text:["Êù•ÁúãÁúã‰∏ä‰∏ÄÁØáÊñáÁ´†Âêß„ÄÇ","ÁÇπÂÆÉÂèØ‰ª•Áúã‰∏ä‰∏ÄÁØáÊñáÁ´†Âì¶ÔºÅ","Ë¶ÅÁøªÂà∞‰∏ä‰∏ÄÁØáÊñáÁ´†ÂêóÔºü"]},{selector:".extend.next",text:["Âéª‰∏ã‰∏ÄÈ°µÁúãÁúãÂêß„ÄÇ","ÁÇπÂÆÉÂèØ‰ª•ÂâçËøõÂì¶ÔºÅ","Ë¶ÅÁøªÂà∞‰∏ã‰∏ÄÈ°µÂêóÔºü"]},{selector:".extend.prev",text:["Âéª‰∏ä‰∏ÄÈ°µÁúãÁúãÂêß„ÄÇ","ÁÇπÂÆÉÂèØ‰ª•ÂêéÈÄÄÂì¶ÔºÅ","Ë¶ÅÁøªÂà∞‰∏ä‰∏ÄÈ°µÂêóÔºü"]},{selector:"input.vnick",text:["ËØ•ÊÄé‰πàÁß∞Âëº‰Ω†Âë¢Ôºü","Áïô‰∏ã‰Ω†ÁöÑÂ∞äÂßìÂ§ßÂêçÔºÅ"]},{selector:".vmail",text:["Áïô‰∏ã‰Ω†ÁöÑÈÇÆÁÆ±Ôºå‰∏çÁÑ∂Â∞±ÊòØÊó†Â§¥ÂÉè‰∫∫Â£´‰∫ÜÔºÅ","ËÆ∞ÂæóËÆæÁΩÆÂ•Ω Gravatar Â§¥ÂÉèÂì¶ÔºÅ","‰∏∫‰∫ÜÊñπ‰æøÈÄöÁü•‰Ω†ÊúÄÊñ∞Ê∂àÊÅØÔºå‰∏ÄÂÆöË¶ÅÁïô‰∏ãÈÇÆÁÆ±ÔºÅ"]},{selector:".vlink",text:["Âø´Âø´ÂëäËØâÊàë‰Ω†ÁöÑÂÆ∂Âú®Âì™ÈáåÔºåÂ•ΩËÆ©ÊàëÂéªÂèÇËßÇÂèÇËßÇÔºÅ"]},{selector:".veditor",text:["ÊÉ≥Ë¶ÅÂéªËØÑËÆ∫‰∫õ‰ªÄ‰πàÂêóÔºü","Ë¶ÅËØ¥ÁÇπ‰ªÄ‰πàÂêóÔºü","ËßâÂæóÂçöÂÆ¢‰∏çÈîôÔºüÂø´Êù•ÁïôË®ÄÂíå‰∏ª‰∫∫‰∫§ÊµÅÂêßÔºÅ"]},{selector:".vcontrol a",text:["‰Ω†‰ºö‰∏ç‰ºöÁÜüÁªÉ‰ΩøÁî® Markdown ÂëÄÔºü","‰ΩøÁî® Markdown ËÆ©ËØÑËÆ∫Êõ¥ÁæéËßÇÂêßÔΩû"]},{selector:".vemoji-btn",text:["Ë¶ÅÊèíÂÖ•‰∏Ä‰∏™ËêåËêåÂìíÁöÑË°®ÊÉÖÂêóÔºü","Ë¶ÅÊù•‰∏ÄÂèëË°®ÊÉÖÂêóÔºü"]},{selector:".vpreview-btn",text:["Ë¶ÅÈ¢ÑËßà‰∏Ä‰∏ã‰Ω†ÁöÑÂèëË®ÄÂêóÔºü","Âø´ÁúãÁúã‰Ω†ÁöÑËØÑËÆ∫ÊúâÂ§öÂ∞ëË¥üÁÜµÔºÅ"]},{selector:".vsubmit",text:["ËØÑËÆ∫Ê≤°ÊúâÂÆ°Ê†∏ÔºåË¶ÅÂØπËá™Â∑±ÁöÑÂèëË®ÄË¥üË¥£Âì¶ÔΩû","Ë¶ÅÊèê‰∫§‰∫ÜÂêóÔºåËØ∑ËÄêÂøÉÁ≠âÂæÖÂõûÂ§çÂì¶ÔΩû"]},{selector:".vcontent",text:["ÂìáÔºåÂø´ÁúãÁúãËøô‰∏™Á≤æÂΩ©ËØÑËÆ∫ÔºÅ","Â¶ÇÊûúÊúâÁñëÈóÆÔºåËØ∑Â∞ΩÂø´ÁïôË®ÄÂì¶ÔΩû"]}],click:[{selector:"#live2d",text:["ÊòØ‚Ä¶ÊòØ‰∏çÂ∞èÂøÉÁ¢∞Âà∞‰∫ÜÂêß‚Ä¶","ËêùËéâÊéßÊòØ‰ªÄ‰πàÂëÄÔºü","‰Ω†ÁúãÂà∞ÊàëÁöÑÂ∞èÁÜä‰∫ÜÂêóÔºü","ÂÜçÊë∏ÁöÑËØùÊàëÂèØË¶ÅÊä•Ë≠¶‰∫ÜÔºÅ‚åá‚óèÔπè‚óè‚åá","110 ÂêóÔºåËøôÈáåÊúâ‰∏™ÂèòÊÄÅ‰∏ÄÁõ¥Âú®Êë∏Êàë(√≥Ôπè√≤ÔΩ°)","‰∏çË¶ÅÊë∏Êàë‰∫ÜÔºåÊàë‰ºöÂëäËØâËÄÅÂ©ÜÊù•Êâì‰Ω†ÁöÑÔºÅ","Âπ≤ÂòõÂä®ÊàëÂëÄÔºÅÂ∞èÂøÉÊàëÂí¨‰Ω†ÔºÅ","Âà´Êë∏ÊàëÔºåÊúâ‰ªÄ‰πàÂ•ΩÊë∏ÁöÑÔºÅ"]},{selector:".veditor",text:["Ë¶ÅÂêêÊßΩ‰∫õ‰ªÄ‰πàÂë¢Ôºü","‰∏ÄÂÆöË¶ÅËÆ§ÁúüÂ°´ÂÜôÂñµÔΩû","Êúâ‰ªÄ‰πàÊÉ≥ËØ¥ÁöÑÂêóÔºü"]},{selector:".vsubmit",text:["ËæìÂÖ•È™åËØÅÁ†ÅÂ∞±ÂèØ‰ª•Êèê‰∫§ËØÑËÆ∫Âï¶ÔΩû"]}],seasons:[{date:"01/01",text:"<span>ÂÖÉÊó¶</span>‰∫ÜÂë¢ÔºåÊñ∞ÁöÑ‰∏ÄÂπ¥ÂèàÂºÄÂßã‰∫ÜÔºå‰ªäÂπ¥ÊòØ{year}Âπ¥ÔΩû"},{date:"02/14",text:"ÂèàÊòØ‰∏ÄÂπ¥<span>ÊÉÖ‰∫∫ËäÇ</span>Ôºå{year}Âπ¥ÊâæÂà∞ÂØπË±°‰∫ÜÂòõÔΩû"},{date:"03/08",text:"‰ªäÂ§©ÊòØ<span>ÂõΩÈôÖÂ¶áÂ•≥ËäÇ</span>ÔºÅ"},{date:"03/12",text:"‰ªäÂ§©ÊòØ<span>Ê§çÊ†ëËäÇ</span>ÔºåË¶Å‰øùÊä§ÁéØÂ¢ÉÂëÄÔºÅ"},{date:"04/01",text:"ÊÇÑÊÇÑÂëäËØâ‰Ω†‰∏Ä‰∏™ÁßòÂØÜÔΩû<span>‰ªäÂ§©ÊòØÊÑö‰∫∫ËäÇÔºå‰∏çË¶ÅË¢´È™ó‰∫ÜÂì¶ÔΩû</span>"},{date:"05/01",text:"‰ªäÂ§©ÊòØ<span>‰∫î‰∏ÄÂä≥Âä®ËäÇ</span>ÔºåËÆ°ÂàíÂ•ΩÂÅáÊúüÂéªÂì™Èáå‰∫ÜÂêóÔΩû"},{date:"06/01",text:"<span>ÂÑøÁ´•ËäÇ</span>‰∫ÜÂë¢ÔºåÂø´Ê¥ªÁöÑÊó∂ÂÖâÊÄªÊòØÁü≠ÊöÇÔºåË¶ÅÊòØÊ∞∏ËøúÈïø‰∏çÂ§ßËØ•Â§öÂ•ΩÂïä‚Ä¶"},{date:"09/03",text:"<span>‰∏≠ÂõΩ‰∫∫Ê∞ëÊäóÊó•Êàò‰∫âËÉúÂà©Á∫™ÂøµÊó•</span>ÔºåÈì≠ËÆ∞ÂéÜÂè≤„ÄÅÁºÖÊÄÄÂÖàÁÉà„ÄÅÁèçÁà±ÂíåÂπ≥„ÄÅÂºÄÂàõÊú™Êù•„ÄÇ"},{date:"09/10",text:"<span>ÊïôÂ∏àËäÇ</span>ÔºåÂú®Â≠¶Ê†°Ë¶ÅÁªôËÄÅÂ∏àÈóÆÂ£∞Â•ΩÂëÄÔΩû"},{date:"10/01",text:"<span>ÂõΩÂ∫ÜËäÇ</span>Âà∞‰∫ÜÔºå‰∏∫Á•ñÂõΩÊØç‰∫≤Â∫ÜÁîüÔºÅ"},{date:"11/05-11/12",text:"‰ªäÂπ¥ÁöÑ<span>ÂèåÂçÅ‰∏Ä</span>ÊòØÂíåË∞Å‰∏ÄËµ∑ËøáÁöÑÂë¢ÔΩû"},{date:"12/20-12/31",text:"ËøôÂá†Â§©ÊòØ<span>Âú£ËØûËäÇ</span>Ôºå‰∏ª‰∫∫ËÇØÂÆöÂèàÂéªÂâÅÊâã‰π∞‰π∞‰π∞‰∫ÜÔΩû"}],time:[{hour:"6-7",text:"Êó©‰∏äÂ•ΩÔºÅ‰∏ÄÊó•‰πãËÆ°Âú®‰∫éÊô®ÔºåÁæéÂ•ΩÁöÑ‰∏ÄÂ§©Â∞±Ë¶ÅÂºÄÂßã‰∫ÜÔΩû"},{hour:"8-11",text:"‰∏äÂçàÂ•ΩÔºÅÂ∑•‰ΩúÈ°∫Âà©ÂòõÔºå‰∏çË¶Å‰πÖÂùêÔºåÂ§öËµ∑Êù•Ëµ∞Âä®Ëµ∞Âä®Âì¶ÔºÅ"},{hour:"12-13",text:"‰∏≠Âçà‰∫ÜÔºåÂ∑•‰Ωú‰∫Ü‰∏Ä‰∏™‰∏äÂçàÔºåÁé∞Âú®ÊòØÂçàÈ§êÊó∂Èó¥ÔºÅ"},{hour:"14-17",text:"ÂçàÂêéÂæàÂÆπÊòìÁäØÂõ∞Âë¢Ôºå‰ªäÂ§©ÁöÑËøêÂä®ÁõÆÊ†áÂÆåÊàê‰∫ÜÂêóÔºü"},{hour:"18-19",text:"ÂÇçÊôö‰∫ÜÔºÅÁ™óÂ§ñÂ§ïÈò≥ÁöÑÊôØËâ≤ÂæàÁæé‰∏ΩÂë¢ÔºåÊúÄÁæé‰∏çËøáÂ§ïÈò≥Á∫¢ÔΩû"},{hour:"20-21",text:"Êôö‰∏äÂ•ΩÔºå‰ªäÂ§©ËøáÂæóÊÄé‰πàÊ†∑Ôºü"},{hour:"22-23",text:["Â∑≤ÁªèËøô‰πàÊôö‰∫ÜÂëÄÔºåÊó©ÁÇπ‰ºëÊÅØÂêßÔºåÊôöÂÆâÔΩû","Ê∑±Â§úÊó∂Ë¶ÅÁà±Êä§ÁúºÁùõÂëÄÔºÅ"]},{hour:"0-5",text:"‰Ω†ÊòØÂ§úÁå´Â≠êÂëÄÔºüËøô‰πàÊôöËøò‰∏çÁù°ËßâÔºåÊòéÂ§©Ëµ∑ÁöÑÊù•ÂòõÔºü"}],message:{default:["Â•Ω‰πÖ‰∏çËßÅÔºåÊó•Â≠êËøáÂæóÂ•ΩÂø´Âë¢‚Ä¶‚Ä¶","Â§ßÂùèËõãÔºÅ‰Ω†ÈÉΩÂ§ö‰πÖÊ≤°ÁêÜ‰∫∫ÂÆ∂‰∫ÜÂëÄÔºåÂò§Âò§Âò§ÔΩû","Âó®ÔΩûÂø´Êù•ÈÄóÊàëÁé©ÂêßÔºÅ","ÊãøÂ∞èÊã≥Êã≥Èî§‰Ω†ËÉ∏Âè£ÔºÅ","ËÆ∞ÂæóÊääÂ∞èÂÆ∂Âä†ÂÖ•Êî∂ËóèÂ§πÂì¶ÔºÅ"],console:"ÂìàÂìàÔºå‰Ω†ÊâìÂºÄ‰∫ÜÊéßÂà∂Âè∞ÔºåÊòØÊÉ≥Ë¶ÅÁúãÁúãÊàëÁöÑÂ∞èÁßòÂØÜÂêóÔºü",copy:"‰Ω†ÈÉΩÂ§çÂà∂‰∫Ü‰∫õ‰ªÄ‰πàÂëÄÔºåËΩ¨ËΩΩË¶ÅËÆ∞ÂæóÂä†‰∏äÂá∫Â§ÑÂì¶ÔºÅ",visibilitychange:"ÂìáÔºå‰Ω†Áªà‰∫éÂõûÊù•‰∫ÜÔΩû",clothes:["ÊàëËøòÊ≤°ÊúâÂÖ∂‰ªñË°£ÊúçÂë¢ÔºÅ"]},tool:{camera:["ÁÖßÂ•Ω‰∫ÜÂòõÔºåÊòØ‰∏çÊòØÂæàÂèØÁà±Âë¢Ôºü"],display:["ÊÑø‰Ω†Êúâ‰∏ÄÂ§©ËÉΩ‰∏éÈáçË¶ÅÁöÑ‰∫∫ÈáçÈÄ¢"]}};function Pw(r,t){const e={...r};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]?Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=[...e[i],...t[i]]:e[i]=[e[i],t[i]]:e[i]=t[i]);return e}function Iw(r,t){return Array.isArray(r)?r.reduce((e,i)=>(i in t&&(e[i]=t[i]),e),{}):{}}function Rw(){const r=au();return tt(()=>{const{options:t}=r.value.addons["valaxy-addon-live2d"],e=(t==null?void 0:t.enableLive2D)??"all",i={...Aw,...t==null?void 0:t.live2DCollection},s=e==="all"?i:Iw(e,i),n=Pw(Cw,(t==null?void 0:t.live2dTips)||{});return{widthLimit:250,safetyMargin:50,randomCharacter:!1,randomSkin:!1,skipHello:!1,hideOnScreenSizes:600,debugger:!1,...t,live2DCollection:s,enableLive2D:e,live2dTips:n}})}function Mw(){const r=Rw(),{randomCharacter:t,randomSkin:e,live2DCollection:i,live2dTips:s,hideOnScreenSizes:n}=r.value,o=_t(),a=_t(!1);let l=_t(!1);const u=new Ew(s);async function d(){await pe(()=>import("./index.aV6FsLUp.js"),__vite__mapDeps([39,3,2,4,6,5,7])),o.value=(await pe(async()=>{const{Live2DApp:k}=await import("./Live2DApp.Bm3mni3B.js");return{Live2DApp:k}},__vite__mapDeps([40,3,2,4,6,5,7]))).Live2DApp,Hd("live2d")==="Show"&&setTimeout(()=>{R()},0),Hd("live2d")==="Hide"&&setTimeout(()=>{E()},0),u.init(),o.value.init(r.value,u),o.value.loadModel((await oo(i)).selectedModel)}async function f(k=t){var N;(N=o.value)==null||N.switchModel(k?await v():await y())}async function m(k=e){var N;(N=o.value)==null||N.switchModel(k?await b():await w()),u.showMessage("ÊàëÁöÑÊñ∞Ë°£ÊúçÂ•ΩÁúãÂòõÔºü",4e3,10)}function v(){const k=Object.keys(i),N=k[Math.floor(Math.random()*k.length)];return ds(N,0),u.showMessage(i[N].message,4e3,10),i[N].models[0]}async function y(){const{currentCharacterKey:k}=await oo(i),N=Object.keys(i),P=N[(N.indexOf(k)+1)%N.length],O=i[P].models;return ds(P,0),u.showMessage(i[P].message,4e3,10),typeof O=="string"?await Oo(O,0):O[0]}async function b(){const{currentCharacterKey:k}=await oo(i),N=i[k],P=Math.floor(Math.random()*N.models.length);return ds(null,P),N.models.length===0&&u.showMessage(s.message.clothes,4e3,10),typeof N.models=="string"?await Oo(N.models,P):N.models[P]}async function w(){const{currentCharacterKey:k,currentSkinIndex:N}=await oo(i),P=i[k],O=U=>(N+1)%U;if(typeof P.models=="string"){const U=await og(ng(P.models)),$=O(U.length);return Oo(P.models,$)}else{if(P.models.length===0)return u.showMessage(s.message.clothes,4e3,10),P.models[0];const U=O(P.models.length);return ds(null,U),P.models[U]}}function S(){var k;(k=o.value)==null||k.captureFrame()}function C(){const k=document.getElementById("live2d");a.value=k.style.bottom==="0px"||k.style.bottom==="",a.value?E():R()}function E(){a.value=!0;const k=document.getElementById("live2d");localStorage.setItem("live2d-display",Date.now().toString()),u.showMessage(s.tool.display,2e3,11),k.style.bottom="-100%",setTimeout(()=>{Gd("live2d","Hide",7)},0)}function R(){a.value=!1;const k=document.getElementById("live2d");k.style.bottom="0px",setTimeout(()=>{localStorage.removeItem("live2d-display"),k.style.display="",Gd("live2d","Show",7)},0)}if(Pr&&d(),n!==!1){const k=typeof n=="string"?n:`${n}px`;l=Ae(`(max-width: ${k})`)}return qt(l,k=>{k?E():R()}),{live2DApp:o,switchCharacter:f,switchSkin:m,getRandomCharacter:v,getSequentialCharacter:y,getRandomSkin:b,getSequentialSkin:w,captureFrame:S,toggleLive2DVisibility:C,isLive2DHide:a,live2dTipsHandler:u,isHidden:l}}function kw(r=200){const t=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let e=null;function i(s){e||(e=s);const n=s-e,o=Math.min(n/r,1);t.forEach(a=>{a.style.padding=`${5*o}px 0`,a.style.maxHeight=`${60*o}px`}),o<1?requestAnimationFrame(i):t.forEach(a=>{a.style.transform=""})}requestAnimationFrame(i)}function Dw(r=200){const t=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let e=null;function i(s){e===null&&(e=s);const n=s-e,o=Math.min(n/r,1);t.forEach(a=>{o<1?(a.style.padding="5px 0",a.style.maxHeight="60px",a.style.transform=`translateX(${-40*o}px)`):(a.style.padding="0",a.style.maxHeight="0")}),o<1||n<r*2?requestAnimationFrame(i):e=null}requestAnimationFrame(i)}var Yi=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Yi||{}),cg=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(cg||{}),Nc=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Nc||{}),bt=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(bt||{}),_r=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(_r||{}),K=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(K||{}),gs=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(gs||{}),gt=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(gt||{}),nt=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(nt||{}),Fr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Fr||{}),ui=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(ui||{}),Ar=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Ar||{}),Re=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Re||{}),vr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(vr||{}),fu=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(fu||{}),$e=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))($e||{}),de=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(de||{}),ce=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(ce||{}),wr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(wr||{});const Ow={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},ot={ADAPTER:Ow,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Cl=/iPhone/i,zd=/iPod/i,jd=/iPad/i,Vd=/\biOS-universal(?:.+)Mac\b/i,Pl=/\bAndroid(?:.+)Mobile\b/i,Wd=/Android/i,ts=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ao=/Silk/i,Dr=/Windows Phone/i,Xd=/\bWindows(?:.+)ARM\b/i,Yd=/BlackBerry/i,qd=/BB10/i,Kd=/Opera Mini/i,Zd=/\b(CriOS|Chrome)(?:.+)Mobile/i,Qd=/Mobile(?:.+)Firefox\b/i,Jd=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Lw(r){return function(t){return t.test(r)}}function tp(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var s=Lw(e),n={apple:{phone:s(Cl)&&!s(Dr),ipod:s(zd),tablet:!s(Cl)&&(s(jd)||Jd(t))&&!s(Dr),universal:s(Vd),device:(s(Cl)||s(zd)||s(jd)||s(Vd)||Jd(t))&&!s(Dr)},amazon:{phone:s(ts),tablet:!s(ts)&&s(ao),device:s(ts)||s(ao)},android:{phone:!s(Dr)&&s(ts)||!s(Dr)&&s(Pl),tablet:!s(Dr)&&!s(ts)&&!s(Pl)&&(s(ao)||s(Wd)),device:!s(Dr)&&(s(ts)||s(ao)||s(Pl)||s(Wd))||s(/\bokhttp\b/i)},windows:{phone:s(Dr),tablet:s(Xd),device:s(Dr)||s(Xd)},other:{blackberry:s(Yd),blackberry10:s(qd),opera:s(Kd),firefox:s(Qd),chrome:s(Zd),device:s(Yd)||s(qd)||s(Kd)||s(Qd)||s(Zd)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Bw=tp.default??tp,Nr=Bw(globalThis.navigator);ot.RETINA_PREFIX=/@([0-9\.]+)x/;ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var hg={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function n(l,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new s(d,f||l,m),y=e?e+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],v]:l._events[y].push(v):(l._events[y]=v,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=e?e+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,v=f.length,y=new Array(v);m<v;m++)y[m]=f[m].fn;return y},a.prototype.listenerCount=function(u){var d=e?e+u:u,f=this._events[d];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,d,f,m,v,y){var b=e?e+u:u;if(!this._events[b])return!1;var w=this._events[b],S=arguments.length,C,E;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),S){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,f),!0;case 4:return w.fn.call(w.context,d,f,m),!0;case 5:return w.fn.call(w.context,d,f,m,v),!0;case 6:return w.fn.call(w.context,d,f,m,v,y),!0}for(E=1,C=new Array(S-1);E<S;E++)C[E-1]=arguments[E];w.fn.apply(w.context,C)}else{var R=w.length,k;for(E=0;E<R;E++)switch(w[E].once&&this.removeListener(u,w[E].fn,void 0,!0),S){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,d);break;case 3:w[E].fn.call(w[E].context,d,f);break;case 4:w[E].fn.call(w[E].context,d,f,m);break;default:if(!C)for(k=1,C=new Array(S-1);k<S;k++)C[k-1]=arguments[k];w[E].fn.apply(w[E].context,C)}}return!0},a.prototype.on=function(u,d,f){return n(this,u,d,f,!1)},a.prototype.once=function(u,d,f){return n(this,u,d,f,!0)},a.prototype.removeListener=function(u,d,f,m){var v=e?e+u:u;if(!this._events[v])return this;if(!d)return o(this,v),this;var y=this._events[v];if(y.fn)y.fn===d&&(!m||y.once)&&(!f||y.context===f)&&o(this,v);else{for(var b=0,w=[],S=y.length;b<S;b++)(y[b].fn!==d||m&&!y[b].once||f&&y[b].context!==f)&&w.push(y[b]);w.length?this._events[v]=w.length===1?w[0]:w:o(this,v)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=e?e+u:u,this._events[d]&&o(this,d)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(hg);var Fw=hg.exports;const Fn=Xh(Fw);var mu={exports:{}};mu.exports=Oa;mu.exports.default=Oa;function Oa(r,t,e){e=e||2;var i=t&&t.length,s=i?t[0]*e:r.length,n=ug(r,0,s,e,!0),o=[];if(!n||n.next===n.prev)return o;var a,l,u,d,f,m,v;if(i&&(n=Hw(r,t,n,e)),r.length>80*e){a=u=r[0],l=d=r[1];for(var y=e;y<s;y+=e)f=r[y],m=r[y+1],f<a&&(a=f),m<l&&(l=m),f>u&&(u=f),m>d&&(d=m);v=Math.max(u-a,d-l),v=v!==0?32767/v:0}return wn(n,o,e,a,l,v,0),o}function ug(r,t,e,i,s){var n,o;if(s===Gc(r,t,e,i)>0)for(n=t;n<e;n+=i)o=ep(n,r[n],r[n+1],o);else for(n=e-i;n>=t;n-=i)o=ep(n,r[n],r[n+1],o);return o&&La(o,o.next)&&(En(o),o=o.next),o}function Hi(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(La(e,e.next)||ee(e.prev,e,e.next)===0)){if(En(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function wn(r,t,e,i,s,n,o){if(r){!o&&n&&Xw(r,i,s,n);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,n?Uw(r,i,s,n):Nw(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(u.i/e|0),En(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=$w(Hi(r),t,e),wn(r,t,e,i,s,n,2)):o===2&&Gw(r,t,e,i,s,n):wn(Hi(r),t,e,i,s,n,1);break}}}}function Nw(r){var t=r.prev,e=r,i=r.next;if(ee(t,e,i)>=0)return!1;for(var s=t.x,n=e.x,o=i.x,a=t.y,l=e.y,u=i.y,d=s<n?s<o?s:o:n<o?n:o,f=a<l?a<u?a:u:l<u?l:u,m=s>n?s>o?s:o:n>o?n:o,v=a>l?a>u?a:u:l>u?l:u,y=i.next;y!==t;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=v&&ps(s,a,n,l,o,u,y.x,y.y)&&ee(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Uw(r,t,e,i){var s=r.prev,n=r,o=r.next;if(ee(s,n,o)>=0)return!1;for(var a=s.x,l=n.x,u=o.x,d=s.y,f=n.y,m=o.y,v=a<l?a<u?a:u:l<u?l:u,y=d<f?d<m?d:m:f<m?f:m,b=a>l?a>u?a:u:l>u?l:u,w=d>f?d>m?d:m:f>m?f:m,S=Uc(v,y,t,e,i),C=Uc(b,w,t,e,i),E=r.prevZ,R=r.nextZ;E&&E.z>=S&&R&&R.z<=C;){if(E.x>=v&&E.x<=b&&E.y>=y&&E.y<=w&&E!==s&&E!==o&&ps(a,d,l,f,u,m,E.x,E.y)&&ee(E.prev,E,E.next)>=0||(E=E.prevZ,R.x>=v&&R.x<=b&&R.y>=y&&R.y<=w&&R!==s&&R!==o&&ps(a,d,l,f,u,m,R.x,R.y)&&ee(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;E&&E.z>=S;){if(E.x>=v&&E.x<=b&&E.y>=y&&E.y<=w&&E!==s&&E!==o&&ps(a,d,l,f,u,m,E.x,E.y)&&ee(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;R&&R.z<=C;){if(R.x>=v&&R.x<=b&&R.y>=y&&R.y<=w&&R!==s&&R!==o&&ps(a,d,l,f,u,m,R.x,R.y)&&ee(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function $w(r,t,e){var i=r;do{var s=i.prev,n=i.next.next;!La(s,n)&&dg(s,i,i.next,n)&&Tn(s,n)&&Tn(n,s)&&(t.push(s.i/e|0),t.push(i.i/e|0),t.push(n.i/e|0),En(i),En(i.next),i=r=n),i=i.next}while(i!==r);return Hi(i)}function Gw(r,t,e,i,s,n){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Kw(o,a)){var l=pg(o,a);o=Hi(o,o.next),l=Hi(l,l.next),wn(o,t,e,i,s,n,0),wn(l,t,e,i,s,n,0);return}a=a.next}o=o.next}while(o!==r)}function Hw(r,t,e,i){var s=[],n,o,a,l,u;for(n=0,o=t.length;n<o;n++)a=t[n]*i,l=n<o-1?t[n+1]*i:r.length,u=ug(r,a,l,i,!1),u===u.next&&(u.steiner=!0),s.push(qw(u));for(s.sort(zw),n=0;n<s.length;n++)e=jw(s[n],e);return e}function zw(r,t){return r.x-t.x}function jw(r,t){var e=Vw(r,t);if(!e)return t;var i=pg(e,r);return Hi(i,i.next),Hi(e,e.next)}function Vw(r,t){var e=t,i=r.x,s=r.y,n=-1/0,o;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){var a=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>n&&(n=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,u=o.x,d=o.y,f=1/0,m;e=o;do i>=e.x&&e.x>=u&&i!==e.x&&ps(s<d?i:n,s,u,d,s<d?n:i,s,e.x,e.y)&&(m=Math.abs(s-e.y)/(i-e.x),Tn(e,r)&&(m<f||m===f&&(e.x>o.x||e.x===o.x&&Ww(o,e)))&&(o=e,f=m)),e=e.next;while(e!==l);return o}function Ww(r,t){return ee(r.prev,r,t.prev)<0&&ee(t.next,r,r.next)<0}function Xw(r,t,e,i){var s=r;do s.z===0&&(s.z=Uc(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Yw(s)}function Yw(r){var t,e,i,s,n,o,a,l,u=1;do{for(e=r,r=null,n=null,o=0;e;){for(o++,i=e,a=0,t=0;t<u&&(a++,i=i.nextZ,!!i);t++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(s=e,e=e.nextZ,a--):(s=i,i=i.nextZ,l--),n?n.nextZ=s:r=s,s.prevZ=n,n=s;e=i}n.nextZ=null,u*=2}while(o>1);return r}function Uc(r,t,e,i,s){return r=(r-e)*s|0,t=(t-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function qw(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function ps(r,t,e,i,s,n,o,a){return(s-o)*(t-a)>=(r-o)*(n-a)&&(r-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(s-o)*(i-a)}function Kw(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!Zw(r,t)&&(Tn(r,t)&&Tn(t,r)&&Qw(r,t)&&(ee(r.prev,r,t.prev)||ee(r,t.prev,t))||La(r,t)&&ee(r.prev,r,r.next)>0&&ee(t.prev,t,t.next)>0)}function ee(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function La(r,t){return r.x===t.x&&r.y===t.y}function dg(r,t,e,i){var s=co(ee(r,t,e)),n=co(ee(r,t,i)),o=co(ee(e,i,r)),a=co(ee(e,i,t));return!!(s!==n&&o!==a||s===0&&lo(r,e,t)||n===0&&lo(r,i,t)||o===0&&lo(e,r,i)||a===0&&lo(e,t,i))}function lo(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function co(r){return r>0?1:r<0?-1:0}function Zw(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&dg(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function Tn(r,t){return ee(r.prev,r,r.next)<0?ee(r,t,r.next)>=0&&ee(r,r.prev,t)>=0:ee(r,t,r.prev)<0||ee(r,r.next,t)<0}function Qw(r,t){var e=r,i=!1,s=(r.x+t.x)/2,n=(r.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&s<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function pg(r,t){var e=new $c(r.i,r.x,r.y),i=new $c(t.i,t.x,t.y),s=r.next,n=t.prev;return r.next=t,t.prev=r,e.next=s,s.prev=e,i.next=e,e.prev=i,n.next=i,i.prev=n,i}function ep(r,t,e,i){var s=new $c(r,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function En(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function $c(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Oa.deviation=function(r,t,e,i){var s=t&&t.length,n=s?t[0]*e:r.length,o=Math.abs(Gc(r,0,n,e));if(s)for(var a=0,l=t.length;a<l;a++){var u=t[a]*e,d=a<l-1?t[a+1]*e:r.length;o-=Math.abs(Gc(r,u,d,e))}var f=0;for(a=0;a<i.length;a+=3){var m=i[a]*e,v=i[a+1]*e,y=i[a+2]*e;f+=Math.abs((r[m]-r[y])*(r[v+1]-r[m+1])-(r[m]-r[v])*(r[y+1]-r[m+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function Gc(r,t,e,i){for(var s=0,n=t,o=e-i;n<e;n+=i)s+=(r[o]-r[n])*(r[n+1]+r[o+1]),o=n;return s}Oa.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,s=0;s<r.length;s++){for(var n=0;n<r[s].length;n++)for(var o=0;o<t;o++)e.vertices.push(r[s][n][o]);s>0&&(i+=r[s-1].length,e.holes.push(i))}return e};var Jw=mu.exports;const tT=Xh(Jw);var Ko={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Ko.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,s=r&&!r.nodeType&&r,n=typeof ms=="object"&&ms;(n.global===n||n.window===n||n.self===n)&&(e=n);var o,a=2147483647,l=36,u=1,d=26,f=38,m=700,v=72,y=128,b="-",w=/^xn--/,S=/[^\x20-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=l-u,k=Math.floor,N=String.fromCharCode,P;function O(X){throw new RangeError(E[X])}function U(X,J){for(var Rt=X.length,Ft=[];Rt--;)Ft[Rt]=J(X[Rt]);return Ft}function $(X,J){var Rt=X.split("@"),Ft="";Rt.length>1&&(Ft=Rt[0]+"@",X=Rt[1]),X=X.replace(C,".");var $t=X.split("."),se=U($t,J).join(".");return Ft+se}function Y(X){for(var J=[],Rt=0,Ft=X.length,$t,se;Rt<Ft;)$t=X.charCodeAt(Rt++),$t>=55296&&$t<=56319&&Rt<Ft?(se=X.charCodeAt(Rt++),(se&64512)==56320?J.push((($t&1023)<<10)+(se&1023)+65536):(J.push($t),Rt--)):J.push($t);return J}function H(X){return U(X,function(J){var Rt="";return J>65535&&(J-=65536,Rt+=N(J>>>10&1023|55296),J=56320|J&1023),Rt+=N(J),Rt}).join("")}function B(X){return X-48<10?X-22:X-65<26?X-65:X-97<26?X-97:l}function F(X,J){return X+22+75*(X<26)-((J!=0)<<5)}function z(X,J,Rt){var Ft=0;for(X=Rt?k(X/m):X>>1,X+=k(X/J);X>R*d>>1;Ft+=l)X=k(X/R);return k(Ft+(R+1)*X/(X+f))}function Z(X){var J=[],Rt=X.length,Ft,$t=0,se=y,Kt=v,oe,he,lt,le,Gt,Wt,Qt,Te,we;for(oe=X.lastIndexOf(b),oe<0&&(oe=0),he=0;he<oe;++he)X.charCodeAt(he)>=128&&O("not-basic"),J.push(X.charCodeAt(he));for(lt=oe>0?oe+1:0;lt<Rt;){for(le=$t,Gt=1,Wt=l;lt>=Rt&&O("invalid-input"),Qt=B(X.charCodeAt(lt++)),(Qt>=l||Qt>k((a-$t)/Gt))&&O("overflow"),$t+=Qt*Gt,Te=Wt<=Kt?u:Wt>=Kt+d?d:Wt-Kt,!(Qt<Te);Wt+=l)we=l-Te,Gt>k(a/we)&&O("overflow"),Gt*=we;Ft=J.length+1,Kt=z($t-le,Ft,le==0),k($t/Ft)>a-se&&O("overflow"),se+=k($t/Ft),$t%=Ft,J.splice($t++,0,se)}return H(J)}function et(X){var J,Rt,Ft,$t,se,Kt,oe,he,lt,le,Gt,Wt=[],Qt,Te,we,De;for(X=Y(X),Qt=X.length,J=y,Rt=0,se=v,Kt=0;Kt<Qt;++Kt)Gt=X[Kt],Gt<128&&Wt.push(N(Gt));for(Ft=$t=Wt.length,$t&&Wt.push(b);Ft<Qt;){for(oe=a,Kt=0;Kt<Qt;++Kt)Gt=X[Kt],Gt>=J&&Gt<oe&&(oe=Gt);for(Te=Ft+1,oe-J>k((a-Rt)/Te)&&O("overflow"),Rt+=(oe-J)*Te,J=oe,Kt=0;Kt<Qt;++Kt)if(Gt=X[Kt],Gt<J&&++Rt>a&&O("overflow"),Gt==J){for(he=Rt,lt=l;le=lt<=se?u:lt>=se+d?d:lt-se,!(he<le);lt+=l)De=he-le,we=l-le,Wt.push(N(F(le+De%we,0))),he=k(De/we);Wt.push(N(F(he,0))),se=z(Rt,Te,Ft==$t),Rt=0,++Ft}++Rt,++J}return Wt.join("")}function ut(X){return $(X,function(J){return w.test(J)?Z(J.slice(4).toLowerCase()):J})}function yt(X){return $(X,function(J){return S.test(J)?"xn--"+et(J):J})}if(o={version:"1.4.1",ucs2:{decode:Y,encode:H},decode:Z,encode:et,toASCII:yt,toUnicode:ut},i&&s)if(r.exports==i)s.exports=o;else for(P in o)o.hasOwnProperty(P)&&(i[P]=o[P]);else e.punycode=o})(ms)})(Ko,Ko.exports);var eT=Ko.exports,Ms=TypeError;const rT={},iT=Object.freeze(Object.defineProperty({__proto__:null,default:rT},Symbol.toStringTag,{value:"Module"})),sT=w0(iT);var gu=typeof Map=="function"&&Map.prototype,Il=Object.getOwnPropertyDescriptor&&gu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Zo=gu&&Il&&typeof Il.get=="function"?Il.get:null,rp=gu&&Map.prototype.forEach,vu=typeof Set=="function"&&Set.prototype,Rl=Object.getOwnPropertyDescriptor&&vu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Qo=vu&&Rl&&typeof Rl.get=="function"?Rl.get:null,ip=vu&&Set.prototype.forEach,nT=typeof WeakMap=="function"&&WeakMap.prototype,hn=nT?WeakMap.prototype.has:null,oT=typeof WeakSet=="function"&&WeakSet.prototype,un=oT?WeakSet.prototype.has:null,aT=typeof WeakRef=="function"&&WeakRef.prototype,sp=aT?WeakRef.prototype.deref:null,lT=Boolean.prototype.valueOf,cT=Object.prototype.toString,hT=Function.prototype.toString,uT=String.prototype.match,yu=String.prototype.slice,ai=String.prototype.replace,dT=String.prototype.toUpperCase,np=String.prototype.toLowerCase,fg=RegExp.prototype.test,op=Array.prototype.concat,yr=Array.prototype.join,pT=Array.prototype.slice,ap=Math.floor,Hc=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ml=Object.getOwnPropertySymbols,zc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ss=typeof Symbol=="function"&&typeof Symbol.iterator=="object",dn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ss||!0)?Symbol.toStringTag:null,mg=Object.prototype.propertyIsEnumerable,lp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function cp(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||fg.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-ap(-r):ap(r);if(i!==r){var s=String(i),n=yu.call(t,s.length+1);return ai.call(s,e,"$&_")+"."+ai.call(ai.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ai.call(t,e,"$&_")}var jc=sT,hp=jc.custom,up=yg(hp)?hp:null,gg={__proto__:null,double:'"',single:"'"},fT={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Ba=function r(t,e,i,s){var n=e||{};if(Lr(n,"quoteStyle")&&!Lr(gg,n.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Lr(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Lr(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Lr(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Lr(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return bg(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?cp(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return a?cp(t,u):u}var d=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=d&&d>0&&typeof t=="object")return Vc(t)?"[Array]":"[Object]";var f=kT(n,i);if(typeof s>"u")s=[];else if(_g(s,t)>=0)return"[Circular]";function m(B,F,z){if(F&&(s=pT.call(s),s.push(F)),z){var Z={depth:n.depth};return Lr(n,"quoteStyle")&&(Z.quoteStyle=n.quoteStyle),r(B,Z,i+1,s)}return r(B,n,i+1,s)}if(typeof t=="function"&&!dp(t)){var v=TT(t),y=ho(t,m);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(y.length>0?" { "+yr.call(y,", ")+" }":"")}if(yg(t)){var b=Ss?ai.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):zc.call(t);return typeof t=="object"&&!Ss?Xs(b):b}if(IT(t)){for(var w="<"+np.call(String(t.nodeName)),S=t.attributes||[],C=0;C<S.length;C++)w+=" "+S[C].name+"="+vg(mT(S[C].value),"double",n);return w+=">",t.childNodes&&t.childNodes.length&&(w+="..."),w+="</"+np.call(String(t.nodeName))+">",w}if(Vc(t)){if(t.length===0)return"[]";var E=ho(t,m);return f&&!MT(E)?"["+Wc(E,f)+"]":"[ "+yr.call(E,", ")+" ]"}if(vT(t)){var R=ho(t,m);return!("cause"in Error.prototype)&&"cause"in t&&!mg.call(t,"cause")?"{ ["+String(t)+"] "+yr.call(op.call("[cause]: "+m(t.cause),R),", ")+" }":R.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+yr.call(R,", ")+" }"}if(typeof t=="object"&&o){if(up&&typeof t[up]=="function"&&jc)return jc(t,{depth:d-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(ET(t)){var k=[];return rp&&rp.call(t,function(B,F){k.push(m(F,t,!0)+" => "+m(B,t))}),pp("Map",Zo.call(t),k,f)}if(CT(t)){var N=[];return ip&&ip.call(t,function(B){N.push(m(B,t))}),pp("Set",Qo.call(t),N,f)}if(ST(t))return kl("WeakMap");if(PT(t))return kl("WeakSet");if(AT(t))return kl("WeakRef");if(_T(t))return Xs(m(Number(t)));if(xT(t))return Xs(m(Hc.call(t)));if(bT(t))return Xs(lT.call(t));if(yT(t))return Xs(m(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof ms<"u"&&t===ms)return"{ [object globalThis] }";if(!gT(t)&&!dp(t)){var P=ho(t,m),O=lp?lp(t)===Object.prototype:t instanceof Object||t.constructor===Object,U=t instanceof Object?"":"null prototype",$=!O&&dn&&Object(t)===t&&dn in t?yu.call(_i(t),8,-1):U?"Object":"",Y=O||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",H=Y+($||U?"["+yr.call(op.call([],$||[],U||[]),": ")+"] ":"");return P.length===0?H+"{}":f?H+"{"+Wc(P,f)+"}":H+"{ "+yr.call(P,", ")+" }"}return String(t)};function vg(r,t,e){var i=e.quoteStyle||t,s=gg[i];return s+r+s}function mT(r){return ai.call(String(r),/"/g,"&quot;")}function qi(r){return!dn||!(typeof r=="object"&&(dn in r||typeof r[dn]<"u"))}function Vc(r){return _i(r)==="[object Array]"&&qi(r)}function gT(r){return _i(r)==="[object Date]"&&qi(r)}function dp(r){return _i(r)==="[object RegExp]"&&qi(r)}function vT(r){return _i(r)==="[object Error]"&&qi(r)}function yT(r){return _i(r)==="[object String]"&&qi(r)}function _T(r){return _i(r)==="[object Number]"&&qi(r)}function bT(r){return _i(r)==="[object Boolean]"&&qi(r)}function yg(r){if(Ss)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!zc)return!1;try{return zc.call(r),!0}catch{}return!1}function xT(r){if(!r||typeof r!="object"||!Hc)return!1;try{return Hc.call(r),!0}catch{}return!1}var wT=Object.prototype.hasOwnProperty||function(r){return r in this};function Lr(r,t){return wT.call(r,t)}function _i(r){return cT.call(r)}function TT(r){if(r.name)return r.name;var t=uT.call(hT.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function _g(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function ET(r){if(!Zo||!r||typeof r!="object")return!1;try{Zo.call(r);try{Qo.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function ST(r){if(!hn||!r||typeof r!="object")return!1;try{hn.call(r,hn);try{un.call(r,un)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function AT(r){if(!sp||!r||typeof r!="object")return!1;try{return sp.call(r),!0}catch{}return!1}function CT(r){if(!Qo||!r||typeof r!="object")return!1;try{Qo.call(r);try{Zo.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function PT(r){if(!un||!r||typeof r!="object")return!1;try{un.call(r,un);try{hn.call(r,hn)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function IT(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function bg(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return bg(yu.call(r,0,t.maxStringLength),t)+i}var s=fT[t.quoteStyle||"single"];s.lastIndex=0;var n=ai.call(ai.call(r,s,"\\$1"),/[\x00-\x1f]/g,RT);return vg(n,"single",t)}function RT(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+dT.call(t.toString(16))}function Xs(r){return"Object("+r+")"}function kl(r){return r+" { ? }"}function pp(r,t,e,i){var s=i?Wc(e,i):yr.call(e,", ");return r+" ("+t+") {"+s+"}"}function MT(r){for(var t=0;t<r.length;t++)if(_g(r[t],`
`)>=0)return!1;return!0}function kT(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=yr.call(Array(r.indent+1)," ");else return null;return{base:e,prev:yr.call(Array(t+1),e)}}function Wc(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+yr.call(r,","+e)+`
`+t.prev}function ho(r,t){var e=Vc(r),i=[];if(e){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=Lr(r,s)?t(r[s],r):""}var n=typeof Ml=="function"?Ml(r):[],o;if(Ss){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var l in r)Lr(r,l)&&(e&&String(Number(l))===l&&l<r.length||Ss&&o["$"+l]instanceof Symbol||(fg.call(/[^\w$]/,l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if(typeof Ml=="function")for(var u=0;u<n.length;u++)mg.call(r,n[u])&&i.push("["+t(n[u])+"]: "+t(r[n[u]],r));return i}var DT=Ba,OT=Ms,Fa=function(r,t,e){for(var i=r,s;(s=i.next)!=null;i=s)if(s.key===t)return i.next=s.next,e||(s.next=r.next,r.next=s),s},LT=function(r,t){if(r){var e=Fa(r,t);return e&&e.value}},BT=function(r,t,e){var i=Fa(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},FT=function(r,t){return r?!!Fa(r,t):!1},NT=function(r,t){if(r)return Fa(r,t,!0)},UT=function(){var t,e={assert:function(i){if(!e.has(i))throw new OT("Side channel does not contain "+DT(i))},delete:function(i){var s=t&&t.next,n=NT(t,i);return n&&s&&s===n&&(t=void 0),!!n},get:function(i){return LT(t,i)},has:function(i){return FT(t,i)},set:function(i,s){t||(t={next:void 0}),BT(t,i,s)}};return e},xg=Object,$T=Error,GT=EvalError,HT=RangeError,zT=ReferenceError,jT=SyntaxError,VT=URIError,WT=Math.abs,XT=Math.floor,YT=Math.max,qT=Math.min,KT=Math.pow,ZT=Math.round,QT=Number.isNaN||function(t){return t!==t},JT=QT,t1=function(t){return JT(t)||t===0?t:t<0?-1:1},e1=Object.getOwnPropertyDescriptor,Lo=e1;if(Lo)try{Lo([],"length")}catch{Lo=null}var wg=Lo,Bo=Object.defineProperty||!1;if(Bo)try{Bo({},"a",{value:1})}catch{Bo=!1}var r1=Bo,Dl,fp;function i1(){return fp||(fp=1,Dl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(var n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==s||a.enumerable!==!0)return!1}return!0}),Dl}var Ol,mp;function s1(){if(mp)return Ol;mp=1;var r=typeof Symbol<"u"&&Symbol,t=i1();return Ol=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Ol}var Ll,gp;function Tg(){return gp||(gp=1,Ll=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Ll}var Bl,vp;function Eg(){if(vp)return Bl;vp=1;var r=xg;return Bl=r.getPrototypeOf||null,Bl}var Fl,yp;function n1(){if(yp)return Fl;yp=1;var r="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,i="[object Function]",s=function(l,u){for(var d=[],f=0;f<l.length;f+=1)d[f]=l[f];for(var m=0;m<u.length;m+=1)d[m+l.length]=u[m];return d},n=function(l,u){for(var d=[],f=u,m=0;f<l.length;f+=1,m+=1)d[m]=l[f];return d},o=function(a,l){for(var u="",d=0;d<a.length;d+=1)u+=a[d],d+1<a.length&&(u+=l);return u};return Fl=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==i)throw new TypeError(r+u);for(var d=n(arguments,1),f,m=function(){if(this instanceof f){var S=u.apply(this,s(d,arguments));return Object(S)===S?S:this}return u.apply(l,s(d,arguments))},v=e(0,u.length-d.length),y=[],b=0;b<v;b++)y[b]="$"+b;if(f=Function("binder","return function ("+o(y,",")+"){ return binder.apply(this,arguments); }")(m),u.prototype){var w=function(){};w.prototype=u.prototype,f.prototype=new w,w.prototype=null}return f},Fl}var Nl,_p;function Na(){if(_p)return Nl;_p=1;var r=n1();return Nl=Function.prototype.bind||r,Nl}var Ul,bp;function _u(){return bp||(bp=1,Ul=Function.prototype.call),Ul}var $l,xp;function Sg(){return xp||(xp=1,$l=Function.prototype.apply),$l}var o1=typeof Reflect<"u"&&Reflect&&Reflect.apply,a1=Na(),l1=Sg(),c1=_u(),h1=o1,u1=h1||a1.call(c1,l1),d1=Na(),p1=Ms,f1=_u(),m1=u1,Ag=function(t){if(t.length<1||typeof t[0]!="function")throw new p1("a function is required");return m1(d1,f1,t)},Gl,wp;function g1(){if(wp)return Gl;wp=1;var r=Ag,t=wg,e;try{e=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!e&&t&&t(Object.prototype,"__proto__"),s=Object,n=s.getPrototypeOf;return Gl=i&&typeof i.get=="function"?r([i.get]):typeof n=="function"?function(a){return n(a==null?a:s(a))}:!1,Gl}var Hl,Tp;function v1(){if(Tp)return Hl;Tp=1;var r=Tg(),t=Eg(),e=g1();return Hl=r?function(s){return r(s)}:t?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return t(s)}:e?function(s){return e(s)}:null,Hl}var zl,Ep;function y1(){if(Ep)return zl;Ep=1;var r=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=Na();return zl=e.call(r,t),zl}var Mt,_1=xg,b1=$T,x1=GT,w1=HT,T1=zT,As=jT,vs=Ms,E1=VT,S1=WT,A1=XT,C1=YT,P1=qT,I1=KT,R1=ZT,M1=t1,Cg=Function,jl=function(r){try{return Cg('"use strict"; return ('+r+").constructor;")()}catch{}},Sn=wg,k1=r1,Vl=function(){throw new vs},D1=Sn?function(){try{return arguments.callee,Vl}catch{try{return Sn(arguments,"callee").get}catch{return Vl}}}():Vl,es=s1()(),ge=v1(),O1=Eg(),L1=Tg(),Pg=Sg(),Nn=_u(),ns={},B1=typeof Uint8Array>"u"||!ge?Mt:ge(Uint8Array),Bi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Mt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Mt:ArrayBuffer,"%ArrayIteratorPrototype%":es&&ge?ge([][Symbol.iterator]()):Mt,"%AsyncFromSyncIteratorPrototype%":Mt,"%AsyncFunction%":ns,"%AsyncGenerator%":ns,"%AsyncGeneratorFunction%":ns,"%AsyncIteratorPrototype%":ns,"%Atomics%":typeof Atomics>"u"?Mt:Atomics,"%BigInt%":typeof BigInt>"u"?Mt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Mt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Mt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Mt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":b1,"%eval%":eval,"%EvalError%":x1,"%Float16Array%":typeof Float16Array>"u"?Mt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Mt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Mt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Mt:FinalizationRegistry,"%Function%":Cg,"%GeneratorFunction%":ns,"%Int8Array%":typeof Int8Array>"u"?Mt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Mt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Mt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":es&&ge?ge(ge([][Symbol.iterator]())):Mt,"%JSON%":typeof JSON=="object"?JSON:Mt,"%Map%":typeof Map>"u"?Mt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!es||!ge?Mt:ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":_1,"%Object.getOwnPropertyDescriptor%":Sn,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Mt:Promise,"%Proxy%":typeof Proxy>"u"?Mt:Proxy,"%RangeError%":w1,"%ReferenceError%":T1,"%Reflect%":typeof Reflect>"u"?Mt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Mt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!es||!ge?Mt:ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Mt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":es&&ge?ge(""[Symbol.iterator]()):Mt,"%Symbol%":es?Symbol:Mt,"%SyntaxError%":As,"%ThrowTypeError%":D1,"%TypedArray%":B1,"%TypeError%":vs,"%Uint8Array%":typeof Uint8Array>"u"?Mt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Mt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Mt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Mt:Uint32Array,"%URIError%":E1,"%WeakMap%":typeof WeakMap>"u"?Mt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Mt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Mt:WeakSet,"%Function.prototype.call%":Nn,"%Function.prototype.apply%":Pg,"%Object.defineProperty%":k1,"%Object.getPrototypeOf%":O1,"%Math.abs%":S1,"%Math.floor%":A1,"%Math.max%":C1,"%Math.min%":P1,"%Math.pow%":I1,"%Math.round%":R1,"%Math.sign%":M1,"%Reflect.getPrototypeOf%":L1};if(ge)try{null.error}catch(r){var F1=ge(ge(r));Bi["%Error.prototype%"]=F1}var N1=function r(t){var e;if(t==="%AsyncFunction%")e=jl("async function () {}");else if(t==="%GeneratorFunction%")e=jl("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=jl("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&ge&&(e=ge(s.prototype))}return Bi[t]=e,e},Sp={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Un=Na(),Jo=y1(),U1=Un.call(Nn,Array.prototype.concat),$1=Un.call(Pg,Array.prototype.splice),Ap=Un.call(Nn,String.prototype.replace),ta=Un.call(Nn,String.prototype.slice),G1=Un.call(Nn,RegExp.prototype.exec),H1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,z1=/\\(\\)?/g,j1=function(t){var e=ta(t,0,1),i=ta(t,-1);if(e==="%"&&i!=="%")throw new As("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new As("invalid intrinsic syntax, expected opening `%`");var s=[];return Ap(t,H1,function(n,o,a,l){s[s.length]=a?Ap(l,z1,"$1"):o||n}),s},V1=function(t,e){var i=t,s;if(Jo(Sp,i)&&(s=Sp[i],i="%"+s[0]+"%"),Jo(Bi,i)){var n=Bi[i];if(n===ns&&(n=N1(i)),typeof n>"u"&&!e)throw new vs("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new As("intrinsic "+t+" does not exist!")},bu=function(t,e){if(typeof t!="string"||t.length===0)throw new vs("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new vs('"allowMissing" argument must be a boolean');if(G1(/^%?[^%]*%?$/,t)===null)throw new As("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=j1(t),s=i.length>0?i[0]:"",n=V1("%"+s+"%",e),o=n.name,a=n.value,l=!1,u=n.alias;u&&(s=u[0],$1(i,U1([0,1],u)));for(var d=1,f=!0;d<i.length;d+=1){var m=i[d],v=ta(m,0,1),y=ta(m,-1);if((v==='"'||v==="'"||v==="`"||y==='"'||y==="'"||y==="`")&&v!==y)throw new As("property names with quotes must have matching quotes");if((m==="constructor"||!f)&&(l=!0),s+="."+m,o="%"+s+"%",Jo(Bi,o))a=Bi[o];else if(a!=null){if(!(m in a)){if(!e)throw new vs("base intrinsic for "+t+" exists, but the property is not available.");return}if(Sn&&d+1>=i.length){var b=Sn(a,m);f=!!b,f&&"get"in b&&!("originalValue"in b.get)?a=b.get:a=a[m]}else f=Jo(a,m),a=a[m];f&&!l&&(Bi[o]=a)}}return a},Ig=bu,Rg=Ag,W1=Rg([Ig("%String.prototype.indexOf%")]),Mg=function(t,e){var i=Ig(t,!!e);return typeof i=="function"&&W1(t,".prototype.")>-1?Rg([i]):i},X1=bu,$n=Mg,Y1=Ba,q1=Ms,Cp=X1("%Map%",!0),K1=$n("Map.prototype.get",!0),Z1=$n("Map.prototype.set",!0),Q1=$n("Map.prototype.has",!0),J1=$n("Map.prototype.delete",!0),tE=$n("Map.prototype.size",!0),kg=!!Cp&&function(){var t,e={assert:function(i){if(!e.has(i))throw new q1("Side channel does not contain "+Y1(i))},delete:function(i){if(t){var s=J1(t,i);return tE(t)===0&&(t=void 0),s}return!1},get:function(i){if(t)return K1(t,i)},has:function(i){return t?Q1(t,i):!1},set:function(i,s){t||(t=new Cp),Z1(t,i,s)}};return e},eE=bu,Ua=Mg,rE=Ba,uo=kg,iE=Ms,rs=eE("%WeakMap%",!0),sE=Ua("WeakMap.prototype.get",!0),nE=Ua("WeakMap.prototype.set",!0),oE=Ua("WeakMap.prototype.has",!0),aE=Ua("WeakMap.prototype.delete",!0),lE=rs?function(){var t,e,i={assert:function(s){if(!i.has(s))throw new iE("Side channel does not contain "+rE(s))},delete:function(s){if(rs&&s&&(typeof s=="object"||typeof s=="function")){if(t)return aE(t,s)}else if(uo&&e)return e.delete(s);return!1},get:function(s){return rs&&s&&(typeof s=="object"||typeof s=="function")&&t?sE(t,s):e&&e.get(s)},has:function(s){return rs&&s&&(typeof s=="object"||typeof s=="function")&&t?oE(t,s):!!e&&e.has(s)},set:function(s,n){rs&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new rs),nE(t,s,n)):uo&&(e||(e=uo()),e.set(s,n))}};return i}:uo,cE=Ms,hE=Ba,uE=UT,dE=kg,pE=lE,fE=pE||dE||uE,mE=function(){var t,e={assert:function(i){if(!e.has(i))throw new cE("Side channel does not contain "+hE(i))},delete:function(i){return!!t&&t.delete(i)},get:function(i){return t&&t.get(i)},has:function(i){return!!t&&t.has(i)},set:function(i,s){t||(t=fE()),t.set(i,s)}};return e},gE=String.prototype.replace,vE=/%20/g,Wl={RFC1738:"RFC1738",RFC3986:"RFC3986"},xu={default:Wl.RFC3986,formatters:{RFC1738:function(r){return gE.call(r,vE,"+")},RFC3986:function(r){return String(r)}},RFC1738:Wl.RFC1738,RFC3986:Wl.RFC3986},yE=xu,Xl=Object.prototype.hasOwnProperty,Oi=Array.isArray,hr=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),_E=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Oi(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);e.obj[e.prop]=s}}},Dg=function(t,e){for(var i=e&&e.plainObjects?{__proto__:null}:{},s=0;s<t.length;++s)typeof t[s]<"u"&&(i[s]=t[s]);return i},bE=function r(t,e,i){if(!e)return t;if(typeof e!="object"&&typeof e!="function"){if(Oi(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Xl.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var s=t;return Oi(t)&&!Oi(e)&&(s=Dg(t,i)),Oi(t)&&Oi(e)?(e.forEach(function(n,o){if(Xl.call(t,o)){var a=t[o];a&&typeof a=="object"&&n&&typeof n=="object"?t[o]=r(a,n,i):t.push(n)}else t[o]=n}),t):Object.keys(e).reduce(function(n,o){var a=e[o];return Xl.call(n,o)?n[o]=r(n[o],a,i):n[o]=a,n},s)},xE=function(t,e){return Object.keys(e).reduce(function(i,s){return i[s]=e[s],i},t)},wE=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Yl=1024,TE=function(t,e,i,s,n){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(v){return"%26%23"+parseInt(v.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=Yl){for(var u=o.length>=Yl?o.slice(l,l+Yl):o,d=[],f=0;f<u.length;++f){var m=u.charCodeAt(f);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||n===yE.RFC1738&&(m===40||m===41)){d[d.length]=u.charAt(f);continue}if(m<128){d[d.length]=hr[m];continue}if(m<2048){d[d.length]=hr[192|m>>6]+hr[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=hr[224|m>>12]+hr[128|m>>6&63]+hr[128|m&63];continue}f+=1,m=65536+((m&1023)<<10|u.charCodeAt(f)&1023),d[d.length]=hr[240|m>>18]+hr[128|m>>12&63]+hr[128|m>>6&63]+hr[128|m&63]}a+=d.join("")}return a},EE=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],s=0;s<e.length;++s)for(var n=e[s],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],d=o[u];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(e.push({obj:o,prop:u}),i.push(d))}return _E(e),t},SE=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},AE=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},CE=function(t,e){return[].concat(t,e)},PE=function(t,e){if(Oi(t)){for(var i=[],s=0;s<t.length;s+=1)i.push(e(t[s]));return i}return e(t)},Og={arrayToObject:Dg,assign:xE,combine:CE,compact:EE,decode:wE,encode:TE,isBuffer:AE,isRegExp:SE,maybeMap:PE,merge:bE},Lg=mE,Fo=Og,pn=xu,IE=Object.prototype.hasOwnProperty,Bg={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},gr=Array.isArray,RE=Array.prototype.push,Fg=function(r,t){RE.apply(r,gr(t)?t:[t])},ME=Date.prototype.toISOString,Pp=pn.default,ue={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Fo.encode,encodeValuesOnly:!1,filter:void 0,format:Pp,formatter:pn.formatters[Pp],indices:!1,serializeDate:function(t){return ME.call(t)},skipNulls:!1,strictNullHandling:!1},kE=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},ql={},DE=function r(t,e,i,s,n,o,a,l,u,d,f,m,v,y,b,w,S,C){for(var E=t,R=C,k=0,N=!1;(R=R.get(ql))!==void 0&&!N;){var P=R.get(t);if(k+=1,typeof P<"u"){if(P===k)throw new RangeError("Cyclic object value");N=!0}typeof R.get(ql)>"u"&&(k=0)}if(typeof d=="function"?E=d(e,E):E instanceof Date?E=v(E):i==="comma"&&gr(E)&&(E=Fo.maybeMap(E,function(X){return X instanceof Date?v(X):X})),E===null){if(o)return u&&!w?u(e,ue.encoder,S,"key",y):e;E=""}if(kE(E)||Fo.isBuffer(E)){if(u){var O=w?e:u(e,ue.encoder,S,"key",y);return[b(O)+"="+b(u(E,ue.encoder,S,"value",y))]}return[b(e)+"="+b(String(E))]}var U=[];if(typeof E>"u")return U;var $;if(i==="comma"&&gr(E))w&&u&&(E=Fo.maybeMap(E,u)),$=[{value:E.length>0?E.join(",")||null:void 0}];else if(gr(d))$=d;else{var Y=Object.keys(E);$=f?Y.sort(f):Y}var H=l?String(e).replace(/\./g,"%2E"):String(e),B=s&&gr(E)&&E.length===1?H+"[]":H;if(n&&gr(E)&&E.length===0)return B+"[]";for(var F=0;F<$.length;++F){var z=$[F],Z=typeof z=="object"&&z&&typeof z.value<"u"?z.value:E[z];if(!(a&&Z===null)){var et=m&&l?String(z).replace(/\./g,"%2E"):String(z),ut=gr(E)?typeof i=="function"?i(B,et):B:B+(m?"."+et:"["+et+"]");C.set(t,k);var yt=Lg();yt.set(ql,C),Fg(U,r(Z,ut,i,s,n,o,a,l,i==="comma"&&w&&gr(E)?null:u,d,f,m,v,y,b,w,S,yt))}}return U},OE=function(t){if(!t)return ue;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||ue.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=pn.default;if(typeof t.format<"u"){if(!IE.call(pn.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var s=pn.formatters[i],n=ue.filter;(typeof t.filter=="function"||gr(t.filter))&&(n=t.filter);var o;if(t.arrayFormat in Bg?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=ue.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:ue.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ue.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ue.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ue.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ue.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ue.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ue.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ue.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ue.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ue.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ue.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ue.strictNullHandling}},LE=function(r,t){var e=r,i=OE(t),s,n;typeof i.filter=="function"?(n=i.filter,e=n("",e)):gr(i.filter)&&(n=i.filter,s=n);var o=[];if(typeof e!="object"||e===null)return"";var a=Bg[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;s||(s=Object.keys(e)),i.sort&&s.sort(i.sort);for(var u=Lg(),d=0;d<s.length;++d){var f=s[d],m=e[f];i.skipNulls&&m===null||Fg(o,DE(m,f,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var v=o.join(i.delimiter),y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),v.length>0?y+v:""},zi=Og,Xc=Object.prototype.hasOwnProperty,Ip=Array.isArray,ne={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:zi.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},BE=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},Ng=function(r,t,e){if(r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1)return r.split(",");if(t.throwOnLimitExceeded&&e>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(t.arrayLimit===1?"":"s")+" allowed in an array.");return r},FE="utf8=%26%2310003%3B",NE="utf8=%E2%9C%93",UE=function(t,e){var i={__proto__:null},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var n=e.parameterLimit===1/0?void 0:e.parameterLimit,o=s.split(e.delimiter,e.throwOnLimitExceeded?n+1:n);if(e.throwOnLimitExceeded&&o.length>n)throw new RangeError("Parameter limit exceeded. Only "+n+" parameter"+(n===1?"":"s")+" allowed.");var a=-1,l,u=e.charset;if(e.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===NE?u="utf-8":o[l]===FE&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var d=o[l],f=d.indexOf("]="),m=f===-1?d.indexOf("="):f+1,v,y;m===-1?(v=e.decoder(d,ne.decoder,u,"key"),y=e.strictNullHandling?null:""):(v=e.decoder(d.slice(0,m),ne.decoder,u,"key"),y=zi.maybeMap(Ng(d.slice(m+1),e,Ip(i[v])?i[v].length:0),function(w){return e.decoder(w,ne.decoder,u,"value")})),y&&e.interpretNumericEntities&&u==="iso-8859-1"&&(y=BE(String(y))),d.indexOf("[]=")>-1&&(y=Ip(y)?[y]:y);var b=Xc.call(i,v);b&&e.duplicates==="combine"?i[v]=zi.combine(i[v],y):(!b||e.duplicates==="last")&&(i[v]=y)}return i},$E=function(r,t,e,i){var s=0;if(r.length>0&&r[r.length-1]==="[]"){var n=r.slice(0,-1).join("");s=Array.isArray(t)&&t[n]?t[n].length:0}for(var o=i?t:Ng(t,e,s),a=r.length-1;a>=0;--a){var l,u=r[a];if(u==="[]"&&e.parseArrays)l=e.allowEmptyArrays&&(o===""||e.strictNullHandling&&o===null)?[]:zi.combine([],o);else{l=e.plainObjects?{__proto__:null}:{};var d=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,f=e.decodeDotInKeys?d.replace(/%2E/g,"."):d,m=parseInt(f,10);!e.parseArrays&&f===""?l={0:o}:!isNaN(m)&&u!==f&&String(m)===f&&m>=0&&e.parseArrays&&m<=e.arrayLimit?(l=[],l[m]=o):f!=="__proto__"&&(l[f]=o)}o=l}return o},GE=function(t,e,i,s){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(n),u=l?n.slice(0,l.index):n,d=[];if(u){if(!i.plainObjects&&Xc.call(Object.prototype,u)&&!i.allowPrototypes)return;d.push(u)}for(var f=0;i.depth>0&&(l=a.exec(n))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&Xc.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");d.push("["+n.slice(l.index)+"]")}return $E(d,e,i,s)}},HE=function(t){if(!t)return ne;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof t.throwOnLimitExceeded<"u"&&typeof t.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e=typeof t.charset>"u"?ne.charset:t.charset,i=typeof t.duplicates>"u"?ne.duplicates:t.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:ne.allowDots:!!t.allowDots;return{allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ne.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:ne.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:ne.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:ne.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ne.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:ne.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:ne.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:ne.decoder,delimiter:typeof t.delimiter=="string"||zi.isRegExp(t.delimiter)?t.delimiter:ne.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:ne.depth,duplicates:i,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:ne.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:ne.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:ne.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:ne.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ne.strictNullHandling,throwOnLimitExceeded:typeof t.throwOnLimitExceeded=="boolean"?t.throwOnLimitExceeded:!1}},zE=function(r,t){var e=HE(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?{__proto__:null}:{};for(var i=typeof r=="string"?UE(r,e):r,s=e.plainObjects?{__proto__:null}:{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],l=GE(a,i[a],e,typeof r=="string");s=zi.merge(s,l,e)}return e.allowSparse===!0?s:zi.compact(s)},jE=LE,VE=zE,WE=xu,XE={formats:WE,parse:VE,stringify:jE},YE=eT;function tr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var qE=/^([a-z0-9.+-]+:)/i,KE=/:[0-9]*$/,ZE=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,QE=["<",">",'"',"`"," ","\r",`
`,"	"],JE=["{","}","|","\\","^","`"].concat(QE),Yc=["'"].concat(JE),Rp=["%","/","?",";","#"].concat(Yc),Mp=["/","?","#"],tS=255,kp=/^[+a-z0-9A-Z_-]{0,63}$/,eS=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rS={javascript:!0,"javascript:":!0},qc={javascript:!0,"javascript:":!0},ys={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Kc=XE;function $a(r,t,e){if(r&&typeof r=="object"&&r instanceof tr)return r;var i=new tr;return i.parse(r,t,e),i}tr.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),s=i!==-1&&i<r.indexOf("#")?"?":"#",n=r.split(s),o=/\\/g;n[0]=n[0].replace(o,"/"),r=n.join(s);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=ZE.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Kc.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=qE.exec(a);if(u){u=u[0];var d=u.toLowerCase();this.protocol=d,a=a.substr(u.length)}if(e||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var f=a.substr(0,2)==="//";f&&!(u&&qc[u])&&(a=a.substr(2),this.slashes=!0)}if(!qc[u]&&(f||u&&!ys[u])){for(var m=-1,v=0;v<Mp.length;v++){var y=a.indexOf(Mp[v]);y!==-1&&(m===-1||y<m)&&(m=y)}var b,w;m===-1?w=a.lastIndexOf("@"):w=a.lastIndexOf("@",m),w!==-1&&(b=a.slice(0,w),a=a.slice(w+1),this.auth=decodeURIComponent(b)),m=-1;for(var v=0;v<Rp.length;v++){var y=a.indexOf(Rp[v]);y!==-1&&(m===-1||y<m)&&(m=y)}m===-1&&(m=a.length),this.host=a.slice(0,m),a=a.slice(m),this.parseHost(),this.hostname=this.hostname||"";var S=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!S)for(var C=this.hostname.split(/\./),v=0,E=C.length;v<E;v++){var R=C[v];if(R&&!R.match(kp)){for(var k="",N=0,P=R.length;N<P;N++)R.charCodeAt(N)>127?k+="x":k+=R[N];if(!k.match(kp)){var O=C.slice(0,v),U=C.slice(v+1),$=R.match(eS);$&&(O.push($[1]),U.unshift($[2])),U.length&&(a="/"+U.join(".")+a),this.hostname=O.join(".");break}}}this.hostname.length>tS?this.hostname="":this.hostname=this.hostname.toLowerCase(),S||(this.hostname=YE.toASCII(this.hostname));var Y=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+Y,this.href+=this.host,S&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!rS[d])for(var v=0,E=Yc.length;v<E;v++){var B=Yc[v];if(a.indexOf(B)!==-1){var F=encodeURIComponent(B);F===B&&(F=escape(B)),a=a.split(B).join(F)}}var z=a.indexOf("#");z!==-1&&(this.hash=a.substr(z),a=a.slice(0,z));var Z=a.indexOf("?");if(Z!==-1?(this.search=a.substr(Z),this.query=a.substr(Z+1),t&&(this.query=Kc.parse(this.query)),a=a.slice(0,Z)):t&&(this.search="",this.query={}),a&&(this.pathname=a),ys[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Y=this.pathname||"",et=this.search||"";this.path=Y+et}return this.href=this.format(),this};function iS(r){return typeof r=="string"&&(r=$a(r)),r instanceof tr?r.format():tr.prototype.format.call(r)}tr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=Kc.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||ys[t])&&s!==!1?(s="//"+(s||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+s+e+o+i};function sS(r,t){return $a(r,!1,!0).resolve(t)}tr.prototype.resolve=function(r){return this.resolveObject($a(r,!1,!0)).format()};tr.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new tr;t.parse(r,!1,!0),r=t}for(var e=new tr,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];e[n]=this[n]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=r[l])}return ys[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!ys[r.protocol]){for(var u=Object.keys(r),d=0;d<u.length;d++){var f=u[d];e[f]=r[f]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!qc[r.protocol]){for(var E=(r.pathname||"").split("/");E.length&&!(r.host=E.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),E[0]!==""&&E.unshift(""),E.length<2&&E.unshift(""),e.pathname=E.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var m=e.pathname||"",v=e.search||"";e.path=m+v}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var y=e.pathname&&e.pathname.charAt(0)==="/",b=r.host||r.pathname&&r.pathname.charAt(0)==="/",w=b||y||e.host&&r.pathname,S=w,C=e.pathname&&e.pathname.split("/")||[],E=r.pathname&&r.pathname.split("/")||[],R=e.protocol&&!ys[e.protocol];if(R&&(e.hostname="",e.port=null,e.host&&(C[0]===""?C[0]=e.host:C.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(E[0]===""?E[0]=r.host:E.unshift(r.host)),r.host=null),w=w&&(E[0]===""||C[0]==="")),b)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,C=E;else if(E.length)C||(C=[]),C.pop(),C=C.concat(E),e.search=r.search,e.query=r.query;else if(r.search!=null){if(R){e.host=C.shift(),e.hostname=e.host;var k=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;k&&(e.auth=k.shift(),e.hostname=k.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!C.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var N=C.slice(-1)[0],P=(e.host||r.host||C.length>1)&&(N==="."||N==="..")||N==="",O=0,U=C.length;U>=0;U--)N=C[U],N==="."?C.splice(U,1):N===".."?(C.splice(U,1),O++):O&&(C.splice(U,1),O--);if(!w&&!S)for(;O--;O)C.unshift("..");w&&C[0]!==""&&(!C[0]||C[0].charAt(0)!=="/")&&C.unshift(""),P&&C.join("/").substr(-1)!=="/"&&C.push("");var $=C[0]===""||C[0]&&C[0].charAt(0)==="/";if(R){e.hostname=$?"":C.length?C.shift():"",e.host=e.hostname;var k=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;k&&(e.auth=k.shift(),e.hostname=k.shift(),e.host=e.hostname)}return w=w||e.host&&C.length,w&&!$&&C.unshift(""),C.length>0?e.pathname=C.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};tr.prototype.parseHost=function(){var r=this.host,t=KE.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var vD=$a,yD=sS,_D=iS;const Dp={};function kt(r,t,e=3){if(Dp[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),Dp[t]=!0}function Xe(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function Ys(r){return r.split("?")[0].split("#")[0]}function nS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function oS(r,t,e){return r.replace(new RegExp(nS(t),"g"),e)}function aS(r,t){let e="",i=0,s=-1,n=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||n===1))if(s!==a-1&&n===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),s=a,n=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=a,n=0;continue}}}else e.length>0?e+=`/${r.slice(s+1,a)}`:e=r.slice(s+1,a),i=a-s-1;s=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const ye={toPosix(r){return oS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Xe(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(Xe(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=Ys(this.toPosix(t??ot.ADAPTER.getBaseUrl())),s=Ys(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?ye.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(Xe(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=aS(r),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return Xe(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(Xe(i),i.length>0)if(t===void 0)t=i;else{const s=r[e-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Xe(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,s=!0;const n=this.getProtocol(r),o=r;r=r.slice(n.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?e?"/":this.isUrl(o)?n+r:n:e&&i===1?"//":n+r.slice(0,i)},rootname(r){Xe(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Xe(r),t&&Xe(t),r=Ys(this.toPosix(r));let e=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let o=t.length-1,a=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===47){if(!s){e=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===47){if(!s){e=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(e,i)},extname(r){Xe(r),r=Ys(this.toPosix(r));let t=-1,e=0,i=-1,s=!0,n=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!s){e=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){Xe(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=Ys(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let s;t.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let n=-1,o=0,a=-1,l=!0,u=r.length-1,d=0;for(;u>=s;--u){if(e=r.charCodeAt(u),e===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),e===46?n===-1?n=u:d!==1&&(d=1):n!==-1&&(d=-1)}return n===-1||a===-1||d===0||d===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=r.slice(1,a):t.base=t.name=r.slice(o,a)):(o===0&&i?(t.name=r.slice(1,n),t.base=r.slice(1,a)):(t.name=r.slice(o,n),t.base=r.slice(o,a)),t.ext=r.slice(n,a)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Kl;async function lS(){return Kl??(Kl=(async()=>{var n;const r=document.createElement("canvas").getContext("webgl");if(!r)return Re.UNPACK;const t=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return Re.UNPACK;const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(i),r.deleteTexture(e),(n=r.getExtension("WEBGL_lose_context"))==null||n.loseContext(),s[0]<=s[3]?Re.PMA:Re.UNPACK})()),Kl}let Zl;function cS(){return typeof Zl>"u"&&(Zl=function(){var t;const r={stencil:!0,failIfMajorPerformanceCaveat:ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ot.ADAPTER.getWebGLRenderingContext())return!1;const e=ot.ADAPTER.createCanvas();let i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);const s=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,s}catch{return!1}}()),Zl}var hS={grad:.9,turn:360,rad:360/(2*Math.PI)},Or=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},ve=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Ge=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},Ug=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Op=function(r){return{r:Ge(r.r,0,255),g:Ge(r.g,0,255),b:Ge(r.b,0,255),a:Ge(r.a)}},Ql=function(r){return{r:ve(r.r),g:ve(r.g),b:ve(r.b),a:ve(r.a,3)}},uS=/^#([0-9a-f]{3,8})$/i,po=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},$g=function(r){var t=r.r,e=r.g,i=r.b,s=r.a,n=Math.max(t,e,i),o=n-Math.min(t,e,i),a=o?n===t?(e-i)/o:n===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:s}},Gg=function(r){var t=r.h,e=r.s,i=r.v,s=r.a;t=t/360*6,e/=100,i/=100;var n=Math.floor(t),o=i*(1-e),a=i*(1-(t-n)*e),l=i*(1-(1-t+n)*e),u=n%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:s}},Lp=function(r){return{h:Ug(r.h),s:Ge(r.s,0,100),l:Ge(r.l,0,100),a:Ge(r.a)}},Bp=function(r){return{h:ve(r.h),s:ve(r.s),l:ve(r.l),a:ve(r.a,3)}},Fp=function(r){return Gg((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},fn=function(r){return{h:(t=$g(r)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},dS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zc={string:[[function(r){var t=uS.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?ve(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?ve(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=fS.exec(r)||mS.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Op({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=dS.exec(r)||pS.exec(r);if(!t)return null;var e,i,s=Lp({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(hS[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Fp(s)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,s=r.a,n=s===void 0?1:s;return Or(t)&&Or(e)&&Or(i)?Op({r:Number(t),g:Number(e),b:Number(i),a:Number(n)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,s=r.a,n=s===void 0?1:s;if(!Or(t)||!Or(e)||!Or(i))return null;var o=Lp({h:Number(t),s:Number(e),l:Number(i),a:Number(n)});return Fp(o)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,s=r.a,n=s===void 0?1:s;if(!Or(t)||!Or(e)||!Or(i))return null;var o=function(a){return{h:Ug(a.h),s:Ge(a.s,0,100),v:Ge(a.v,0,100),a:Ge(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(n)});return Gg(o)},"hsv"]]},Np=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},gS=function(r){return typeof r=="string"?Np(r.trim(),Zc.string):typeof r=="object"&&r!==null?Np(r,Zc.object):[null,void 0]},Jl=function(r,t){var e=fn(r);return{h:e.h,s:Ge(e.s+100*t,0,100),l:e.l,a:e.a}},tc=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Up=function(r,t){var e=fn(r);return{h:e.h,s:e.s,l:Ge(e.l+100*t,0,100),a:e.a}},Qc=function(){function r(t){this.parsed=gS(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return ve(tc(this.rgba),2)},r.prototype.isDark=function(){return tc(this.rgba)<.5},r.prototype.isLight=function(){return tc(this.rgba)>=.5},r.prototype.toHex=function(){return t=Ql(this.rgba),e=t.r,i=t.g,s=t.b,o=(n=t.a)<1?po(ve(255*n)):"","#"+po(e)+po(i)+po(s)+o;var t,e,i,s,n,o},r.prototype.toRgb=function(){return Ql(this.rgba)},r.prototype.toRgbString=function(){return t=Ql(this.rgba),e=t.r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+s+", "+n+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,n},r.prototype.toHsl=function(){return Bp(fn(this.rgba))},r.prototype.toHslString=function(){return t=Bp(fn(this.rgba)),e=t.h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+n+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,n},r.prototype.toHsv=function(){return t=$g(this.rgba),{h:ve(t.h),s:ve(t.s),v:ve(t.v),a:ve(t.a,3)};var t},r.prototype.invert=function(){return ur({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),ur(Jl(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),ur(Jl(this.rgba,-t))},r.prototype.grayscale=function(){return ur(Jl(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),ur(Up(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),ur(Up(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?ur({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):ve(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=fn(this.rgba);return typeof t=="number"?ur({h:t,s:e.s,l:e.l,a:e.a}):ve(e.h)},r.prototype.isEqual=function(t){return this.toHex()===ur(t).toHex()},r}(),ur=function(r){return r instanceof Qc?r:new Qc(r)},$p=[],vS=function(r){r.forEach(function(t){$p.indexOf(t)<0&&(t(Qc,Zc),$p.push(t))})};function yS(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var n={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o!=null&&o.closest){var d=this.toRgb(),f=1/0,m="black";if(!n.length)for(var v in e)n[v]=new r(e[v]).toRgb();for(var y in e){var b=(a=d,l=n[y],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));b<f&&(f=b,m=y)}return m}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new r(l).toRgb():null},"name"])}vS([yS]);const os=class No{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof No)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,n)=>s===e[n]);if(t!==null&&e!==null){const s=Object.keys(t),n=Object.keys(e);return s.length!==n.length?!1:s.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toRgbArray(t){t=t??[];const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,s,n]=No.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,n=n*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,s]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(s*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,s,n]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}normalize(t){let e,i,s,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,s=(o&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,n=255]=t,e/=255,i/=255,s/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=No.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=ur(t);o.isValid()&&({r:e,g:i,b:s,a:n}=o.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,n)=>{t[n]=Math.min(Math.max(s,e),i)}),t)}};os.shared=new os,os.temp=new os,os.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Xt=os;function _S(r){return kt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Xt.shared.setValue(r).toHex()}function bS(r){return kt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Xt.shared.setValue(r).toNumber()}function xS(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[bt.NORMAL_NPM]=bt.NORMAL,r[bt.ADD_NPM]=bt.ADD,r[bt.SCREEN_NPM]=bt.SCREEN,t[bt.NORMAL]=bt.NORMAL_NPM,t[bt.ADD]=bt.ADD_NPM,t[bt.SCREEN]=bt.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const Hg=xS();function zg(r,t){return Hg[t?1:0][r]}function wS(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,s=0;i<e;i+=6,s+=4)t[i+0]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3;return t}function jg(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function ea(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function Gp(r){return!(r&r-1)&&!!r}function Hp(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function _s(r,t,e){const i=r.length;let s;if(t>=i||e===0)return;e=t+e>i?i-t:e;const n=i-e;for(s=t;s<n;++s)r[s]=r[s+e];r.length=n}function li(r){return r===0?0:r<0?-1:1}let TS=0;function ji(){return++TS}const Jc=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Jc.EMPTY=new Jc(0,0,0,0);let zp=Jc;const jp={},dr=Object.create(null),Jr=Object.create(null);class ES{constructor(t,e,i){this._canvas=ot.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||ot.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Vp(r,t,e){for(let i=0,s=4*e*t;i<t;++i,s+=4)if(r[s+3]!==0)return!1;return!0}function Wp(r,t,e,i,s){const n=4*t;for(let o=i,a=i*n+4*e;o<=s;++o,a+=n)if(r[a+3]!==0)return!1;return!0}function SS(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,t,e).data;let n=0,o=0,a=t-1,l=e-1;for(;o<e&&Vp(s,t,o);)++o;if(o===e)return zp.EMPTY;for(;Vp(s,t,l);)--l;for(;Wp(s,t,n,o,l);)++n;for(;Wp(s,t,a,o,l);)--a;return++a,++l,new zp(n,o,a,l)}function AS(r){const t=SS(r),{width:e,height:i}=t;let s=null;if(!t.isEmpty()){const n=r.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:s}}function CS(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function Vr(r,t=1){var i;const e=(i=ot.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var rt=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(rt||{});const th=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Xp=(r,t)=>th(r).priority??t,pt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(th).forEach(t=>{t.type.forEach(e=>{var i,s;return(s=(i=this._removeHandlers)[e])==null?void 0:s.call(i,t)})}),this},add(...r){return r.map(th).forEach(t=>{t.type.forEach(e=>{var n,o;const i=this._addHandlers,s=this._queue;i[e]?(n=i[e])==null||n.call(i,t):(s[e]=s[e]||[],(o=s[e])==null||o.push(t))})}),this},handle(r,t,e){var o;const i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,s[r]=e;const n=this._queue;return n[r]&&((o=n[r])==null||o.forEach(a=>t(a)),delete n[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,n)=>Xp(n,e)-Xp(s,e)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})}};class eh{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const PS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function IS(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function RS(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=PS.replace(/%forloop%/gi,IS(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const ec=0,rc=1,ic=2,sc=3,nc=4,oc=5;class Ir{constructor(){this.data=0,this.blendMode=bt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<ec)}set blend(t){!!(this.data&1<<ec)!==t&&(this.data^=1<<ec)}get offsets(){return!!(this.data&1<<rc)}set offsets(t){!!(this.data&1<<rc)!==t&&(this.data^=1<<rc)}get culling(){return!!(this.data&1<<ic)}set culling(t){!!(this.data&1<<ic)!==t&&(this.data^=1<<ic)}get depthTest(){return!!(this.data&1<<sc)}set depthTest(t){!!(this.data&1<<sc)!==t&&(this.data^=1<<sc)}get depthMask(){return!!(this.data&1<<oc)}set depthMask(t){!!(this.data&1<<oc)!==t&&(this.data^=1<<oc)}get clockwiseFrontFace(){return!!(this.data&1<<nc)}set clockwiseFrontFace(t){!!(this.data&1<<nc)!==t&&(this.data^=1<<nc)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==bt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new Ir;return t.depthTest=!1,t.blend=!0,t}}Ir.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const rh=[];function Vg(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=rh.length-1;i>=0;--i){const s=rh[i];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class er{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,s,n,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:d}=this;this._aliasCount++;for(let f=0,m=d.length;f<m;f++)d[f][u](t,e,i,s,n,o,a,l);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(er.prototype,{dispatch:{value:er.prototype.emit},run:{value:er.prototype.emit}});class An{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new er("setRealSize"),this.onUpdate=new er("update"),this.onError=new er("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Ga extends An{constructor(t,e){const{width:i,height:s}=e||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const s=t.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Re.UNPACK);const n=e.realWidth,o=e.realHeight;return i.width===n&&i.height===o?s.texSubImage2D(e.target,0,0,0,n,o,e.format,i.type,this.data):(i.width=n,i.height=o,s.texImage2D(e.target,0,i.internalFormat,n,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const MS={scaleMode:Fr.NEAREST,alphaMode:Re.NPM},ih=class as extends Fn{constructor(t=null,e=null){super(),e=Object.assign({},as.defaultOptions,e);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:o,width:a,height:l,wrapMode:u,format:d,type:f,target:m,resolution:v,resourceOptions:y}=e;t&&!(t instanceof An)&&(t=Vg(t,y),t.internal=!0),this.resolution=v||ot.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=u,this._scaleMode=o,this.format=d,this.type=f,this.target=m,this.alphaMode=i,this.uid=ji(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Gp(this.realWidth)&&Gp(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Jr[this.cacheId],delete dr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),as.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=ot.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${ji()}`}n=t._pixiId}let o=Jr[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return o||(o=new as(t,e),o.cacheId=n,as.addToCache(o,n)),o}static fromBuffer(t,e,i,s){t=t||new Float32Array(e*i*4);const n=new Ga(t,{width:e,height:i,...s==null?void 0:s.resourceOptions});let o,a;return t instanceof Float32Array?(o=K.RGBA,a=gt.FLOAT):t instanceof Int32Array?(o=K.RGBA_INTEGER,a=gt.INT):t instanceof Uint32Array?(o=K.RGBA_INTEGER,a=gt.UNSIGNED_INT):t instanceof Int16Array?(o=K.RGBA_INTEGER,a=gt.SHORT):t instanceof Uint16Array?(o=K.RGBA_INTEGER,a=gt.UNSIGNED_SHORT):t instanceof Int8Array?(o=K.RGBA,a=gt.BYTE):(o=K.RGBA,a=gt.UNSIGNED_BYTE),n.internal=!0,new as(n,Object.assign({},MS,{type:a,format:o},s))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Jr[e]&&Jr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Jr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Jr[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Jr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Jr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};ih.defaultOptions={mipmap:Ar.POW2,anisotropicLevel:0,scaleMode:Fr.LINEAR,wrapMode:ui.CLAMP,alphaMode:Re.UNPACK,target:gs.TEXTURE_2D,format:K.RGBA,type:gt.UNSIGNED_BYTE},ih._globalBatch=0;let Et=ih;class sh{constructor(){this.texArray=null,this.blend=0,this.type=_r.TRIANGLES,this.start=0,this.size=0,this.data=null}}let kS=0;class ae{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=kS++,this.disposeRunner=new er("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?wr.ELEMENT_ARRAY_BUFFER:wr.ARRAY_BUFFER}get index(){return this.type===wr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ae(t)}}class ra{constructor(t,e=0,i=!1,s=gt.FLOAT,n,o,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=s,this.stride=n,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,s,n){return new ra(t,e,i,s,n)}}const DS={Float32Array,Uint32Array,Int32Array,Uint8Array};function OS(r,t){let e=0,i=0;const s={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;const n=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=t[l],d=r[l],f=jg(d);s[f]||(s[f]=new DS[f](n)),o=s[f];for(let m=0;m<d.length;m++){const v=(m/u|0)*i+a,y=m%u;o[v+y]=d[m]}a+=u}return new Float32Array(n)}const Yp={5126:4,5123:2,5121:1};let LS=0;const BS={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class gi{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=LS++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new er("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,s=!1,n,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ae||(e instanceof Array&&(e=new Float32Array(e)),e=new ae(e));const u=t.split("|");if(u.length>1){for(let f=0;f<u.length;f++)this.addAttribute(u[f],e,i,s,n);return this}let d=this.buffers.indexOf(e);return d===-1&&(this.buffers.push(e),d=this.buffers.length-1),this.attributes[t]=new ra(d,i,s,n,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ae||(t instanceof Array&&(t=new Uint16Array(t)),t=new ae(t)),t.type=wr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new ae;let s;for(s in this.attributes){const n=this.attributes[s],o=this.buffers[n.buffer];t.push(o.data),e.push(n.size*Yp[n.type]/4),n.buffer=0}for(i.data=OS(t,e),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new gi;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ae(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new ra(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=wr.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new gi,i=[],s=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l]=s[l]||0,s[l]+=o.buffers[l].data.length,n[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new BS[jg(o.buffers[a].data)](s[a]),e.buffers[a]=new ae(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,n[l]),n[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=wr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,d=0;for(let f=0;f<o.buffers.length;f++)if(o.buffers[f]!==o.indexBuffer){d=f;break}for(const f in o.attributes){const m=o.attributes[f];(m.buffer|0)===d&&(l+=m.size*Yp[m.type]/4)}for(let f=0;f<t.length;f++){const m=t[f].indexBuffer.data;for(let v=0;v<m.length;v++)e.indexBuffer.data[v+u]+=a;a+=t[f].buffers[d].data.length/l,u+=m.length}}return e}}class Wg extends gi{constructor(t=!1){super(),this._buffer=new ae(null,t,!1),this._indexBuffer=new ae(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,gt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,gt.FLOAT).addAttribute("aColor",this._buffer,4,!0,gt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,gt.FLOAT).addIndex(this._indexBuffer)}}const ia=Math.PI*2,FS=180/Math.PI,NS=Math.PI/180;var be=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(be||{});class Bt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Bt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}Bt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const fo=[new Bt,new Bt,new Bt,new Bt];class Ct{constructor(t=0,e=0,i=0,s=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s),this.type=be.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ct(0,0,0,0)}clone(){return new Ct(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const O=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=O)return!1;const U=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>U}const i=this.left,s=this.right,n=this.top,o=this.bottom;if(s<=i||o<=n)return!1;const a=fo[0].set(t.left,t.top),l=fo[1].set(t.left,t.bottom),u=fo[2].set(t.right,t.top),d=fo[3].set(t.right,t.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const f=Math.sign(e.a*e.d-e.b*e.c);if(f===0||(e.apply(a,a),e.apply(l,l),e.apply(u,u),e.apply(d,d),Math.max(a.x,l.x,u.x,d.x)<=i||Math.min(a.x,l.x,u.x,d.x)>=s||Math.max(a.y,l.y,u.y,d.y)<=n||Math.min(a.y,l.y,u.y,d.y)>=o))return!1;const m=f*(l.y-a.y),v=f*(a.x-l.x),y=m*i+v*n,b=m*s+v*n,w=m*i+v*o,S=m*s+v*o;if(Math.max(y,b,w,S)<=m*a.x+v*a.y||Math.min(y,b,w,S)>=m*d.x+v*d.y)return!1;const C=f*(a.y-u.y),E=f*(u.x-a.x),R=C*i+E*n,k=C*s+E*n,N=C*i+E*o,P=C*s+E*o;return!(Math.max(R,k,N,P)<=C*a.x+E*a.y||Math.min(R,k,N,P)>=C*d.x+E*d.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=n-s,this}}Ct.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ha{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=be.CIRC}clone(){return new Ha(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i}getBounds(){return new Ct(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Ha.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class za{constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.width=i,this.height=s,this.type=be.ELIP}clone(){return new za(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,s=(e-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new Ct(this.x-this.width,this.y-this.height,this.width,this.height)}}za.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Fi{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,n=e.length;s<n;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.type=be.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Fi(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let n=0,o=s-1;n<s;o=n++){const a=this.points[n*2],l=this.points[n*2+1],u=this.points[o*2],d=this.points[o*2+1];l>e!=d>e&&t<(u-a)*((e-l)/(d-l))+a&&(i=!i)}return i}}Fi.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`};class ja{constructor(t=0,e=0,i=0,s=0,n=20){this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n,this.type=be.RREC}clone(){return new ja(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=e-(this.y+i);const o=i*i;if(s*s+n*n<=o||(s=t-(this.x+this.width-i),s*s+n*n<=o)||(n=e-(this.y+this.height-i),s*s+n*n<=o)||(s=t-(this.x+i),s*s+n*n<=o))return!0}return!1}}ja.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Yt{constructor(t=1,e=0,i=0,s=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,n,o){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Bt;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new Bt;const i=1/(this.a*this.d+this.c*-this.b),s=t.x,n=t.y;return e.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,o=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,e,i,s,n,o,a,l,u){return this.a=Math.cos(a+u)*n,this.b=Math.sin(a+u)*n,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,s=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-s,n),l=Math.atan2(i,e),u=Math.abs(a+l);return u<1e-5||Math.abs(ia-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+n*n),t.position.x=this.tx+(o.x*e+o.y*s),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-e*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Yt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Yt}static get TEMP_MATRIX(){return new Yt}}Yt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Ci=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Pi=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ii=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ri=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],nh=[],Xg=[],mo=Math.sign;function US(){for(let r=0;r<16;r++){const t=[];nh.push(t);for(let e=0;e<16;e++){const i=mo(Ci[r]*Ci[e]+Ii[r]*Pi[e]),s=mo(Pi[r]*Ci[e]+Ri[r]*Pi[e]),n=mo(Ci[r]*Ii[e]+Ii[r]*Ri[e]),o=mo(Pi[r]*Ii[e]+Ri[r]*Ri[e]);for(let a=0;a<16;a++)if(Ci[a]===i&&Pi[a]===s&&Ii[a]===n&&Ri[a]===o){t.push(a);break}}}for(let r=0;r<16;r++){const t=new Yt;t.set(Ci[r],Pi[r],Ii[r],Ri[r],0,0),Xg.push(t)}}US();const Jt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Ci[r],uY:r=>Pi[r],vX:r=>Ii[r],vY:r=>Ri[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>nh[r][t],sub:(r,t)=>nh[r][Jt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Jt.S:Jt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Jt.E:Jt.W:t>0?r>0?Jt.SE:Jt.SW:r>0?Jt.NE:Jt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const s=Xg[Jt.inv(t)];s.tx=e,s.ty=i,r.append(s)}};class Ur{constructor(t,e,i=0,s=0){this._x=i,this._y=s,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Ur(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}Ur.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const oh=class{constructor(){this.worldTransform=new Yt,this.localTransform=new Yt,this.position=new Ur(this.onChange,this,0,0),this.scale=new Ur(this.onChange,this,1,1),this.pivot=new Ur(this.onChange,this,0,0),this.skew=new Ur(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};oh.IDENTITY=new oh;let wu=oh;wu.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var $S=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,GS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function qp(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function ac(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Yg(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ac(2*t);case"bvec3":return ac(3*t);case"bvec4":return ac(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const bs=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],HS={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},zS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function jS(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in r.uniforms){const n=t[s];if(!n){((i=r.uniforms[s])==null?void 0:i.group)===!0&&(r.uniforms[s].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=r.uniforms[s];let a=!1;for(let l=0;l<bs.length;l++)if(bs[l].test(n,o)){e.push(bs[l].code(s,o)),a=!0;break}if(!a){const l=(n.size===1&&!n.isArray?HS:zS)[n.type].replace("location",`ud["${s}"].location`);e.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const qg={};let is=qg;function VS(){if(is===qg||is!=null&&is.isContextLost()){const r=ot.ADAPTER.createCanvas();let t;ot.PREFER_ENV>=Yi.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),is=t}return is}let go;function WS(){if(!go){go=$e.MEDIUM;const r=VS();if(r&&r.getShaderPrecisionFormat){const t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(go=t.precision?$e.HIGH:$e.MEDIUM)}}return go}function Kp(r,t){const e=r.getShaderSource(t).split(`
`).map((u,d)=>`${d}: ${u}`),i=r.getShaderInfoLog(t),s=i.split(`
`),n={},o=s.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!n[u]?(n[u]=!0,!0):!1),a=[""];o.forEach(u=>{e[u-1]=`%c${e[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function XS(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||Kp(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||Kp(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const YS={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Kg(r){return YS[r]}let vo=null;const Zp={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Zg(r,t){if(!vo){const e=Object.keys(Zp);vo={};for(let i=0;i<e.length;++i){const s=e[i];vo[r[s]]=Zp[s]}}return vo[t]}function Qp(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===$e.HIGH&&e!==$e.HIGH&&(i=$e.MEDIUM),`precision ${i} float;
${r}`}else if(e!==$e.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let qs;function qS(){if(typeof qs=="boolean")return qs;try{qs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{qs=!1}return qs}let KS=0;const yo={},ah=class ls{constructor(t,e,i="pixi-shader",s={}){this.extra={},this.id=KS++,this.vertexSrc=t||ls.defaultVertexSrc,this.fragmentSrc=e||ls.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),yo[i]?(yo[i]++,i+=`-${yo[i]}`):yo[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Qp(this.vertexSrc,ls.defaultVertexPrecision,$e.HIGH),this.fragmentSrc=Qp(this.fragmentSrc,ls.defaultFragmentPrecision,WS())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return GS}static get defaultFragmentSrc(){return $S}static from(t,e,i){const s=t+e;let n=jp[s];return n||(jp[s]=n=new ls(t,e,i)),n}};ah.defaultVertexPrecision=$e.HIGH,ah.defaultFragmentPrecision=Nr.apple.device?$e.HIGH:$e.MEDIUM;let $r=ah,ZS=0;class rr{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ZS++,this.static=!!e,this.ubo=!!i,t instanceof ae?(this.buffer=t,this.buffer.type=wr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ae(new Float32Array(1)),this.buffer.type=wr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new rr(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new rr(t,e,i)}static uboFrom(t,e){return new rr(t,e??!0,!0)}}class Tr{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof rr?this.uniformGroup=e:this.uniformGroup=new rr(e):this.uniformGroup=new rr({}),this.disposeRunner=new er("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const s=e.uniforms[i];if(s.group===!0&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const s=$r.from(t,e);return new Tr(s,i)}}class QS{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=rr.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new $r(this.vertexSrc,s)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yt,default:this.defaultGroupCache[t]};return new Tr(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class lh{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function JS(){return!Nr.apple.device}function tA(r){let t=!0;const e=ot.ADAPTER.getNavigator();if(Nr.tablet||Nr.phone){if(Nr.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Nr.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}class Va{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var eA=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,rA=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Js=class qe extends Va{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=Wg,this.vertexSize=6,this.state=Ir.for2d(),this.size=qe.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??tA(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??JS(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return kt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return rA}static get defaultFragmentTemplate(){return eA}setShaderGenerator({vertex:t=qe.defaultVertexSrc,fragment:e=qe.defaultFragmentTemplate}={}){this.shaderGenerator=new QS(t,e)}contextChange(){const t=this.renderer.gl;ot.PREFER_ENV===Yi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),qe.defaultMaxTextures),this.maxTextures=RS(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=qe,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new sh);for(;e.length<s;)e.push(new lh);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=qe._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Et._globalBatch,l=0,u=i[0],d=0;s.copyBoundTextures(n,e);for(let f=0;f<this._bufferSize;++f){const m=t[f];t[f]=null,m._batchEnabled!==a&&(u.count>=e&&(s.boundArray(u,n,a,e),this.buildDrawCalls(u,d,f),d=f,u=i[++l],++a),m._batchEnabled=a,m.touched=o,u.elements[u.count++]=m)}u.count>0&&(s.boundArray(u,n,a,e),this.buildDrawCalls(u,d,this._bufferSize),++l,++a);for(let f=0;f<n.length;f++)n[f]=null;Et._globalBatch=a}buildDrawCalls(t,e,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:o,vertexSize:a}=this,l=qe._drawCallPool;let u=this._dcIndex,d=this._aIndex,f=this._iIndex,m=l[u];m.start=this._iIndex,m.texArray=t;for(let v=e;v<i;++v){const y=s[v],b=y._texture.baseTexture,w=Hg[b.alphaMode?1:0][y.blendMode];s[v]=null,e<v&&m.blend!==w&&(m.size=f-m.start,e=v,m=l[++u],m.texArray=t,m.start=f),this.packInterleavedGeometry(y,n,o,d,f),d+=y.vertexData.length/2*a,f+=y.indices.length,m.blend=w}e<i&&(m.size=f-m.start,++u),this._dcIndex=u,this._aIndex=d,this._iIndex=f}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;qe.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,s=qe._drawCallPool;let n=null;for(let o=0;o<t;o++){const{texArray:a,type:l,size:u,start:d,blend:f}=s[o];n!==a&&(n=a,this.bindAndClearTexArray(a)),this.state.blendMode=f,i.set(this.state),e.drawElements(l,u,e.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),qe.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=ea(Math.ceil(t/8)),i=Hp(e),s=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new eh(s*this.vertexSize*4)),n}getIndexBuffer(t){const e=ea(Math.ceil(t/12)),i=Hp(e),s=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(t,e,i,s,n){const{uint32View:o,float32View:a}=e,l=s/this.vertexSize,u=t.uvs,d=t.indices,f=t.vertexData,m=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),y=Xt.shared.setValue(t._tintRGB).toPremultiplied(v,t._texture.baseTexture.alphaMode>0);for(let b=0;b<f.length;b+=2)a[s++]=f[b],a[s++]=f[b+1],a[s++]=u[b],a[s++]=u[b+1],o[s++]=y,a[s++]=m;for(let b=0;b<d.length;b++)i[n++]=l+d[b]}};Js.defaultBatchSize=4096,Js.extension={name:"batch",type:rt.RendererPlugin},Js._drawCallPool=[],Js._textureArrayPool=[];let Mi=Js;pt.add(Mi);var iA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,sA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const ch=class tn extends Tr{constructor(t,e,i){const s=$r.from(t||tn.defaultVertexSrc,e||tn.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=tn.defaultResolution,this.multisample=tn.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ir}apply(t,e,i,s,n){t.applyFilter(this,e,i,s)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return sA}static get defaultFragmentSrc(){return iA}};ch.defaultResolution=1,ch.defaultMultisample=ce.NONE;let Ce=ch;class sa{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Xt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:s}=t,n=i??e;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}sa.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},sa.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"background"};pt.add(sa);class Qg{constructor(t){this.renderer=t,this.emptyRenderer=new Va(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let s=e-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,e,i,s){const{elements:n,ids:o,count:a}=t;let l=0;for(let u=0;u<a;u++){const d=n[u],f=d._batchLocation;if(f>=0&&f<s&&e[f]===d){o[u]=f;continue}for(;l<s;){const m=e[l];if(m&&m._batchEnabled===i&&m._batchLocation===l){l++;continue}o[u]=l,d._batchLocation=l,e[l]=d;break}}}destroy(){this.renderer=null}}Qg.extension={type:rt.RendererSystem,name:"batch"};pt.add(Qg);let Jp=0;class na{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Jp++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Jp++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(ot.PREFER_ENV>=Yi.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}na.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},na.extension={type:rt.RendererSystem,name:"context"};pt.add(na);class hh{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new er("disposeFramebuffer"),this.multisample=ce.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Et(null,{scaleMode:Fr.NEAREST,resolution:1,mipmap:Ar.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Et(null,{scaleMode:Fr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ar.OFF,format:K.DEPTH_COMPONENT,type:gt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(t/n,e/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Jg extends Et{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];t={width:e,height:i,scaleMode:s,resolution:n}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=ce.NONE),super(null,t),this.mipmap=Ar.OFF,this.valid=!0,this._clear=new Xt([0,0,0,0]),this.framebuffer=new hh(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Wr extends An{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,s=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(i,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=CS(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,s){const n=t.gl,o=e.realWidth,a=e.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Re.UNPACK),!this.noSubImage&&e.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,i.type,s):(i.width=o,i.height=a,n.texImage2D(e.target,0,i.internalFormat,e.format,i.type,s)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class tv extends Wr{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;Wr.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??ot.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>e(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Re.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=e._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==e.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Tu{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const s=e.width,n=e.height;if(i){const o=t.width/2/s,a=t.height/2/n,l=t.x/s+o,u=t.y/n+a;i=Jt.add(i,Jt.NW),this.x0=l+o*Jt.uX(i),this.y0=u+a*Jt.uY(i),i=Jt.add(i,2),this.x1=l+o*Jt.uX(i),this.y1=u+a*Jt.uY(i),i=Jt.add(i,2),this.x2=l+o*Jt.uX(i),this.y2=u+a*Jt.uY(i),i=Jt.add(i,2),this.x3=l+o*Jt.uX(i),this.y3=u+a*Jt.uY(i)}else this.x0=t.x/s,this.y0=t.y/n,this.x1=(t.x+t.width)/s,this.y1=t.y/n,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/n,this.x3=t.x/s,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}Tu.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const tf=new Tu;function _o(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class dt extends Fn{constructor(t,e,i,s,n,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Ct(0,0,1,1)),t instanceof dt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=tf,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Bt(o.x,o.y):new Bt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&dr[e.url]&&dt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,dt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new dt(this.baseTexture,!this.noFrame&&t,e,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===tf&&(this._uvs=new Tu),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=ot.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else if(t instanceof Et){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${ji()}`,Et.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${ji()}`}n=t._pixiId}let o=dr[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof Et)?(e.resolution||(e.resolution=Vr(t)),o=new dt(new Et(t,e)),o.baseTexture.cacheId=n,Et.addToCache(o.baseTexture,n),dt.addToCache(o,n)):!o&&t instanceof Et&&(o=new dt(t),dt.addToCache(o,n)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),s=dt.from(t,Object.assign({resourceOptions:i},e),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(t,e,i,s){return new dt(Et.fromBuffer(t,e,i,s))}static fromLoader(t,e,i,s){const n=new Et(t,Object.assign({scaleMode:Et.defaultOptions.scaleMode,resolution:Vr(e)},s)),{resource:o}=n;o instanceof tv&&(o.url=e);const a=new dt(n);return i||(i=e),Et.addToCache(a.baseTexture,i),dt.addToCache(a,i),i!==e&&(Et.addToCache(a.baseTexture,e),dt.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),dr[e]&&dr[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),dr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=dr[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete dr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)dr[t.textureCacheIds[e]]===t&&delete dr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:s,height:n}=t,o=e+s>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${e} + ${s} = ${e+s} > ${this.baseTexture.width}`,d=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${d}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return dt._EMPTY||(dt._EMPTY=new dt(new Et),_o(dt._EMPTY),_o(dt._EMPTY.baseTexture)),dt._EMPTY}static get WHITE(){if(!dt._WHITE){const t=ot.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),dt._WHITE=new dt(Et.from(t)),_o(dt._WHITE),_o(dt._WHITE.baseTexture)}return dt._WHITE}}class Ki extends dt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const s=this.baseTexture.resolution,n=Math.round(t*s)/s,o=Math.round(e*s)/s;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Ki(new Jg(t))}}class ev{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=ce.NONE){const s=new Jg(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Ki(s)}getOptimalTexture(t,e,i=1,s=ce.NONE){let n;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ea(t),e=ea(e),n=((t&65535)<<16|e&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e,s)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(t,e,i){const s=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||ce.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}ev.SCREEN_KEY=-1;class nA extends gi{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class rv extends gi{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ae(this.vertices),this.uvBuffer=new ae(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+e.width/t.width,this.uvs[3]=s,this.uvs[4]=i+e.width/t.width,this.uvs[5]=s+e.height/t.height,this.uvs[6]=i,this.uvs[7]=s+e.height/t.height,i=e.x,s=e.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+e.width,this.vertices[3]=s,this.vertices[4]=i+e.width,this.vertices[5]=s+e.height,this.vertices[6]=i,this.vertices[7]=s+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class oA{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ce.NONE,this.sourceFrame=new Ct,this.destinationFrame=new Ct,this.bindingSourceFrame=new Ct,this.bindingDestinationFrame=new Ct,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const bo=[new Bt,new Bt,new Bt,new Bt],lc=new Yt;class iv{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new ev,this.statePool=[],this.quad=new nA,this.quadUv=new rv,this.tempRect=new Ct,this.activeState={},this.globalUniforms=new rr({outputFrame:new Ct,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new oA,o=i.renderTexture;let a,l;if(o.current){const w=o.current;a=w.resolution,l=w.multisample}else a=i.resolution,l=i.multisample;let u=e[0].resolution||a,d=e[0].multisample??l,f=e[0].padding,m=e[0].autoFit,v=e[0].legacy??!0;for(let w=1;w<e.length;w++){const S=e[w];u=Math.min(u,S.resolution||a),d=Math.min(d,S.multisample??l),f=this.useMaxPadding?Math.max(f,S.padding):f+S.padding,m=m&&S.autoFit,v=v||(S.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(n),n.resolution=u,n.multisample=d,n.legacy=v,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(f);const y=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(lc.copyFrom(i.projection.transform).invert(),y),m?(n.sourceFrame.fit(y),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(y)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,u,d),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const b=this.tempRect;b.x=0,b.y=0,b.width=n.sourceFrame.width,b.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,b),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const s=this.globalUniforms.uniforms;s.outputFrame=e.sourceFrame,s.resolution=e.resolution;const n=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*e.resolution),o[1]=Math.round(n[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*n[2]-.5*o[2],a[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){const u=s.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,vr.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let u=e.renderTexture,d=this.getOptimalFilterTexture(u.width,u.height,e.resolution);d.filterFrame=u.filterFrame;let f=0;for(f=0;f<i.length-1;++f){f===1&&e.multisample>1&&(d=this.getOptimalFilterTexture(u.width,u.height,e.resolution),d.filterFrame=u.filterFrame),i[f].apply(this,u,d,vr.CLEAR,e);const m=u;u=d,d=m}i[f].apply(this,u,l.renderTexture,vr.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(d)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=vr.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(e===vr.CLEAR||e===vr.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,s){const n=this.renderer;n.state.set(t.state),this.bindAndClear(i,s),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(_r.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(_r.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=e._texture,o=t.set(s.width,0,0,s.height,i.x,i.y),a=e.worldTransform.copyTo(Yt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,s=ce.NONE){return this.texturePool.getOptimalTexture(t,e,i,s)}getFilterTexture(t,e,i){if(typeof t=="number"){const n=t;t=e,e=n}t=t||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||ce.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=bo[0],s=bo[1],n=bo[2],o=bo[3];i.set(e.left,e.top),s.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(s,s),t.apply(n,n),t.apply(o,o);const a=Math.min(i.x,s.x,n.x,o.x),l=Math.min(i.y,s.y,n.y,o.y),u=Math.max(i.x,s.x,n.x,o.x),d=Math.max(i.y,s.y,n.y,o.y);e.x=a,e.y=l,e.width=u-a,e.height=d-l}roundFrame(t,e,i,s,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:l,d:u}=n;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}n=n?lc.copyFrom(n):lc.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}iv.extension={type:rt.RendererSystem,name:"filter"};pt.add(iv);class aA{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ce.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const lA=new Ct;class sv{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new hh(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ct,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;ot.PREFER_ENV===Yi.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=s=>e.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:s}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,s){const n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==t||n.y!==e)&&(n.x=t,n.y=e,n.width=i,n.height=s,this.gl.viewport(t,e,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,s,n=Nc.COLOR|Nc.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,s),o.clear(n)}initFramebuffer(t){const{gl:e}=this,i=new aA(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const s=t.colorTextures;let n=s.length;e.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=s[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=n[l],d=u.parentTextureArray||u;this.renderer.texture.bind(d,0),l===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,d._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):t.depth&&t.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):t.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,u,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,u,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.stencil)}else s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=ce.NONE;if(t<=1||e===null)return i;for(let s=0;s<e.length;s++)if(e[s]<=t){i=e[s];break}return i===1&&(i=ce.NONE),i}blit(t,e,i){const{current:s,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const d=s.colorTextures[0];if(!d)return;l.blitFramebuffer||(l.blitFramebuffer=new hh(s.width,s.height),l.blitFramebuffer.addColorTexture(0,d)),t=l.blitFramebuffer,t.colorTextures[0]!==d&&(t.colorTextures[0]=d,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}e||(e=lA,e.width=s.width,e.height=s.height),i||(i=e);const u=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,s=t.height,n=this.gl,o=e.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):t.depth?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):(a=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,l,i,s):n.renderbufferStorage(n.RENDERBUFFER,l,i,s),n.framebufferRenderbuffer(n.FRAMEBUFFER,a,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ct}destroy(){this.renderer=null}}sv.extension={type:rt.RendererSystem,name:"framebuffer"};pt.add(sv);const cc={5126:4,5123:2,5121:1};class nv{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;ot.PREFER_ENV===Yi.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=s=>i.bindVertexArrayOES(s),t.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),t.drawElementsInstanced=(s,n,o,a,l)=>i.drawElementsInstancedANGLE(s,n,o,a,l),t.drawArraysInstanced=(s,n,o,a)=>i.drawArraysInstancedANGLE(s,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let s=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const o=s[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const s=t.buffers[i];e.update(s)}}checkCompatibility(t,e){const i=t.attributes,s=e.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,e){const i=t.attributes,s=e.attributeData,n=["g",t.id];for(const o in i)s[o]&&n.push(o,s[o].location);return n.join("-")}initGeometryVao(t,e,i=!0){const s=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID];let d=u[l];if(d)return u[a.id]=d,d;const f=t.buffers,m=t.attributes,v={},y={};for(const b in f)v[b]=0,y[b]=0;for(const b in m)!m[b].size&&a.attributeData[b]?m[b].size=a.attributeData[b].size:m[b].size||console.warn(`PIXI Geometry attribute '${b}' size cannot be determined (likely the bound shader does not have the attribute)`),v[m[b].buffer]+=m[b].size*cc[m[b].type];for(const b in m){const w=m[b],S=w.size;w.stride===void 0&&(v[w.buffer]===S*cc[w.type]?w.stride=0:w.stride=v[w.buffer]),w.start===void 0&&(w.start=y[w.buffer],y[w.buffer]+=S*cc[w.type])}d=s.createVertexArray(),s.bindVertexArray(d);for(let b=0;b<f.length;b++){const w=f[b];o.bind(w),i&&w._glBuffers[n].refCount++}return this.activateVao(t,a),u[a.id]=d,u[l]=d,s.bindVertexArray(null),o.unbind(wr.ARRAY_BUFFER),d}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<n.length;l++){const u=n[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(n[l],e))}if(!e){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),s.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let l=null;for(const u in a){const d=a[u],f=o[d.buffer],m=f._glBuffers[s];if(e.attributeData[u]){l!==m&&(n.bind(f),l=m);const v=e.attributeData[u].location;if(i.enableVertexAttribArray(v),i.vertexAttribPointer(v,d.size,d.type||i.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)i.vertexAttribDivisor(v,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,s){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(i||0)*a,s||1):n.drawElements(t,e||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),s||1):n.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}nv.extension={type:rt.RendererSystem,name:"geometry"};pt.add(nv);const ef=new Yt;class ov{constructor(t,e){this._texture=t,this.mapCoord=new Yt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const n=t[s],o=t[s+1];e[s]=n*i.a+o*i.c+i.tx,e[s+1]=n*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=e.orig,n=e.trim;n&&(ef.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(ef));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var cA=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,hA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class uA extends Ce{constructor(t,e,i){let s=null;typeof t!="string"&&e===void 0&&i===void 0&&(s=t,t=void 0,e=void 0,i=void 0),super(t||hA,e||cA,i),this.maskSprite=s,this.maskMatrix=new Yt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,s){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new ov(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,s))}}class dA{constructor(t=null){this.type=de.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ce.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=de.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class av{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const n=this.maskDataPool.pop()||new dA;n.pooled=!0,n.maskObject=e,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==de.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case de.SCISSOR:this.renderer.scissor.push(i);break;case de.STENCIL:this.renderer.stencil.push(i);break;case de.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case de.COLOR:this.pushColorMask(i);break}i.type===de.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case de.SCISSOR:this.renderer.scissor.pop(e);break;case de.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case de.SPRITE:this.popSpriteMask(e);break;case de.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===de.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=de.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=de.SCISSOR:t.type=de.STENCIL:t.type=de.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new uA])),s[0].resolution=t.resolution,s[0].multisample=t.multisample,s[0].maskSprite=e;const n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=n,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}av.extension={type:rt.RendererSystem,name:"mask"};pt.add(av);class lv{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const s=this.getStackLength();s!==i&&(s===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const rf=new Yt,sf=[],cv=class Uo extends lv{constructor(t){super(t),this.glConst=ot.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:s}=this,n=s.renderTexture,o=i.getBounds(!0,sf.pop()??new Ct);this.roundFrameToPixels(o,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:s,d:n}=t;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Uo.isMatrixRotated(e.worldTransform)||Uo.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,s,n){Uo.isMatrixRotated(n)||(n=n?rf.copyFrom(n):rf.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,t),t.fit(s),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&sf.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};cv.extension={type:rt.RendererSystem,name:"scissor"};let pA=cv;pt.add(pA);class hv extends lv{constructor(t){super(t),this.glConst=ot.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,e.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}hv.extension={type:rt.RendererSystem,name:"stencil"};pt.add(hv);class uv{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}uv.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_plugin"};pt.add(uv);class dv{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Yt,this.transform=null}update(t,e,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,i,s){const n=this.projectionMatrix,o=s?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}dv.extension={type:rt.RendererSystem,name:"projection"};pt.add(dv);const fA=new wu,nf=new Ct;class pv{constructor(t){this.renderer=t,this._tempMatrix=new Yt}generateTexture(t,e){const{region:i,...s}=e||{},n=(i==null?void 0:i.copyTo(nf))||t.getLocalBounds(nf,!0),o=s.resolution||this.renderer.resolution;n.width=Math.max(n.width,1/o),n.height=Math.max(n.height,1/o),s.width=n.width,s.height=n.height,s.resolution=o,s.multisample??(s.multisample=this.renderer.multisample);const a=Ki.create(s);this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const l=t.transform;return t.transform=fA,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}}pv.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"textureGenerator"};pt.add(pv);const Ei=new Ct,Ks=new Ct;class fv{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ct,this.destinationFrame=new Ct,this.viewportFrame=new Ct}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const s=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,e||(Ei.width=t.frame.width,Ei.height=t.frame.height,e=Ei),i||(Ks.x=t.frame.x,Ks.y=t.frame.y,Ks.width=e.width,Ks.height=e.height,i=Ks),o=n.framebuffer):(a=s.resolution,e||(Ei.width=s._view.screen.width,Ei.height=s._view.screen.height,e=Ei),i||(i=Ei,i.width=e.width,i.height=e.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Xt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:l,y:u,width:d,height:f}=this.viewportFrame;l=Math.round(l),u=Math.round(u),d=Math.round(d),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,d,f)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}fv.extension={type:rt.RendererSystem,name:"renderTexture"};pt.add(fv);class mA{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function gA(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=t.getActiveAttrib(r,s);if(n.name.startsWith("gl_"))continue;const o=Zg(t,n.type),a={type:o,name:n.name,size:Kg(o),location:t.getAttribLocation(r,n.name)};e[n.name]=a}return e}function vA(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=t.getActiveUniform(r,s),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=Zg(t,n.type);e[o]={name:o,index:s,type:l,size:n.size,isArray:a,value:Yg(l,n.size)}}return e}function yA(r,t){var a;const e=qp(r,r.VERTEX_SHADER,t.vertexSrc),i=qp(r,r.FRAGMENT_SHADER,t.fragmentSrc),s=r.createProgram();r.attachShader(s,e),r.attachShader(s,i);const n=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(n&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||XS(r,s,e,i),t.attributeData=gA(s,r),t.uniformData=vA(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const l=Object.keys(t.attributeData);l.sort((u,d)=>u>d?1:-1);for(let u=0;u<l.length;u++)t.attributeData[l[u]].location=u,r.bindAttribLocation(s,u,l[u]);r.linkProgram(s)}r.deleteShader(e),r.deleteShader(i);const o={};for(const l in t.uniformData){const u=t.uniformData[l];o[l]={location:r.getUniformLocation(s,l),value:Yg(u.type,u.size)}}return new mA(s,o)}function _A(r,t,e,i,s){e.buffer.update(s)}const bA={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},mv={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function xA(r){const t=r.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let e=0,i=0,s=0;for(let n=0;n<t.length;n++){const o=t[n];if(e=mv[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,s+=a}i+e>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=e,i=e):(o.offset=s,i+=e,s+=e)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function wA(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,s)=>i.index-s.index),e}function TA(r,t){if(!r.autoManage)return{size:0,syncFunc:_A};const e=wA(r.uniforms,t),{uboElements:i,size:s}=xA(e),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let d=!1;for(let f=0;f<bs.length;f++){const m=bs[f];if(m.codeUbo&&m.test(a.data,l)){n.push(`offset = ${a.offset/4};`,bs[f].codeUbo(a.data.name,l)),d=!0;break}}if(!d)if(a.data.size>1){const f=Kg(a.data.type),m=Math.max(mv[a.data.type]/16,1),v=f/m,y=(4-v%4)%4;n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*m}; i++)
                {
                    for(var j = 0; j < ${v}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${y};
                }

                `)}else{const f=bA[a.data.type];n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${f};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let EA=0;const xo={textureCount:0,uboCount:0};class gv{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=EA++}systemCheck(){if(!qS())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),e||(xo.textureCount=0,xo.uboCount=0,this.syncUniformGroup(t.uniformGroup,xo)),s}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=jS(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const s=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),s(i.uniformData,t.uniforms,this.renderer,xo,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=TA(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const s=t.uniforms,n=[`${i}-`];for(const o in s)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,s=yA(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}gv.extension={type:rt.RendererSystem,name:"shader"};pt.add(gv);class oa{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.3 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}oa.defaultOptions={hello:!1},oa.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"startup"};pt.add(oa);function SA(r,t=[]){return t[bt.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.ADD]=[r.ONE,r.ONE],t[bt.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.NONE]=[0,0],t[bt.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[bt.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[bt.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[bt.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[bt.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[bt.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[bt.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[bt.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[bt.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[bt.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[bt.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const AA=0,CA=1,PA=2,IA=3,RA=4,MA=5,vv=class uh{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=bt.NONE,this._blendEq=!1,this.map=[],this.map[AA]=this.setBlend,this.map[CA]=this.setOffset,this.map[PA]=this.setCullFace,this.map[IA]=this.setDepthTest,this.map[RA]=this.setFrontFace,this.map[MA]=this.setDepthMask,this.checks=[],this.defaultState=new Ir,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=SA(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(uh.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(uh.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};vv.extension={type:rt.RendererSystem,name:"state"};let kA=vv;pt.add(kA);class DA extends Fn{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(s=>t.systems[s]),i=[...e,...Object.keys(t.systems).filter(s=>!e.includes(s))];for(const s of i)this.addSystem(t.systems[s],s)}addRunners(...t){t.forEach(e=>{this.runners[e]=new er(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(s=>{const n=i.find(o=>this._systemsHash[o]===s);s[t.name](e[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const en=class $o{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=$o.defaultMaxIdle,this.checkCountMax=$o.defaultCheckCountMax,this.mode=$o.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==fu.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let s=0;s<e.length;s++){const n=e[s];n.resource&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<e.length;n++)e[n]!==null&&(e[s++]=e[n]);e.length=s}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let s=t.children.length-1;s>=0;s--)this.unload(t.children[s])}destroy(){this.renderer=null}};en.defaultMode=fu.AUTO,en.defaultMaxIdle=60*60,en.defaultCheckCountMax=60*10,en.extension={type:rt.RendererSystem,name:"textureGC"};let ki=en;pt.add(ki);class hc{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=gt.UNSIGNED_BYTE,this.internalFormat=K.RGBA,this.samplerType=0}}function OA(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:nt.FLOAT,[r.RGBA]:nt.FLOAT,[r.ALPHA]:nt.FLOAT,[r.LUMINANCE]:nt.FLOAT,[r.LUMINANCE_ALPHA]:nt.FLOAT,[r.R8]:nt.FLOAT,[r.R8_SNORM]:nt.FLOAT,[r.RG8]:nt.FLOAT,[r.RG8_SNORM]:nt.FLOAT,[r.RGB8]:nt.FLOAT,[r.RGB8_SNORM]:nt.FLOAT,[r.RGB565]:nt.FLOAT,[r.RGBA4]:nt.FLOAT,[r.RGB5_A1]:nt.FLOAT,[r.RGBA8]:nt.FLOAT,[r.RGBA8_SNORM]:nt.FLOAT,[r.RGB10_A2]:nt.FLOAT,[r.RGB10_A2UI]:nt.FLOAT,[r.SRGB8]:nt.FLOAT,[r.SRGB8_ALPHA8]:nt.FLOAT,[r.R16F]:nt.FLOAT,[r.RG16F]:nt.FLOAT,[r.RGB16F]:nt.FLOAT,[r.RGBA16F]:nt.FLOAT,[r.R32F]:nt.FLOAT,[r.RG32F]:nt.FLOAT,[r.RGB32F]:nt.FLOAT,[r.RGBA32F]:nt.FLOAT,[r.R11F_G11F_B10F]:nt.FLOAT,[r.RGB9_E5]:nt.FLOAT,[r.R8I]:nt.INT,[r.R8UI]:nt.UINT,[r.R16I]:nt.INT,[r.R16UI]:nt.UINT,[r.R32I]:nt.INT,[r.R32UI]:nt.UINT,[r.RG8I]:nt.INT,[r.RG8UI]:nt.UINT,[r.RG16I]:nt.INT,[r.RG16UI]:nt.UINT,[r.RG32I]:nt.INT,[r.RG32UI]:nt.UINT,[r.RGB8I]:nt.INT,[r.RGB8UI]:nt.UINT,[r.RGB16I]:nt.INT,[r.RGB16UI]:nt.UINT,[r.RGB32I]:nt.INT,[r.RGB32UI]:nt.UINT,[r.RGBA8I]:nt.INT,[r.RGBA8UI]:nt.UINT,[r.RGBA16I]:nt.INT,[r.RGBA16UI]:nt.UINT,[r.RGBA32I]:nt.INT,[r.RGBA32UI]:nt.UINT,[r.DEPTH_COMPONENT16]:nt.FLOAT,[r.DEPTH_COMPONENT24]:nt.FLOAT,[r.DEPTH_COMPONENT32F]:nt.FLOAT,[r.DEPTH_STENCIL]:nt.FLOAT,[r.DEPTH24_STENCIL8]:nt.FLOAT,[r.DEPTH32F_STENCIL8]:nt.FLOAT}:t={[r.RGB]:nt.FLOAT,[r.RGBA]:nt.FLOAT,[r.ALPHA]:nt.FLOAT,[r.LUMINANCE]:nt.FLOAT,[r.LUMINANCE_ALPHA]:nt.FLOAT,[r.DEPTH_STENCIL]:nt.FLOAT},t}function LA(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[gt.UNSIGNED_BYTE]:{[K.RGBA]:r.RGBA8,[K.RGB]:r.RGB8,[K.RG]:r.RG8,[K.RED]:r.R8,[K.RGBA_INTEGER]:r.RGBA8UI,[K.RGB_INTEGER]:r.RGB8UI,[K.RG_INTEGER]:r.RG8UI,[K.RED_INTEGER]:r.R8UI,[K.ALPHA]:r.ALPHA,[K.LUMINANCE]:r.LUMINANCE,[K.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[gt.BYTE]:{[K.RGBA]:r.RGBA8_SNORM,[K.RGB]:r.RGB8_SNORM,[K.RG]:r.RG8_SNORM,[K.RED]:r.R8_SNORM,[K.RGBA_INTEGER]:r.RGBA8I,[K.RGB_INTEGER]:r.RGB8I,[K.RG_INTEGER]:r.RG8I,[K.RED_INTEGER]:r.R8I},[gt.UNSIGNED_SHORT]:{[K.RGBA_INTEGER]:r.RGBA16UI,[K.RGB_INTEGER]:r.RGB16UI,[K.RG_INTEGER]:r.RG16UI,[K.RED_INTEGER]:r.R16UI,[K.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[gt.SHORT]:{[K.RGBA_INTEGER]:r.RGBA16I,[K.RGB_INTEGER]:r.RGB16I,[K.RG_INTEGER]:r.RG16I,[K.RED_INTEGER]:r.R16I},[gt.UNSIGNED_INT]:{[K.RGBA_INTEGER]:r.RGBA32UI,[K.RGB_INTEGER]:r.RGB32UI,[K.RG_INTEGER]:r.RG32UI,[K.RED_INTEGER]:r.R32UI,[K.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[gt.INT]:{[K.RGBA_INTEGER]:r.RGBA32I,[K.RGB_INTEGER]:r.RGB32I,[K.RG_INTEGER]:r.RG32I,[K.RED_INTEGER]:r.R32I},[gt.FLOAT]:{[K.RGBA]:r.RGBA32F,[K.RGB]:r.RGB32F,[K.RG]:r.RG32F,[K.RED]:r.R32F,[K.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[gt.HALF_FLOAT]:{[K.RGBA]:r.RGBA16F,[K.RGB]:r.RGB16F,[K.RG]:r.RG16F,[K.RED]:r.R16F},[gt.UNSIGNED_SHORT_5_6_5]:{[K.RGB]:r.RGB565},[gt.UNSIGNED_SHORT_4_4_4_4]:{[K.RGBA]:r.RGBA4},[gt.UNSIGNED_SHORT_5_5_5_1]:{[K.RGBA]:r.RGB5_A1},[gt.UNSIGNED_INT_2_10_10_10_REV]:{[K.RGBA]:r.RGB10_A2,[K.RGBA_INTEGER]:r.RGB10_A2UI},[gt.UNSIGNED_INT_10F_11F_11F_REV]:{[K.RGB]:r.R11F_G11F_B10F},[gt.UNSIGNED_INT_5_9_9_9_REV]:{[K.RGB]:r.RGB9_E5},[gt.UNSIGNED_INT_24_8]:{[K.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[gt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[K.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[gt.UNSIGNED_BYTE]:{[K.RGBA]:r.RGBA,[K.RGB]:r.RGB,[K.ALPHA]:r.ALPHA,[K.LUMINANCE]:r.LUMINANCE,[K.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[gt.UNSIGNED_SHORT_5_6_5]:{[K.RGB]:r.RGB},[gt.UNSIGNED_SHORT_4_4_4_4]:{[K.RGBA]:r.RGBA},[gt.UNSIGNED_SHORT_5_5_5_1]:{[K.RGBA]:r.RGBA}},t}class yv{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Et,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=LA(t),this.samplerTypes=OA(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let s=0;s<e;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new hc(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new hc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(e.activeTexture(e.TEXTURE0+s),this.currentLocation=s),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=t-1;n>=0;--n){const o=e[n];o&&o._glTextures[s].samplerType!==nt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new hc(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??nt.FLOAT,this.webGLVersion===2&&t.type===gt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var s;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(s=t.resource)==null?void 0:s.upload(i,t,e))e.samplerType!==nt.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==n||e.height!==o||e.dirtyId<0)&&(e.width=n,e.height=o,a.texImage2D(t.target,0,e.internalFormat,n,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const s=this.managedTextures.indexOf(t);s!==-1&&_s(this.managedTextures,s,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Ar.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=ui.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==Ar.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Fr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===Fr.LINEAR){const n=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Fr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Fr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}yv.extension={type:rt.RendererSystem,name:"texture"};pt.add(yv);class _v{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:s}=this;e&&s.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:s}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[s]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[s].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&n.dispose(a,e))}i&&(e||s.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}_v.extension={type:rt.RendererSystem,name:"transformFeedback"};pt.add(_v);class aa{constructor(t){this.renderer=t}init(t){this.screen=new Ct(0,0,t.width,t.height),this.element=t.view||ot.ADAPTER.createCanvas(),this.resolution=t.resolution||ot.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}aa.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},aa.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_view"};pt.add(aa);ot.PREFER_ENV=Yi.WEBGL2;ot.STRICT_TEXTURE_CACHE=!1;ot.RENDER_OPTIONS={...na.defaultOptions,...sa.defaultOptions,...aa.defaultOptions,...oa.defaultOptions};Object.defineProperties(ot,{WRAP_MODE:{get(){return Et.defaultOptions.wrapMode},set(r){kt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Et.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return Et.defaultOptions.scaleMode},set(r){kt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Et.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return Et.defaultOptions.mipmap},set(r){kt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Et.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return Et.defaultOptions.anisotropicLevel},set(r){kt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Et.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return kt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ce.defaultResolution},set(r){Ce.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return kt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ce.defaultMultisample},set(r){Ce.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return Mi.defaultMaxTextures},set(r){kt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Mi.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return Mi.defaultBatchSize},set(r){kt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Mi.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return Mi.canUploadSameBuffer},set(r){kt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Mi.canUploadSameBuffer=r}},GC_MODE:{get(){return ki.defaultMode},set(r){kt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),ki.defaultMode=r}},GC_MAX_IDLE:{get(){return ki.defaultMaxIdle},set(r){kt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),ki.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return ki.defaultCheckCountMax},set(r){kt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),ki.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return $r.defaultVertexPrecision},set(r){kt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),$r.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return $r.defaultFragmentPrecision},set(r){kt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),$r.defaultFragmentPrecision=r}}});var Vi=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Vi||{});class uc{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=s}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const bv=class Be{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new uc(null,null,1/0),this.deltaMS=1/Be.targetFPMS,this.elapsedMS=1/Be.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Vi.NORMAL){return this._addListener(new uc(t,e,i))}addOnce(t,e,i=Vi.NORMAL){return this._addListener(new uc(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Be.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Be.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Be._shared){const t=Be._shared=new Be;t.autoStart=!0,t._protected=!0}return Be._shared}static get system(){if(!Be._system){const t=Be._system=new Be;t.autoStart=!0,t._protected=!0}return Be._system}};bv.targetFPMS=.06;let Fe=bv;Object.defineProperties(ot,{TARGET_FPMS:{get(){return Fe.targetFPMS},set(r){kt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Fe.targetFPMS=r}}});class xv{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Vi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Fe.shared:new Fe,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}xv.extension=rt.Application;pt.add(xv);const wv=[];pt.handleByList(rt.Renderer,wv);function BA(r){for(const t of wv)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var FA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,NA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const UA=FA,Tv=NA;class Ev{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=ce.HIGH?this.multisample=ce.HIGH:e>=ce.MEDIUM?this.multisample=ce.MEDIUM:e>=ce.LOW?this.multisample=ce.LOW:this.multisample=ce.NONE}destroy(){}}Ev.extension={type:rt.RendererSystem,name:"_multisample"};pt.add(Ev);class $A{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Sv{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,s.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const o=t._glBuffers[n]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,e.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(e||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new $A(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Sv.extension={type:rt.RendererSystem,name:"buffer"};pt.add(Sv);class Av{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let s,n,o,a;if(e&&(s=e.renderTexture,n=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(s||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),s&&(e.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Av.extension={type:rt.RendererSystem,name:"objectRenderer"};pt.add(Av);const Go=class dh extends DA{constructor(t){super(),this.type=cg.WEBGL,t=Object.assign({},ot.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new rr({projectionMatrix:new Yt},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:dh.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(kt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=dh.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:cS()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return kt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return kt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return kt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return kt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){kt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return kt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){kt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return kt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Go.extension={type:rt.Renderer,priority:1},Go.__plugins={},Go.__systems={};let Eu=Go;pt.handleByMap(rt.RendererPlugin,Eu.__plugins);pt.handleByMap(rt.RendererSystem,Eu.__systems);pt.add(Eu);class Cv extends An{constructor(t,e){const{width:i,height:s}=e||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new Et;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof An?this.addResourceAt(t[i],i):this.addResourceAt(Vg(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}}class GA extends Cv{constructor(t,e){const{width:i,height:s}=e||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:i,height:s}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=gs.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:s,itemDirtyIds:n,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,e.format,i.type,null);for(let l=0;l<s;l++){const u=o[l];n[l]<u.dirtyId&&(n[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0}}class HA extends Wr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Pv=class rn extends Cv{constructor(t,e){const{width:i,height:s,autoLoad:n,linkBaseTexture:o}=e||{};if(t&&t.length!==rn.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:s});for(let a=0;a<rn.SIDES;a++)this.items[a].target=gs.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),n!==!1&&this.load()}bind(t){super.bind(t),t.target=gs.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=gs.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const s=this.itemDirtyIds;for(let n=0;n<rn.SIDES;n++){const o=this.items[n];(s[n]<o.dirtyId||i.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,i),s[n]=o.dirtyId):s[n]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),s[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===rn.SIDES}};Pv.SIDES=6;let zA=Pv;class fs extends Wr{constructor(t,e){e=e||{};let i,s,n;typeof t=="string"?(i=fs.EMPTY,s=t,n=!0):(i=t,s=null,n=!1),super(i),this.url=s,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??n,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await ot.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Re.UNPACK?"premultiply":"none"});if(this.destroyed){n.close();return}this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return fs._EMPTY=fs._EMPTY??ot.ADAPTER.createCanvas(0,0),fs._EMPTY}}const ph=class Ho extends Wr{constructor(t,e){e=e||{},super(ot.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},Ho.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Wr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=e*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*e,n=this._overrideHeight||this._overrideWidth/e*i),s=Math.round(s),n=Math.round(n);const o=this.source;o.width=s,o.height=n,o._pixiId=`canvas_${ji()}`,o.getContext("2d").drawImage(t,0,0,e,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(t){const e=Ho.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Ho.SVG_XML.test(t)}};ph.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,ph.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let fh=ph;class jA extends Wr{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const mh=class gh extends Wr{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const s=t[0].src||t[0];Wr.crossOrigin(i,s,e.crossorigin);for(let n=0;n<t.length;++n){const o=document.createElement("source");let{src:a,mime:l}=t[n];if(a=a||t[n],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),d=u.slice(u.lastIndexOf(".")+1);l=l||gh.MIME_TYPES[d]||`video/${d}`}o.src=a,l&&(o.type=l),i.appendChild(o)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=Fe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Fe.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Fe.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Fe.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||gh.TYPES.includes(e)}};mh.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],mh.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Iv=mh;rh.push(fs,tv,HA,Iv,jA,fh,Ga,zA,GA);class la{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ct.EMPTY:(t=t||new Ct(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:s,c:n,d:o,tx:a,ty:l}=t,u=i*e.x+n*e.y+a,d=s*e.x+o*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(t){let e=this.minX,i=this.minY,s=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=s,this.maxY=n}addFrame(t,e,i,s,n){this.addFrameMatrix(t.worldTransform,e,i,s,n)}addFrameMatrix(t,e,i,s,n){const o=t.a,a=t.b,l=t.c,u=t.d,d=t.tx,f=t.ty;let m=this.minX,v=this.minY,y=this.maxX,b=this.maxY,w=o*e+l*i+d,S=a*e+u*i+f;m=w<m?w:m,v=S<v?S:v,y=w>y?w:y,b=S>b?S:b,w=o*s+l*i+d,S=a*s+u*i+f,m=w<m?w:m,v=S<v?S:v,y=w>y?w:y,b=S>b?S:b,w=o*e+l*n+d,S=a*e+u*n+f,m=w<m?w:m,v=S<v?S:v,y=w>y?w:y,b=S>b?S:b,w=o*s+l*n+d,S=a*s+u*n+f,m=w<m?w:m,v=S<v?S:v,y=w>y?w:y,b=S>b?S:b,this.minX=m,this.minY=v,this.maxX=y,this.maxY=b}addVertexData(t,e,i){let s=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){const u=t[l],d=t[l+1];s=u<s?u:s,n=d<n?d:n,o=u>o?u:o,a=d>a?d:a}this.minX=s,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,e,i,s){this.addVerticesMatrix(t.worldTransform,e,i,s)}addVerticesMatrix(t,e,i,s,n=0,o=n){const a=t.a,l=t.b,u=t.c,d=t.d,f=t.tx,m=t.ty;let v=this.minX,y=this.minY,b=this.maxX,w=this.maxY;for(let S=i;S<s;S+=2){const C=e[S],E=e[S+1],R=a*C+u*E+f,k=d*E+l*C+m;v=Math.min(v,R-n),b=Math.max(b,R+n),y=Math.min(y,k-o),w=Math.max(w,k+o)}this.minX=v,this.minY=y,this.maxX=b,this.maxY=w}addBounds(t){const e=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,s=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&s<=o){const a=this.minX,l=this.minY,u=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=o>d?o:d}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&s<=o){const a=this.minX,l=this.minY,u=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=o>d?o:d}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,s,n,o){t-=n,e-=o,i+=n,s+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>s?this.maxY:s}}class ie extends Fn{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new wu,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new la,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const s=e[i];Object.defineProperty(ie.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ct),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ct),t=this._localBoundsRect),this._localBounds||(this._localBounds=new la);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,s){return e&&(t=e.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,s=1,n=0,o=0,a=0,l=0,u=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new VA),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*FS}set angle(t){this.transform.rotation=t*NS}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class VA extends ie{constructor(){super(...arguments),this.sortDirty=null}}ie.prototype.displayObjectUpdateTransform=ie.prototype.updateTransform;const WA=new Yt;function XA(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const Rv=class vh extends ie{constructor(){super(),this.children=[],this.sortableChildren=vh.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t,this.onChildrenChange(i<s?i:s)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);_s(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,_s(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,_s(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,s=e,n=s-i;let o;if(n>0&&n<=s){o=this.children.splice(i,n);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const s=this.children[e];s._lastSortedIndex=e,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(XA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let s=0,n=this.children.length;s<n;++s){const o=this.children[s];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==vh.prototype._render&&(i=this.getBounds(!0));const n=t.projection.transform;if(n&&(s?(s=WA.copyFrom(s),s.prepend(n)):s=n),i&&e.intersects(i,s))this._render(t);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}}renderAdvanced(t){var n,o,a;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<e.length;l++)e[l].enabled&&this._enabledFilters.push(e[l])}const s=e&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==de.NONE));if(s&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let s=0;s<i.length;++s)i[s].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};Rv.defaultSortableChildren=!1;let or=Rv;or.prototype.containerUpdateTransform=or.prototype.updateTransform;Object.defineProperties(ot,{SORTABLE_CHILDREN:{get(){return or.defaultSortableChildren},set(r){kt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),or.defaultSortableChildren=r}}});const Zs=new Bt,YA=new Uint16Array([0,1,2,0,2,3]);class ks extends or{constructor(t){super(),this._anchor=new Ur(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Xt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=bt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||dt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=YA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ot.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=li(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=li(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,s=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,u=this.vertexData,d=t.trim,f=t.orig,m=this._anchor;let v=0,y=0,b=0,w=0;if(d?(y=d.x-m._x*f.width,v=y+d.width,w=d.y-m._y*f.height,b=w+d.height):(y=-m._x*f.width,v=y+f.width,w=-m._y*f.height,b=w+f.height),u[0]=i*y+n*w+a,u[1]=o*w+s*y+l,u[2]=i*v+n*w+a,u[3]=o*w+s*v+l,u[4]=i*v+n*b+a,u[5]=o*b+s*v+l,u[6]=i*y+n*b+a,u[7]=o*b+s*y+l,this._roundPixels){const S=ot.RESOLUTION;for(let C=0;C<u.length;++C)u[C]=Math.round(u[C]*S)/S}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,s=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,l=n.c,u=n.d,d=n.tx,f=n.ty,m=-s._x*i.width,v=m+i.width,y=-s._y*i.height,b=y+i.height;if(e[0]=o*m+l*y+d,e[1]=u*y+a*m+f,e[2]=o*v+l*y+d,e[3]=u*y+a*v+f,e[4]=o*v+l*b+d,e[5]=u*b+a*v+f,e[6]=o*m+l*b+d,e[7]=u*b+a*m+f,this._roundPixels){const w=ot.RESOLUTION;for(let S=0;S<e.length;++S)e[S]=Math.round(e[S]*w)/w}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new la),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ct),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Zs);const e=this._texture.orig.width,i=this._texture.orig.height,s=-e*this.anchor.x;let n=0;return Zs.x>=s&&Zs.x<s+e&&(n=-i*this.anchor.y,Zs.y>=n&&Zs.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof dt?t:dt.from(t,e);return new ks(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=li(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=li(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||dt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Mv=new Yt;ie.prototype._cacheAsBitmap=!1;ie.prototype._cacheData=null;ie.prototype._cacheAsBitmapResolution=null;ie.prototype._cacheAsBitmapMultisample=null;class qA{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ie.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new qA),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});ie.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};ie.prototype._initCachedDisplayObject=function(r){var m,v;if((m=this._cacheData)!=null&&m.sprite)return;const t=this.alpha;this.alpha=1,r.batch.flush();const e=this.getLocalBounds(new Ct,!0);if((v=this.filters)!=null&&v.length){const y=this.filters[0].padding;e.pad(y)}const i=this.cacheAsBitmapResolution||r.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);const s=r.renderTexture.current,n=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=Ki.create({width:e.width,height:e.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${ji()}`;this._cacheData.textureCacheId=u,Et.addToCache(l.baseTexture,u),dt.addToCache(l,u);const d=this.transform.localTransform.copyTo(Mv).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:d,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(s,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const f=new ks(l);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(e.x/e.width),f.anchor.y=-(e.y/e.height),f.alpha=t,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)};ie.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};ie.prototype._initCachedDisplayObjectCanvas=function(r){var d;if((d=this._cacheData)!=null&&d.sprite)return;const t=this.getLocalBounds(new Ct,!0),e=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,s=r._projTransform,n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const o=Ki.create({width:t.width,height:t.height,resolution:n}),a=`cacheAsBitmap_${ji()}`;this._cacheData.textureCacheId=a,Et.addToCache(o.baseTexture,a),dt.addToCache(o,a);const l=Mv;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new ks(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};ie.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ie.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ie.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Et.removeFromCache(this._cacheData.textureCacheId),dt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ie.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};ie.prototype.name=null;or.prototype.getChildByName=function(r,t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].name===r)return this.children[e];if(t)for(let e=0,i=this.children.length;e<i;e++){const s=this.children[e];if(!s.getChildByName)continue;const n=s.getChildByName(r,!0);if(n)return n}return null};ie.prototype.getGlobalPosition=function(r=new Bt,t=!1){return this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};var KA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class ZA extends Ce{constructor(t=1){super(UA,KA,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const QA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},JA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function tC(r){const t=QA[r],e=t.length;let i=JA,s="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=n.replace("%index%",a.toString());o=a,a>=e&&(o=r-a-1),l=l.replace("%value%",t[o].toString()),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}const eC=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function rC(r,t){const e=Math.ceil(r/2);let i=eC,s="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),s+=a,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}class yh extends Ce{constructor(t,e=8,i=4,s=Ce.defaultResolution,n=5){const o=rC(n,t),a=tC(n);super(o,a),this.horizontal=t,this.resolution=s,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,s);else{const n=t.getFilterTexture(),o=t.renderer;let a=e,l=n;this.state.blend=!1,t.applyFilter(this,a,l,vr.CLEAR);for(let u=1;u<this.passes-1;u++){t.bindAndClear(a,vr.BLIT),this.uniforms.uSampler=l;const d=l;l=a,a=d,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,s),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class iC extends Ce{constructor(t=8,e=4,i=Ce.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new yh(!0,t,e,i,s),this.blurYFilter=new yh(!1,t,e,i,s),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,s){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,vr.CLEAR),this.blurYFilter.apply(t,a,i,s),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,s):this.blurXFilter.apply(t,e,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var sC=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class _h extends Ce{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Tv,sC,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,s,n]=Xt.shared.setValue(t).toArray(),o=[i,0,0,0,0,0,s,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),s=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),l=i+(1-i)*o,u=o*(1-i)-a*s,d=o*(1-i)+a*s,f=o*(1-i)+a*s,m=i+o*(1-i),v=o*(1-i)-a*s,y=o*(1-i)-a*s,b=o*(1-i)+a*s,w=i+o*(1-i),S=[l,u,d,0,0,f,m,v,0,0,y,b,w,0,0,0,0,0,1,0];this._loadMatrix(S,e)}contrast(t,e){const i=(t||0)+1,s=-.5*(i-1),n=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(n,e)}saturate(t=0,e){const i=t*2/3+1,s=(i-1)*-.5,n=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,s,n){t=t||.2,e=e||.15,i=i||16770432,s=s||3375104;const o=Xt.shared,[a,l,u]=o.setValue(i).toArray(),[d,f,m]=o.setValue(s).toArray(),v=[.3,.59,.11,0,0,a,l,u,t,0,d,f,m,e,0,a-d,l-f,u-m,0,0];this._loadMatrix(v,n)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}_h.prototype.grayscale=_h.prototype.greyscale;var nC=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,oC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class aC extends Ce{constructor(t,e){const i=new Yt;t.renderable=!1,super(oC,nC,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new Bt(e,e)}apply(t,e,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,e,i,s)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var lC=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,cC=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class hC extends Ce{constructor(){super(cC,lC)}}var uC=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class dC extends Ce{constructor(t=.5,e=Math.random()){super(Tv,uC,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const of={AlphaFilter:ZA,BlurFilter:iC,BlurFilterPass:yh,ColorMatrixFilter:_h,DisplacementFilter:aC,FXAAFilter:hC,NoiseFilter:dC};Object.entries(of).forEach(([r,t])=>{Object.defineProperty(of,r,{get(){return kt("7.1.0",`filters.${r} has moved to ${r}`),t}})});class pC{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Fe.system.add(this.tickerUpdate,this,Vi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Fe.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const oi=new pC;class Gn{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Gn.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Bt,this.page=new Bt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ca extends Gn{constructor(){super(...arguments),this.client=new Bt,this.movement=new Bt,this.offset=new Bt,this.global=new Bt,this.screen=new Bt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,n,o,a,l,u,d,f,m,v,y,b){throw new Error("Method not implemented.")}}class Ke extends ca{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class xs extends ca{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}xs.DOM_DELTA_PIXEL=0,xs.DOM_DELTA_LINE=1,xs.DOM_DELTA_PAGE=2;const fC=2048,mC=new Bt,dc=new Bt;class gC{constructor(t){this.dispatch=new Fn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,s=e.length;i<s;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){oi.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,mC.set(t,e),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const s=Array.isArray(e)?e:[e];for(let n=i.length-1;n>=0;n--)s.forEach(o=>{t.currentTarget=i[n],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let i=0;i<fC&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,s,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(oi.pauseUpdate=!1),t.interactiveChildren&&t.children){const d=t.children;for(let f=d.length-1;f>=0;f--){const m=d[f],v=this.hitTestMoveRecursive(m,this._isInteractive(e)?e:m.eventMode,i,s,n,o||n(t,i));if(v){if(v.length>0&&!v[v.length-1].parent)continue;const y=t.isInteractive();(v.length>0||y)&&(y&&this._allInteractiveElements.push(t),v.push(t)),this._hitElements.length===0&&(this._hitElements=v),a=!0}}}const l=this._isInteractive(e),u=t.isInteractive();return l&&u&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!n(t,i)&&s(t,i)?u?[t]:[]:null}hitTestRecursive(t,e,i,s,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(oi.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let u=l.length-1;u>=0;u--){const d=l[u],f=this.hitTestRecursive(d,this._isInteractive(e)?e:d.eventMode,i,s,n);if(f){if(f.length>0&&!f[f.length-1].parent)continue;const m=t.isInteractive();return(f.length>0||m)&&f.push(t),f}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&s(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,dc),!t.hitArea.contains(dc.x,dc.y)))return!0;if(t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var n,o;e=e??t.type;const i=`on${e}`;(o=(n=t.currentTarget)[i])==null||o.call(n,t);const s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const s=e.button===2;this.dispatchEvent(e,s?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,u;if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&n!==e.target){const d=t.type==="mousemove"?"mouseout":"pointerout",f=this.createPointerEvent(t,d,n);if(this.dispatchEvent(f,"pointerout"),i&&this.dispatchEvent(f,"mouseout"),!e.composedPath().includes(n)){const m=this.createPointerEvent(t,"pointerleave",n);for(m.eventPhase=m.AT_TARGET;m.target&&!e.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),i&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(f)}if(n!==e.target){const d=t.type==="mousemove"?"mouseover":"pointerover",f=this.clonePointerEvent(e,d);this.dispatchEvent(f,"pointerover"),i&&this.dispatchEvent(f,"mouseover");let m=n==null?void 0:n.parent;for(;m&&m!==this.rootTarget.parent&&m!==e.target;)m=m.parent;if(!m||m===this.rootTarget.parent){const v=this.clonePointerEvent(e,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==n&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),i&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(f)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=e.target)==null?void 0:u.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(e.overTargets),n=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[t.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=s.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof xs)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const s=this.allocateEvent(Ke);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof e=="string"&&(s.type=e),s}createWheelEvent(t){const e=this.allocateEvent(xs);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(Ke);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Ke&&e instanceof Ke&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof ca&&e instanceof ca&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,n=i.length;s<n&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(e,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}}const vC=1,yC={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},bh=class xh{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new gC(null),oi.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ke(null),this.rootWheelEvent=new xs(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...xh.defaultEventFeatures},{set:(e,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),e[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,xh._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,s=e.length;i<s;i++){const n=e[i],o=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,oi.pointerMoved();const e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",s=this.normalizeToPointerData(t);for(let n=0,o=s.length;n<o;n++){const a=this.bootstrapEvent(this.rootPointerEvent,s[n]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,oi.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;oi.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;oi.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;t.x=(e-s.left)*(this.domElement.width/s.width)*n,t.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,s=t.changedTouches.length;i<s;i++){const n=t.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=vC),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=yC[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};bh.extension={name:"events",type:[rt.RendererSystem,rt.CanvasRendererSystem]},bh.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let wh=bh;pt.add(wh);function af(r){return r==="dynamic"||r==="static"}const _C={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??af(wh.defaultEventMode)},set interactive(r){kt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??wh.defaultEventMode},set eventMode(r){this._internalInteractive=af(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof e=="object"?e.signal:void 0,n=typeof e=="object"?e.once===!0:!1,o=typeof t=="function"?void 0:t;r=i?`${r}capture`:r;const a=typeof t=="function"?t:t.handleEvent,l=this;s&&s.addEventListener("abort",()=>{l.off(r,a,o)}),n?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,s)},dispatchEvent(r){if(!(r instanceof Gn))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};ie.mixin(_C);const bC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ie.mixin(bC);const xC=9,wo=100,wC=0,TC=0,lf=2,cf=1,EC=-1e3,SC=-1e3,AC=2;class kv{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Nr.tablet||Nr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${wo}px`,e.style.height=`${wo}px`,e.style.position="absolute",e.style.top=`${wC}px`,e.style.left=`${TC}px`,e.style.zIndex=lf.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${cf}px`,t.style.height=`${cf}px`,t.style.position="absolute",t.style.top=`${EC}px`,t.style.left=`${SC}px`,t.style.zIndex=AC.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(Nr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:s,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=s/o*l,d=n/a*l;let f=this.div;f.style.left=`${e}px`,f.style.top=`${i}px`,f.style.width=`${o}px`,f.style.height=`${a}px`;for(let m=0;m<this.children.length;m++){const v=this.children[m];if(v.renderId!==this.renderId)v._accessibleActive=!1,_s(this.children,m,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,m--;else{f=v._accessibleDiv;let y=v.hitArea;const b=v.worldTransform;v.hitArea?(f.style.left=`${(b.tx+y.x*b.a)*u}px`,f.style.top=`${(b.ty+y.y*b.d)*d}px`,f.style.width=`${y.width*b.a*u}px`,f.style.height=`${y.height*b.d*d}px`):(y=v.getBounds(),this.capHitArea(y),f.style.left=`${y.x*u}px`,f.style.top=`${y.y*d}px`,f.style.width=`${y.width*u}px`,f.style.height=`${y.height*d}px`,f.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(f.title=v.accessibleTitle),f.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&f.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==f.title||v.tabIndex!==f.tabIndex)&&(f.title=v.accessibleTitle,f.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${wo}px`,e.style.height=`${wo}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=lf.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,s=this.renderer.events.rootBoundary,n=Object.assign(new Gn(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>s.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===xC&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}kv.extension={name:"accessibility",type:[rt.RendererPlugin,rt.CanvasRendererPlugin]};pt.add(kv);const Dv=class Th{constructor(t){this.stage=new or,t=Object.assign({forceCanvas:!1},t),this.renderer=BA(t),Th._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=Th._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Dv._plugins=[];let CC=Dv;pt.handleByList(rt.Application,CC._plugins);class Ov{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;e=s,i=n}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Ov.extension=rt.Application;pt.add(Ov);const hf={loader:rt.LoadParser,resolver:rt.ResolveParser,cache:rt.CacheParser,detection:rt.DetectionParser};pt.handle(rt.Asset,r=>{const t=r.ref;Object.entries(hf).filter(([e])=>!!t[e]).forEach(([e,i])=>pt.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(hf).filter(e=>!!t[e]).forEach(e=>pt.remove(t[e]))});class PC{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Ds(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function bi(r,t){const e=r.split("?")[0],i=ye.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Ze=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r),Eh=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function Lv(r,t,e,i,s){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?Lv(r.replace(i[e],a),t,e+1,i,s):s.push(r.replace(i[e],a))}}function IC(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const s=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");s.push(o)}),Lv(r,s,0,e,i)}else i.push(r);return i}const ha=r=>!Array.isArray(r);class RC{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Ze(t);let s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){s=l.getCacheableAssets(i,e);break}}s||(s={},i.forEach(a=>{s[a]=e}));const n=Object.keys(s),o={cacheKeys:n,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{const l=s?s[a]:e;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),e instanceof dt){const a=e;i.forEach(l=>{a.baseTexture!==dt.EMPTY.baseTexture&&Et.addToCache(a.baseTexture,l),dt.addToCache(a,l)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Li=new RC;class MC{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let s=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,t,e,this))){n=u;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await n.load(t,e,this),i.parser=n;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,s,e,this))&&(s=await u.parse(s,e,this)||s,i.parser=u)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const s={},n=ha(t),o=Ze(t,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const d=ye.toAbsolute(u.src);if(!s[u.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,u)),s[u.src]=await this.promiseCache[d].promise,e&&e(++i/a)}catch(f){throw delete this.promiseCache[d],delete s[u.src],new Error(`[Loader.load] Failed to load ${d}.
${f}`)}});return await Promise.all(l),n?s[o[0].src]:s}async unload(t){const e=Ze(t,i=>({alias:[i],src:i})).map(async i=>{var o,a;const s=ye.toAbsolute(i.src),n=this.promiseCache[s];if(n){const l=await n.promise;delete this.promiseCache[s],(a=(o=n.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var lr=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(lr||{});const kC=".json",DC="application/json",OC={extension:{type:rt.LoadParser,priority:lr.Low},name:"loadJson",test(r){return Ds(r,DC)||bi(r,kC)},async load(r){return await(await ot.ADAPTER.fetch(r)).json()}};pt.add(OC);const LC=".txt",BC="text/plain",FC={name:"loadTxt",extension:{type:rt.LoadParser,priority:lr.Low},test(r){return Ds(r,BC)||bi(r,LC)},async load(r){return await(await ot.ADAPTER.fetch(r)).text()}};pt.add(FC);const NC=["normal","bold","100","200","300","400","500","600","700","800","900"],UC=[".ttf",".otf",".woff",".woff2"],$C=["font/ttf","font/otf","font/woff","font/woff2"],GC=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function HC(r){const t=ye.extname(r),e=ye.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1));let i=e.length>0;for(const n of e)if(!n.match(GC)){i=!1;break}let s=e.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const zC=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function jC(r){return zC.test(r)?r:encodeURI(r)}const VC={extension:{type:rt.LoadParser,priority:lr.Low},name:"loadWebFont",test(r){return Ds(r,$C)||bi(r,UC)},async load(r,t){var i,s,n;const e=ot.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??HC(r),l=((n=(s=t.data)==null?void 0:s.weights)==null?void 0:n.filter(d=>NC.includes(d)))??["normal"],u=t.data??{};for(let d=0;d<l.length;d++){const f=l[d],m=new FontFace(a,`url(${jC(r)})`,{...u,weight:f});await m.load(),e.add(m),o.push(m)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>ot.ADAPTER.getFontFaceSet().delete(t))}};pt.add(VC);const WC=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ws=null,Sh=class{constructor(){ws||(ws=URL.createObjectURL(new Blob([WC],{type:"application/javascript"}))),this.worker=new Worker(ws)}};Sh.revokeObjectURL=function(){ws&&(URL.revokeObjectURL(ws),ws=null)};const XC=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Ts=null;class Bv{constructor(){Ts||(Ts=URL.createObjectURL(new Blob([XC],{type:"application/javascript"}))),this.worker=new Worker(Ts)}}Bv.revokeObjectURL=function(){Ts&&(URL.revokeObjectURL(Ts),Ts=null)};let uf=0,pc;class YC{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Sh;e.addEventListener("message",i=>{e.terminate(),Sh.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){pc===void 0&&(pc=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<pc&&(this._createdWorkers++,t=new Bv().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((s,n)=>{this.queue.push({id:t,arguments:e,resolve:s,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[uf]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:uf++,id:i})}}const df=new YC;function Hn(r,t,e){r.resource.internal=!0;const i=new dt(r),s=()=>{delete t.promiseCache[e],Li.has(e)&&Li.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const qC=[".jpeg",".jpg",".png",".webp",".avif"],KC=["image/jpeg","image/png","image/webp","image/avif"];async function ZC(r){const t=await ot.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Wa={name:"loadTextures",extension:{type:rt.LoadParser,priority:lr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Ds(r,KC)||bi(r,qC)},async load(r,t,e){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;i?this.config.preferWorkers&&await df.isImageBitmapSupported()?s=await df.loadImageBitmap(r):s=await ZC(r):s=await new Promise((l,u)=>{const d=new Image;d.crossOrigin=this.config.crossOrigin,d.src=r,d.complete?l(d):(d.onload=()=>l(d),d.onerror=f=>u(f))});const n={...t.data};n.resolution??(n.resolution=Vr(r)),i&&((a=n.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(n.resourceOptions={...n.resourceOptions},n.resourceOptions.ownsImageBitmap=!0);const o=new Et(s,n);return o.resource.src=r,Hn(o,e,r)},unload(r){r.destroy(!0)}};pt.add(Wa);const QC=".svg",JC="image/svg+xml",tP={extension:{type:rt.LoadParser,priority:lr.High},name:"loadSVG",test(r){return Ds(r,JC)||bi(r,QC)},async testParse(r){return fh.test(r)},async parse(r,t,e){var n;const i=new fh(r,(n=t==null?void 0:t.data)==null?void 0:n.resourceOptions);await i.load();const s=new Et(i,{resolution:Vr(r),...t==null?void 0:t.data});return s.resource.src=t.src,Hn(s,e,t.src)},async load(r,t){return(await ot.ADAPTER.fetch(r)).text()},unload:Wa.unload};pt.add(tP);const eP=[".mp4",".m4v",".webm",".ogv"],rP=["video/mp4","video/webm","video/ogg"],iP={name:"loadVideo",extension:{type:rt.LoadParser,priority:lr.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return Ds(r,rP)||bi(r,eP)},async load(r,t,e){var o;let i;const s=await(await ot.ADAPTER.fetch(r)).blob(),n=URL.createObjectURL(s);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new Iv(n,a);await l.load();const u=new Et(l,{alphaMode:await lS(),resolution:Vr(r),...t==null?void 0:t.data});u.resource.src=r,i=Hn(u,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(n)})}catch(a){throw URL.revokeObjectURL(n),a}return i},unload(r){r.destroy(!0)}};pt.add(iP);class sP{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:s,srcs:n}=t;return Ze(e||i||s||n,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(s=>{const n=s.src??s.srcs,o=s.alias??s.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(t,o);i.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(t,u));i.push(...l),a=[...o,...l]}this.add({...s,alias:a,src:n})}):Object.keys(e).forEach(s=>{const n=[s,this._createBundleAssetId(t,s)];if(typeof e[s]=="string")this.add({alias:n,src:e[s]});else if(Array.isArray(e[s]))this.add({alias:n,src:e[s]});else{const o=e[s],a=o.src??o.srcs;this.add({...o,alias:n,src:Array.isArray(a)?a:[a]})}i.push(...n)}),this._bundles[t]=i}add(t,e,i,s,n){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(kt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:i,format:s,loadParser:n})):Array.isArray(t)?o.push(...t):o.push(t);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Ze(o).forEach(l=>{const{src:u,srcs:d}=l;let{data:f,format:m,loadParser:v}=l;const y=Ze(u||d).map(S=>typeof S=="string"?IC(S):Array.isArray(S)?S:[S]),b=this.getAlias(l);Array.isArray(b)?b.forEach(a):a(b);const w=[];y.forEach(S=>{S.forEach(C=>{let E={};if(typeof C!="object"){E.src=C;for(let R=0;R<this._parsers.length;R++){const k=this._parsers[R];if(k.test(C)){E=k.parse(C);break}}}else f=C.data??f,m=C.format??m,v=C.loadParser??v,E={...E,...C};if(!b)throw new Error(`[Resolver] alias is undefined for this asset: ${E.src}`);E=this.buildResolvedAsset(E,{aliases:b,data:f,format:m,loadParser:v}),w.push(E)})}),b.forEach(S=>{this._assetMap[S]=w})})}resolveBundle(t){const e=ha(t);t=Ze(t);const i={};return t.forEach(s=>{const n=this._bundles[s];if(n){const o=this.resolve(n),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(s,l)]=u}i[s]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const s in e)i[s]=e[s].src;return i}return e.src}resolve(t){const e=ha(t);t=Ze(t);const i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s];const o=n[0],a=this._getPreferredOrder(n);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const d=n.filter(f=>f[l]?f[l]===u:!1);d.length&&(n=d)})}),this._resolverHash[s]=n[0]??o}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],s=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:n,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=ye.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=n??t.loadParser,t.format=o??t.format??ye.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class nP{constructor(){this._detections=[],this._initialized=!1,this.resolver=new sP,this.loader=new MC,this.cache=Li,this._backgroundLoader=new PC(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const e=((n=t.texturePreference)==null?void 0:n.resolution)??1,i=typeof e=="number"?[e]:e,s=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,s,n){this.resolver.add(t,e,i,s,n)}async load(t,e){this._initialized||await this.init();const i=ha(t),s=Ze(t).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),n=this.resolver.resolve(s),o=await this._mapLoadToResolve(n,e);return i?o[s[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),n={},o=Object.keys(s);let a=0,l=0;const u=()=>{e==null||e(++a/l)},d=o.map(f=>{const m=s[f];return l+=Object.keys(m).length,this._mapLoadToResolve(m,u).then(v=>{n[f]=v})});return await Promise.all(d),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Li.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Li.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),s=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=n[a.src],d=[a.src];a.alias&&d.push(...a.alias),o[s[l]]=u,Li.set(d,u)}),o}async unload(t){this._initialized||await this.init();const e=Ze(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Ze(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Li.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e}get detections(){return this._detections}get preferWorkers(){return Wa.config.preferWorkers}set preferWorkers(t){kt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const To=new nP;pt.handleByList(rt.LoadParser,To.loader.parsers).handleByList(rt.ResolveParser,To.resolver.parsers).handleByList(rt.CacheParser,To.cache.parsers).handleByList(rt.DetectionParser,To.detections);const oP={extension:rt.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof dt),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((s,n)=>{e[i+(n===0?"":n+1)]=s})}),e}};pt.add(oP);async function Fv(r){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const aP={extension:{type:rt.DetectionParser,priority:1},test:async()=>Fv("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};pt.add(aP);const lP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Fv("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};pt.add(lP);const pf=["png","jpg","jpeg"],cP={extension:{type:rt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...pf],remove:async r=>r.filter(t=>!pf.includes(t))};pt.add(cP);const hP="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Su(r){return hP?!1:document.createElement("video").canPlayType(r)!==""}const uP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Su("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};pt.add(uP);const dP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Su("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};pt.add(dP);const pP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Su("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};pt.add(pP);const fP={extension:rt.ResolveParser,test:Wa.test,parse:r=>{var t;return{resolution:parseFloat(((t=ot.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:ye.extname(r).slice(1),src:r}}};pt.add(fP);var _e=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(_e||{});const ua={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let pr,cs;function ff(){cs={bptc:pr.getExtension("EXT_texture_compression_bptc"),astc:pr.getExtension("WEBGL_compressed_texture_astc"),etc:pr.getExtension("WEBGL_compressed_texture_etc"),s3tc:pr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:pr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:pr.getExtension("WEBGL_compressed_texture_pvrtc")||pr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:pr.getExtension("WEBGL_compressed_texture_etc1"),atc:pr.getExtension("WEBGL_compressed_texture_atc")}}const mP={extension:{type:rt.DetectionParser,priority:2},test:async()=>{const r=ot.ADAPTER.createCanvas().getContext("webgl");return r?(pr=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{cs||ff();const t=[];for(const e in cs)cs[e]&&t.push(e);return[...t,...r]},remove:async r=>(cs||ff(),r.filter(t=>!(t in cs)))};pt.add(mP);class gP extends Ga{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,s;typeof t=="string"?(i=t,s=new Uint8Array):(i=null,s=t),super(s,e),this.origin=i,this.buffer=s?new eh(s):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new eh(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Ni extends gP{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Ni._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Ni._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const s=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let n=0,o=this.levels;n<o;n++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:d}=this._levelBuffers[n];s.compressedTexImage2D(s.TEXTURE_2D,a,this.format,l,u,0,d)}return!0}onBlobLoaded(){this._levelBuffers=Ni._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,i,s,n,o,a){const l=new Array(i);let u=t.byteOffset,d=o,f=a,m=d+s-1&~(s-1),v=f+n-1&~(n-1),y=m*v*ua[e];for(let b=0;b<i;b++)l[b]={levelID:b,levelWidth:i>1?d:m,levelHeight:i>1?f:v,levelBuffer:new Uint8Array(t.buffer,u,y)},u+=y,d=d>>1||1,f=f>>1||1,m=d+s-1&~(s-1),v=f+n-1&~(n-1),y=m*v*ua[e];return l}}const fc=4,Eo=124,vP=32,mf=20,yP=542327876,So={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},_P={FOURCC:2},Ao={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},bP=1,xP=2,wP=4,TP=64,EP=512,SP=131072,AP=827611204,CP=861165636,PP=894720068,IP=808540228,RP=4,MP={[AP]:_e.COMPRESSED_RGBA_S3TC_DXT1_EXT,[CP]:_e.COMPRESSED_RGBA_S3TC_DXT3_EXT,[PP]:_e.COMPRESSED_RGBA_S3TC_DXT5_EXT},kP={70:_e.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:_e.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:_e.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:_e.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:_e.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:_e.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:_e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:_e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:_e.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:_e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function DP(r){const t=new Uint32Array(r);if(t[0]!==yP)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(r,0,Eo/Uint32Array.BYTES_PER_ELEMENT),i=e[So.HEIGHT],s=e[So.WIDTH],n=e[So.MIPMAP_COUNT],o=new Uint32Array(r,So.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,vP/Uint32Array.BYTES_PER_ELEMENT),a=o[bP];if(a&wP){const l=o[_P.FOURCC];if(l!==IP){const C=MP[l],E=fc+Eo,R=new Uint8Array(r,E);return[new Ni(R,{format:C,width:s,height:i,levels:n})]}const u=fc+Eo,d=new Uint32Array(t.buffer,u,mf/Uint32Array.BYTES_PER_ELEMENT),f=d[Ao.DXGI_FORMAT],m=d[Ao.RESOURCE_DIMENSION],v=d[Ao.MISC_FLAG],y=d[Ao.ARRAY_SIZE],b=kP[f];if(b===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===RP)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const w=new Array,S=fc+Eo+mf;if(y===1)w.push(new Uint8Array(r,S));else{const C=ua[b];let E=0,R=s,k=i;for(let P=0;P<n;P++){const O=Math.max(1,R+3&-4),U=Math.max(1,k+3&-4),$=O*U*C;E+=$,R=R>>>1,k=k>>>1}let N=S;for(let P=0;P<y;P++)w.push(new Uint8Array(r,N,E)),N+=E}return w.map(C=>new Ni(C,{format:b,width:s,height:i,levels:n}))}throw a&TP?new Error("DDSParser does not support uncompressed texture data."):a&EP?new Error("DDSParser does not supported YUV uncompressed texture data."):a&SP?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&xP?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const gf=[171,75,84,88,32,49,49,187,13,10,26,10],OP=67305985,Ye={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ah=64,vf={[gt.UNSIGNED_BYTE]:1,[gt.UNSIGNED_SHORT]:2,[gt.INT]:4,[gt.UNSIGNED_INT]:4,[gt.FLOAT]:4,[gt.HALF_FLOAT]:8},LP={[K.RGBA]:4,[K.RGB]:3,[K.RG]:2,[K.RED]:1,[K.LUMINANCE]:1,[K.LUMINANCE_ALPHA]:2,[K.ALPHA]:1},BP={[gt.UNSIGNED_SHORT_4_4_4_4]:2,[gt.UNSIGNED_SHORT_5_5_5_1]:2,[gt.UNSIGNED_SHORT_5_6_5]:2};function FP(r,t,e=!1){const i=new DataView(t);if(!NP(r,i))return null;const s=i.getUint32(Ye.ENDIANNESS,!0)===OP,n=i.getUint32(Ye.GL_TYPE,s),o=i.getUint32(Ye.GL_FORMAT,s),a=i.getUint32(Ye.GL_INTERNAL_FORMAT,s),l=i.getUint32(Ye.PIXEL_WIDTH,s),u=i.getUint32(Ye.PIXEL_HEIGHT,s)||1,d=i.getUint32(Ye.PIXEL_DEPTH,s)||1,f=i.getUint32(Ye.NUMBER_OF_ARRAY_ELEMENTS,s)||1,m=i.getUint32(Ye.NUMBER_OF_FACES,s),v=i.getUint32(Ye.NUMBER_OF_MIPMAP_LEVELS,s),y=i.getUint32(Ye.BYTES_OF_KEY_VALUE_DATA,s);if(u===0||d!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");const b=4,w=4,S=l+3&-4,C=u+3&-4,E=new Array(f);let R=l*u;n===0&&(R=S*C);let k;if(n!==0?vf[n]?k=vf[n]*LP[o]:k=BP[n]:k=ua[a],k===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const N=e?$P(i,y,s):null;let P=R*k,O=l,U=u,$=S,Y=C,H=Ah+y;for(let B=0;B<v;B++){const F=i.getUint32(H,s);let z=H+4;for(let Z=0;Z<f;Z++){let et=E[Z];et||(et=E[Z]=new Array(v)),et[B]={levelID:B,levelWidth:v>1||n!==0?O:$,levelHeight:v>1||n!==0?U:Y,levelBuffer:new Uint8Array(t,z,P)},z+=P}H+=F+4,H=H%4!==0?H+4-H%4:H,O=O>>1||1,U=U>>1||1,$=O+b-1&-4,Y=U+w-1&-4,P=$*Y*k}return n!==0?{uncompressed:E.map(B=>{let F=B[0].levelBuffer,z=!1;return n===gt.FLOAT?F=new Float32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4):n===gt.UNSIGNED_INT?(z=!0,F=new Uint32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)):n===gt.INT&&(z=!0,F=new Int32Array(B[0].levelBuffer.buffer,B[0].levelBuffer.byteOffset,B[0].levelBuffer.byteLength/4)),{resource:new Ga(F,{width:B[0].levelWidth,height:B[0].levelHeight}),type:n,format:z?UP(o):o}}),kvData:N}:{compressed:E.map(B=>new Ni(null,{format:a,width:l,height:u,levels:v,levelBuffers:B})),kvData:N}}function NP(r,t){for(let e=0;e<gf.length;e++)if(t.getUint8(e)!==gf[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function UP(r){switch(r){case K.RGBA:return K.RGBA_INTEGER;case K.RGB:return K.RGB_INTEGER;case K.RG:return K.RG_INTEGER;case K.RED:return K.RED_INTEGER;default:return r}}function $P(r,t,e){const i=new Map;let s=0;for(;s<t;){const n=r.getUint32(Ah+s,e),o=Ah+s+4,a=3-(n+3)%4;if(n===0||n>t-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),d=new DataView(r.buffer,o+l+1,n-l-1);i.set(u,d),s+=4+n+a}return i}const GP={extension:{type:rt.LoadParser,priority:lr.High},name:"loadDDS",test(r){return bi(r,".dds")},async load(r,t,e){const i=await(await ot.ADAPTER.fetch(r)).arrayBuffer(),s=DP(i).map(n=>{const o=new Et(n,{mipmap:Ar.OFF,alphaMode:Re.NO_PREMULTIPLIED_ALPHA,resolution:Vr(r),...t.data});return Hn(o,e,r)});return s.length===1?s[0]:s},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};pt.add(GP);const HP={extension:{type:rt.LoadParser,priority:lr.High},name:"loadKTX",test(r){return bi(r,".ktx")},async load(r,t,e){const i=await(await ot.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:n,kvData:o}=FP(r,i),a=s??n,l={mipmap:Ar.OFF,alphaMode:Re.NO_PREMULTIPLIED_ALPHA,resolution:Vr(r),...t.data},u=a.map(d=>{a===n&&Object.assign(l,{type:d.type,format:d.format});const f=d.resource??d,m=new Et(f,l);return m.ktxKeyValueData=o,Hn(m,e,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};pt.add(HP);const zP=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],jP={extension:rt.ResolveParser,test:r=>{const t=ye.extname(r).slice(1);return["basis","ktx","dds"].includes(t)},parse:r=>{var i,s;const t=r.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const n=t.pop();if(zP.includes(n))return{resolution:parseFloat(((i=ot.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:n,src:r}}return{resolution:parseFloat(((s=ot.RETINA_PREFIX.exec(r))==null?void 0:s[1])??"1"),format:e,src:r}}};pt.add(jP);const Co=new Ct,VP=4,Nv=class sn{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,i,s){const n=new Image;return n.src=await this.base64(t,e,i,s),n}async base64(t,e,i,s){const n=this.canvas(t,s);if(n.toBlob!==void 0)return new Promise((o,a)=>{n.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},e,i)});if(n.toDataURL!==void 0)return n.toDataURL(e,i);if(n.convertToBlob!==void 0){const o=await n.convertToBlob({type:e,quality:i});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);o&&sn._flipY(i,s,n),a&&sn._unpremultiplyAlpha(i);const l=new ES(s,n,1),u=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return l.context.putImageData(u,0,0),l.canvas}pixels(t,e){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);return o&&sn._flipY(i,s,n),a&&sn._unpremultiplyAlpha(i),i}_rawPixels(t,e){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,o=!1,a,l=!1;t&&(t instanceof Ki?a=t:(a=i.generateTexture(t,{region:e,resolution:i.resolution,multisample:i.multisample}),l=!0,e&&(Co.width=e.width,Co.height=e.height,e=Co)));const u=i.gl;if(a){if(s=a.baseTexture.resolution,e=e??a.frame,n=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===K.RGBA,!l){i.renderTexture.bind(a);const v=a.framebuffer.glFramebuffers[i.CONTEXT_UID];v.blitFramebuffer&&i.framebuffer.bind(v.blitFramebuffer)}}else s=i.resolution,e||(e=Co,e.width=i.width/s,e.height=i.height/s),n=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const d=Math.max(Math.round(e.width*s),1),f=Math.max(Math.round(e.height*s),1),m=new Uint8Array(VP*d*f);return u.readPixels(Math.round(e.x*s),Math.round(e.y*s),d,f,u.RGBA,u.UNSIGNED_BYTE,m),l&&(a==null||a.destroy(!0)),{pixels:m,width:d,height:f,flipY:n,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,i){const s=e<<2,n=i>>1,o=new Uint8Array(s);for(let a=0;a<n;a++){const l=a*s,u=(i-a-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,u,u+s),t.set(o,u)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let i=0;i<e;i+=4){const s=t[i+3];if(s!==0){const n=255.001/s;t[i]=t[i]*n+.5,t[i+1]=t[i+1]*n+.5,t[i+2]=t[i+2]*n+.5}}}};Nv.extension={name:"extract",type:rt.RendererSystem};let WP=Nv;pt.add(WP);const da={build(r){const t=r.points;let e,i,s,n,o,a;if(r.type===be.CIRC){const y=r.shape;e=y.x,i=y.y,o=a=y.radius,s=n=0}else if(r.type===be.ELIP){const y=r.shape;e=y.x,i=y.y,o=y.width,a=y.height,s=n=0}else{const y=r.shape,b=y.width/2,w=y.height/2;e=y.x+b,i=y.y+w,o=a=Math.max(0,Math.min(y.radius,Math.min(b,w))),s=b-o,n=w-a}if(!(o>=0&&a>=0&&s>=0&&n>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(s?4:0)+(n?4:0);if(t.length=u,u===0)return;if(l===0){t.length=8,t[0]=t[6]=e+s,t[1]=t[3]=i+n,t[2]=t[4]=e-s,t[5]=t[7]=i-n;return}let d=0,f=l*4+(s?2:0)+2,m=f,v=u;{const y=s+o,b=n,w=e+y,S=e-y,C=i+b;if(t[d++]=w,t[d++]=C,t[--f]=C,t[--f]=S,n){const E=i-b;t[m++]=S,t[m++]=E,t[--v]=E,t[--v]=w}}for(let y=1;y<l;y++){const b=Math.PI/2*(y/l),w=s+Math.cos(b)*o,S=n+Math.sin(b)*a,C=e+w,E=e-w,R=i+S,k=i-S;t[d++]=C,t[d++]=R,t[--f]=R,t[--f]=E,t[m++]=E,t[m++]=k,t[--v]=k,t[--v]=C}{const y=s,b=n+a,w=e+y,S=e-y,C=i+b,E=i-b;t[d++]=w,t[d++]=C,t[--v]=E,t[--v]=w,s&&(t[d++]=S,t[d++]=C,t[--v]=E,t[--v]=S)}},triangulate(r,t){const e=r.points,i=t.points,s=t.indices;if(e.length===0)return;let n=i.length/2;const o=n;let a,l;if(r.type!==be.RREC){const d=r.shape;a=d.x,l=d.y}else{const d=r.shape;a=d.x+d.width/2,l=d.y+d.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),n++,i.push(e[0],e[1]);for(let d=2;d<e.length;d+=2)i.push(e[d],e[d+1]),s.push(n++,o,n);s.push(o+1,o,n)}};function yf(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let s=0,n=r[e-2],o=r[e-1];s<e;s+=2){const a=r[s],l=r[s+1];i+=(a-n)*(l+o),n=a,o=l}if(!t&&i>0||t&&i<=0){const s=e/2;for(let n=s+s%2;n<e;n+=2){const o=e-n-2,a=e-n-1,l=n,u=n+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const Uv={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,s=t.points,n=t.indices;if(e.length>=6){yf(e,!1);const o=[];for(let u=0;u<i.length;u++){const d=i[u];yf(d.points,!0),o.push(e.length/2),e=e.concat(d.points)}const a=tT(e,o,2);if(!a)return;const l=s.length/2;for(let u=0;u<a.length;u+=3)n.push(a[u]+l),n.push(a[u+1]+l),n.push(a[u+2]+l);for(let u=0;u<e.length;u++)s.push(e[u])}}},XP={build(r){const t=r.shape,e=t.x,i=t.y,s=t.width,n=t.height,o=r.points;o.length=0,s>=0&&n>=0&&o.push(e,i,e+s,i,e+s,i+n,e,i+n)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const s=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},YP={build(r){da.build(r)},triangulate(r,t){da.triangulate(r,t)}};var Ue=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Ue||{}),ci=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(ci||{});const Cs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class _f{static curveTo(t,e,i,s,n,o){const a=o[o.length-2],l=o[o.length-1]-e,u=a-t,d=s-e,f=i-t,m=Math.abs(l*f-u*d);if(m<1e-8||n===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const v=l*l+u*u,y=d*d+f*f,b=l*d+u*f,w=n*Math.sqrt(v)/m,S=n*Math.sqrt(y)/m,C=w*b/v,E=S*b/y,R=w*f+S*u,k=w*d+S*l,N=u*(S+C),P=l*(S+C),O=f*(w+E),U=d*(w+E),$=Math.atan2(P-k,N-R),Y=Math.atan2(U-k,O-R);return{cx:R+t,cy:k+e,radius:n,startAngle:$,endAngle:Y,anticlockwise:u*d>f*l}}static arc(t,e,i,s,n,o,a,l,u){const d=a-o,f=Cs._segmentsCount(Math.abs(d)*n,Math.ceil(Math.abs(d)/ia)*40),m=d/(f*2),v=m*2,y=Math.cos(m),b=Math.sin(m),w=f-1,S=w%1/w;for(let C=0;C<=w;++C){const E=C+S*C,R=m+o+v*E,k=Math.cos(R),N=-Math.sin(R);u.push((y*k+b*N)*n+i,(y*-N+b*k)*n+s)}}}class qP{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Au{static curveLength(t,e,i,s,n,o,a,l){let u=0,d=0,f=0,m=0,v=0,y=0,b=0,w=0,S=0,C=0,E=0,R=t,k=e;for(let N=1;N<=10;++N)d=N/10,f=d*d,m=f*d,v=1-d,y=v*v,b=y*v,w=b*t+3*y*d*i+3*v*f*n+m*a,S=b*e+3*y*d*s+3*v*f*o+m*l,C=R-w,E=k-S,R=w,k=S,u+=Math.sqrt(C*C+E*E);return u}static curveTo(t,e,i,s,n,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const d=Cs._segmentsCount(Au.curveLength(l,u,t,e,i,s,n,o));let f=0,m=0,v=0,y=0,b=0;a.push(l,u);for(let w=1,S=0;w<=d;++w)S=w/d,f=1-S,m=f*f,v=m*f,y=S*S,b=y*S,a.push(v*l+3*m*S*t+3*f*y*i+b*n,v*u+3*m*S*e+3*f*y*s+b*o)}}function bf(r,t,e,i,s,n,o,a){const l=r-e*s,u=t-i*s,d=r+e*n,f=t+i*n;let m,v;o?(m=i,v=-e):(m=-i,v=e);const y=l+m,b=u+v,w=d+m,S=f+v;return a.push(y,b,w,S),2}function Si(r,t,e,i,s,n,o,a){const l=e-r,u=i-t;let d=Math.atan2(l,u),f=Math.atan2(s-r,n-t);a&&d<f?d+=Math.PI*2:!a&&d>f&&(f+=Math.PI*2);let m=d;const v=f-d,y=Math.abs(v),b=Math.sqrt(l*l+u*u),w=(15*y*Math.sqrt(b)/Math.PI>>0)+1,S=v/w;if(m+=S,a){o.push(r,t,e,i);for(let C=1,E=m;C<w;C++,E+=S)o.push(r,t,r+Math.sin(E)*b,t+Math.cos(E)*b);o.push(r,t,s,n)}else{o.push(e,i,r,t);for(let C=1,E=m;C<w;C++,E+=S)o.push(r+Math.sin(E)*b,t+Math.cos(E)*b,r,t);o.push(s,n,r,t)}return w*2}function KP(r,t){const e=r.shape;let i=r.points||e.points.slice();const s=t.closePointEps;if(i.length===0)return;const n=r.lineStyle,o=new Bt(i[0],i[1]),a=new Bt(i[i.length-2],i[i.length-1]),l=e.type!==be.POLY||e.closeStroke,u=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const et=(o.x+a.x)*.5,ut=(a.y+o.y)*.5;i.unshift(et,ut),i.push(et,ut)}const d=t.points,f=i.length/2;let m=i.length;const v=d.length/2,y=n.width/2,b=y*y,w=n.miterLimit*n.miterLimit;let S=i[0],C=i[1],E=i[2],R=i[3],k=0,N=0,P=-(C-R),O=S-E,U=0,$=0,Y=Math.sqrt(P*P+O*O);P/=Y,O/=Y,P*=y,O*=y;const H=n.alignment,B=(1-H)*2,F=H*2;l||(n.cap===ci.ROUND?m+=Si(S-P*(B-F)*.5,C-O*(B-F)*.5,S-P*B,C-O*B,S+P*F,C+O*F,d,!0)+2:n.cap===ci.SQUARE&&(m+=bf(S,C,P,O,B,F,!0,d))),d.push(S-P*B,C-O*B,S+P*F,C+O*F);for(let et=1;et<f-1;++et){S=i[(et-1)*2],C=i[(et-1)*2+1],E=i[et*2],R=i[et*2+1],k=i[(et+1)*2],N=i[(et+1)*2+1],P=-(C-R),O=S-E,Y=Math.sqrt(P*P+O*O),P/=Y,O/=Y,P*=y,O*=y,U=-(R-N),$=E-k,Y=Math.sqrt(U*U+$*$),U/=Y,$/=Y,U*=y,$*=y;const ut=E-S,yt=C-R,X=E-k,J=N-R,Rt=ut*X+yt*J,Ft=yt*X-J*ut,$t=Ft<0;if(Math.abs(Ft)<.001*Math.abs(Rt)){d.push(E-P*B,R-O*B,E+P*F,R+O*F),Rt>=0&&(n.join===Ue.ROUND?m+=Si(E,R,E-P*B,R-O*B,E-U*B,R-$*B,d,!1)+4:m+=2,d.push(E-U*F,R-$*F,E+U*B,R+$*B));continue}const se=(-P+S)*(-O+R)-(-P+E)*(-O+C),Kt=(-U+k)*(-$+R)-(-U+E)*(-$+N),oe=(ut*Kt-X*se)/Ft,he=(J*se-yt*Kt)/Ft,lt=(oe-E)*(oe-E)+(he-R)*(he-R),le=E+(oe-E)*B,Gt=R+(he-R)*B,Wt=E-(oe-E)*F,Qt=R-(he-R)*F,Te=Math.min(ut*ut+yt*yt,X*X+J*J),we=$t?B:F,De=Te+we*we*b,zn=lt<=De;let cr=n.join;if(cr===Ue.MITER&&lt/b>w&&(cr=Ue.BEVEL),zn)switch(cr){case Ue.MITER:{d.push(le,Gt,Wt,Qt);break}case Ue.BEVEL:{$t?d.push(le,Gt,E+P*F,R+O*F,le,Gt,E+U*F,R+$*F):d.push(E-P*B,R-O*B,Wt,Qt,E-U*B,R-$*B,Wt,Qt),m+=2;break}case Ue.ROUND:{$t?(d.push(le,Gt,E+P*F,R+O*F),m+=Si(E,R,E+P*F,R+O*F,E+U*F,R+$*F,d,!0)+4,d.push(le,Gt,E+U*F,R+$*F)):(d.push(E-P*B,R-O*B,Wt,Qt),m+=Si(E,R,E-P*B,R-O*B,E-U*B,R-$*B,d,!1)+4,d.push(E-U*B,R-$*B,Wt,Qt));break}}else{switch(d.push(E-P*B,R-O*B,E+P*F,R+O*F),cr){case Ue.MITER:{$t?d.push(Wt,Qt,Wt,Qt):d.push(le,Gt,le,Gt),m+=2;break}case Ue.ROUND:{$t?m+=Si(E,R,E+P*F,R+O*F,E+U*F,R+$*F,d,!0)+2:m+=Si(E,R,E-P*B,R-O*B,E-U*B,R-$*B,d,!1)+2;break}}d.push(E-U*B,R-$*B,E+U*F,R+$*F),m+=2}}S=i[(f-2)*2],C=i[(f-2)*2+1],E=i[(f-1)*2],R=i[(f-1)*2+1],P=-(C-R),O=S-E,Y=Math.sqrt(P*P+O*O),P/=Y,O/=Y,P*=y,O*=y,d.push(E-P*B,R-O*B,E+P*F,R+O*F),l||(n.cap===ci.ROUND?m+=Si(E-P*(B-F)*.5,R-O*(B-F)*.5,E-P*B,R-O*B,E+P*F,R+O*F,d,!1)+2:n.cap===ci.SQUARE&&(m+=bf(E,R,P,O,B,F,!1,d)));const z=t.indices,Z=Cs.epsilon*Cs.epsilon;for(let et=v;et<m+v-2;++et)S=d[et*2],C=d[et*2+1],E=d[(et+1)*2],R=d[(et+1)*2+1],k=d[(et+2)*2],N=d[(et+2)*2+1],!(Math.abs(S*(R-N)+E*(N-C)+k*(C-R))<Z)&&z.push(et,et+1,et+2)}function ZP(r,t){let e=0;const i=r.shape,s=r.points||i.points,n=i.type!==be.POLY||i.closeStroke;if(s.length===0)return;const o=t.points,a=t.indices,l=s.length/2,u=o.length/2;let d=u;for(o.push(s[0],s[1]),e=1;e<l;e++)o.push(s[e*2],s[e*2+1]),a.push(d,d+1),d++;n&&a.push(d,u)}function xf(r,t){r.lineStyle.native?ZP(r,t):KP(r,t)}class Cu{static curveLength(t,e,i,s,n,o){const a=t-2*i+n,l=e-2*s+o,u=2*i-2*t,d=2*s-2*e,f=4*(a*a+l*l),m=4*(a*u+l*d),v=u*u+d*d,y=2*Math.sqrt(f+m+v),b=Math.sqrt(f),w=2*f*b,S=2*Math.sqrt(v),C=m/b;return(w*y+b*m*(y-S)+(4*v*f-m*m)*Math.log((2*b+C+y)/(C+S)))/(4*w)}static curveTo(t,e,i,s,n){const o=n[n.length-2],a=n[n.length-1],l=Cs._segmentsCount(Cu.curveLength(o,a,t,e,i,s));let u=0,d=0;for(let f=1;f<=l;++f){const m=f/l;u=o+(t-o)*m,d=a+(e-a)*m,n.push(u+(t+(i-t)*m-u)*m,d+(e+(s-e)*m-d)*m)}}}const mc={[be.POLY]:Uv,[be.CIRC]:da,[be.ELIP]:da,[be.RECT]:XP,[be.RREC]:YP},wf=[],Po=[];class pa{constructor(t,e=null,i=null,s=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=s,this.type=t.type}clone(){return new pa(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ss=new Bt,$v=class Gv extends Wg{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new la,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Po.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),wf.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,s=null){const n=new pa(t,e,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new pa(t,null,null,e),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const s=e[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,ss):ss.copyFrom(t),s.shape.contains(ss.x,ss.y))){let n=!1;if(s.holes){for(let o=0;o<s.holes.length;o++)if(s.holes[o].shape.contains(ss.x,ss.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let l=this.shapeIndex;l<e.length;l++){this.shapeIndex++;const u=e[l],d=u.fillStyle,f=u.lineStyle;mc[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(d.visible||f.visible)&&this.processHoles(u.holes);for(let m=0;m<2;m++){const v=m===0?d:f;if(!v.visible)continue;const y=v.texture.baseTexture,b=this.indices.length,w=this.points.length/2;y.wrapMode=ui.REPEAT,m===0?this.processFill(u):this.processLine(u);const S=this.points.length/2-w;S!==0&&(i&&!this._compareStyles(s,v)&&(i.end(b,w),i=null),i||(i=wf.pop()||new qP,i.begin(v,b,w),this.batches.push(i),s=v),this.addUvs(this.points,t,v.texture,w,S,v.matrix))}}const n=this.indices.length,o=this.points.length/2;if(i&&i.end(n,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const s=t[e];for(let n=0;n<s.size;n++){const o=s.start+n;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Gv.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Et._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),Po.push(this.drawCalls[f]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let s=Po.pop();s||(s=new sh,s.texArray=new lh),s.texArray.count=0,s.start=0,s.size=0,s.type=_r.TRIANGLES;let n=0,o=null,a=0,l=!1,u=_r.TRIANGLES,d=0;this.drawCalls.push(s);for(let f=0;f<this.batches.length;f++){const m=this.batches[f],v=8,y=m.style,b=y.texture.baseTexture;l!==!!y.native&&(l=!!y.native,u=l?_r.LINES:_r.TRIANGLES,o=null,n=v,t++),o!==b&&(o=b,b._batchEnabled!==t&&(n===v&&(t++,n=0,s.size>0&&(s=Po.pop(),s||(s=new sh,s.texArray=new lh),this.drawCalls.push(s)),s.start=d,s.size=0,s.texArray.count=0,s.type=u),b.touched=1,b._batchEnabled=t,b._batchLocation=n,b.wrapMode=ui.REPEAT,s.texArray.elements[s.texArray.count++]=b,n++)),s.size+=m.size,d+=m.size,a=b._batchLocation,this.addColors(e,y.color,y.alpha,m.attribSize,m.attribStart),this.addTextureIds(i,a,m.attribSize,m.attribStart)}Et._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(t.length*3*4),o=new Float32Array(n),a=new Uint32Array(n);let l=0;for(let u=0;u<t.length/2;u++)o[l++]=t[u*2],o[l++]=t[u*2+1],o[l++]=e[u*2],o[l++]=e[u*2+1],a[l++]=i[u],o[l++]=s[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Uv.triangulate(t,this):mc[t.type].triangulate(t,this)}processLine(t){xf(t,this);for(let e=0;e<t.holes.length;e++)xf(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];mc[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const s=t[i*2],n=t[i*2+1];t[i*2]=e.a*s+e.c*n+e.tx,t[i*2+1]=e.b*s+e.d*n+e.ty}}addColors(t,e,i,s,n=0){const o=Xt.shared.setValue(e).toLittleEndianNumber(),a=Xt.shared.setValue(o).toPremultiplied(i);t.length=Math.max(t.length,n+s);for(let l=0;l<s;l++)t[n+l]=a}addTextureIds(t,e,i,s=0){t.length=Math.max(t.length,s+i);for(let n=0;n<i;n++)t[s+n]=e}addUvs(t,e,i,s,n,o=null){let a=0;const l=e.length,u=i.frame;for(;a<n;){let f=t[(s+a)*2],m=t[(s+a)*2+1];if(o){const v=o.a*f+o.c*m+o.tx;m=o.b*f+o.d*m+o.ty,f=v}a++,e.push(f/u.width,m/u.height)}const d=i.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(e,i,l,n)}adjustUvs(t,e,i,s){const n=e.baseTexture,o=1e-6,a=i+s*2,l=e.frame,u=l.width/n.width,d=l.height/n.height;let f=l.x/l.width,m=l.y/l.height,v=Math.floor(t[i]+o),y=Math.floor(t[i+1]+o);for(let b=i+2;b<a;b+=2)v=Math.min(v,Math.floor(t[b]+o)),y=Math.min(y,Math.floor(t[b+1]+o));f-=v,m-=y;for(let b=i;b<a;b+=2)t[b]=(t[b]+f)*u,t[b+1]=(t[b+1]+m)*d}};$v.BATCHABLE_SIZE=100;let QP=$v;class Xa{constructor(){this.color=16777215,this.alpha=1,this.texture=dt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Xa;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=dt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Pu extends Xa{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ci.BUTT,this.join=Ue.MITER,this.miterLimit=10}clone(){const t=new Pu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ci.BUTT,this.join=Ue.MITER,this.miterLimit=10}}const gc={},Ch=class zo extends or{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Xa,this._lineStyle=new Pu,this._matrix=null,this._holeMode=!1,this.state=Ir.for2d(),this._geometry=t||new QP,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Xt(16777215),this.blendMode=bt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new zo(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,s=.5,n=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:s,native:n}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:dt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ci.BUTT,join:Ue.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Fi,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Fi,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==t||n!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Cu.curveTo(t,e,i,s,n),this}bezierCurveTo(t,e,i,s,n,o){return this._initCurve(),Au.curveTo(t,e,i,s,n,o,this.currentPath.points),this}arcTo(t,e,i,s,n){this._initCurve(t,e);const o=this.currentPath.points,a=_f.curveTo(t,e,i,s,n,o);if(a){const{cx:l,cy:u,radius:d,startAngle:f,endAngle:m,anticlockwise:v}=a;this.arc(l,u,d,f,m,v)}return this}arc(t,e,i,s,n,o=!1){if(s===n)return this;if(!o&&n<=s?n+=ia:o&&s<=n&&(s+=ia),n-s===0)return this;const a=t+Math.cos(s)*i,l=e+Math.sin(s)*i,u=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const f=Math.abs(d[d.length-2]-a),m=Math.abs(d[d.length-1]-l);f<u&&m<u||d.push(a,l)}else this.moveTo(a,l),d=this.currentPath.points;return _f.arc(a,l,t,e,i,s,n,o,d),this}beginFill(t=0,e){return this.beginTextureFill({texture:dt.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Xt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:dt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,s){return this.drawShape(new Ct(t,e,i,s))}drawRoundedRect(t,e,i,s,n){return this.drawShape(new ja(t,e,i,s,n))}drawCircle(t,e,i){return this.drawShape(new Ha(t,e,i))}drawEllipse(t,e,i,s){return this.drawShape(new za(t,e,i,s))}drawPolygon(...t){let e,i=!0;const s=t[0];s.points?(i=s.closeStroke,e=s.points):Array.isArray(t[0])?e=t[0]:e=t;const n=new Fi(e);return n.closeStroke=i,this.drawShape(n),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===be.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let s=0;s<i;s++){const n=t.batches[s],o=n.style.color,a=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,n.start*2,n.size),d={vertexData:a,blendMode:e,indices:u,uvs:l,_batchRGB:Xt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=d}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const s=this.batches[e];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,s=this.worldAlpha,n=e.uniforms,o=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Xt.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,i.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:i,type:s,size:n,start:o}=e,a=i.count;for(let l=0;l<a;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(s,n,o)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!gc[i]){const{maxTextures:s}=t.plugins[i],n=new Int32Array(s);for(let l=0;l<s;l++)n[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yt,default:rr.from({uSamplers:n},!0)},a=t.plugins[i]._shader.program;gc[i]=new Tr(a,o)}e=gc[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:s,maxY:n}=t.bounds;this._bounds.addFrame(this.transform,e,i,s,n)}containsPoint(t){return this.worldTransform.applyInverse(t,zo._TEMP_POINT),this._geometry.containsPoint(zo._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Xt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,s=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,u=this._geometry.points,d=this.vertexData;let f=0;for(let m=0;m<u.length;m+=2){const v=u[m],y=u[m+1];d[f++]=i*v+n*y+a,d[f++]=o*y+s*v+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Ch.curves=Cs,Ch._TEMP_POINT=new Bt;let Hv=Ch;class JP{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const vc=new Bt,Tf=new Fi,zv=class jv extends or{constructor(t,e,i,s=_r.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||Ir.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ot.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===_r.TRIANGLES&&e.length<jv.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const s=this.transform.worldTransform,n=s.a,o=s.b,a=s.c,l=s.d,u=s.tx,d=s.ty,f=this.vertexData;for(let m=0;m<f.length/2;m++){const v=e[m*2],y=e[m*2+1];f[m*2]=n*v+a*y+u,f[m*2+1]=o*v+l*y+d}if(this._roundPixels){const m=ot.RESOLUTION;for(let v=0;v<f.length;++v)f[v]=Math.round(f[v]*m)/m}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new JP(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,vc);const e=this.geometry.getBuffer("aVertexPosition").data,i=Tf.points,s=this.geometry.getIndex().data,n=s.length,o=this.drawMode===4?3:1;for(let a=0;a+2<n;a+=o){const l=s[a]*2,u=s[a+1]*2,d=s[a+2]*2;if(i[0]=e[l],i[1]=e[l+1],i[2]=e[u],i[3]=e[u+1],i[4]=e[d],i[5]=e[d+1],Tf.contains(vc.x,vc.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};zv.BATCHABLE_SIZE=100;let Ef=zv;class tI extends gi{constructor(t,e,i){super();const s=new ae(t),n=new ae(e,!0),o=new ae(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,gt.FLOAT).addAttribute("aTextureCoord",n,2,!1,gt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var eI=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,rI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Sf extends Tr{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:Yt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||$r.from(rI,eI),i),this._colorDirty=!1,this.uvMatrix=new ov(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Xt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Xt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Af{constructor(t,e,i){this.geometry=new gi,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<t.length;++s){let n=t[s];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||gt.FLOAT,offset:n.offset},e[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new ae(wS(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new ae(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new ae(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===gt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===gt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let s=0;s<this.dynamicProperties.length;s++){const n=this.dynamicProperties[s];n.uploadFunction(t,e,i,n.type===gt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let s=0;s<this.staticProperties.length;s++){const n=this.staticProperties[s];n.uploadFunction(t,e,i,n.type===gt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var iI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,sI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Vv extends Va{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Yt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:gt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Tr.from(sI,iI,{}),this.state=Ir.for2d()}render(t){const e=t.children,i=t._maxSize,s=t._batchSize,n=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=zg(t.blendMode,u),n.state.set(this.state);const d=n.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Xt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let m=!1;for(let v=0,y=0;v<o;v+=s,y+=1){let b=o-v;b>s&&(b=s),y>=a.length&&a.push(this._generateOneMoreBuffer(t));const w=a[y];w.uploadDynamic(e,v,b);const S=t._bufferUpdateIDs[y]||0;m=m||w._updateID<S,m&&(w._updateID=t._updateID,w.uploadStatic(e,v,b)),n.geometry.bind(w.geometry),d.drawElements(d.TRIANGLES,b*6,d.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,s=t._batchSize,n=t._properties;for(let o=0;o<i;o+=s)e.push(new Af(this.properties,n,s));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new Af(this.properties,i,e)}uploadVertices(t,e,i,s,n,o){let a=0,l=0,u=0,d=0;for(let f=0;f<i;++f){const m=t[e+f],v=m._texture,y=m.scale.x,b=m.scale.y,w=v.trim,S=v.orig;w?(l=w.x-m.anchor.x*S.width,a=l+w.width,d=w.y-m.anchor.y*S.height,u=d+w.height):(a=S.width*(1-m.anchor.x),l=S.width*-m.anchor.x,u=S.height*(1-m.anchor.y),d=S.height*-m.anchor.y),s[o]=l*y,s[o+1]=d*b,s[o+n]=a*y,s[o+n+1]=d*b,s[o+n*2]=a*y,s[o+n*2+1]=u*b,s[o+n*3]=l*y,s[o+n*3+1]=u*b,o+=n*4}}uploadPosition(t,e,i,s,n,o){for(let a=0;a<i;a++){const l=t[e+a].position;s[o]=l.x,s[o+1]=l.y,s[o+n]=l.x,s[o+n+1]=l.y,s[o+n*2]=l.x,s[o+n*2+1]=l.y,s[o+n*3]=l.x,s[o+n*3+1]=l.y,o+=n*4}}uploadRotation(t,e,i,s,n,o){for(let a=0;a<i;a++){const l=t[e+a].rotation;s[o]=l,s[o+n]=l,s[o+n*2]=l,s[o+n*3]=l,o+=n*4}}uploadUvs(t,e,i,s,n,o){for(let a=0;a<i;++a){const l=t[e+a]._texture._uvs;l?(s[o]=l.x0,s[o+1]=l.y0,s[o+n]=l.x1,s[o+n+1]=l.y1,s[o+n*2]=l.x2,s[o+n*2+1]=l.y2,s[o+n*3]=l.x3,s[o+n*3+1]=l.y3,o+=n*4):(s[o]=0,s[o+1]=0,s[o+n]=0,s[o+n+1]=0,s[o+n*2]=0,s[o+n*2+1]=0,s[o+n*3]=0,s[o+n*3+1]=0,o+=n*4)}}uploadTint(t,e,i,s,n,o){for(let a=0;a<i;++a){const l=t[e+a],u=Xt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[o]=u,s[o+n]=u,s[o+n*2]=u,s[o+n*3]=u,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Vv.extension={name:"particle",type:rt.RendererPlugin};pt.add(Vv);var Ya=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(Ya||{});const Io={willReadFrequently:!0},fr=class ft{static get experimentalLetterSpacingSupported(){let t=ft._experimentalLetterSpacingSupported;if(t!==void 0){const e=ot.ADAPTER.getCanvasRenderingContext2D().prototype;t=ft._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,n,o,a,l,u){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(t,e,i,s=ft._canvas){i=i??e.wordWrap;const n=e.toFontString(),o=ft.measureFont(n);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const a=s.getContext("2d",Io);a.font=n;const l=(i?ft.wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let d=0;for(let y=0;y<l.length;y++){const b=ft._measureText(l[y],e.letterSpacing,a);u[y]=b,d=Math.max(d,b)}let f=d+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);const m=e.lineHeight||o.fontSize+e.strokeThickness;let v=Math.max(m,o.fontSize+e.strokeThickness*2)+e.leading+(l.length-1)*(m+e.leading);return e.dropShadow&&(v+=e.dropShadowDistance),new ft(t,e,f,v,l,u,m+e.leading,d,o)}static _measureText(t,e,i){let s=!1;ft.experimentalLetterSpacingSupported&&(ft.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(t).width;return n>0&&(s?n-=e:n+=(ft.graphemeSegmenter(t).length-1)*e),n}static wordWrap(t,e,i=ft._canvas){const s=i.getContext("2d",Io);let n=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:d}=e,f=ft.collapseSpaces(d),m=ft.collapseNewlines(d);let v=!f;const y=e.wordWrapWidth+u,b=ft.tokenize(t);for(let w=0;w<b.length;w++){let S=b[w];if(ft.isNewline(S)){if(!m){a+=ft.addLine(o),v=!f,o="",n=0;continue}S=" "}if(f){const E=ft.isBreakingSpace(S),R=ft.isBreakingSpace(o[o.length-1]);if(E&&R)continue}const C=ft.getFromCache(S,u,l,s);if(C>y)if(o!==""&&(a+=ft.addLine(o),o="",n=0),ft.canBreakWords(S,e.breakWords)){const E=ft.wordWrapSplit(S);for(let R=0;R<E.length;R++){let k=E[R],N=k,P=1;for(;E[R+P];){const U=E[R+P];if(!ft.canBreakChars(N,U,S,R,e.breakWords))k+=U;else break;N=U,P++}R+=P-1;const O=ft.getFromCache(k,u,l,s);O+n>y&&(a+=ft.addLine(o),v=!1,o="",n=0),o+=k,n+=O}}else{o.length>0&&(a+=ft.addLine(o),o="",n=0);const E=w===b.length-1;a+=ft.addLine(S,!E),v=!1,o="",n=0}else C+n>y&&(v=!1,a+=ft.addLine(o),o="",n=0),(o.length>0||!ft.isBreakingSpace(S)||v)&&(o+=S,n+=C)}return a+=ft.addLine(o,!1),a}static addLine(t,e=!0){return t=ft.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,s){let n=i[t];return typeof n!="number"&&(n=ft._measureText(t,e,s)+e,i[t]=n),n}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!ft.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:ft._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:ft._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const n=t[s],o=t[s+1];if(ft.isBreakingSpace(n,o)||ft.isNewline(n)){i!==""&&(e.push(i),i=""),e.push(n);continue}i+=n}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,n){return!0}static wordWrapSplit(t){return ft.graphemeSegmenter(t)}static measureFont(t){if(ft._fonts[t])return ft._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=ft._canvas,s=ft._context;s.font=t;const n=ft.METRICS_STRING+ft.BASELINE_SYMBOL,o=Math.ceil(s.measureText(n).width);let a=Math.ceil(s.measureText(ft.BASELINE_SYMBOL).width);const l=Math.ceil(ft.HEIGHT_MULTIPLIER*a);if(a=a*ft.BASELINE_MULTIPLIER|0,o===0||l===0)return ft._fonts[t]=e,e;i.width=o,i.height=l,s.fillStyle="#f00",s.fillRect(0,0,o,l),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,a);const u=s.getImageData(0,0,o,l).data,d=u.length,f=o*4;let m=0,v=0,y=!1;for(m=0;m<a;++m){for(let b=0;b<f;b+=4)if(u[v+b]!==255){y=!0;break}if(!y)v+=f;else break}for(e.ascent=a-m,v=d-f,y=!1,m=l;m>a;--m){for(let b=0;b<f;b+=4)if(u[v+b]!==255){y=!0;break}if(!y)v-=f;else break}return e.descent=m-a,e.fontSize=e.ascent+e.descent,ft._fonts[t]=e,e}static clearMetrics(t=""){t?delete ft._fonts[t]:ft._fonts={}}static get _canvas(){var t;if(!ft.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Io))!=null&&t.measureText)return ft.__canvas=i,i;e=ot.ADAPTER.createCanvas()}catch{e=ot.ADAPTER.createCanvas()}e.width=e.height=10,ft.__canvas=e}return ft.__canvas}static get _context(){return ft.__context||(ft.__context=ft._canvas.getContext("2d",Io)),ft.__context}};fr.METRICS_STRING="|√âq√Ö",fr.BASELINE_SYMBOL="M",fr.BASELINE_MULTIPLIER=1.4,fr.HEIGHT_MULTIPLIER=2,fr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),fr.experimentalLetterSpacing=!1,fr._fonts={},fr._newlines=[10,13],fr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let ni=fr;const nI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Wv=class nn{constructor(t){this.styleID=0,this.reset(),_c(this,t,t)}clone(){const t={};return _c(t,this,nn.defaultStyle),new nn(t)}reset(){_c(this,nn.defaultStyle,nn.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=yc(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=yc(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){oI(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=yc(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!nI.includes(s)&&(s=`"${s}"`),e[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};Wv.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ya.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let vi=Wv;function yc(r){const t=Xt.shared,e=i=>{const s=t.setValue(i);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function oI(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function _c(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const aI={texture:!0,children:!1,baseTexture:!0},Xv=class Ph extends ks{constructor(t,e,i){let s=!1;i||(i=ot.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=dt.from(i);n.orig=new Ct,n.trim=new Ct,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Ph.defaultResolution??ot.RESOLUTION,this._autoResolution=Ph.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return ni.experimentalLetterSpacing}static set experimentalLetterSpacing(t){kt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),ni.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,s=ni.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,o=s.height,a=s.lines,l=s.lineHeight,u=s.lineWidths,d=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let m,v;const y=e.dropShadow?2:1;for(let b=0;b<y;++b){const w=e.dropShadow&&b===0,S=w?Math.ceil(Math.max(1,o)+e.padding*2):0,C=S*this._resolution;if(w){i.fillStyle="black",i.strokeStyle="black";const R=e.dropShadowColor,k=e.dropShadowBlur*this._resolution,N=e.dropShadowDistance*this._resolution;i.shadowColor=Xt.shared.setValue(R).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=k,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*N,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*N+C}else i.fillStyle=this._generateFillStyle(e,a,s),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let E=(l-f.fontSize)/2;l-f.fontSize<0&&(E=0);for(let R=0;R<a.length;R++)m=e.strokeThickness/2,v=e.strokeThickness/2+R*l+f.ascent+E,e.align==="right"?m+=d-u[R]:e.align==="center"&&(m+=(d-u[R])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[R],m+e.padding,v+e.padding-S,!0),e.fill&&this.drawLetterSpacing(a[R],m+e.padding,v+e.padding-S)}this.updateTexture()}drawLetterSpacing(t,e,i,s=!1){const n=this._style.letterSpacing;let o=!1;if(ni.experimentalLetterSpacingSupported&&(ni.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){s?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let a=e;const l=ni.graphemeSegmenter(t);let u=this.context.measureText(t).width,d=0;for(let f=0;f<l.length;++f){const m=l[f];s?this.context.strokeText(m,a,i):this.context.fillText(m,a,i);let v="";for(let y=f+1;y<l.length;++y)v+=l[y];d=this.context.measureText(v).width,a+=u-d+n,u=d}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=AS(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,i=this._style,s=i.trim?0:i.padding,n=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,d=s.slice(),f=t.fillGradientStops.slice();if(!f.length){const m=d.length+1;for(let v=1;v<m;++v)f.push(v/m)}if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),t.fillGradientType===Ya.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,a,l/2,u+a);const m=i.fontProperties.fontSize+t.strokeThickness;for(let v=0;v<e.length;v++){const y=i.lineHeight*(v-1)+m,b=i.lineHeight*v;let w=b;v>0&&y>b&&(w=(b+y)/2);const S=b+m,C=i.lineHeight*(v+1);let E=S;v+1<e.length&&C<S&&(E=(S+C)/2);const R=(E-w)/u;for(let k=0;k<d.length;k++){let N=0;typeof f[k]=="number"?N=f[k]:N=k/d.length;let P=Math.min(1,Math.max(0,w/u+N*R));P=Number(P.toFixed(5)),n.addColorStop(P,d[k])}}}else{n=this.context.createLinearGradient(a,u/2,l+a,u/2);const m=d.length+1;let v=1;for(let y=0;y<d.length;y++){let b;typeof f[y]=="number"?b=f[y]:b=v/m,n.addColorStop(b,d[y]),v++}}return n}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},aI,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=li(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=li(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof vi?this._style=t:this._style=new vi(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Xv.defaultAutoResolution=!0;let Yv=Xv;class lI{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function cI(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof dt){const n=r._textures[s].baseTexture;t.includes(n)||(t.push(n),e=!0)}}return e}function hI(r,t){if(r.baseTexture instanceof Et){const e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function uI(r,t){if(r._texture&&r._texture instanceof dt){const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function dI(r,t){return t instanceof Yv?(t.updateText(!0),!0):!1}function pI(r,t){if(t instanceof vi){const e=t.toFontString();return ni.measureFont(e),!0}return!1}function fI(r,t){if(r instanceof Yv){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function mI(r,t){return r instanceof vi?(t.includes(r)||t.push(r),!0):!1}const qv=class Kv{constructor(t){this.limiter=new lI(Kv.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(fI),this.registerFindHook(mI),this.registerFindHook(cI),this.registerFindHook(hI),this.registerFindHook(uI),this.registerUploadHook(dI),this.registerUploadHook(pI)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Fe.system.addOnce(this.tick,this,Vi.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Fe.system.addOnce(this.tick,this,Vi.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof or)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Fe.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};qv.uploadsPerFrame=4;let Ih=qv;Object.defineProperties(ot,{UPLOADS_PER_FRAME:{get(){return Ih.uploadsPerFrame},set(r){kt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ih.uploadsPerFrame=r}}});function Zv(r,t){return t instanceof Et?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function gI(r,t){if(!(t instanceof Hv))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let s=0;s<i.length;s++){const{texture:n}=i[s].style;n&&Zv(r,n.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function vI(r,t){return r instanceof Hv?(t.push(r),!0):!1}class Qv extends Ih{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(vI),this.registerUploadHook(Zv),this.registerUploadHook(gI)}}Qv.extension={name:"prepare",type:rt.RendererSystem};pt.add(Qv);var yI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,_I=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,bI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Cf=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,xI=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Ro=new Yt;class Jv extends Va{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new rv,this.state=Ir.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Tr.from(Cf,xI,e),this.shader=t.context.webGLVersion>1?Tr.from(_I,yI,e):Tr.from(Cf,bI,e)}render(t){const e=this.renderer,i=this.quad;let s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);const n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-n,s[1]=s[3]=-o,s[2]=s[4]=1-n,s[5]=s[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,d=t.tileTransform.localTransform,f=t.uvMatrix;let m=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;m&&(l._glTextures[e.CONTEXT_UID]?m=l.wrapMode!==ui.CLAMP:l.wrapMode===ui.CLAMP&&(l.wrapMode=ui.REPEAT));const v=m?this.simpleShader:this.shader,y=a.width,b=a.height,w=t._width,S=t._height;Ro.set(d.a*y/w,d.b*y/S,d.c*b/w,d.d*b/S,d.tx/w,d.ty/S),Ro.invert(),m?Ro.prepend(f.mapCoord):(v.uniforms.uMapCoord=f.mapCoord.toArray(!0),v.uniforms.uClampFrame=f.uClampFrame,v.uniforms.uClampOffset=f.uClampOffset),v.uniforms.uTransform=Ro.toArray(!0),v.uniforms.uColor=Xt.shared.setValue(t.tint).premultiply(t.worldAlpha,u).toArray(v.uniforms.uColor),v.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),v.uniforms.uSampler=a,e.shader.bind(v),e.geometry.bind(i),this.state.blendMode=zg(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Jv.extension={name:"tilingSprite",type:rt.RendererPlugin};pt.add(Jv);const ty=class on{constructor(t,e,i){this.linkedSheets=[],(t instanceof Et||t instanceof dt)&&(t={texture:t,data:e,resolutionFilename:i});const{texture:s,data:n,resolutionFilename:o=null,cachePrefix:a=""}=t;this.cachePrefix=a,this._texture=s instanceof dt?s:null,this.baseTexture=s instanceof Et?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let i=Vr(t,null);return i===null&&(i=typeof e=="number"?e:parseFloat(e??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=on.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=on.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const s=this._frameKeys[e],n=this._frames[s],o=n.frame;if(o){let a=null,l=null;const u=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,d=new Ct(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);n.rotated?a=new Ct(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ct(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new Ct(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new dt(this.baseTexture,a,d,l,n.rotated?2:0,n.anchor,n.borders),dt.addToCache(this.textures[s],this.cachePrefix+s.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*on.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*on.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};ty.BATCH_SIZE=1e3;let Pf=ty;const wI=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function ey(r,t,e){const i={};if(r.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[`${t.cachePrefix}${s}`]=t.textures[s]}),!e){const s=ye.dirname(r[0]);t.linkedSheets.forEach((n,o)=>{Object.assign(i,ey([`${s}/${t.data.meta.related_multi_packs[o]}`],n,!0))})}return i}const TI={extension:rt.Asset,cache:{test:r=>r instanceof Pf,getCacheableAssets:(r,t)=>ey(r,t,!1)},resolver:{test:r=>{const t=r.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&wI.includes(i)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=ot.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:rt.LoadParser,priority:lr.Normal},async testParse(r,t){return ye.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var d,f;const{texture:i,imageFilename:s,cachePrefix:n}=(t==null?void 0:t.data)??{};let o=ye.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const m=Eh(o+(s??r.meta.image),t.src);a=(await e.load([m]))[m]}const l=new Pf({texture:a.baseTexture,data:r,resolutionFilename:t.src,cachePrefix:n});await l.parse();const u=(d=r==null?void 0:r.meta)==null?void 0:d.related_multi_packs;if(Array.isArray(u)){const m=[];for(const y of u){if(typeof y!="string")continue;let b=o+y;(f=t.data)!=null&&f.ignoreMultiPack||(b=Eh(b,t.src),m.push(e.load({src:b,data:{ignoreMultiPack:!0}})))}const v=await Promise.all(m);l.linkedSheets=v,v.forEach(y=>{y.linkedSheets=[l].concat(l.linkedSheets.filter(b=>b!==y))})}return l},unload(r){r.destroy(!0)}}};pt.add(TI);class fa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class jo{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in e){const o=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const d=a[u].split("="),f=d[0],m=d[1].replace(/"/gm,""),v=parseFloat(m),y=isNaN(v)?m:v;l[f]=y}i[o].push(l)}const s=new fa;return i.info.forEach(n=>s.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>s.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>s.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>s.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>s.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>s.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),s}}class Rh{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new fa,i=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<s.length;u++)e.common.push({lineHeight:parseInt(s[u].getAttribute("lineHeight"),10)});for(let u=0;u<n.length;u++)e.page.push({id:parseInt(n[u].getAttribute("id"),10)||0,file:n[u].getAttribute("file")});for(let u=0;u<o.length;u++){const d=o[u];e.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e}}class Mh{static test(t){return typeof t=="string"&&t.includes("<font>")?Rh.test(ot.ADAPTER.parseXML(t)):!1}static parse(t){return Rh.parse(ot.ADAPTER.parseXML(t))}}const bc=[jo,Rh,Mh];function EI(r){for(let t=0;t<bc.length;t++)if(bc[t].test(r))return bc[t];return null}function SI(r,t,e,i,s,n){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,d=r.width/i-l-u*2,f=r.height/i-l-u*2,m=o.slice(),v=e.fillGradientStops.slice();if(!v.length){const y=m.length+1;for(let b=1;b<y;++b)v.push(b/y)}if(m.unshift(o[0]),v.unshift(0),m.push(o[o.length-1]),v.push(1),e.fillGradientType===Ya.LINEAR_VERTICAL){a=t.createLinearGradient(d/2,u,d/2,f+u);let y=0;const b=(n.fontProperties.fontSize+e.strokeThickness)/f;for(let w=0;w<s.length;w++){const S=n.lineHeight*w;for(let C=0;C<m.length;C++){let E=0;typeof v[C]=="number"?E=v[C]:E=C/m.length;const R=S/f+E*b;let k=Math.max(y,R);k=Math.min(k,1),a.addColorStop(k,m[C]),y=k}}}else{a=t.createLinearGradient(u,f/2,d+u,f/2);const y=m.length+1;let b=1;for(let w=0;w<m.length;w++){let S;typeof v[w]=="number"?S=v[w]:S=b/y,a.addColorStop(S,m[w]),b++}}return a}function AI(r,t,e,i,s,n,o){const a=e.text,l=e.fontProperties;t.translate(i,s),t.scale(n,n);const u=o.strokeThickness/2,d=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=SI(r,t,o,n,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const f=o.dropShadowColor,m=o.dropShadowBlur*n,v=o.dropShadowDistance*n;t.shadowColor=Xt.shared.setValue(f).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=m,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*v,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*v}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,d+e.lineHeight-l.descent),o.fill&&t.fillText(a,u,d+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Vo(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function ry(r){return Array.from?Array.from(r):r.split("")}function CI(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const s=r[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const n=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...ry(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const ei=class mr{constructor(t,e,i){var d;const[s]=t.info,[n]=t.common,[o]=t.page,[a]=t.distanceField,l=Vr(o.file),u={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=u;for(let f=0;f<t.page.length;f++){const{id:m,file:v}=t.page[f];u[m]=e instanceof Array?e[f]:e[v],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[m].baseTexture.alphaMode=Re.NO_PREMULTIPLIED_ALPHA,u[m].baseTexture.mipmap=Ar.OFF)}for(let f=0;f<t.char.length;f++){const{id:m,page:v}=t.char[f];let{x:y,y:b,width:w,height:S,xoffset:C,yoffset:E,xadvance:R}=t.char[f];y/=l,b/=l,w/=l,S/=l,C/=l,E/=l,R/=l;const k=new Ct(y+u[v].frame.x/l,b+u[v].frame.y/l,w,S);this.chars[m]={xOffset:C,yOffset:E,xAdvance:R,kerning:{},texture:new dt(u[v].baseTexture,k),page:v}}for(let f=0;f<t.kerning.length;f++){let{first:m,second:v,amount:y}=t.kerning[f];m/=l,v/=l,y/=l,this.chars[v]&&(this.chars[v].kerning[m]=y)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((d=a==null?void 0:a.fieldType)==null?void 0:d.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let s;if(t instanceof fa)s=t;else{const o=EI(t);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(t)}e instanceof dt&&(e=[e]);const n=new mr(s,e,i);return mr.available[n.font]=n,n}static uninstall(t){const e=mr.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete mr.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},mr.defaultOptions,i),d=CI(s),f=e instanceof vi?e:new vi(e),m=a,v=new fa;v.info[0]={face:f.fontFamily,size:f.fontSize},v.common[0]={lineHeight:f.fontSize};let y=0,b=0,w,S,C,E=0;const R=[];for(let N=0;N<d.length;N++){w||(w=ot.ADAPTER.createCanvas(),w.width=a,w.height=l,S=w.getContext("2d"),C=new Et(w,{resolution:o,...u}),R.push(new dt(C)),v.page.push({id:R.length-1,file:""}));const P=d[N],O=ni.measureText(P,f,!1,w),U=O.width,$=Math.ceil(O.height),Y=Math.ceil((f.fontStyle==="italic"?2:1)*U);if(b>=l-$*o){if(b===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${P}')`);--N,w=null,S=null,C=null,b=0,y=0,E=0;continue}if(E=Math.max($+O.fontProperties.descent,E),Y*o+y>=m){if(y===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${P}')`);--N,b+=E*o,b=Math.ceil(b),y=0,E=0;continue}AI(w,S,O,y,b,o,f);const H=Vo(O.text);v.char.push({id:H,page:R.length-1,x:y/o,y:b/o,width:Y,height:$,xoffset:0,yoffset:0,xadvance:U-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),y+=(Y+2*n)*o,y=Math.ceil(y)}if(!(i!=null&&i.skipKerning))for(let N=0,P=d.length;N<P;N++){const O=d[N];for(let U=0;U<P;U++){const $=d[U],Y=S.measureText(O).width,H=S.measureText($).width,B=S.measureText(O+$).width-(Y+H);B&&v.kerning.push({first:Vo(O),second:Vo($),amount:B})}}const k=new mr(v,R,!0);return mr.available[t]!==void 0&&mr.uninstall(t),mr.available[t]=k,k}};ei.ALPHA=[["a","z"],["A","Z"]," "],ei.NUMERIC=[["0","9"]],ei.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ei.ASCII=[[" ","~"]],ei.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ei.ALPHANUMERIC},ei.available={};let ri=ei;var PI=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,II=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const If=[],Rf=[],Mf=[],RI=class iy extends or{constructor(t,e={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},iy.styleDefaults,e);if(!ri.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Xt(s),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ur(()=>{this.dirty=!0},this,0,0),this._roundPixels=ot.ROUND_PIXELS,this.dirty=!0,this._resolution=ot.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Y;const t=ri.available[this._fontName],e=this.fontSize,i=e/t.size,s=new Bt,n=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=ry(l),d=this._maxWidth*t.size/e,f=t.distanceFieldType==="none"?If:Rf;let m=null,v=0,y=0,b=0,w=-1,S=0,C=0,E=0,R=0;for(let H=0;H<u.length;H++){const B=u[H],F=Vo(B);if(/(?:\s)/.test(B)&&(w=H,S=v,R++),B==="\r"||B===`
`){o.push(v),a.push(-1),y=Math.max(y,v),++b,++C,s.x=0,s.y+=t.lineHeight,m=null,R=0;continue}const z=t.chars[F];if(!z)continue;m&&z.kerning[m]&&(s.x+=z.kerning[m]);const Z=Mf.pop()||{texture:dt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Bt};Z.texture=z.texture,Z.line=b,Z.charCode=F,Z.position.x=Math.round(s.x+z.xOffset+this._letterSpacing/2),Z.position.y=Math.round(s.y+z.yOffset),Z.prevSpaces=R,n.push(Z),v=Z.position.x+Math.max(z.xAdvance-z.xOffset,z.texture.orig.width),s.x+=z.xAdvance+this._letterSpacing,E=Math.max(E,z.yOffset+z.texture.height),m=F,w!==-1&&d>0&&s.x>d&&(++C,_s(n,1+w-C,1+H-w),H=w,w=-1,o.push(S),a.push(n.length>0?n[n.length-1].prevSpaces:0),y=Math.max(y,S),b++,s.x=0,s.y+=t.lineHeight,m=null,R=0)}const k=u[u.length-1];k!=="\r"&&k!==`
`&&(/(?:\s)/.test(k)&&(v=S),o.push(v),y=Math.max(y,v),a.push(-1));const N=[];for(let H=0;H<=b;H++){let B=0;this._align==="right"?B=y-o[H]:this._align==="center"?B=(y-o[H])/2:this._align==="justify"&&(B=a[H]<0?0:(y-o[H])/a[H]),N.push(B)}const P=n.length,O={},U=[],$=this._activePagesMeshData;f.push(...$);for(let H=0;H<P;H++){const B=n[H].texture,F=B.baseTexture.uid;if(!O[F]){let z=f.pop();if(!z){const et=new tI;let ut,yt;t.distanceFieldType==="none"?(ut=new Sf(dt.EMPTY),yt=bt.NORMAL):(ut=new Sf(dt.EMPTY,{program:$r.from(II,PI),uniforms:{uFWidth:0}}),yt=bt.NORMAL_NPM);const X=new Ef(et,ut);X.blendMode=yt,z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:X,vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;const{_textureCache:Z}=this;Z[F]=Z[F]||new dt(B.baseTexture),z.mesh.texture=Z[F],z.mesh.tint=this._tintColor.value,U.push(z),O[F]=z}O[F].total++}for(let H=0;H<$.length;H++)U.includes($[H])||this.removeChild($[H].mesh);for(let H=0;H<U.length;H++)U[H].mesh.parent!==this&&this.addChild(U[H].mesh);this._activePagesMeshData=U;for(const H in O){const B=O[H],F=B.total;if(!(((Y=B.indices)==null?void 0:Y.length)>6*F)||B.vertices.length<Ef.BATCHABLE_SIZE*2)B.vertices=new Float32Array(4*2*F),B.uvs=new Float32Array(4*2*F),B.indices=new Uint16Array(6*F);else{const z=B.total,Z=B.vertices;for(let et=z*4*2;et<Z.length;et++)Z[et]=0}B.mesh.size=6*F}for(let H=0;H<P;H++){const B=n[H];let F=B.position.x+N[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(F=Math.round(F));const z=F*i,Z=B.position.y*i,et=B.texture,ut=O[et.baseTexture.uid],yt=et.frame,X=et._uvs,J=ut.index++;ut.indices[J*6+0]=0+J*4,ut.indices[J*6+1]=1+J*4,ut.indices[J*6+2]=2+J*4,ut.indices[J*6+3]=0+J*4,ut.indices[J*6+4]=2+J*4,ut.indices[J*6+5]=3+J*4,ut.vertices[J*8+0]=z,ut.vertices[J*8+1]=Z,ut.vertices[J*8+2]=z+yt.width*i,ut.vertices[J*8+3]=Z,ut.vertices[J*8+4]=z+yt.width*i,ut.vertices[J*8+5]=Z+yt.height*i,ut.vertices[J*8+6]=z,ut.vertices[J*8+7]=Z+yt.height*i,ut.uvs[J*8+0]=X.x0,ut.uvs[J*8+1]=X.y0,ut.uvs[J*8+2]=X.x1,ut.uvs[J*8+3]=X.y1,ut.uvs[J*8+4]=X.x2,ut.uvs[J*8+5]=X.y2,ut.uvs[J*8+6]=X.x3,ut.uvs[J*8+7]=X.y3}this._textWidth=y*i,this._textHeight=(s.y+t.lineHeight)*i;for(const H in O){const B=O[H];if(this.anchor.x!==0||this.anchor.y!==0){let et=0;const ut=this._textWidth*this.anchor.x,yt=this._textHeight*this.anchor.y;for(let X=0;X<B.total;X++)B.vertices[et++]-=ut,B.vertices[et++]-=yt,B.vertices[et++]-=ut,B.vertices[et++]-=yt,B.vertices[et++]-=ut,B.vertices[et++]-=yt,B.vertices[et++]-=ut,B.vertices[et++]-=yt}this._maxLineHeight=E*i;const F=B.mesh.geometry.getBuffer("aVertexPosition"),z=B.mesh.geometry.getBuffer("aTextureCoord"),Z=B.mesh.geometry.getIndex();F.data=B.vertices,z.data=B.uvs,Z.data=B.indices,F.update(),z.update(),Z.update()}for(let H=0;H<n.length;H++)Mf.push(n[H]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:s}=ri.available[this._fontName];if(i!=="none"){const{a:n,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(n*n+o*o),d=Math.sqrt(a*a+l*l),f=(Math.abs(u)+Math.abs(d))/2,m=this.fontSize/s,v=t._view.resolution;for(const y of this._activePagesMeshData)y.mesh.shader.uniforms.uFWidth=f*e*m*v}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=ri.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ri.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??ri.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=ri.available[this._fontName].distanceFieldType==="none"?If:Rf;i.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>e[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=dt.EMPTY});for(const s in e)e[s].destroy(),delete e[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};RI.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const MI=[".xml",".fnt"],kI={extension:{type:rt.LoadParser,priority:lr.Normal},name:"loadBitmapFont",test(r){return MI.includes(ye.extname(r).toLowerCase())},async testParse(r){return jo.test(r)||Mh.test(r)},async parse(r,t,e){const i=jo.test(r)?jo.parse(r):Mh.parse(r),{src:s}=t,{page:n}=i,o=[];for(let u=0;u<n.length;++u){const d=n[u].file;let f=ye.join(ye.dirname(s),d);f=Eh(f,s),o.push(f)}const a=await e.load(o),l=o.map(u=>a[u]);return ri.install(i,l,!0)},async load(r,t){return(await ot.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};pt.add(kI);const kh=class hs extends vi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new hs(Object.keys(hs.defaultOptions).reduce((e,i)=>({...e,[i]:t[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete hs.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:i}=hs;if(i[t]){const s=i[t];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ot.ADAPTER.fetch(t).then(s=>s.blob()).then(async s=>new Promise((n,o)=>{const a=URL.createObjectURL(s),l=new FileReader;l.onload=()=>n([a,l.result]),l.onerror=o,l.readAsDataURL(s)})).then(async([s,n])=>{const o=Object.assign({family:ye.basename(t,ye.extname(t)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:n,refs:1,originalUrl:t,fontFace:null},e);i[t]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(i=>!this._overrides.includes(i));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(i=>this._overrides.includes(i));e.length>0&&(this._overrides=this._overrides.filter(i=>!e.includes(i)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=bS(t)),typeof t=="number"?_S(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${n} ${t}`}reset(){Object.assign(this,hs.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=ot.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};kh.availableFonts={},kh.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let xc=kh;const Mo=class us extends ks{constructor(t="",e={}){super(dt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,s=dt.from(i,{scaleMode:ot.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new Ct,s.trim=new Ct,this.texture=s;const n="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject"),u=document.createElementNS(o,"div"),d=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=us.defaultMaxWidth,this.maxHeight=us.defaultMaxHeight,this._domElement=u,this._styleElement=d,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(d),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=us.defaultAutoResolution,this._resolution=us.defaultResolution??ot.RESOLUTION,this.text=t,this.style=e}measureText(t){var d,f;const{text:e,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=n;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(d=this._style)==null?void 0:d.toCSS(s)}),this._styleElement.textContent=(f=this._style)==null?void 0:f.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(t=!0){const{style:e,_image:i,_loadImage:s}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:n,height:o}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{s.onload=async()=>{if(a<this._updateID){l();return}await e.onBeforeDraw(),i.src=s.src,s.onload=null,s.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:i,resolution:s}=this,{padding:n}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=i.width/s,e.trim.height=e._frame.height=i.height/s,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,s),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var i,s,n,o,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},us.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=e,(s=this._svgRoot)==null||s.remove(),this._svgRoot=e,(n=this._domElement)==null||n.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(a=this._styleElement)==null||a.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=li(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=li(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof xc?(this.ownsStyle=!1,this._style=t):t instanceof vi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=xc.from(t)):(this.ownsStyle=!0,this._style=new xc(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Mo.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Mo.defaultMaxWidth=2024,Mo.defaultMaxHeight=2024,Mo.defaultAutoResolution=!0;const DI=It({__name:"App",setup(r){const{switchCharacter:t,switchSkin:e,captureFrame:i,toggleLive2DVisibility:s,isLive2DHide:n}=Mw();return qt(n,o=>(o?Dw:kw)()),(o,a)=>(W(),at(Ie,null,[a[4]||(a[4]=vt("div",{id:"live2d"},[vt("div",{id:"live2d-tips"}),vt("canvas",{id:"live2d-canvas"})],-1)),vt("div",{id:"live2d-tools",class:re(Q(n)?"hide":"show")},[vt("span",{id:"live2d-tool-quit",class:"live2d-tool hide-live2d",onClick:a[0]||(a[0]=l=>Q(s)())},te(Q(n)?"Show":"Hide"),1),vt("span",{id:"live2d-tool-switch-model",class:"live2d-tool",style:{"--live2d-tool-bg":"#c3a6cb"},onClick:a[1]||(a[1]=l=>Q(t)())}," Tia "),vt("span",{id:"live2d-tool-switch-texture",class:"live2d-tool",style:{"--live2d-tool-bg":"#16a"},onClick:a[2]||(a[2]=l=>Q(e)())}," Switch "),vt("span",{id:"live2d-tool-photo",class:"live2d-tool",style:{"--live2d-tool-bg":"orange"},onClick:a[3]||(a[3]=l=>Q(i)())}," Save ")],2)],64))}}),OI=me(DI,[["__scopeId","data-v-09c8249c"]]),LI=[{component:Tw,props:{id:"2489775340",server:"netease",type:"playlist"}},{component:OI,props:{}}],BI=It({__name:"ValaxyAddons",setup(r){return(t,e)=>(W(!0),at(Ie,null,kn(Q(LI),({component:i,props:s},n)=>(W(),zt(um(i),Hr({ref_for:!0},s,{key:n}),null,16))),128))}}),FI="valaxy-theme-sakura",NI="0.9.4",UI={email:"3322543587@qq.com",name:"WRXinYue",url:"https://wrxinyue.org"},$I="https://github.com/WRXinYue/valaxy-theme-sakura",GI={type:"git",url:"https://github.com/WRXinYue/valaxy-theme-sakura.git"},HI={"@wrxinyue:registry":"https://npm.pkg.github.com"},zI=["valaxy","theme","sakura","vue"],jI="client/index.ts",VI="types/index.d.ts",WI={"valaxy-addon-hitokoto":"^0.0.1","valaxy-addon-vercount":"^0.0.6"},XI={"@ctrl/tinycolor":"^4.1.0","@iconify-json/fa6-solid":"^1.2.3","@iconify-json/mdi":"^1.2.3",interactjs:"^1.10.27",lenis:"^1.2.3",typeit:"^8.8.7"},YI={"@interactjs/types":"^1.10.27",valaxy:"^0.23.3"},qI={release:"bumpp && npm publish"},KI={name:FI,version:NI,author:UI,homepage:$I,repository:GI,publishConfig:HI,keywords:zI,main:jI,types:VI,peerDependencies:WI,dependencies:XI,devDependencies:YI,scripts:qI},ZI={class:"powered",m:"2",translate:"no"},QI=["innerHTML"],JI=["href","title"],tR=It({__name:"SakuraPowered",props:{pkg:{}},setup(r){const t=r,{t:e}=Yr(),i=Ln(),s=tt(()=>t.pkg||i.value.themeConfig.pkg||KI),n=tt(()=>e("footer.powered",[`<a href="${Bc.repository.url}" target="_blank" rel="noopener">Valaxy</a> v${Bc.version}`]));return(o,a)=>(W(),at("div",ZI,[vt("span",{innerHTML:n.value},null,8,QI),a[0]||(a[0]=hi(" | ",-1)),vt("span",null,[hi(te(Q(e)("footer.theme"))+" ",1),vt("a",{href:s.value.homepage,title:`valaxy-theme-${Q(i).theme}`,target:"_blank"},te(c0(Q(i).theme)),9,JI),hi(" v"+te(s.value.version),1)])]))}});function ke(){const r=lx();return tt(()=>r.value.themeConfig)}function eR(){const r=Wi(),t=tt(()=>{var i;return(i=r.meta)==null?void 0:i.layout});function e(i){return typeof i=="boolean"?i:typeof i=="string"?i===t.value:Array.isArray(i)?i.includes(t.value):!1}return{layout:t,isIncludes:e}}function rR(){const r=_t(),t=_t(1),e=_t([]),i=_t(),s=_t(0);return{curPage:r,loadMultiple:t,paginationTargets:e,paginationObserver:i,paginationElementPositionsNumber:s}}function iR(){const r=_t({});function t(i,s){r.value[i]=s}function e(i){return r.value[i]||0}return{positions:r,setScrollPosition:t,getScrollPosition:e}}function sR(){const r=_t(!1);function t(){r.value=!r.value}function e(){r.value=!0}function i(){r.value=!1}return{search:{isOpen:r,toggle:t,open:e,close:i}}}const ma=Object.freeze({IS_SIDEBAR_OPEN:"is-sidebar-open"});function nR(r){return!Number.isNaN(Number.parseFloat(r))&&Number.isFinite(r)}function sy(r,t){try{const e=r.getItem(t);return e===null?null:nR(e)?Number(e):e==="true"?!0:e==="false"?!1:e}catch(e){return console.error("Failed to read from storage:",e),null}}function ny(r,t,e){try{r.setItem(t,e.toString())}catch(i){console.error("Failed to write to storage:",i)}}function oR(r){return sy(localStorage,r)}function aR(r,t){ny(localStorage,r,t)}function lR(r){return sy(sessionStorage,r)}function cR(r,t){ny(sessionStorage,r,t)}function hR(){const r=_t(!1),t=Da(),e=tt(()=>t.value.sidebar!==!1);function i(){r.value=!0}function s(){r.value=!1}function n(){r.value?s():i()}const o=ke().value.sidebarOptions;return(o==null?void 0:o.persistence)==="permanent"?qt(r,()=>aR(ma.IS_SIDEBAR_OPEN,r.value)):(o==null?void 0:o.persistence)==="session"&&qt(r,()=>cR(ma.IS_SIDEBAR_OPEN,r.value)),{sidebar:{isOpen:r,hasSidebar:e,open:i,close:s,toggle:n}}}function uR(){const r=ka("wallpaperKey-hero",0),t=_t(0),e=_t(),i=_t(!1);function s(){e.value="prevMedia",r.value=(r.value-1+t.value)%t.value,setTimeout(()=>{e.value=""},0)}function n(){e.value="nextMedia",r.value=(r.value+1)%t.value,setTimeout(()=>{e.value=""},0)}function o(){i.value=!i.value}return{wallpaperIndex:r,wallpaperLength:t,wallpaperOperation:e,wallpaperIsPlaying:i,prevWallpaper:s,nextWallpaper:n,togglePlayPause:o}}const Os=Ta("sakura-app",()=>{const r=iR(),t=rR(),e=uR(),i=hR(),s=sR();return{...r,...t,...e,...i,...s}});function kf(r){if(typeof r=="string")return r;if(Array.isArray(r)&&r.length>0)return r[Math.floor(Math.random()*r.length)]}function xD(r){return/\.(?:mp4|webm|ogg)$/i.test(r)}var dR="1.3.15";function oy(r,t,e){return Math.max(r,Math.min(t,e))}function pR(r,t,e){return(1-e)*r+e*t}function fR(r,t,e,i){return pR(r,t,1-Math.exp(-e*i))}function mR(r,t){return(r%t+t)%t}var gR=class{constructor(){it(this,"isRunning",!1);it(this,"value",0);it(this,"from",0);it(this,"to",0);it(this,"currentTime",0);it(this,"lerp");it(this,"duration");it(this,"easing");it(this,"onUpdate")}advance(r){var e;if(!this.isRunning)return;let t=!1;if(this.duration&&this.easing){this.currentTime+=r;const i=oy(0,this.currentTime/this.duration,1);t=i>=1;const s=t?1:this.easing(i);this.value=this.from+(this.to-this.from)*s}else this.lerp?(this.value=fR(this.value,this.to,this.lerp*60,r),Math.round(this.value)===this.to&&(this.value=this.to,t=!0)):(this.value=this.to,t=!0);t&&this.stop(),(e=this.onUpdate)==null||e.call(this,this.value,t)}stop(){this.isRunning=!1}fromTo(r,t,{lerp:e,duration:i,easing:s,onStart:n,onUpdate:o}){this.from=this.value=r,this.to=t,this.lerp=e,this.duration=i,this.easing=s,this.currentTime=0,this.isRunning=!0,n==null||n(),this.onUpdate=o}};function vR(r,t){let e;return function(...i){let s=this;clearTimeout(e),e=setTimeout(()=>{e=void 0,r.apply(s,i)},t)}}var yR=class{constructor(r,t,{autoResize:e=!0,debounce:i=250}={}){it(this,"width",0);it(this,"height",0);it(this,"scrollHeight",0);it(this,"scrollWidth",0);it(this,"debouncedResize");it(this,"wrapperResizeObserver");it(this,"contentResizeObserver");it(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});it(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});it(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=r,this.content=t,e&&(this.debouncedResize=vR(this.resize,i),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var r,t;(r=this.wrapperResizeObserver)==null||r.disconnect(),(t=this.contentResizeObserver)==null||t.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},ay=class{constructor(){it(this,"events",{})}emit(r,...t){var i;let e=this.events[r]||[];for(let s=0,n=e.length;s<n;s++)(i=e[s])==null||i.call(e,...t)}on(r,t){var e;return(e=this.events[r])!=null&&e.push(t)||(this.events[r]=[t]),()=>{var i;this.events[r]=(i=this.events[r])==null?void 0:i.filter(s=>t!==s)}}off(r,t){var e;this.events[r]=(e=this.events[r])==null?void 0:e.filter(i=>t!==i)}destroy(){this.events={}}},Df=100/6,ti={passive:!1},_R=class{constructor(r,t={wheelMultiplier:1,touchMultiplier:1}){it(this,"touchStart",{x:0,y:0});it(this,"lastDelta",{x:0,y:0});it(this,"window",{width:0,height:0});it(this,"emitter",new ay);it(this,"onTouchStart",r=>{const{clientX:t,clientY:e}=r.targetTouches?r.targetTouches[0]:r;this.touchStart.x=t,this.touchStart.y=e,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:r})});it(this,"onTouchMove",r=>{const{clientX:t,clientY:e}=r.targetTouches?r.targetTouches[0]:r,i=-(t-this.touchStart.x)*this.options.touchMultiplier,s=-(e-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=t,this.touchStart.y=e,this.lastDelta={x:i,y:s},this.emitter.emit("scroll",{deltaX:i,deltaY:s,event:r})});it(this,"onTouchEnd",r=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:r})});it(this,"onWheel",r=>{let{deltaX:t,deltaY:e,deltaMode:i}=r;const s=i===1?Df:i===2?this.window.width:1,n=i===1?Df:i===2?this.window.height:1;t*=s,e*=n,t*=this.options.wheelMultiplier,e*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:e,event:r})});it(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=r,this.options=t,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,ti),this.element.addEventListener("touchstart",this.onTouchStart,ti),this.element.addEventListener("touchmove",this.onTouchMove,ti),this.element.addEventListener("touchend",this.onTouchEnd,ti)}on(r,t){return this.emitter.on(r,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,ti),this.element.removeEventListener("touchstart",this.onTouchStart,ti),this.element.removeEventListener("touchmove",this.onTouchMove,ti),this.element.removeEventListener("touchend",this.onTouchEnd,ti)}},Of=r=>Math.min(1,1.001-Math.pow(2,-10*r)),bR=class{constructor({wrapper:r=window,content:t=document.documentElement,eventsTarget:e=r,smoothWheel:i=!0,syncTouch:s=!1,syncTouchLerp:n=.075,touchInertiaExponent:o=1.7,duration:a,easing:l,lerp:u=.1,infinite:d=!1,orientation:f="vertical",gestureOrientation:m=f==="horizontal"?"both":"vertical",touchMultiplier:v=1,wheelMultiplier:y=1,autoResize:b=!0,prevent:w,virtualScroll:S,overscroll:C=!0,autoRaf:E=!1,anchors:R=!1,autoToggle:k=!1,allowNestedScroll:N=!1,__experimental__naiveDimensions:P=!1}={}){it(this,"_isScrolling",!1);it(this,"_isStopped",!1);it(this,"_isLocked",!1);it(this,"_preventNextNativeScrollEvent",!1);it(this,"_resetVelocityTimeout",null);it(this,"__rafID",null);it(this,"isTouching");it(this,"time",0);it(this,"userData",{});it(this,"lastVelocity",0);it(this,"velocity",0);it(this,"direction",0);it(this,"options");it(this,"targetScroll");it(this,"animatedScroll");it(this,"animate",new gR);it(this,"emitter",new ay);it(this,"dimensions");it(this,"virtualScroll");it(this,"onScrollEnd",r=>{r instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&r.stopPropagation()});it(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});it(this,"onTransitionEnd",r=>{if(r.propertyName.includes("overflow")){const t=this.isHorizontal?"overflow-x":"overflow-y",e=getComputedStyle(this.rootElement)[t];["hidden","clip"].includes(e)?this.internalStop():this.internalStart()}});it(this,"onClick",r=>{const e=r.composedPath().find(i=>{var s;return i instanceof HTMLAnchorElement&&((s=i.getAttribute("href"))==null?void 0:s.includes("#"))});if(e){const i=e.getAttribute("href");if(i){const s=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0,n=`#${i.split("#")[1]}`;this.scrollTo(n,s)}}});it(this,"onPointerDown",r=>{r.button===1&&this.reset()});it(this,"onVirtualScroll",r=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(r)===!1)return;const{deltaX:t,deltaY:e,event:i}=r;if(this.emitter.emit("virtual-scroll",{deltaX:t,deltaY:e,event:i}),i.ctrlKey||i.lenisStopPropagation)return;const s=i.type.includes("touch"),n=i.type.includes("wheel");this.isTouching=i.type==="touchstart"||i.type==="touchmove";const o=t===0&&e===0;if(this.options.syncTouch&&s&&i.type==="touchstart"&&o&&!this.isStopped&&!this.isLocked){this.reset();return}const l=this.options.gestureOrientation==="vertical"&&e===0||this.options.gestureOrientation==="horizontal"&&t===0;if(o||l)return;let u=i.composedPath();u=u.slice(0,u.indexOf(this.rootElement));const d=this.options.prevent;if(u.find(w=>{var S,C,E;return w instanceof HTMLElement&&(typeof d=="function"&&(d==null?void 0:d(w))||((S=w.hasAttribute)==null?void 0:S.call(w,"data-lenis-prevent"))||s&&((C=w.hasAttribute)==null?void 0:C.call(w,"data-lenis-prevent-touch"))||n&&((E=w.hasAttribute)==null?void 0:E.call(w,"data-lenis-prevent-wheel"))||this.options.allowNestedScroll&&this.checkNestedScroll(w,{deltaX:t,deltaY:e}))}))return;if(this.isStopped||this.isLocked){i.cancelable&&i.preventDefault();return}if(!(this.options.syncTouch&&s||this.options.smoothWheel&&n)){this.isScrolling="native",this.animate.stop(),i.lenisStopPropagation=!0;return}let m=e;this.options.gestureOrientation==="both"?m=Math.abs(e)>Math.abs(t)?e:t:this.options.gestureOrientation==="horizontal"&&(m=t),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&e>0||this.animatedScroll===this.limit&&e<0))&&(i.lenisStopPropagation=!0),i.cancelable&&i.preventDefault();const v=s&&this.options.syncTouch,b=s&&i.type==="touchend";b&&(m=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+m,{programmatic:!1,...v?{lerp:b?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});it(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const r=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-r,this.direction=Math.sign(this.animatedScroll-r),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});it(this,"raf",r=>{const t=r-(this.time||r);this.time=r,this.animate.advance(t*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=dR,(!r||r===document.documentElement)&&(r=window),typeof a=="number"&&typeof l!="function"?l=Of:typeof l=="function"&&typeof a!="number"&&(a=1),this.options={wrapper:r,content:t,eventsTarget:e,smoothWheel:i,syncTouch:s,syncTouchLerp:n,touchInertiaExponent:o,duration:a,easing:l,lerp:u,infinite:d,gestureOrientation:m,orientation:f,touchMultiplier:v,wheelMultiplier:y,autoResize:b,prevent:w,virtualScroll:S,overscroll:C,autoRaf:E,anchors:R,autoToggle:k,allowNestedScroll:N,__experimental__naiveDimensions:P},this.dimensions=new yR(r,t,{autoResize:b}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new _R(e,{touchMultiplier:v,wheelMultiplier:y}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(r,t){return this.emitter.on(r,t)}off(r,t){return this.emitter.off(r,t)}setScroll(r){this.isHorizontal?this.options.wrapper.scrollTo({left:r,behavior:"instant"}):this.options.wrapper.scrollTo({top:r,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(r,{offset:t=0,immediate:e=!1,lock:i=!1,duration:s=this.options.duration,easing:n=this.options.easing,lerp:o=this.options.lerp,onStart:a,onComplete:l,force:u=!1,programmatic:d=!0,userData:f}={}){if(!((this.isStopped||this.isLocked)&&!u)){if(typeof r=="string"&&["top","left","start","#"].includes(r))r=0;else if(typeof r=="string"&&["bottom","right","end"].includes(r))r=this.limit;else{let m;if(typeof r=="string"?(m=document.querySelector(r),m||(r==="#top"?r=0:console.warn("Lenis: Target not found",r))):r instanceof HTMLElement&&(r!=null&&r.nodeType)&&(m=r),m){if(this.options.wrapper!==window){const y=this.rootElement.getBoundingClientRect();t-=this.isHorizontal?y.left:y.top}const v=m.getBoundingClientRect();r=(this.isHorizontal?v.left:v.top)+this.animatedScroll}}if(typeof r=="number"){if(r+=t,r=Math.round(r),this.options.infinite){if(d){this.targetScroll=this.animatedScroll=this.scroll;const m=r-this.animatedScroll;m>this.limit/2?r=r-this.limit:m<-this.limit/2&&(r=r+this.limit)}}else r=oy(0,r,this.limit);if(r===this.targetScroll){a==null||a(this),l==null||l(this);return}if(this.userData=f??{},e){this.animatedScroll=this.targetScroll=r,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}d||(this.targetScroll=r),typeof s=="number"&&typeof n!="function"?n=Of:typeof n=="function"&&typeof s!="number"&&(s=1),this.animate.fromTo(this.animatedScroll,r,{duration:s,easing:n,lerp:o,onStart:()=>{i&&(this.isLocked=!0),this.isScrolling="smooth",a==null||a(this)},onUpdate:(m,v)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=m-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=m,this.setScroll(this.scroll),d&&(this.targetScroll=m),v||this.emit(),v&&(this.reset(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(r,{deltaX:t,deltaY:e}){const i=Date.now(),s=r._lenis??(r._lenis={});let n,o,a,l,u,d,f,m;const v=this.options.gestureOrientation;if(i-(s.time??0)>2e3){s.time=Date.now();const k=window.getComputedStyle(r);s.computedStyle=k;const N=k.overflowX,P=k.overflowY;if(n=["auto","overlay","scroll"].includes(N),o=["auto","overlay","scroll"].includes(P),s.hasOverflowX=n,s.hasOverflowY=o,!n&&!o||v==="vertical"&&!o||v==="horizontal"&&!n)return!1;u=r.scrollWidth,d=r.scrollHeight,f=r.clientWidth,m=r.clientHeight,a=u>f,l=d>m,s.isScrollableX=a,s.isScrollableY=l,s.scrollWidth=u,s.scrollHeight=d,s.clientWidth=f,s.clientHeight=m}else a=s.isScrollableX,l=s.isScrollableY,n=s.hasOverflowX,o=s.hasOverflowY,u=s.scrollWidth,d=s.scrollHeight,f=s.clientWidth,m=s.clientHeight;if(!n&&!o||!a&&!l||v==="vertical"&&(!o||!l)||v==="horizontal"&&(!n||!a))return!1;let y;if(v==="horizontal")y="x";else if(v==="vertical")y="y";else{const k=t!==0,N=e!==0;k&&n&&a&&(y="x"),N&&o&&l&&(y="y")}if(!y)return!1;let b,w,S,C,E;if(y==="x")b=r.scrollLeft,w=u-f,S=t,C=n,E=a;else if(y==="y")b=r.scrollTop,w=d-m,S=e,C=o,E=l;else return!1;return(S>0?b<w:b>0)&&C&&E}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const r=this.options.wrapper;return this.isHorizontal?r.scrollX??r.scrollLeft:r.scrollY??r.scrollTop}get scroll(){return this.options.infinite?mR(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(r){this._isScrolling!==r&&(this._isScrolling=r,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(r){this._isStopped!==r&&(this._isStopped=r,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(r){this._isLocked!==r&&(this._isLocked=r,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let r="lenis";return this.options.autoToggle&&(r+=" lenis-autoToggle"),this.isStopped&&(r+=" lenis-stopped"),this.isLocked&&(r+=" lenis-locked"),this.isScrolling&&(r+=" lenis-scrolling"),this.isScrolling==="smooth"&&(r+=" lenis-smooth"),r}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};const Iu=_t();function ly(r){Iu.value.raf(r),requestAnimationFrame(ly)}async function xR(){Iu.value=new bR({lerp:.04}),requestAnimationFrame(ly)}function cy(r={}){const t=ke(),{percentage:e,show:i}=rw({offset:100}),s=r.scrollAnimation??t.value.scrollAnimation,n=r.scrollDamping??t.value.scrollDamping;function o(d){var f;n?(f=Iu.value)==null||f.scrollTo(d,{offset:0,immediate:!s}):window.scrollTo({top:d,behavior:s?"smooth":"auto"})}function a(d,f="--sakura-navbar-height"){f=typeof f=="string"?Number.parseInt(Hx(f).value||"",10):f;const m=typeof d=="string"?document.querySelector(d):d instanceof Element?d:null;if(!m){console.warn("Target element not found:",d);return}o(m.clientHeight-f)}return{to:a,toTop:()=>o(0),toDown:()=>a(".sakura-hero"),percentage:e,show:i}}function wR(){return ke().value.scrollLock?Xx(Pr?document.body:null):void 0}const Lf=_t();function TR(){var r,t;(r=Lf.value)==null||r.load(),(t=Lf.value)==null||t.dispatchEvent(new Event("load"))}function ER(r){function t(e){e.key.toLowerCase()==="k"&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),r())}Xr(()=>{fe("keydown",t)})}const Bf=_t(!1);function SR(){const r=Os(),t=Ve(),e=tt(()=>t.value.search.type),i=(s=r.search)=>{const n={fuse:()=>ER(s.toggle),algolia:()=>zh(()=>{s.isOpen&&TR()})};(n[e.value]||(()=>(console.warn("Warning: Unsupported search type. Defaulting to Fuse search."),n.fuse())))()};return Bf.value||(i(),Bf.value=!0),r.search}const AR=_t(Pr?location.hash:"");Pr&&window.addEventListener("hashchange",()=>{AR.value=location.hash});const CR={class:"sakura-copyright copyright flex items-center justify-center",p:"1"},PR={itemprop:"copyrightYear"},IR=["href","title"],RR=["src"],MR={itemprop:"copyrightHolder"},hy=It({__name:"SakuraCopyright",props:{footer:{}},setup(r){const t=r,e=Ve(),i=ke(),s=tt(()=>t.footer||i.value.footer),n=new Date().getFullYear(),o=tt(()=>n===s.value.since),a=tt(()=>s.value.icon);return(l,u)=>{var d,f;return W(),at("div",CR,[vt("span",null,[u[0]||(u[0]=hi(" Copyright ¬© ",-1)),vt("span",PR,[o.value?At("v-if",!0):(W(),at(Ie,{key:0},[hi(te(s.value.since)+" - ",1)],64)),hi(" "+te(Q(n)),1)])]),(d=s.value.icon)!=null&&d.enable?(W(),at("a",{key:0,m:"x-2",class:"inline-flex animate-pulse",href:a.value.url,target:"_blank",title:a.value.title},[vt("div",{class:re(a.value.name)},null,2)],8,IR)):At("v-if",!0),!((f=s.value.icon)!=null&&f.enable)&&a.value.img?(W(),at("img",{key:1,class:"h-6 w-6 inline-flex animate-pulse",src:a.value.img,title:"Footer Icon Description"},null,8,RR)):At("v-if",!0),vt("span",MR,te(Q(e).author.name),1)])}}}),kR={class:"sakura-footer h-$sakura-footer-height",text:"center sm",style:{color:"var(--va-c-text-light)"}},DR=["innerHTML"],OR=It({__name:"SakuraFooter",props:{footer:{},pkg:{}},setup(r){const t=r,e=ke(),i=tt(()=>t.footer||e.value.footer);return(s,n)=>{const o=hy,a=tR;return W(),at("footer",kR,[i.value.icp?(W(),at("div",{key:0,class:"icp",p:"y-2",innerHTML:i.value.icp},null,8,DR)):At("v-if",!0),Ht(o),i.value.powered?(W(),zt(a,{key:1})):At("v-if",!0),Nt(s.$slots,"default")])}}});var ga={exports:{}};ga.exports;(function(r,t){(function(e,i){r.exports=i()})(ms,function(){function e(h,c){var p=Object.keys(h);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(h);c&&(g=g.filter(function(_){return Object.getOwnPropertyDescriptor(h,_).enumerable})),p.push.apply(p,g)}return p}function i(h){for(var c=1;c<arguments.length;c++){var p=arguments[c]!=null?arguments[c]:{};c%2?e(Object(p),!0).forEach(function(g){l(h,g,p[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(p)):e(Object(p)).forEach(function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(p,g))})}return h}function s(h){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},s(h)}function n(h,c){if(!(h instanceof c))throw new TypeError("Cannot call a class as a function")}function o(h,c){for(var p=0;p<c.length;p++){var g=c[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(h,b(g.key),g)}}function a(h,c,p){return c&&o(h.prototype,c),Object.defineProperty(h,"prototype",{writable:!1}),h}function l(h,c,p){return(c=b(c))in h?Object.defineProperty(h,c,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[c]=p,h}function u(h,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(c&&c.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),c&&f(h,c)}function d(h){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},d(h)}function f(h,c){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,g){return p.__proto__=g,p},f(h,c)}function m(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function v(h){var c=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,g=d(h);if(c){var _=d(this).constructor;p=Reflect.construct(g,arguments,_)}else p=g.apply(this,arguments);return function(x,T){if(T&&(typeof T=="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(x)}(this,p)}}function y(){return y=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(h,c,p){var g=function(x,T){for(;!Object.prototype.hasOwnProperty.call(x,T)&&(x=d(x))!==null;);return x}(h,c);if(g){var _=Object.getOwnPropertyDescriptor(g,c);return _.get?_.get.call(arguments.length<3?h:p):_.value}},y.apply(this,arguments)}function b(h){var c=function(p,g){if(typeof p!="object"||p===null)return p;var _=p[Symbol.toPrimitive];if(_!==void 0){var x=_.call(p,g);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}(h,"string");return typeof c=="symbol"?c:c+""}var w=function(h){return!(!h||!h.Window)&&h instanceof h.Window},S=void 0,C=void 0;function E(h){S=h;var c=h.document.createTextNode("");c.ownerDocument!==h.document&&typeof h.wrap=="function"&&h.wrap(c)===c&&(h=h.wrap(h)),C=h}function R(h){return w(h)?h:(h.ownerDocument||h).defaultView||C.window}typeof window<"u"&&window&&E(window);var k=function(h){return!!h&&s(h)==="object"},N=function(h){return typeof h=="function"},P={window:function(h){return h===C||w(h)},docFrag:function(h){return k(h)&&h.nodeType===11},object:k,func:N,number:function(h){return typeof h=="number"},bool:function(h){return typeof h=="boolean"},string:function(h){return typeof h=="string"},element:function(h){if(!h||s(h)!=="object")return!1;var c=R(h)||C;return/object|function/.test(typeof Element>"u"?"undefined":s(Element))?h instanceof Element||h instanceof c.Element:h.nodeType===1&&typeof h.nodeName=="string"},plainObject:function(h){return k(h)&&!!h.constructor&&/function Object\b/.test(h.constructor.toString())},array:function(h){return k(h)&&h.length!==void 0&&N(h.splice)}};function O(h){var c=h.interaction;if(c.prepared.name==="drag"){var p=c.prepared.axis;p==="x"?(c.coords.cur.page.y=c.coords.start.page.y,c.coords.cur.client.y=c.coords.start.client.y,c.coords.velocity.client.y=0,c.coords.velocity.page.y=0):p==="y"&&(c.coords.cur.page.x=c.coords.start.page.x,c.coords.cur.client.x=c.coords.start.client.x,c.coords.velocity.client.x=0,c.coords.velocity.page.x=0)}}function U(h){var c=h.iEvent,p=h.interaction;if(p.prepared.name==="drag"){var g=p.prepared.axis;if(g==="x"||g==="y"){var _=g==="x"?"y":"x";c.page[_]=p.coords.start.page[_],c.client[_]=p.coords.start.client[_],c.delta[_]=0}}}var $={id:"actions/drag",install:function(h){var c=h.actions,p=h.Interactable,g=h.defaults;p.prototype.draggable=$.draggable,c.map.drag=$,c.methodDict.drag="draggable",g.actions.drag=$.defaults},listeners:{"interactions:before-action-move":O,"interactions:action-resume":O,"interactions:action-move":U,"auto-start:check":function(h){var c=h.interaction,p=h.interactable,g=h.buttons,_=p.options.drag;if(_&&_.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||g&p.options.drag.mouseButtons))return h.action={name:"drag",axis:_.lockAxis==="start"?_.startAxis:_.lockAxis},!1}},draggable:function(h){return P.object(h)?(this.options.drag.enabled=h.enabled!==!1,this.setPerAction("drag",h),this.setOnEvents("drag",h),/^(xy|x|y|start)$/.test(h.lockAxis)&&(this.options.drag.lockAxis=h.lockAxis),/^(xy|x|y)$/.test(h.startAxis)&&(this.options.drag.startAxis=h.startAxis),this):P.bool(h)?(this.options.drag.enabled=h,this):this.options.drag},beforeMove:O,move:U,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(h){return h.search("drag")===0}},Y=$,H={init:function(h){var c=h;H.document=c.document,H.DocumentFragment=c.DocumentFragment||B,H.SVGElement=c.SVGElement||B,H.SVGSVGElement=c.SVGSVGElement||B,H.SVGElementInstance=c.SVGElementInstance||B,H.Element=c.Element||B,H.HTMLElement=c.HTMLElement||H.Element,H.Event=c.Event,H.Touch=c.Touch||B,H.PointerEvent=c.PointerEvent||c.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function B(){}var F=H,z={init:function(h){var c=F.Element,p=h.navigator||{};z.supportsTouch="ontouchstart"in h||P.func(h.DocumentTouch)&&F.document instanceof h.DocumentTouch,z.supportsPointerEvent=p.pointerEnabled!==!1&&!!F.PointerEvent,z.isIOS=/iP(hone|od|ad)/.test(p.platform),z.isIOS7=/iP(hone|od|ad)/.test(p.platform)&&/OS 7[^\d]/.test(p.appVersion),z.isIe9=/MSIE 9/.test(p.userAgent),z.isOperaMobile=p.appName==="Opera"&&z.supportsTouch&&/Presto/.test(p.userAgent),z.prefixedMatchesSelector="matches"in c.prototype?"matches":"webkitMatchesSelector"in c.prototype?"webkitMatchesSelector":"mozMatchesSelector"in c.prototype?"mozMatchesSelector":"oMatchesSelector"in c.prototype?"oMatchesSelector":"msMatchesSelector",z.pEventTypes=z.supportsPointerEvent?F.PointerEvent===h.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,z.wheelEvent=F.document&&"onmousewheel"in F.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},Z=z;function et(h,c){if(h.contains)return h.contains(c);for(;c;){if(c===h)return!0;c=c.parentNode}return!1}function ut(h,c){for(;P.element(h);){if(X(h,c))return h;h=yt(h)}return null}function yt(h){var c=h.parentNode;if(P.docFrag(c)){for(;(c=c.host)&&P.docFrag(c););return c}return c}function X(h,c){return C!==S&&(c=c.replace(/\/deep\//g," ")),h[Z.prefixedMatchesSelector](c)}var J=function(h){return h.parentNode||h.host};function Rt(h,c){for(var p,g=[],_=h;(p=J(_))&&_!==c&&p!==_.ownerDocument;)g.unshift(_),_=p;return g}function Ft(h,c,p){for(;P.element(h);){if(X(h,c))return!0;if((h=yt(h))===p)return X(h,c)}return!1}function $t(h){return h.correspondingUseElement||h}function se(h){var c=h instanceof F.SVGElement?h.getBoundingClientRect():h.getClientRects()[0];return c&&{left:c.left,right:c.right,top:c.top,bottom:c.bottom,width:c.width||c.right-c.left,height:c.height||c.bottom-c.top}}function Kt(h){var c,p=se(h);if(!Z.isIOS7&&p){var g={x:(c=(c=R(h))||C).scrollX||c.document.documentElement.scrollLeft,y:c.scrollY||c.document.documentElement.scrollTop};p.left+=g.x,p.right+=g.x,p.top+=g.y,p.bottom+=g.y}return p}function oe(h){for(var c=[];h;)c.push(h),h=yt(h);return c}function he(h){return!!P.string(h)&&(F.document.querySelector(h),!0)}function lt(h,c){for(var p in c)h[p]=c[p];return h}function le(h,c,p){return h==="parent"?yt(p):h==="self"?c.getRect(p):ut(p,h)}function Gt(h,c,p,g){var _=h;return P.string(_)?_=le(_,c,p):P.func(_)&&(_=_.apply(void 0,g)),P.element(_)&&(_=Kt(_)),_}function Wt(h){return h&&{x:"x"in h?h.x:h.left,y:"y"in h?h.y:h.top}}function Qt(h){return!h||"x"in h&&"y"in h||((h=lt({},h)).x=h.left||0,h.y=h.top||0,h.width=h.width||(h.right||0)-h.x,h.height=h.height||(h.bottom||0)-h.y),h}function Te(h,c,p){h.left&&(c.left+=p.x),h.right&&(c.right+=p.x),h.top&&(c.top+=p.y),h.bottom&&(c.bottom+=p.y),c.width=c.right-c.left,c.height=c.bottom-c.top}function we(h,c,p){var g=p&&h.options[p];return Wt(Gt(g&&g.origin||h.options.origin,h,c,[h&&c]))||{x:0,y:0}}function De(h,c){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(I){return!0},g=arguments.length>3?arguments[3]:void 0;if(g=g||{},P.string(h)&&h.search(" ")!==-1&&(h=zn(h)),P.array(h))return h.forEach(function(I){return De(I,c,p,g)}),g;if(P.object(h)&&(c=h,h=""),P.func(c)&&p(h))g[h]=g[h]||[],g[h].push(c);else if(P.array(c))for(var _=0,x=c;_<x.length;_++){var T=x[_];De(h,T,p,g)}else if(P.object(c))for(var A in c)De(zn(A).map(function(I){return"".concat(h).concat(I)}),c[A],p,g);return g}function zn(h){return h.trim().split(/ +/)}var cr=function(h,c){return Math.sqrt(h*h+c*c)},Uy=["webkit","moz"];function jn(h,c){h.__set||(h.__set={});var p=function(_){if(Uy.some(function(x){return _.indexOf(x)===0}))return 1;typeof h[_]!="function"&&_!=="__set"&&Object.defineProperty(h,_,{get:function(){return _ in h.__set?h.__set[_]:h.__set[_]=c[_]},set:function(x){h.__set[_]=x},configurable:!0})};for(var g in c)p(g);return h}function Vn(h,c){h.page=h.page||{},h.page.x=c.page.x,h.page.y=c.page.y,h.client=h.client||{},h.client.x=c.client.x,h.client.y=c.client.y,h.timeStamp=c.timeStamp}function Lu(h){h.page.x=0,h.page.y=0,h.client.x=0,h.client.y=0}function Bu(h){return h instanceof F.Event||h instanceof F.Touch}function Wn(h,c,p){return h=h||"page",(p=p||{}).x=c[h+"X"],p.y=c[h+"Y"],p}function Fu(h,c){return c=c||{x:0,y:0},Z.isOperaMobile&&Bu(h)?(Wn("screen",h,c),c.x+=window.scrollX,c.y+=window.scrollY):Wn("page",h,c),c}function Bs(h){return P.number(h.pointerId)?h.pointerId:h.identifier}function $y(h,c,p){var g=c.length>1?Nu(c):c[0];Fu(g,h.page),function(_,x){x=x||{},Z.isOperaMobile&&Bu(_)?Wn("screen",_,x):Wn("client",_,x)}(g,h.client),h.timeStamp=p}function tl(h){var c=[];return P.array(h)?(c[0]=h[0],c[1]=h[1]):h.type==="touchend"?h.touches.length===1?(c[0]=h.touches[0],c[1]=h.changedTouches[0]):h.touches.length===0&&(c[0]=h.changedTouches[0],c[1]=h.changedTouches[1]):(c[0]=h.touches[0],c[1]=h.touches[1]),c}function Nu(h){for(var c={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},p=0;p<h.length;p++){var g=h[p];for(var _ in c)c[_]+=g[_]}for(var x in c)c[x]/=h.length;return c}function el(h){if(!h.length)return null;var c=tl(h),p=Math.min(c[0].pageX,c[1].pageX),g=Math.min(c[0].pageY,c[1].pageY),_=Math.max(c[0].pageX,c[1].pageX),x=Math.max(c[0].pageY,c[1].pageY);return{x:p,y:g,left:p,top:g,right:_,bottom:x,width:_-p,height:x-g}}function rl(h,c){var p=c+"X",g=c+"Y",_=tl(h),x=_[0][p]-_[1][p],T=_[0][g]-_[1][g];return cr(x,T)}function il(h,c){var p=c+"X",g=c+"Y",_=tl(h),x=_[1][p]-_[0][p],T=_[1][g]-_[0][g];return 180*Math.atan2(T,x)/Math.PI}function Uu(h){return P.string(h.pointerType)?h.pointerType:P.number(h.pointerType)?[void 0,void 0,"touch","pen","mouse"][h.pointerType]:/touch/.test(h.type||"")||h instanceof F.Touch?"touch":"mouse"}function $u(h){var c=P.func(h.composedPath)?h.composedPath():h.path;return[$t(c?c[0]:h.target),$t(h.currentTarget)]}var Xn=function(){function h(c){n(this,h),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=c}return a(h,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),h}();Object.defineProperty(Xn.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var Gu=function(h,c){for(var p=0;p<c.length;p++){var g=c[p];h.push(g)}return h},Hu=function(h){return Gu([],h)},Fs=function(h,c){for(var p=0;p<h.length;p++)if(c(h[p],p,h))return p;return-1},Ns=function(h,c){return h[Fs(h,c)]},Qi=function(h){u(p,h);var c=v(p);function p(g,_,x){var T;n(this,p),(T=c.call(this,_._interaction)).dropzone=void 0,T.dragEvent=void 0,T.relatedTarget=void 0,T.draggable=void 0,T.propagationStopped=!1,T.immediatePropagationStopped=!1;var A=x==="dragleave"?g.prev:g.cur,I=A.element,D=A.dropzone;return T.type=x,T.target=I,T.currentTarget=I,T.dropzone=D,T.dragEvent=_,T.relatedTarget=_.target,T.draggable=_.interactable,T.timeStamp=_.timeStamp,T}return a(p,[{key:"reject",value:function(){var g=this,_=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&_.cur.dropzone===this.dropzone&&_.cur.element===this.target)if(_.prev.dropzone=this.dropzone,_.prev.element=this.target,_.rejected=!0,_.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var x=_.activeDrops,T=Fs(x,function(I){var D=I.dropzone,M=I.element;return D===g.dropzone&&M===g.target});_.activeDrops.splice(T,1);var A=new p(_,this.dragEvent,"dropdeactivate");A.dropzone=this.dropzone,A.target=this.target,this.dropzone.fire(A)}else this.dropzone.fire(new p(_,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),p}(Xn);function zu(h,c){for(var p=0,g=h.slice();p<g.length;p++){var _=g[p],x=_.dropzone,T=_.element;c.dropzone=x,c.target=T,x.fire(c),c.propagationStopped=c.immediatePropagationStopped=!1}}function sl(h,c){for(var p=function(x,T){for(var A=[],I=0,D=x.interactables.list;I<D.length;I++){var M=D[I];if(M.options.drop.enabled){var L=M.options.drop.accept;if(!(P.element(L)&&L!==T||P.string(L)&&!X(T,L)||P.func(L)&&!L({dropzone:M,draggableElement:T})))for(var G=0,V=M.getAllElements();G<V.length;G++){var j=V[G];j!==T&&A.push({dropzone:M,element:j,rect:M.getRect(j)})}}}return A}(h,c),g=0;g<p.length;g++){var _=p[g];_.rect=_.dropzone.getRect(_.element)}return p}function ju(h,c,p){for(var g=h.dropState,_=h.interactable,x=h.element,T=[],A=0,I=g.activeDrops;A<I.length;A++){var D=I[A],M=D.dropzone,L=D.element,G=D.rect,V=M.dropCheck(c,p,_,x,L,G);T.push(V?L:null)}var j=function(q){for(var ct,st,mt,St=[],Dt=0;Dt<q.length;Dt++){var wt=q[Dt],Pt=q[ct];if(wt&&Dt!==ct)if(Pt){var Se=J(wt),Zt=J(Pt);if(Se!==wt.ownerDocument)if(Zt!==wt.ownerDocument)if(Se!==Zt){St=St.length?St:Rt(Pt);var Oe=void 0;if(Pt instanceof F.HTMLElement&&wt instanceof F.SVGElement&&!(wt instanceof F.SVGSVGElement)){if(wt===Zt)continue;Oe=wt.ownerSVGElement}else Oe=wt;for(var We=Rt(Oe,Pt.ownerDocument),kr=0;We[kr]&&We[kr]===St[kr];)kr++;var ro=[We[kr-1],We[kr],St[kr]];if(ro[0])for(var js=ro[0].lastChild;js;){if(js===ro[1]){ct=Dt,St=We;break}if(js===ro[2])break;js=js.previousSibling}}else mt=Pt,(parseInt(R(st=wt).getComputedStyle(st).zIndex,10)||0)>=(parseInt(R(mt).getComputedStyle(mt).zIndex,10)||0)&&(ct=Dt);else ct=Dt}else ct=Dt}return ct}(T);return g.activeDrops[j]||null}function nl(h,c,p){var g=h.dropState,_={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return p.type==="dragstart"&&(_.activate=new Qi(g,p,"dropactivate"),_.activate.target=null,_.activate.dropzone=null),p.type==="dragend"&&(_.deactivate=new Qi(g,p,"dropdeactivate"),_.deactivate.target=null,_.deactivate.dropzone=null),g.rejected||(g.cur.element!==g.prev.element&&(g.prev.dropzone&&(_.leave=new Qi(g,p,"dragleave"),p.dragLeave=_.leave.target=g.prev.element,p.prevDropzone=_.leave.dropzone=g.prev.dropzone),g.cur.dropzone&&(_.enter=new Qi(g,p,"dragenter"),p.dragEnter=g.cur.element,p.dropzone=g.cur.dropzone)),p.type==="dragend"&&g.cur.dropzone&&(_.drop=new Qi(g,p,"drop"),p.dropzone=g.cur.dropzone,p.relatedTarget=g.cur.element),p.type==="dragmove"&&g.cur.dropzone&&(_.move=new Qi(g,p,"dropmove"),p.dropzone=g.cur.dropzone)),_}function ol(h,c){var p=h.dropState,g=p.activeDrops,_=p.cur,x=p.prev;c.leave&&x.dropzone.fire(c.leave),c.enter&&_.dropzone.fire(c.enter),c.move&&_.dropzone.fire(c.move),c.drop&&_.dropzone.fire(c.drop),c.deactivate&&zu(g,c.deactivate),p.prev.dropzone=_.dropzone,p.prev.element=_.element}function Vu(h,c){var p=h.interaction,g=h.iEvent,_=h.event;if(g.type==="dragmove"||g.type==="dragend"){var x=p.dropState;c.dynamicDrop&&(x.activeDrops=sl(c,p.element));var T=g,A=ju(p,T,_);x.rejected=x.rejected&&!!A&&A.dropzone===x.cur.dropzone&&A.element===x.cur.element,x.cur.dropzone=A&&A.dropzone,x.cur.element=A&&A.element,x.events=nl(p,0,T)}}var Wu={id:"actions/drop",install:function(h){var c=h.actions,p=h.interactStatic,g=h.Interactable,_=h.defaults;h.usePlugin(Y),g.prototype.dropzone=function(x){return function(T,A){if(P.object(A)){if(T.options.drop.enabled=A.enabled!==!1,A.listeners){var I=De(A.listeners),D=Object.keys(I).reduce(function(L,G){return L[/^(enter|leave)/.test(G)?"drag".concat(G):/^(activate|deactivate|move)/.test(G)?"drop".concat(G):G]=I[G],L},{}),M=T.options.drop.listeners;M&&T.off(M),T.on(D),T.options.drop.listeners=D}return P.func(A.ondrop)&&T.on("drop",A.ondrop),P.func(A.ondropactivate)&&T.on("dropactivate",A.ondropactivate),P.func(A.ondropdeactivate)&&T.on("dropdeactivate",A.ondropdeactivate),P.func(A.ondragenter)&&T.on("dragenter",A.ondragenter),P.func(A.ondragleave)&&T.on("dragleave",A.ondragleave),P.func(A.ondropmove)&&T.on("dropmove",A.ondropmove),/^(pointer|center)$/.test(A.overlap)?T.options.drop.overlap=A.overlap:P.number(A.overlap)&&(T.options.drop.overlap=Math.max(Math.min(1,A.overlap),0)),"accept"in A&&(T.options.drop.accept=A.accept),"checker"in A&&(T.options.drop.checker=A.checker),T}return P.bool(A)?(T.options.drop.enabled=A,T):T.options.drop}(this,x)},g.prototype.dropCheck=function(x,T,A,I,D,M){return function(L,G,V,j,q,ct,st){var mt=!1;if(!(st=st||L.getRect(ct)))return!!L.options.drop.checker&&L.options.drop.checker(G,V,mt,L,ct,j,q);var St=L.options.drop.overlap;if(St==="pointer"){var Dt=we(j,q,"drag"),wt=Fu(G);wt.x+=Dt.x,wt.y+=Dt.y;var Pt=wt.x>st.left&&wt.x<st.right,Se=wt.y>st.top&&wt.y<st.bottom;mt=Pt&&Se}var Zt=j.getRect(q);if(Zt&&St==="center"){var Oe=Zt.left+Zt.width/2,We=Zt.top+Zt.height/2;mt=Oe>=st.left&&Oe<=st.right&&We>=st.top&&We<=st.bottom}return Zt&&P.number(St)&&(mt=Math.max(0,Math.min(st.right,Zt.right)-Math.max(st.left,Zt.left))*Math.max(0,Math.min(st.bottom,Zt.bottom)-Math.max(st.top,Zt.top))/(Zt.width*Zt.height)>=St),L.options.drop.checker&&(mt=L.options.drop.checker(G,V,mt,L,ct,j,q)),mt}(this,x,T,A,I,D,M)},p.dynamicDrop=function(x){return P.bool(x)?(h.dynamicDrop=x,p):h.dynamicDrop},lt(c.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),c.methodDict.drop="dropzone",h.dynamicDrop=!1,_.actions.drop=Wu.defaults},listeners:{"interactions:before-action-start":function(h){var c=h.interaction;c.prepared.name==="drag"&&(c.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(h,c){var p=h.interaction,g=(h.event,h.iEvent);if(p.prepared.name==="drag"){var _=p.dropState;_.activeDrops=[],_.events={},_.activeDrops=sl(c,p.element),_.events=nl(p,0,g),_.events.activate&&(zu(_.activeDrops,_.events.activate),c.fire("actions/drop:start",{interaction:p,dragEvent:g}))}},"interactions:action-move":Vu,"interactions:after-action-move":function(h,c){var p=h.interaction,g=h.iEvent;if(p.prepared.name==="drag"){var _=p.dropState;ol(p,_.events),c.fire("actions/drop:move",{interaction:p,dragEvent:g}),_.events={}}},"interactions:action-end":function(h,c){if(h.interaction.prepared.name==="drag"){var p=h.interaction,g=h.iEvent;Vu(h,c),ol(p,p.dropState.events),c.fire("actions/drop:end",{interaction:p,dragEvent:g})}},"interactions:stop":function(h){var c=h.interaction;if(c.prepared.name==="drag"){var p=c.dropState;p&&(p.activeDrops=null,p.events=null,p.cur.dropzone=null,p.cur.element=null,p.prev.dropzone=null,p.prev.element=null,p.rejected=!1)}}},getActiveDrops:sl,getDrop:ju,getDropEvents:nl,fireDropEvents:ol,filterEventType:function(h){return h.search("drag")===0||h.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Gy=Wu;function al(h){var c=h.interaction,p=h.iEvent,g=h.phase;if(c.prepared.name==="gesture"){var _=c.pointers.map(function(D){return D.pointer}),x=g==="start",T=g==="end",A=c.interactable.options.deltaSource;if(p.touches=[_[0],_[1]],x)p.distance=rl(_,A),p.box=el(_),p.scale=1,p.ds=0,p.angle=il(_,A),p.da=0,c.gesture.startDistance=p.distance,c.gesture.startAngle=p.angle;else if(T||c.pointers.length<2){var I=c.prevEvent;p.distance=I.distance,p.box=I.box,p.scale=I.scale,p.ds=0,p.angle=I.angle,p.da=0}else p.distance=rl(_,A),p.box=el(_),p.scale=p.distance/c.gesture.startDistance,p.angle=il(_,A),p.ds=p.scale-c.gesture.scale,p.da=p.angle-c.gesture.angle;c.gesture.distance=p.distance,c.gesture.angle=p.angle,P.number(p.scale)&&p.scale!==1/0&&!isNaN(p.scale)&&(c.gesture.scale=p.scale)}}var ll={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(h){var c=h.actions,p=h.Interactable,g=h.defaults;p.prototype.gesturable=function(_){return P.object(_)?(this.options.gesture.enabled=_.enabled!==!1,this.setPerAction("gesture",_),this.setOnEvents("gesture",_),this):P.bool(_)?(this.options.gesture.enabled=_,this):this.options.gesture},c.map.gesture=ll,c.methodDict.gesture="gesturable",g.actions.gesture=ll.defaults},listeners:{"interactions:action-start":al,"interactions:action-move":al,"interactions:action-end":al,"interactions:new":function(h){h.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(h){if(!(h.interaction.pointers.length<2)){var c=h.interactable.options.gesture;if(c&&c.enabled)return h.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(h){return h.search("gesture")===0}},Hy=ll;function zy(h,c,p,g,_,x,T){if(!c)return!1;if(c===!0){var A=P.number(x.width)?x.width:x.right-x.left,I=P.number(x.height)?x.height:x.bottom-x.top;if(T=Math.min(T,Math.abs((h==="left"||h==="right"?A:I)/2)),A<0&&(h==="left"?h="right":h==="right"&&(h="left")),I<0&&(h==="top"?h="bottom":h==="bottom"&&(h="top")),h==="left"){var D=A>=0?x.left:x.right;return p.x<D+T}if(h==="top"){var M=I>=0?x.top:x.bottom;return p.y<M+T}if(h==="right")return p.x>(A>=0?x.right:x.left)-T;if(h==="bottom")return p.y>(I>=0?x.bottom:x.top)-T}return!!P.element(g)&&(P.element(c)?c===g:Ft(g,c,_))}function Xu(h){var c=h.iEvent,p=h.interaction;if(p.prepared.name==="resize"&&p.resizeAxes){var g=c;p.interactable.options.resize.square?(p.resizeAxes==="y"?g.delta.x=g.delta.y:g.delta.y=g.delta.x,g.axes="xy"):(g.axes=p.resizeAxes,p.resizeAxes==="x"?g.delta.y=0:p.resizeAxes==="y"&&(g.delta.x=0))}}var Rr,xi,Mr={id:"actions/resize",before:["actions/drag"],install:function(h){var c=h.actions,p=h.browser,g=h.Interactable,_=h.defaults;Mr.cursors=function(x){return x.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(p),Mr.defaultMargin=p.supportsTouch||p.supportsPointerEvent?20:10,g.prototype.resizable=function(x){return function(T,A,I){return P.object(A)?(T.options.resize.enabled=A.enabled!==!1,T.setPerAction("resize",A),T.setOnEvents("resize",A),P.string(A.axis)&&/^x$|^y$|^xy$/.test(A.axis)?T.options.resize.axis=A.axis:A.axis===null&&(T.options.resize.axis=I.defaults.actions.resize.axis),P.bool(A.preserveAspectRatio)?T.options.resize.preserveAspectRatio=A.preserveAspectRatio:P.bool(A.square)&&(T.options.resize.square=A.square),T):P.bool(A)?(T.options.resize.enabled=A,T):T.options.resize}(this,x,h)},c.map.resize=Mr,c.methodDict.resize="resizable",_.actions.resize=Mr.defaults},listeners:{"interactions:new":function(h){h.interaction.resizeAxes="xy"},"interactions:action-start":function(h){(function(c){var p=c.iEvent,g=c.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var _=p,x=g.rect;g._rects={start:lt({},x),corrected:lt({},x),previous:lt({},x),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},_.edges=g.prepared.edges,_.rect=g._rects.corrected,_.deltaRect=g._rects.delta}})(h),Xu(h)},"interactions:action-move":function(h){(function(c){var p=c.iEvent,g=c.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var _=p,x=g.interactable.options.resize.invert,T=x==="reposition"||x==="negate",A=g.rect,I=g._rects,D=I.start,M=I.corrected,L=I.delta,G=I.previous;if(lt(G,M),T){if(lt(M,A),x==="reposition"){if(M.top>M.bottom){var V=M.top;M.top=M.bottom,M.bottom=V}if(M.left>M.right){var j=M.left;M.left=M.right,M.right=j}}}else M.top=Math.min(A.top,D.bottom),M.bottom=Math.max(A.bottom,D.top),M.left=Math.min(A.left,D.right),M.right=Math.max(A.right,D.left);for(var q in M.width=M.right-M.left,M.height=M.bottom-M.top,M)L[q]=M[q]-G[q];_.edges=g.prepared.edges,_.rect=M,_.deltaRect=L}})(h),Xu(h)},"interactions:action-end":function(h){var c=h.iEvent,p=h.interaction;if(p.prepared.name==="resize"&&p.prepared.edges){var g=c;g.edges=p.prepared.edges,g.rect=p._rects.corrected,g.deltaRect=p._rects.delta}},"auto-start:check":function(h){var c=h.interaction,p=h.interactable,g=h.element,_=h.rect,x=h.buttons;if(_){var T=lt({},c.coords.cur.page),A=p.options.resize;if(A&&A.enabled&&(!c.pointerIsDown||!/mouse|pointer/.test(c.pointerType)||x&A.mouseButtons)){if(P.object(A.edges)){var I={left:!1,right:!1,top:!1,bottom:!1};for(var D in I)I[D]=zy(D,A.edges[D],T,c._latestPointer.eventTarget,g,_,A.margin||Mr.defaultMargin);I.left=I.left&&!I.right,I.top=I.top&&!I.bottom,(I.left||I.right||I.top||I.bottom)&&(h.action={name:"resize",edges:I})}else{var M=A.axis!=="y"&&T.x>_.right-Mr.defaultMargin,L=A.axis!=="x"&&T.y>_.bottom-Mr.defaultMargin;(M||L)&&(h.action={name:"resize",axes:(M?"x":"")+(L?"y":"")})}return!h.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(h){var c=h.edges,p=h.axis,g=h.name,_=Mr.cursors,x=null;if(p)x=_[g+p];else if(c){for(var T="",A=0,I=["top","bottom","left","right"];A<I.length;A++){var D=I[A];c[D]&&(T+=D)}x=_[T]}return x},filterEventType:function(h){return h.search("resize")===0},defaultMargin:null},jy=Mr,Vy={id:"actions",install:function(h){h.usePlugin(Hy),h.usePlugin(jy),h.usePlugin(Y),h.usePlugin(Gy)}},Yu=0,qr={request:function(h){return Rr(h)},cancel:function(h){return xi(h)},init:function(h){if(Rr=h.requestAnimationFrame,xi=h.cancelAnimationFrame,!Rr)for(var c=["ms","moz","webkit","o"],p=0;p<c.length;p++){var g=c[p];Rr=h["".concat(g,"RequestAnimationFrame")],xi=h["".concat(g,"CancelAnimationFrame")]||h["".concat(g,"CancelRequestAnimationFrame")]}Rr=Rr&&Rr.bind(h),xi=xi&&xi.bind(h),Rr||(Rr=function(_){var x=Date.now(),T=Math.max(0,16-(x-Yu)),A=h.setTimeout(function(){_(x+T)},T);return Yu=x+T,A},xi=function(_){return clearTimeout(_)})}},Tt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(h){Tt.isScrolling=!0,qr.cancel(Tt.i),h.autoScroll=Tt,Tt.interaction=h,Tt.prevTime=Tt.now(),Tt.i=qr.request(Tt.scroll)},stop:function(){Tt.isScrolling=!1,Tt.interaction&&(Tt.interaction.autoScroll=null),qr.cancel(Tt.i)},scroll:function(){var h=Tt.interaction,c=h.interactable,p=h.element,g=h.prepared.name,_=c.options[g].autoScroll,x=qu(_.container,c,p),T=Tt.now(),A=(T-Tt.prevTime)/1e3,I=_.speed*A;if(I>=1){var D={x:Tt.x*I,y:Tt.y*I};if(D.x||D.y){var M=Ku(x);P.window(x)?x.scrollBy(D.x,D.y):x&&(x.scrollLeft+=D.x,x.scrollTop+=D.y);var L=Ku(x),G={x:L.x-M.x,y:L.y-M.y};(G.x||G.y)&&c.fire({type:"autoscroll",target:p,interactable:c,delta:G,interaction:h,container:x})}Tt.prevTime=T}Tt.isScrolling&&(qr.cancel(Tt.i),Tt.i=qr.request(Tt.scroll))},check:function(h,c){var p;return(p=h.options[c].autoScroll)==null?void 0:p.enabled},onInteractionMove:function(h){var c=h.interaction,p=h.pointer;if(c.interacting()&&Tt.check(c.interactable,c.prepared.name))if(c.simulation)Tt.x=Tt.y=0;else{var g,_,x,T,A=c.interactable,I=c.element,D=c.prepared.name,M=A.options[D].autoScroll,L=qu(M.container,A,I);if(P.window(L))T=p.clientX<Tt.margin,g=p.clientY<Tt.margin,_=p.clientX>L.innerWidth-Tt.margin,x=p.clientY>L.innerHeight-Tt.margin;else{var G=se(L);T=p.clientX<G.left+Tt.margin,g=p.clientY<G.top+Tt.margin,_=p.clientX>G.right-Tt.margin,x=p.clientY>G.bottom-Tt.margin}Tt.x=_?1:T?-1:0,Tt.y=x?1:g?-1:0,Tt.isScrolling||(Tt.margin=M.margin,Tt.speed=M.speed,Tt.start(c))}}};function qu(h,c,p){return(P.string(h)?le(h,c,p):h)||R(p)}function Ku(h){return P.window(h)&&(h=window.document.body),{x:h.scrollLeft,y:h.scrollTop}}var Wy={id:"auto-scroll",install:function(h){var c=h.defaults,p=h.actions;h.autoScroll=Tt,Tt.now=function(){return h.now()},p.phaselessTypes.autoscroll=!0,c.perAction.autoScroll=Tt.defaults},listeners:{"interactions:new":function(h){h.interaction.autoScroll=null},"interactions:destroy":function(h){h.interaction.autoScroll=null,Tt.stop(),Tt.interaction&&(Tt.interaction=null)},"interactions:stop":Tt.stop,"interactions:action-move":function(h){return Tt.onInteractionMove(h)}}},Xy=Wy;function Us(h,c){var p=!1;return function(){return p||(C.console.warn(c),p=!0),h.apply(this,arguments)}}function cl(h,c){return h.name=c.name,h.axis=c.axis,h.edges=c.edges,h}function Yy(h){return P.bool(h)?(this.options.styleCursor=h,this):h===null?(delete this.options.styleCursor,this):this.options.styleCursor}function qy(h){return P.func(h)?(this.options.actionChecker=h,this):h===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Ky={id:"auto-start/interactableMethods",install:function(h){var c=h.Interactable;c.prototype.getAction=function(p,g,_,x){var T=function(A,I,D,M,L){var G=A.getRect(M),V=I.buttons||{0:1,1:4,3:8,4:16}[I.button],j={action:null,interactable:A,interaction:D,element:M,rect:G,buttons:V};return L.fire("auto-start:check",j),j.action}(this,g,_,x,h);return this.options.actionChecker?this.options.actionChecker(p,g,T,this,x,_):T},c.prototype.ignoreFrom=Us(function(p){return this._backCompatOption("ignoreFrom",p)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),c.prototype.allowFrom=Us(function(p){return this._backCompatOption("allowFrom",p)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),c.prototype.actionChecker=qy,c.prototype.styleCursor=Yy}};function Zu(h,c,p,g,_){return c.testIgnoreAllow(c.options[h.name],p,g)&&c.options[h.name].enabled&&Yn(c,p,h,_)?h:null}function Zy(h,c,p,g,_,x,T){for(var A=0,I=g.length;A<I;A++){var D=g[A],M=_[A],L=D.getAction(c,p,h,M);if(L){var G=Zu(L,D,M,x,T);if(G)return{action:G,interactable:D,element:M}}}return{action:null,interactable:null,element:null}}function Qu(h,c,p,g,_){var x=[],T=[],A=g;function I(M){x.push(M),T.push(A)}for(;P.element(A);){x=[],T=[],_.interactables.forEachMatch(A,I);var D=Zy(h,c,p,x,T,g,_);if(D.action&&!D.interactable.options[D.action.name].manualStart)return D;A=yt(A)}return{action:null,interactable:null,element:null}}function Ju(h,c,p){var g=c.action,_=c.interactable,x=c.element;g=g||{name:null},h.interactable=_,h.element=x,cl(h.prepared,g),h.rect=_&&g.name?_.getRect(x):null,ed(h,p),p.fire("autoStart:prepared",{interaction:h})}function Yn(h,c,p,g){var _=h.options,x=_[p.name].max,T=_[p.name].maxPerElement,A=g.autoStart.maxInteractions,I=0,D=0,M=0;if(!(x&&T&&A))return!1;for(var L=0,G=g.interactions.list;L<G.length;L++){var V=G[L],j=V.prepared.name;if(V.interacting()&&(++I>=A||V.interactable===h&&((D+=j===p.name?1:0)>=x||V.element===c&&(M++,j===p.name&&M>=T))))return!1}return A>0}function td(h,c){return P.number(h)?(c.autoStart.maxInteractions=h,this):c.autoStart.maxInteractions}function hl(h,c,p){var g=p.autoStart.cursorElement;g&&g!==h&&(g.style.cursor=""),h.ownerDocument.documentElement.style.cursor=c,h.style.cursor=c,p.autoStart.cursorElement=c?h:null}function ed(h,c){var p=h.interactable,g=h.element,_=h.prepared;if(h.pointerType==="mouse"&&p&&p.options.styleCursor){var x="";if(_.name){var T=p.options[_.name].cursorChecker;x=P.func(T)?T(_,p,g,h._interacting):c.actions.map[_.name].getCursor(_)}hl(h.element,x||"",c)}else c.autoStart.cursorElement&&hl(c.autoStart.cursorElement,"",c)}var Qy={id:"auto-start/base",before:["actions"],install:function(h){var c=h.interactStatic,p=h.defaults;h.usePlugin(Ky),p.base.actionChecker=null,p.base.styleCursor=!0,lt(p.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),c.maxInteractions=function(g){return td(g,h)},h.autoStart={maxInteractions:1/0,withinInteractionLimit:Yn,cursorElement:null}},listeners:{"interactions:down":function(h,c){var p=h.interaction,g=h.pointer,_=h.event,x=h.eventTarget;p.interacting()||Ju(p,Qu(p,g,_,x,c),c)},"interactions:move":function(h,c){(function(p,g){var _=p.interaction,x=p.pointer,T=p.event,A=p.eventTarget;_.pointerType!=="mouse"||_.pointerIsDown||_.interacting()||Ju(_,Qu(_,x,T,A,g),g)})(h,c),function(p,g){var _=p.interaction;if(_.pointerIsDown&&!_.interacting()&&_.pointerWasMoved&&_.prepared.name){g.fire("autoStart:before-start",p);var x=_.interactable,T=_.prepared.name;T&&x&&(x.options[T].manualStart||!Yn(x,_.element,_.prepared,g)?_.stop():(_.start(_.prepared,x,_.element),ed(_,g)))}}(h,c)},"interactions:stop":function(h,c){var p=h.interaction,g=p.interactable;g&&g.options.styleCursor&&hl(p.element,"",c)}},maxInteractions:td,withinInteractionLimit:Yn,validateAction:Zu},ul=Qy,Jy={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(h,c){var p=h.interaction,g=h.eventTarget,_=h.dx,x=h.dy;if(p.prepared.name==="drag"){var T=Math.abs(_),A=Math.abs(x),I=p.interactable.options.drag,D=I.startAxis,M=T>A?"x":T<A?"y":"xy";if(p.prepared.axis=I.lockAxis==="start"?M[0]:I.lockAxis,M!=="xy"&&D!=="xy"&&D!==M){p.prepared.name=null;for(var L=g,G=function(j){if(j!==p.interactable){var q=p.interactable.options.drag;if(!q.manualStart&&j.testIgnoreAllow(q,L,g)){var ct=j.getAction(p.downPointer,p.downEvent,p,L);if(ct&&ct.name==="drag"&&function(st,mt){if(!mt)return!1;var St=mt.options.drag.startAxis;return st==="xy"||St==="xy"||St===st}(M,j)&&ul.validateAction(ct,j,L,g,c))return j}}};P.element(L);){var V=c.interactables.forEachMatch(L,G);if(V){p.prepared.name="drag",p.interactable=V,p.element=L;break}L=yt(L)}}}}}};function dl(h){var c=h.prepared&&h.prepared.name;if(!c)return null;var p=h.interactable.options;return p[c].hold||p[c].delay}var t_={id:"auto-start/hold",install:function(h){var c=h.defaults;h.usePlugin(ul),c.perAction.hold=0,c.perAction.delay=0},listeners:{"interactions:new":function(h){h.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(h){var c=h.interaction,p=dl(c);p>0&&(c.autoStartHoldTimer=setTimeout(function(){c.start(c.prepared,c.interactable,c.element)},p))},"interactions:move":function(h){var c=h.interaction,p=h.duplicate;c.autoStartHoldTimer&&c.pointerWasMoved&&!p&&(clearTimeout(c.autoStartHoldTimer),c.autoStartHoldTimer=null)},"autoStart:before-start":function(h){var c=h.interaction;dl(c)>0&&(c.prepared.name=null)}},getHoldDuration:dl},e_=t_,r_={id:"auto-start",install:function(h){h.usePlugin(ul),h.usePlugin(e_),h.usePlugin(Jy)}},i_=function(h){return/^(always|never|auto)$/.test(h)?(this.options.preventDefault=h,this):P.bool(h)?(this.options.preventDefault=h?"always":"never",this):this.options.preventDefault};function s_(h){var c=h.interaction,p=h.event;c.interactable&&c.interactable.checkAndPreventDefault(p)}var rd={id:"core/interactablePreventDefault",install:function(h){var c=h.Interactable;c.prototype.preventDefault=i_,c.prototype.checkAndPreventDefault=function(p){return function(g,_,x){var T=g.options.preventDefault;if(T!=="never")if(T!=="always"){if(_.events.supportsPassive&&/^touch(start|move)$/.test(x.type)){var A=R(x.target).document,I=_.getDocOptions(A);if(!I||!I.events||I.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(x.type)||P.element(x.target)&&X(x.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||x.preventDefault()}else x.preventDefault()}(this,h,p)},h.interactions.docEvents.push({type:"dragstart",listener:function(p){for(var g=0,_=h.interactions.list;g<_.length;g++){var x=_[g];if(x.element&&(x.element===p.target||et(x.element,p.target)))return void x.interactable.checkAndPreventDefault(p)}}})},listeners:["down","move","up","cancel"].reduce(function(h,c){return h["interactions:".concat(c)]=s_,h},{})};function qn(h,c){if(c.phaselessTypes[h])return!0;for(var p in c.map)if(h.indexOf(p)===0&&h.substr(p.length)in c.phases)return!0;return!1}function Ji(h){var c={};for(var p in h){var g=h[p];P.plainObject(g)?c[p]=Ji(g):P.array(g)?c[p]=Hu(g):c[p]=g}return c}var pl=function(){function h(c){n(this,h),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=c,this.result=Kn(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(h,[{key:"start",value:function(c,p){var g,_,x=c.phase,T=this.interaction,A=function(D){var M=D.interactable.options[D.prepared.name],L=M.modifiers;return L&&L.length?L:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function(G){var V=M[G];return V&&V.enabled&&{options:V,methods:V._methods}}).filter(function(G){return!!G})}(T);this.prepareStates(A),this.startEdges=lt({},T.edges),this.edges=lt({},this.startEdges),this.startOffset=(g=T.rect,_=p,g?{left:_.x-g.left,top:_.y-g.top,right:g.right-_.x,bottom:g.bottom-_.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var I=this.fillArg({phase:x,pageCoords:p,preEnd:!1});return this.result=Kn(),this.startAll(I),this.result=this.setAll(I)}},{key:"fillArg",value:function(c){var p=this.interaction;return c.interaction=p,c.interactable=p.interactable,c.element=p.element,c.rect||(c.rect=p.rect),c.edges||(c.edges=this.startEdges),c.startOffset=this.startOffset,c}},{key:"startAll",value:function(c){for(var p=0,g=this.states;p<g.length;p++){var _=g[p];_.methods.start&&(c.state=_,_.methods.start(c))}}},{key:"setAll",value:function(c){var p=c.phase,g=c.preEnd,_=c.skipModifiers,x=c.rect,T=c.edges;c.coords=lt({},c.pageCoords),c.rect=lt({},x),c.edges=lt({},T);for(var A=_?this.states.slice(_):this.states,I=Kn(c.coords,c.rect),D=0;D<A.length;D++){var M,L=A[D],G=L.options,V=lt({},c.coords),j=null;(M=L.methods)!=null&&M.set&&this.shouldDo(G,g,p)&&(c.state=L,j=L.methods.set(c),Te(c.edges,c.rect,{x:c.coords.x-V.x,y:c.coords.y-V.y})),I.eventProps.push(j)}lt(this.edges,c.edges),I.delta.x=c.coords.x-c.pageCoords.x,I.delta.y=c.coords.y-c.pageCoords.y,I.rectDelta.left=c.rect.left-x.left,I.rectDelta.right=c.rect.right-x.right,I.rectDelta.top=c.rect.top-x.top,I.rectDelta.bottom=c.rect.bottom-x.bottom;var q=this.result.coords,ct=this.result.rect;if(q&&ct){var st=I.rect.left!==ct.left||I.rect.right!==ct.right||I.rect.top!==ct.top||I.rect.bottom!==ct.bottom;I.changed=st||q.x!==I.coords.x||q.y!==I.coords.y}return I}},{key:"applyToInteraction",value:function(c){var p=this.interaction,g=c.phase,_=p.coords.cur,x=p.coords.start,T=this.result,A=this.startDelta,I=T.delta;g==="start"&&lt(this.startDelta,T.delta);for(var D=0,M=[[x,A],[_,I]];D<M.length;D++){var L=M[D],G=L[0],V=L[1];G.page.x+=V.x,G.page.y+=V.y,G.client.x+=V.x,G.client.y+=V.y}var j=this.result.rectDelta,q=c.rect||p.rect;q.left+=j.left,q.right+=j.right,q.top+=j.top,q.bottom+=j.bottom,q.width=q.right-q.left,q.height=q.bottom-q.top}},{key:"setAndApply",value:function(c){var p=this.interaction,g=c.phase,_=c.preEnd,x=c.skipModifiers,T=this.setAll(this.fillArg({preEnd:_,phase:g,pageCoords:c.modifiedCoords||p.coords.cur.page}));if(this.result=T,!T.changed&&(!x||x<this.states.length)&&p.interacting())return!1;if(c.modifiedCoords){var A=p.coords.cur.page,I={x:c.modifiedCoords.x-A.x,y:c.modifiedCoords.y-A.y};T.coords.x+=I.x,T.coords.y+=I.y,T.delta.x+=I.x,T.delta.y+=I.y}this.applyToInteraction(c)}},{key:"beforeEnd",value:function(c){var p=c.interaction,g=c.event,_=this.states;if(_&&_.length){for(var x=!1,T=0;T<_.length;T++){var A=_[T];c.state=A;var I=A.options,D=A.methods,M=D.beforeEnd&&D.beforeEnd(c);if(M)return this.endResult=M,!1;x=x||!x&&this.shouldDo(I,!0,c.phase,!0)}x&&p.move({event:g,preEnd:!0})}}},{key:"stop",value:function(c){var p=c.interaction;if(this.states&&this.states.length){var g=lt({states:this.states,interactable:p.interactable,element:p.element,rect:null},c);this.fillArg(g);for(var _=0,x=this.states;_<x.length;_++){var T=x[_];g.state=T,T.methods.stop&&T.methods.stop(g)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(c){this.states=[];for(var p=0;p<c.length;p++){var g=c[p],_=g.options,x=g.methods,T=g.name;this.states.push({options:_,methods:x,index:p,name:T})}return this.states}},{key:"restoreInteractionCoords",value:function(c){var p=c.interaction,g=p.coords,_=p.rect,x=p.modification;if(x.result){for(var T=x.startDelta,A=x.result,I=A.delta,D=A.rectDelta,M=0,L=[[g.start,T],[g.cur,I]];M<L.length;M++){var G=L[M],V=G[0],j=G[1];V.page.x-=j.x,V.page.y-=j.y,V.client.x-=j.x,V.client.y-=j.y}_.left-=D.left,_.right-=D.right,_.top-=D.top,_.bottom-=D.bottom}}},{key:"shouldDo",value:function(c,p,g,_){return!(!c||c.enabled===!1||_&&!c.endOnly||c.endOnly&&!p||g==="start"&&!c.setStart)}},{key:"copyFrom",value:function(c){this.startOffset=c.startOffset,this.startDelta=c.startDelta,this.startEdges=c.startEdges,this.edges=c.edges,this.states=c.states.map(function(p){return Ji(p)}),this.result=Kn(lt({},c.result.coords),lt({},c.result.rect))}},{key:"destroy",value:function(){for(var c in this)this[c]=null}}]),h}();function Kn(h,c){return{rect:c,coords:h,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Kr(h,c){var p=h.defaults,g={start:h.start,set:h.set,beforeEnd:h.beforeEnd,stop:h.stop},_=function(x){var T=x||{};for(var A in T.enabled=T.enabled!==!1,p)A in T||(T[A]=p[A]);var I={options:T,methods:g,name:c,enable:function(){return T.enabled=!0,I},disable:function(){return T.enabled=!1,I}};return I};return c&&typeof c=="string"&&(_._defaults=p,_._methods=g),_}function $s(h){var c=h.iEvent,p=h.interaction.modification.result;p&&(c.modifiers=p.eventProps)}var n_={id:"modifiers/base",before:["actions"],install:function(h){h.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(h){var c=h.interaction;c.modification=new pl(c)},"interactions:before-action-start":function(h){var c=h.interaction,p=h.interaction.modification;p.start(h,c.coords.start.page),c.edges=p.edges,p.applyToInteraction(h)},"interactions:before-action-move":function(h){var c=h.interaction,p=c.modification,g=p.setAndApply(h);return c.edges=p.edges,g},"interactions:before-action-end":function(h){var c=h.interaction,p=c.modification,g=p.beforeEnd(h);return c.edges=p.startEdges,g},"interactions:action-start":$s,"interactions:action-move":$s,"interactions:action-end":$s,"interactions:after-action-start":function(h){return h.interaction.modification.restoreInteractionCoords(h)},"interactions:after-action-move":function(h){return h.interaction.modification.restoreInteractionCoords(h)},"interactions:stop":function(h){return h.interaction.modification.stop(h)}}},id=n_,sd={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},fl=function(h){u(p,h);var c=v(p);function p(g,_,x,T,A,I,D){var M;n(this,p),(M=c.call(this,g)).relatedTarget=null,M.screenX=void 0,M.screenY=void 0,M.button=void 0,M.buttons=void 0,M.ctrlKey=void 0,M.shiftKey=void 0,M.altKey=void 0,M.metaKey=void 0,M.page=void 0,M.client=void 0,M.delta=void 0,M.rect=void 0,M.x0=void 0,M.y0=void 0,M.t0=void 0,M.dt=void 0,M.duration=void 0,M.clientX0=void 0,M.clientY0=void 0,M.velocity=void 0,M.speed=void 0,M.swipe=void 0,M.axes=void 0,M.preEnd=void 0,A=A||g.element;var L=g.interactable,G=(L&&L.options||sd).deltaSource,V=we(L,A,x),j=T==="start",q=T==="end",ct=j?m(M):g.prevEvent,st=j?g.coords.start:q?{page:ct.page,client:ct.client,timeStamp:g.coords.cur.timeStamp}:g.coords.cur;return M.page=lt({},st.page),M.client=lt({},st.client),M.rect=lt({},g.rect),M.timeStamp=st.timeStamp,q||(M.page.x-=V.x,M.page.y-=V.y,M.client.x-=V.x,M.client.y-=V.y),M.ctrlKey=_.ctrlKey,M.altKey=_.altKey,M.shiftKey=_.shiftKey,M.metaKey=_.metaKey,M.button=_.button,M.buttons=_.buttons,M.target=A,M.currentTarget=A,M.preEnd=I,M.type=D||x+(T||""),M.interactable=L,M.t0=j?g.pointers[g.pointers.length-1].downTime:ct.t0,M.x0=g.coords.start.page.x-V.x,M.y0=g.coords.start.page.y-V.y,M.clientX0=g.coords.start.client.x-V.x,M.clientY0=g.coords.start.client.y-V.y,M.delta=j||q?{x:0,y:0}:{x:M[G].x-ct[G].x,y:M[G].y-ct[G].y},M.dt=g.coords.delta.timeStamp,M.duration=M.timeStamp-M.t0,M.velocity=lt({},g.coords.velocity[G]),M.speed=cr(M.velocity.x,M.velocity.y),M.swipe=q||T==="inertiastart"?M.getSwipe():null,M}return a(p,[{key:"getSwipe",value:function(){var g=this._interaction;if(g.prevEvent.speed<600||this.timeStamp-g.prevEvent.timeStamp>150)return null;var _=180*Math.atan2(g.prevEvent.velocityY,g.prevEvent.velocityX)/Math.PI;_<0&&(_+=360);var x=112.5<=_&&_<247.5,T=202.5<=_&&_<337.5;return{up:T,down:!T&&22.5<=_&&_<157.5,left:x,right:!x&&(292.5<=_||_<67.5),angle:_,speed:g.prevEvent.speed,velocity:{x:g.prevEvent.velocityX,y:g.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),p}(Xn);Object.defineProperties(fl.prototype,{pageX:{get:function(){return this.page.x},set:function(h){this.page.x=h}},pageY:{get:function(){return this.page.y},set:function(h){this.page.y=h}},clientX:{get:function(){return this.client.x},set:function(h){this.client.x=h}},clientY:{get:function(){return this.client.y},set:function(h){this.client.y=h}},dx:{get:function(){return this.delta.x},set:function(h){this.delta.x=h}},dy:{get:function(){return this.delta.y},set:function(h){this.delta.y=h}},velocityX:{get:function(){return this.velocity.x},set:function(h){this.velocity.x=h}},velocityY:{get:function(){return this.velocity.y},set:function(h){this.velocity.y=h}}});var o_=a(function h(c,p,g,_,x){n(this,h),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=c,this.pointer=p,this.event=g,this.downTime=_,this.downTarget=x}),a_=function(h){return h.interactable="",h.element="",h.prepared="",h.pointerIsDown="",h.pointerWasMoved="",h._proxy="",h}({}),nd=function(h){return h.start="",h.move="",h.end="",h.stop="",h.interacting="",h}({}),l_=0,c_=function(){function h(c){var p=this,g=c.pointerType,_=c.scopeFire;n(this,h),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=Us(function(M){this.move(M)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=l_++,this._scopeFire=_,this.pointerType=g;var x=this;this._proxy={};var T=function(M){Object.defineProperty(p._proxy,M,{get:function(){return x[M]}})};for(var A in a_)T(A);var I=function(M){Object.defineProperty(p._proxy,M,{value:function(){return x[M].apply(x,arguments)}})};for(var D in nd)I(D);this._scopeFire("interactions:new",{interaction:this})}return a(h,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(c,p,g){var _=this.updatePointer(c,p,g,!0),x=this.pointers[_];this._scopeFire("interactions:down",{pointer:c,event:p,eventTarget:g,pointerIndex:_,pointerInfo:x,type:"down",interaction:this})}},{key:"start",value:function(c,p,g){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(c.name==="gesture"?2:1)||!p.options[c.name].enabled)&&(cl(this.prepared,c),this.interactable=p,this.element=g,this.rect=p.getRect(g),this.edges=this.prepared.edges?lt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(c,p,g){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(c,p,g,!1);var _,x,T=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(_=this.coords.cur.client.x-this.coords.start.client.x,x=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=cr(_,x)>this.pointerMoveTolerance);var A,I,D,M=this.getPointerIndex(c),L={pointer:c,pointerIndex:M,pointerInfo:this.pointers[M],event:p,type:"move",eventTarget:g,dx:_,dy:x,duplicate:T,interaction:this};T||(A=this.coords.velocity,I=this.coords.delta,D=Math.max(I.timeStamp/1e3,.001),A.page.x=I.page.x/D,A.page.y=I.page.y/D,A.client.x=I.client.x/D,A.client.y=I.client.y/D,A.timeStamp=D),this._scopeFire("interactions:move",L),T||this.simulation||(this.interacting()&&(L.type=null,this.move(L)),this.pointerWasMoved&&Vn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(c){c&&c.event||Lu(this.coords.delta),(c=lt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},c||{})).phase="move",this._doPhase(c)}},{key:"pointerUp",value:function(c,p,g,_){var x=this.getPointerIndex(c);x===-1&&(x=this.updatePointer(c,p,g,!1));var T=/cancel$/i.test(p.type)?"cancel":"up";this._scopeFire("interactions:".concat(T),{pointer:c,pointerIndex:x,pointerInfo:this.pointers[x],event:p,eventTarget:g,type:T,curEventTarget:_,interaction:this}),this.simulation||this.end(p),this.removePointer(c,p)}},{key:"documentBlur",value:function(c){this.end(c),this._scopeFire("interactions:blur",{event:c,type:"blur",interaction:this})}},{key:"end",value:function(c){var p;this._ending=!0,c=c||this._latestPointer.event,this.interacting()&&(p=this._doPhase({event:c,interaction:this,phase:"end"})),this._ending=!1,p===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(c){var p=Bs(c);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Fs(this.pointers,function(g){return g.id===p})}},{key:"getPointerInfo",value:function(c){return this.pointers[this.getPointerIndex(c)]}},{key:"updatePointer",value:function(c,p,g,_){var x,T,A,I=Bs(c),D=this.getPointerIndex(c),M=this.pointers[D];return _=_!==!1&&(_||/(down|start)$/i.test(p.type)),M?M.pointer=c:(M=new o_(I,c,p,null,null),D=this.pointers.length,this.pointers.push(M)),$y(this.coords.cur,this.pointers.map(function(L){return L.pointer}),this._now()),x=this.coords.delta,T=this.coords.prev,A=this.coords.cur,x.page.x=A.page.x-T.page.x,x.page.y=A.page.y-T.page.y,x.client.x=A.client.x-T.client.x,x.client.y=A.client.y-T.client.y,x.timeStamp=A.timeStamp-T.timeStamp,_&&(this.pointerIsDown=!0,M.downTime=this.coords.cur.timeStamp,M.downTarget=g,jn(this.downPointer,c),this.interacting()||(Vn(this.coords.start,this.coords.cur),Vn(this.coords.prev,this.coords.cur),this.downEvent=p,this.pointerWasMoved=!1)),this._updateLatestPointer(c,p,g),this._scopeFire("interactions:update-pointer",{pointer:c,event:p,eventTarget:g,down:_,pointerInfo:M,pointerIndex:D,interaction:this}),D}},{key:"removePointer",value:function(c,p){var g=this.getPointerIndex(c);if(g!==-1){var _=this.pointers[g];this._scopeFire("interactions:remove-pointer",{pointer:c,event:p,eventTarget:null,pointerIndex:g,pointerInfo:_,interaction:this}),this.pointers.splice(g,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(c,p,g){this._latestPointer.pointer=c,this._latestPointer.event=p,this._latestPointer.eventTarget=g}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(c,p,g,_){return new fl(this,c,this.prepared.name,p,this.element,g,_)}},{key:"_fireEvent",value:function(c){var p;(p=this.interactable)==null||p.fire(c),(!this.prevEvent||c.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=c)}},{key:"_doPhase",value:function(c){var p=c.event,g=c.phase,_=c.preEnd,x=c.type,T=this.rect;if(T&&g==="move"&&(Te(this.edges,T,this.coords.delta[this.interactable.options.deltaSource]),T.width=T.right-T.left,T.height=T.bottom-T.top),this._scopeFire("interactions:before-action-".concat(g),c)===!1)return!1;var A=c.iEvent=this._createPreparedEvent(p,g,_,x);return this._scopeFire("interactions:action-".concat(g),c),g==="start"&&(this.prevEvent=A),this._fireEvent(A),this._scopeFire("interactions:after-action-".concat(g),c),!0}},{key:"_now",value:function(){return Date.now()}}]),h}();function od(h){ad(h.interaction)}function ad(h){if(!function(p){return!(!p.offset.pending.x&&!p.offset.pending.y)}(h))return!1;var c=h.offset.pending;return ml(h.coords.cur,c),ml(h.coords.delta,c),Te(h.edges,h.rect,c),c.x=0,c.y=0,!0}function h_(h){var c=h.x,p=h.y;this.offset.pending.x+=c,this.offset.pending.y+=p,this.offset.total.x+=c,this.offset.total.y+=p}function ml(h,c){var p=h.page,g=h.client,_=c.x,x=c.y;p.x+=_,p.y+=x,g.x+=_,g.y+=x}nd.offsetBy="";var u_={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(h){h.Interaction.prototype.offsetBy=h_},listeners:{"interactions:new":function(h){h.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(h){return function(c){c.pointerIsDown&&(ml(c.coords.cur,c.offset.total),c.offset.pending.x=0,c.offset.pending.y=0)}(h.interaction)},"interactions:before-action-start":od,"interactions:before-action-move":od,"interactions:before-action-end":function(h){var c=h.interaction;if(ad(c))return c.move({offset:!0}),c.end(),!1},"interactions:stop":function(h){var c=h.interaction;c.offset.total.x=0,c.offset.total.y=0,c.offset.pending.x=0,c.offset.pending.y=0}}},ld=u_,d_=function(){function h(c){n(this,h),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=c}return a(h,[{key:"start",value:function(c){var p=this.interaction,g=Zn(p);if(!g||!g.enabled)return!1;var _=p.coords.velocity.client,x=cr(_.x,_.y),T=this.modification||(this.modification=new pl(p));if(T.copyFrom(p.modification),this.t0=p._now(),this.allowResume=g.allowResume,this.v0=x,this.currentOffset={x:0,y:0},this.startCoords=p.coords.cur.page,this.modifierArg=T.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-p.coords.cur.timeStamp<50&&x>g.minSpeed&&x>g.endSpeed)this.startInertia();else{if(T.result=T.setAll(this.modifierArg),!T.result.changed)return!1;this.startSmoothEnd()}return p.modification.result.rect=null,p.offsetBy(this.targetOffset),p._doPhase({interaction:p,event:c,phase:"inertiastart"}),p.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),p.modification.result.rect=null,this.active=!0,p.simulation=this,!0}},{key:"startInertia",value:function(){var c=this,p=this.interaction.coords.velocity.client,g=Zn(this.interaction),_=g.resistance,x=-Math.log(g.endSpeed/this.v0)/_;this.targetOffset={x:(p.x-x)/_,y:(p.y-x)/_},this.te=x,this.lambda_v0=_/this.v0,this.one_ve_v0=1-g.endSpeed/this.v0;var T=this.modification,A=this.modifierArg;A.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},T.result=T.setAll(A),T.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+T.result.delta.x,y:this.targetOffset.y+T.result.delta.y}),this.onNextFrame(function(){return c.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var c=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return c.smoothEndTick()})}},{key:"onNextFrame",value:function(c){var p=this;this.timeout=qr.request(function(){p.active&&c()})}},{key:"inertiaTick",value:function(){var c,p,g,_,x,T,A,I=this,D=this.interaction,M=Zn(D).resistance,L=(D._now()-this.t0)/1e3;if(L<this.te){var G,V=1-(Math.exp(-M*L)-this.lambda_v0)/this.one_ve_v0;this.isModified?(c=0,p=0,g=this.targetOffset.x,_=this.targetOffset.y,x=this.modifiedOffset.x,T=this.modifiedOffset.y,G={x:cd(A=V,c,g,x),y:cd(A,p,_,T)}):G={x:this.targetOffset.x*V,y:this.targetOffset.y*V};var j={x:G.x-this.currentOffset.x,y:G.y-this.currentOffset.y};this.currentOffset.x+=j.x,this.currentOffset.y+=j.y,D.offsetBy(j),D.move(),this.onNextFrame(function(){return I.inertiaTick()})}else D.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var c=this,p=this.interaction,g=p._now()-this.t0,_=Zn(p).smoothEndDuration;if(g<_){var x={x:hd(g,0,this.targetOffset.x,_),y:hd(g,0,this.targetOffset.y,_)},T={x:x.x-this.currentOffset.x,y:x.y-this.currentOffset.y};this.currentOffset.x+=T.x,this.currentOffset.y+=T.y,p.offsetBy(T),p.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return c.smoothEndTick()})}else p.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(c){var p=c.pointer,g=c.event,_=c.eventTarget,x=this.interaction;x.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),x.updatePointer(p,g,_,!0),x._doPhase({interaction:x,event:g,phase:"resume"}),Vn(x.coords.prev,x.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,qr.cancel(this.timeout)}}]),h}();function Zn(h){var c=h.interactable,p=h.prepared;return c&&c.options&&p.name&&c.options[p.name].inertia}var p_={id:"inertia",before:["modifiers","actions"],install:function(h){var c=h.defaults;h.usePlugin(ld),h.usePlugin(id),h.actions.phases.inertiastart=!0,h.actions.phases.resume=!0,c.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(h){var c=h.interaction;c.inertia=new d_(c)},"interactions:before-action-end":function(h){var c=h.interaction,p=h.event;return(!c._interacting||c.simulation||!c.inertia.start(p))&&null},"interactions:down":function(h){var c=h.interaction,p=h.eventTarget,g=c.inertia;if(g.active)for(var _=p;P.element(_);){if(_===c.element){g.resume(h);break}_=yt(_)}},"interactions:stop":function(h){var c=h.interaction.inertia;c.active&&c.stop()},"interactions:before-action-resume":function(h){var c=h.interaction.modification;c.stop(h),c.start(h,h.interaction.coords.cur.page),c.applyToInteraction(h)},"interactions:before-action-inertiastart":function(h){return h.interaction.modification.setAndApply(h)},"interactions:action-resume":$s,"interactions:action-inertiastart":$s,"interactions:after-action-inertiastart":function(h){return h.interaction.modification.restoreInteractionCoords(h)},"interactions:after-action-resume":function(h){return h.interaction.modification.restoreInteractionCoords(h)}}};function cd(h,c,p,g){var _=1-h;return _*_*c+2*_*h*p+h*h*g}function hd(h,c,p,g){return-p*(h/=g)*(h-2)+c}var f_=p_;function ud(h,c){for(var p=0;p<c.length;p++){var g=c[p];if(h.immediatePropagationStopped)break;g(h)}}var dd=function(){function h(c){n(this,h),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=lt({},c||{})}return a(h,[{key:"fire",value:function(c){var p,g=this.global;(p=this.types[c.type])&&ud(c,p),!c.propagationStopped&&g&&(p=g[c.type])&&ud(c,p)}},{key:"on",value:function(c,p){var g=De(c,p);for(c in g)this.types[c]=Gu(this.types[c]||[],g[c])}},{key:"off",value:function(c,p){var g=De(c,p);for(c in g){var _=this.types[c];if(_&&_.length)for(var x=0,T=g[c];x<T.length;x++){var A=T[x],I=_.indexOf(A);I!==-1&&_.splice(I,1)}}}},{key:"getRect",value:function(c){return null}}]),h}(),m_=function(){function h(c){n(this,h),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=c,jn(this,c)}return a(h,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),h}();function Gs(h){return P.object(h)?{capture:!!h.capture,passive:!!h.passive}:{capture:!!h,passive:!1}}function Qn(h,c){return h===c||(typeof h=="boolean"?!!c.capture===h&&!c.passive:!!h.capture==!!c.capture&&!!h.passive==!!c.passive)}var g_={id:"events",install:function(h){var c,p=[],g={},_=[],x={add:T,remove:A,addDelegate:function(M,L,G,V,j){var q=Gs(j);if(!g[G]){g[G]=[];for(var ct=0;ct<_.length;ct++){var st=_[ct];T(st,G,I),T(st,G,D,!0)}}var mt=g[G],St=Ns(mt,function(Dt){return Dt.selector===M&&Dt.context===L});St||(St={selector:M,context:L,listeners:[]},mt.push(St)),St.listeners.push({func:V,options:q})},removeDelegate:function(M,L,G,V,j){var q,ct=Gs(j),st=g[G],mt=!1;if(st)for(q=st.length-1;q>=0;q--){var St=st[q];if(St.selector===M&&St.context===L){for(var Dt=St.listeners,wt=Dt.length-1;wt>=0;wt--){var Pt=Dt[wt];if(Pt.func===V&&Qn(Pt.options,ct)){Dt.splice(wt,1),Dt.length||(st.splice(q,1),A(L,G,I),A(L,G,D,!0)),mt=!0;break}}if(mt)break}}},delegateListener:I,delegateUseCapture:D,delegatedEvents:g,documents:_,targets:p,supportsOptions:!1,supportsPassive:!1};function T(M,L,G,V){if(M.addEventListener){var j=Gs(V),q=Ns(p,function(ct){return ct.eventTarget===M});q||(q={eventTarget:M,events:{}},p.push(q)),q.events[L]||(q.events[L]=[]),Ns(q.events[L],function(ct){return ct.func===G&&Qn(ct.options,j)})||(M.addEventListener(L,G,x.supportsOptions?j:j.capture),q.events[L].push({func:G,options:j}))}}function A(M,L,G,V){if(M.addEventListener&&M.removeEventListener){var j=Fs(p,function(Se){return Se.eventTarget===M}),q=p[j];if(q&&q.events)if(L!=="all"){var ct=!1,st=q.events[L];if(st){if(G==="all"){for(var mt=st.length-1;mt>=0;mt--){var St=st[mt];A(M,L,St.func,St.options)}return}for(var Dt=Gs(V),wt=0;wt<st.length;wt++){var Pt=st[wt];if(Pt.func===G&&Qn(Pt.options,Dt)){M.removeEventListener(L,G,x.supportsOptions?Dt:Dt.capture),st.splice(wt,1),st.length===0&&(delete q.events[L],ct=!0);break}}}ct&&!Object.keys(q.events).length&&p.splice(j,1)}else for(L in q.events)q.events.hasOwnProperty(L)&&A(M,L,"all")}}function I(M,L){for(var G=Gs(L),V=new m_(M),j=g[M.type],q=$u(M)[0],ct=q;P.element(ct);){for(var st=0;st<j.length;st++){var mt=j[st],St=mt.selector,Dt=mt.context;if(X(ct,St)&&et(Dt,q)&&et(Dt,ct)){var wt=mt.listeners;V.currentTarget=ct;for(var Pt=0;Pt<wt.length;Pt++){var Se=wt[Pt];Qn(Se.options,G)&&Se.func(V)}}}ct=yt(ct)}}function D(M){return I(M,!0)}return(c=h.document)==null||c.createElement("div").addEventListener("test",null,{get capture(){return x.supportsOptions=!0},get passive(){return x.supportsPassive=!0}}),h.events=x,x}},gl={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(h){for(var c=0,p=gl.methodOrder;c<p.length;c++){var g=p[c],_=gl[g](h);if(_)return _}return null},simulationResume:function(h){var c=h.pointerType,p=h.eventType,g=h.eventTarget,_=h.scope;if(!/down|start/i.test(p))return null;for(var x=0,T=_.interactions.list;x<T.length;x++){var A=T[x],I=g;if(A.simulation&&A.simulation.allowResume&&A.pointerType===c)for(;I;){if(I===A.element)return A;I=yt(I)}}return null},mouseOrPen:function(h){var c,p=h.pointerId,g=h.pointerType,_=h.eventType,x=h.scope;if(g!=="mouse"&&g!=="pen")return null;for(var T=0,A=x.interactions.list;T<A.length;T++){var I=A[T];if(I.pointerType===g){if(I.simulation&&!pd(I,p))continue;if(I.interacting())return I;c||(c=I)}}if(c)return c;for(var D=0,M=x.interactions.list;D<M.length;D++){var L=M[D];if(!(L.pointerType!==g||/down/i.test(_)&&L.simulation))return L}return null},hasPointer:function(h){for(var c=h.pointerId,p=0,g=h.scope.interactions.list;p<g.length;p++){var _=g[p];if(pd(_,c))return _}return null},idle:function(h){for(var c=h.pointerType,p=0,g=h.scope.interactions.list;p<g.length;p++){var _=g[p];if(_.pointers.length===1){var x=_.interactable;if(x&&(!x.options.gesture||!x.options.gesture.enabled))continue}else if(_.pointers.length>=2)continue;if(!_.interacting()&&c===_.pointerType)return _}return null}};function pd(h,c){return h.pointers.some(function(p){return p.id===c})}var v_=gl,vl=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function fd(h,c){return function(p){var g=c.interactions.list,_=Uu(p),x=$u(p),T=x[0],A=x[1],I=[];if(/^touch/.test(p.type)){c.prevTouchTime=c.now();for(var D=0,M=p.changedTouches;D<M.length;D++){var L=M[D],G={pointer:L,pointerId:Bs(L),pointerType:_,eventType:p.type,eventTarget:T,curEventTarget:A,scope:c},V=md(G);I.push([G.pointer,G.eventTarget,G.curEventTarget,V])}}else{var j=!1;if(!Z.supportsPointerEvent&&/mouse/.test(p.type)){for(var q=0;q<g.length&&!j;q++)j=g[q].pointerType!=="mouse"&&g[q].pointerIsDown;j=j||c.now()-c.prevTouchTime<500||p.timeStamp===0}if(!j){var ct={pointer:p,pointerId:Bs(p),pointerType:_,eventType:p.type,curEventTarget:A,eventTarget:T,scope:c},st=md(ct);I.push([ct.pointer,ct.eventTarget,ct.curEventTarget,st])}}for(var mt=0;mt<I.length;mt++){var St=I[mt],Dt=St[0],wt=St[1],Pt=St[2];St[3][h](Dt,p,wt,Pt)}}}function md(h){var c=h.pointerType,p=h.scope,g={interaction:v_.search(h),searchDetails:h};return p.fire("interactions:find",g),g.interaction||p.interactions.new({pointerType:c})}function yl(h,c){var p=h.doc,g=h.scope,_=h.options,x=g.interactions.docEvents,T=g.events,A=T[c];for(var I in g.browser.isIOS&&!_.events&&(_.events={passive:!1}),T.delegatedEvents)A(p,I,T.delegateListener),A(p,I,T.delegateUseCapture,!0);for(var D=_&&_.events,M=0;M<x.length;M++){var L=x[M];A(p,L.type,L.listener,D)}}var y_={id:"core/interactions",install:function(h){for(var c={},p=0;p<vl.length;p++){var g=vl[p];c[g]=fd(g,h)}var _,x=Z.pEventTypes;function T(){for(var A=0,I=h.interactions.list;A<I.length;A++){var D=I[A];if(D.pointerIsDown&&D.pointerType==="touch"&&!D._interacting)for(var M=function(){var V=G[L];h.documents.some(function(j){return et(j.doc,V.downTarget)})||D.removePointer(V.pointer,V.event)},L=0,G=D.pointers;L<G.length;L++)M()}}(_=F.PointerEvent?[{type:x.down,listener:T},{type:x.down,listener:c.pointerDown},{type:x.move,listener:c.pointerMove},{type:x.up,listener:c.pointerUp},{type:x.cancel,listener:c.pointerUp}]:[{type:"mousedown",listener:c.pointerDown},{type:"mousemove",listener:c.pointerMove},{type:"mouseup",listener:c.pointerUp},{type:"touchstart",listener:T},{type:"touchstart",listener:c.pointerDown},{type:"touchmove",listener:c.pointerMove},{type:"touchend",listener:c.pointerUp},{type:"touchcancel",listener:c.pointerUp}]).push({type:"blur",listener:function(A){for(var I=0,D=h.interactions.list;I<D.length;I++)D[I].documentBlur(A)}}),h.prevTouchTime=0,h.Interaction=function(A){u(D,A);var I=v(D);function D(){return n(this,D),I.apply(this,arguments)}return a(D,[{key:"pointerMoveTolerance",get:function(){return h.interactions.pointerMoveTolerance},set:function(M){h.interactions.pointerMoveTolerance=M}},{key:"_now",value:function(){return h.now()}}]),D}(c_),h.interactions={list:[],new:function(A){A.scopeFire=function(D,M){return h.fire(D,M)};var I=new h.Interaction(A);return h.interactions.list.push(I),I},listeners:c,docEvents:_,pointerMoveTolerance:1},h.usePlugin(rd)},listeners:{"scope:add-document":function(h){return yl(h,"add")},"scope:remove-document":function(h){return yl(h,"remove")},"interactable:unset":function(h,c){for(var p=h.interactable,g=c.interactions.list.length-1;g>=0;g--){var _=c.interactions.list[g];_.interactable===p&&(_.stop(),c.fire("interactions:destroy",{interaction:_}),_.destroy(),c.interactions.list.length>2&&c.interactions.list.splice(g,1))}}},onDocSignal:yl,doOnInteractions:fd,methodNames:vl},__=y_,Zr=function(h){return h[h.On=0]="On",h[h.Off=1]="Off",h}(Zr||{}),b_=function(){function h(c,p,g,_){n(this,h),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new dd,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=p.actions,this.target=c,this._context=p.context||g,this._win=R(he(c)?this._context:c),this._doc=this._win.document,this._scopeEvents=_,this.set(p)}return a(h,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(c,p){return P.func(p.onstart)&&this.on("".concat(c,"start"),p.onstart),P.func(p.onmove)&&this.on("".concat(c,"move"),p.onmove),P.func(p.onend)&&this.on("".concat(c,"end"),p.onend),P.func(p.oninertiastart)&&this.on("".concat(c,"inertiastart"),p.oninertiastart),this}},{key:"updatePerActionListeners",value:function(c,p,g){var _,x=this,T=(_=this._actions.map[c])==null?void 0:_.filterEventType,A=function(I){return(T==null||T(I))&&qn(I,x._actions)};(P.array(p)||P.object(p))&&this._onOff(Zr.Off,c,p,void 0,A),(P.array(g)||P.object(g))&&this._onOff(Zr.On,c,g,void 0,A)}},{key:"setPerAction",value:function(c,p){var g=this._defaults;for(var _ in p){var x=_,T=this.options[c],A=p[x];x==="listeners"&&this.updatePerActionListeners(c,T.listeners,A),P.array(A)?T[x]=Hu(A):P.plainObject(A)?(T[x]=lt(T[x]||{},Ji(A)),P.object(g.perAction[x])&&"enabled"in g.perAction[x]&&(T[x].enabled=A.enabled!==!1)):P.bool(A)&&P.object(g.perAction[x])?T[x].enabled=A:T[x]=A}}},{key:"getRect",value:function(c){return c=c||(P.element(this.target)?this.target:null),P.string(this.target)&&(c=c||this._context.querySelector(this.target)),Kt(c)}},{key:"rectChecker",value:function(c){var p=this;return P.func(c)?(this.getRect=function(g){var _=lt({},c.apply(p,g));return"width"in _||(_.width=_.right-_.left,_.height=_.bottom-_.top),_},this):c===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(c,p){if(he(p)||P.object(p)){for(var g in this.options[c]=p,this._actions.map)this.options[g][c]=p;return this}return this.options[c]}},{key:"origin",value:function(c){return this._backCompatOption("origin",c)}},{key:"deltaSource",value:function(c){return c==="page"||c==="client"?(this.options.deltaSource=c,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var c=this.target;return P.string(c)?Array.from(this._context.querySelectorAll(c)):P.func(c)&&c.getAllElements?c.getAllElements():P.element(c)?[c]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(c){return this._context===c.ownerDocument||et(this._context,c)}},{key:"testIgnoreAllow",value:function(c,p,g){return!this.testIgnore(c.ignoreFrom,p,g)&&this.testAllow(c.allowFrom,p,g)}},{key:"testAllow",value:function(c,p,g){return!c||!!P.element(g)&&(P.string(c)?Ft(g,c,p):!!P.element(c)&&et(c,g))}},{key:"testIgnore",value:function(c,p,g){return!(!c||!P.element(g))&&(P.string(c)?Ft(g,c,p):!!P.element(c)&&et(c,g))}},{key:"fire",value:function(c){return this.events.fire(c),this}},{key:"_onOff",value:function(c,p,g,_,x){P.object(p)&&!P.array(p)&&(_=g,g=null);var T=De(p,g,x);for(var A in T){A==="wheel"&&(A=Z.wheelEvent);for(var I=0,D=T[A];I<D.length;I++){var M=D[I];qn(A,this._actions)?this.events[c===Zr.On?"on":"off"](A,M):P.string(this.target)?this._scopeEvents[c===Zr.On?"addDelegate":"removeDelegate"](this.target,this._context,A,M,_):this._scopeEvents[c===Zr.On?"add":"remove"](this.target,A,M,_)}}return this}},{key:"on",value:function(c,p,g){return this._onOff(Zr.On,c,p,g)}},{key:"off",value:function(c,p,g){return this._onOff(Zr.Off,c,p,g)}},{key:"set",value:function(c){var p=this._defaults;for(var g in P.object(c)||(c={}),this.options=Ji(p.base),this._actions.methodDict){var _=g,x=this._actions.methodDict[_];this.options[_]={},this.setPerAction(_,lt(lt({},p.perAction),p.actions[_])),this[x](c[_])}for(var T in c)T!=="getRect"?P.func(this[T])&&this[T](c[T]):this.rectChecker(c.getRect);return this}},{key:"unset",value:function(){if(P.string(this.target))for(var c in this._scopeEvents.delegatedEvents)for(var p=this._scopeEvents.delegatedEvents[c],g=p.length-1;g>=0;g--){var _=p[g],x=_.selector,T=_.context,A=_.listeners;x===this.target&&T===this._context&&p.splice(g,1);for(var I=A.length-1;I>=0;I--)this._scopeEvents.removeDelegate(this.target,this._context,c,A[I][0],A[I][1])}else this._scopeEvents.remove(this.target,"all")}}]),h}(),x_=function(){function h(c){var p=this;n(this,h),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=c,c.addListeners({"interactable:unset":function(g){var _=g.interactable,x=_.target,T=P.string(x)?p.selectorMap[x]:x[p.scope.id],A=Fs(T,function(I){return I===_});T.splice(A,1)}})}return a(h,[{key:"new",value:function(c,p){p=lt(p||{},{actions:this.scope.actions});var g=new this.scope.Interactable(c,p,this.scope.document,this.scope.events);return this.scope.addDocument(g._doc),this.list.push(g),P.string(c)?(this.selectorMap[c]||(this.selectorMap[c]=[]),this.selectorMap[c].push(g)):(g.target[this.scope.id]||Object.defineProperty(c,this.scope.id,{value:[],configurable:!0}),c[this.scope.id].push(g)),this.scope.fire("interactable:new",{target:c,options:p,interactable:g,win:this.scope._win}),g}},{key:"getExisting",value:function(c,p){var g=p&&p.context||this.scope.document,_=P.string(c),x=_?this.selectorMap[c]:c[this.scope.id];if(x)return Ns(x,function(T){return T._context===g&&(_||T.inContext(c))})}},{key:"forEachMatch",value:function(c,p){for(var g=0,_=this.list;g<_.length;g++){var x=_[g],T=void 0;if((P.string(x.target)?P.element(c)&&X(c,x.target):c===x.target)&&x.inContext(c)&&(T=p(x)),T!==void 0)return T}}}]),h}(),w_=function(){function h(){var c=this;n(this,h),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=Z,this.defaults=Ji(sd),this.Eventable=dd,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(g){var _=function x(T,A){var I=g.interactables.getExisting(T,A);return I||((I=g.interactables.new(T,A)).events.global=x.globalEvents),I};return _.getPointerAverage=Nu,_.getTouchBBox=el,_.getTouchDistance=rl,_.getTouchAngle=il,_.getElementRect=Kt,_.getElementClientRect=se,_.matchesSelector=X,_.closest=ut,_.globalEvents={},_.version="1.10.27",_.scope=g,_.use=function(x,T){return this.scope.usePlugin(x,T),this},_.isSet=function(x,T){return!!this.scope.interactables.get(x,T&&T.context)},_.on=Us(function(x,T,A){if(P.string(x)&&x.search(" ")!==-1&&(x=x.trim().split(/ +/)),P.array(x)){for(var I=0,D=x;I<D.length;I++){var M=D[I];this.on(M,T,A)}return this}if(P.object(x)){for(var L in x)this.on(L,x[L],T);return this}return qn(x,this.scope.actions)?this.globalEvents[x]?this.globalEvents[x].push(T):this.globalEvents[x]=[T]:this.scope.events.add(this.scope.document,x,T,{options:A}),this},"The interact.on() method is being deprecated"),_.off=Us(function(x,T,A){if(P.string(x)&&x.search(" ")!==-1&&(x=x.trim().split(/ +/)),P.array(x)){for(var I=0,D=x;I<D.length;I++){var M=D[I];this.off(M,T,A)}return this}if(P.object(x)){for(var L in x)this.off(L,x[L],T);return this}var G;return qn(x,this.scope.actions)?x in this.globalEvents&&(G=this.globalEvents[x].indexOf(T))!==-1&&this.globalEvents[x].splice(G,1):this.scope.events.remove(this.scope.document,x,T,A),this},"The interact.off() method is being deprecated"),_.debug=function(){return this.scope},_.supportsTouch=function(){return Z.supportsTouch},_.supportsPointerEvent=function(){return Z.supportsPointerEvent},_.stop=function(){for(var x=0,T=this.scope.interactions.list;x<T.length;x++)T[x].stop();return this},_.pointerMoveTolerance=function(x){return P.number(x)?(this.scope.interactions.pointerMoveTolerance=x,this):this.scope.interactions.pointerMoveTolerance},_.addDocument=function(x,T){this.scope.addDocument(x,T)},_.removeDocument=function(x){this.scope.removeDocument(x)},_}(this),this.InteractEvent=fl,this.Interactable=void 0,this.interactables=new x_(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(g){return c.removeDocument(g.target)};var p=this;this.Interactable=function(g){u(x,g);var _=v(x);function x(){return n(this,x),_.apply(this,arguments)}return a(x,[{key:"_defaults",get:function(){return p.defaults}},{key:"set",value:function(T){return y(d(x.prototype),"set",this).call(this,T),p.fire("interactable:set",{options:T,interactable:this}),this}},{key:"unset",value:function(){y(d(x.prototype),"unset",this).call(this);var T=p.interactables.list.indexOf(this);T<0||(p.interactables.list.splice(T,1),p.fire("interactable:unset",{interactable:this}))}}]),x}(b_)}return a(h,[{key:"addListeners",value:function(c,p){this.listenerMaps.push({id:p,map:c})}},{key:"fire",value:function(c,p){for(var g=0,_=this.listenerMaps;g<_.length;g++){var x=_[g].map[c];if(x&&x(p,this,c)===!1)return!1}}},{key:"init",value:function(c){return this.isInitialized?this:function(p,g){return p.isInitialized=!0,P.window(g)&&E(g),F.init(g),Z.init(g),qr.init(g),p.window=g,p.document=g.document,p.usePlugin(__),p.usePlugin(g_),p}(this,c)}},{key:"pluginIsInstalled",value:function(c){var p=c.id;return p?!!this._plugins.map[p]:this._plugins.list.indexOf(c)!==-1}},{key:"usePlugin",value:function(c,p){if(!this.isInitialized)return this;if(this.pluginIsInstalled(c))return this;if(c.id&&(this._plugins.map[c.id]=c),this._plugins.list.push(c),c.install&&c.install(this,p),c.listeners&&c.before){for(var g=0,_=this.listenerMaps.length,x=c.before.reduce(function(A,I){return A[I]=!0,A[gd(I)]=!0,A},{});g<_;g++){var T=this.listenerMaps[g].id;if(T&&(x[T]||x[gd(T)]))break}this.listenerMaps.splice(g,0,{id:c.id,map:c.listeners})}else c.listeners&&this.listenerMaps.push({id:c.id,map:c.listeners});return this}},{key:"addDocument",value:function(c,p){if(this.getDocIndex(c)!==-1)return!1;var g=R(c);p=p?lt({},p):{},this.documents.push({doc:c,options:p}),this.events.documents.push(c),c!==this.document&&this.events.add(g,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:c,window:g,scope:this,options:p})}},{key:"removeDocument",value:function(c){var p=this.getDocIndex(c),g=R(c),_=this.documents[p].options;this.events.remove(g,"unload",this.onWindowUnload),this.documents.splice(p,1),this.events.documents.splice(p,1),this.fire("scope:remove-document",{doc:c,window:g,scope:this,options:_})}},{key:"getDocIndex",value:function(c){for(var p=0;p<this.documents.length;p++)if(this.documents[p].doc===c)return p;return-1}},{key:"getDocOptions",value:function(c){var p=this.getDocIndex(c);return p===-1?null:this.documents[p].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),h}();function gd(h){return h&&h.replace(/\/.*$/,"")}var vd=new w_,Ee=vd.interactStatic,T_=typeof globalThis<"u"?globalThis:window;vd.init(T_);var E_=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(h){var c=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(g){var _=g[0],x=g[1];return _ in h||x in h}),p=function(g,_){for(var x=h.range,T=h.limits,A=T===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:T,I=h.offset,D=I===void 0?{x:0,y:0}:I,M={range:x,grid:h,x:null,y:null},L=0;L<c.length;L++){var G=c[L],V=G[0],j=G[1],q=Math.round((g-D.x)/h[V]),ct=Math.round((_-D.y)/h[j]);M[V]=Math.max(A.left,Math.min(A.right,q*h[V]+D.x)),M[j]=Math.max(A.top,Math.min(A.bottom,ct*h[j]+D.y))}return M};return p.grid=h,p.coordFields=c,p}}),S_={id:"snappers",install:function(h){var c=h.interactStatic;c.snappers=lt(c.snappers||{},E_),c.createSnapGrid=c.snappers.grid}},A_=S_,C_={start:function(h){var c=h.state,p=h.rect,g=h.edges,_=h.pageCoords,x=c.options,T=x.ratio,A=x.enabled,I=c.options,D=I.equalDelta,M=I.modifiers;T==="preserve"&&(T=p.width/p.height),c.startCoords=lt({},_),c.startRect=lt({},p),c.ratio=T,c.equalDelta=D;var L=c.linkedEdges={top:g.top||g.left&&!g.bottom,left:g.left||g.top&&!g.right,bottom:g.bottom||g.right&&!g.top,right:g.right||g.bottom&&!g.left};if(c.xIsPrimaryAxis=!(!g.left&&!g.right),c.equalDelta){var G=(L.left?1:-1)*(L.top?1:-1);c.edgeSign={x:G,y:G}}else c.edgeSign={x:L.left?-1:1,y:L.top?-1:1};if(A!==!1&&lt(g,L),M!=null&&M.length){var V=new pl(h.interaction);V.copyFrom(h.interaction.modification),V.prepareStates(M),c.subModification=V,V.startAll(i({},h))}},set:function(h){var c=h.state,p=h.rect,g=h.coords,_=c.linkedEdges,x=lt({},g),T=c.equalDelta?P_:I_;if(lt(h.edges,_),T(c,c.xIsPrimaryAxis,g,p),!c.subModification)return null;var A=lt({},p);Te(_,A,{x:g.x-x.x,y:g.y-x.y});var I=c.subModification.setAll(i(i({},h),{},{rect:A,edges:_,pageCoords:g,prevCoords:g,prevRect:A})),D=I.delta;return I.changed&&(T(c,Math.abs(D.x)>Math.abs(D.y),I.coords,I.rect),lt(g,I.coords)),I.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function P_(h,c,p){var g=h.startCoords,_=h.edgeSign;c?p.y=g.y+(p.x-g.x)*_.y:p.x=g.x+(p.y-g.y)*_.x}function I_(h,c,p,g){var _=h.startRect,x=h.startCoords,T=h.ratio,A=h.edgeSign;if(c){var I=g.width/T;p.y=x.y+(I-_.height)*A.y}else{var D=g.height*T;p.x=x.x+(D-_.width)*A.x}}var R_=Kr(C_,"aspectRatio"),yd=function(){};yd._defaults={};var Jn=yd;function wi(h,c,p){return P.func(h)?Gt(h,c.interactable,c.element,[p.x,p.y,c]):Gt(h,c.interactable,c.element)}var to={start:function(h){var c=h.rect,p=h.startOffset,g=h.state,_=h.interaction,x=h.pageCoords,T=g.options,A=T.elementRect,I=lt({left:0,top:0,right:0,bottom:0},T.offset||{});if(c&&A){var D=wi(T.restriction,_,x);if(D){var M=D.right-D.left-c.width,L=D.bottom-D.top-c.height;M<0&&(I.left+=M,I.right+=M),L<0&&(I.top+=L,I.bottom+=L)}I.left+=p.left-c.width*A.left,I.top+=p.top-c.height*A.top,I.right+=p.right-c.width*(1-A.right),I.bottom+=p.bottom-c.height*(1-A.bottom)}g.offset=I},set:function(h){var c=h.coords,p=h.interaction,g=h.state,_=g.options,x=g.offset,T=wi(_.restriction,p,c);if(T){var A=function(I){return!I||"left"in I&&"top"in I||((I=lt({},I)).left=I.x||0,I.top=I.y||0,I.right=I.right||I.left+I.width,I.bottom=I.bottom||I.top+I.height),I}(T);c.x=Math.max(Math.min(A.right-x.right,c.x),A.left+x.left),c.y=Math.max(Math.min(A.bottom-x.bottom,c.y),A.top+x.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},M_=Kr(to,"restrict"),_d={top:1/0,left:1/0,bottom:-1/0,right:-1/0},bd={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function xd(h,c){for(var p=0,g=["top","left","bottom","right"];p<g.length;p++){var _=g[p];_ in h||(h[_]=c[_])}return h}var Hs={noInner:_d,noOuter:bd,start:function(h){var c,p=h.interaction,g=h.startOffset,_=h.state,x=_.options;x&&(c=Wt(wi(x.offset,p,p.coords.start.page))),c=c||{x:0,y:0},_.offset={top:c.y+g.top,left:c.x+g.left,bottom:c.y-g.bottom,right:c.x-g.right}},set:function(h){var c=h.coords,p=h.edges,g=h.interaction,_=h.state,x=_.offset,T=_.options;if(p){var A=lt({},c),I=wi(T.inner,g,A)||{},D=wi(T.outer,g,A)||{};xd(I,_d),xd(D,bd),p.top?c.y=Math.min(Math.max(D.top+x.top,A.y),I.top+x.top):p.bottom&&(c.y=Math.max(Math.min(D.bottom+x.bottom,A.y),I.bottom+x.bottom)),p.left?c.x=Math.min(Math.max(D.left+x.left,A.x),I.left+x.left):p.right&&(c.x=Math.max(Math.min(D.right+x.right,A.x),I.right+x.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},k_=Kr(Hs,"restrictEdges"),D_=lt({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(h){}},to.defaults),O_=Kr({start:to.start,set:to.set,defaults:D_},"restrictRect"),L_={width:-1/0,height:-1/0},B_={width:1/0,height:1/0},F_=Kr({start:function(h){return Hs.start(h)},set:function(h){var c=h.interaction,p=h.state,g=h.rect,_=h.edges,x=p.options;if(_){var T=Qt(wi(x.min,c,h.coords))||L_,A=Qt(wi(x.max,c,h.coords))||B_;p.options={endOnly:x.endOnly,inner:lt({},Hs.noInner),outer:lt({},Hs.noOuter)},_.top?(p.options.inner.top=g.bottom-T.height,p.options.outer.top=g.bottom-A.height):_.bottom&&(p.options.inner.bottom=g.top+T.height,p.options.outer.bottom=g.top+A.height),_.left?(p.options.inner.left=g.right-T.width,p.options.outer.left=g.right-A.width):_.right&&(p.options.inner.right=g.left+T.width,p.options.outer.right=g.left+A.width),Hs.set(h),p.options=x}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),_l={start:function(h){var c,p=h.interaction,g=h.interactable,_=h.element,x=h.rect,T=h.state,A=h.startOffset,I=T.options,D=I.offsetWithOrigin?function(G){var V=G.interaction.element,j=Wt(Gt(G.state.options.origin,null,null,[V])),q=j||we(G.interactable,V,G.interaction.prepared.name);return q}(h):{x:0,y:0};if(I.offset==="startCoords")c={x:p.coords.start.page.x,y:p.coords.start.page.y};else{var M=Gt(I.offset,g,_,[p]);(c=Wt(M)||{x:0,y:0}).x+=D.x,c.y+=D.y}var L=I.relativePoints;T.offsets=x&&L&&L.length?L.map(function(G,V){return{index:V,relativePoint:G,x:A.left-x.width*G.x+c.x,y:A.top-x.height*G.y+c.y}}):[{index:0,relativePoint:null,x:c.x,y:c.y}]},set:function(h){var c=h.interaction,p=h.coords,g=h.state,_=g.options,x=g.offsets,T=we(c.interactable,c.element,c.prepared.name),A=lt({},p),I=[];_.offsetWithOrigin||(A.x-=T.x,A.y-=T.y);for(var D=0,M=x;D<M.length;D++)for(var L=M[D],G=A.x-L.x,V=A.y-L.y,j=0,q=_.targets.length;j<q;j++){var ct=_.targets[j],st=void 0;(st=P.func(ct)?ct(G,V,c._proxy,L,j):ct)&&I.push({x:(P.number(st.x)?st.x:G)+L.x,y:(P.number(st.y)?st.y:V)+L.y,range:P.number(st.range)?st.range:_.range,source:ct,index:j,offset:L})}for(var mt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},St=0;St<I.length;St++){var Dt=I[St],wt=Dt.range,Pt=Dt.x-A.x,Se=Dt.y-A.y,Zt=cr(Pt,Se),Oe=Zt<=wt;wt===1/0&&mt.inRange&&mt.range!==1/0&&(Oe=!1),mt.target&&!(Oe?mt.inRange&&wt!==1/0?Zt/wt<mt.distance/mt.range:wt===1/0&&mt.range!==1/0||Zt<mt.distance:!mt.inRange&&Zt<mt.distance)||(mt.target=Dt,mt.distance=Zt,mt.range=wt,mt.inRange=Oe,mt.delta.x=Pt,mt.delta.y=Se)}return mt.inRange&&(p.x=mt.target.x,p.y=mt.target.y),g.closest=mt,mt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},N_=Kr(_l,"snap"),eo={start:function(h){var c=h.state,p=h.edges,g=c.options;if(!p)return null;h.state={options:{targets:null,relativePoints:[{x:p.left?0:1,y:p.top?0:1}],offset:g.offset||"self",origin:{x:0,y:0},range:g.range}},c.targetFields=c.targetFields||[["width","height"],["x","y"]],_l.start(h),c.offsets=h.state.offsets,h.state=c},set:function(h){var c=h.interaction,p=h.state,g=h.coords,_=p.options,x=p.offsets,T={x:g.x-x[0].x,y:g.y-x[0].y};p.options=lt({},_),p.options.targets=[];for(var A=0,I=_.targets||[];A<I.length;A++){var D=I[A],M=void 0;if(M=P.func(D)?D(T.x,T.y,c):D){for(var L=0,G=p.targetFields;L<G.length;L++){var V=G[L],j=V[0],q=V[1];if(j in M||q in M){M.x=M[j],M.y=M[q];break}}p.options.targets.push(M)}}var ct=_l.set(h);return p.options=_,ct},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},U_=Kr(eo,"snapSize"),bl={aspectRatio:R_,restrictEdges:k_,restrict:M_,restrictRect:O_,restrictSize:F_,snapEdges:Kr({start:function(h){var c=h.edges;return c?(h.state.targetFields=h.state.targetFields||[[c.left?"left":"right",c.top?"top":"bottom"]],eo.start(h)):null},set:eo.set,defaults:lt(Ji(eo.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:N_,snapSize:U_,spring:Jn,avoid:Jn,transform:Jn,rubberband:Jn},$_={id:"modifiers",install:function(h){var c=h.interactStatic;for(var p in h.usePlugin(id),h.usePlugin(A_),c.modifiers=bl,bl){var g=bl[p],_=g._defaults,x=g._methods;_._methods=x,h.defaults.perAction[p]=_}}},G_=$_,wd=function(h){u(p,h);var c=v(p);function p(g,_,x,T,A,I){var D;if(n(this,p),jn(m(D=c.call(this,A)),x),x!==_&&jn(m(D),_),D.timeStamp=I,D.originalEvent=x,D.type=g,D.pointerId=Bs(_),D.pointerType=Uu(_),D.target=T,D.currentTarget=null,g==="tap"){var M=A.getPointerIndex(_);D.dt=D.timeStamp-A.pointers[M].downTime;var L=D.timeStamp-A.tapTime;D.double=!!A.prevTap&&A.prevTap.type!=="doubletap"&&A.prevTap.target===D.target&&L<500}else g==="doubletap"&&(D.dt=_.timeStamp-A.tapTime,D.double=!0);return D}return a(p,[{key:"_subtractOrigin",value:function(g){var _=g.x,x=g.y;return this.pageX-=_,this.pageY-=x,this.clientX-=_,this.clientY-=x,this}},{key:"_addOrigin",value:function(g){var _=g.x,x=g.y;return this.pageX+=_,this.pageY+=x,this.clientX+=_,this.clientY+=x,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),p}(Xn),zs={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(h){h.pointerEvents=zs,h.defaults.actions.pointerEvents=zs.defaults,lt(h.actions.phaselessTypes,zs.types)},listeners:{"interactions:new":function(h){var c=h.interaction;c.prevTap=null,c.tapTime=0},"interactions:update-pointer":function(h){var c=h.down,p=h.pointerInfo;!c&&p.hold||(p.hold={duration:1/0,timeout:null})},"interactions:move":function(h,c){var p=h.interaction,g=h.pointer,_=h.event,x=h.eventTarget;h.duplicate||p.pointerIsDown&&!p.pointerWasMoved||(p.pointerIsDown&&xl(h),Qr({interaction:p,pointer:g,event:_,eventTarget:x,type:"move"},c))},"interactions:down":function(h,c){(function(p,g){for(var _=p.interaction,x=p.pointer,T=p.event,A=p.eventTarget,I=p.pointerIndex,D=_.pointers[I].hold,M=oe(A),L={interaction:_,pointer:x,event:T,eventTarget:A,type:"hold",targets:[],path:M,node:null},G=0;G<M.length;G++){var V=M[G];L.node=V,g.fire("pointerEvents:collect-targets",L)}if(L.targets.length){for(var j=1/0,q=0,ct=L.targets;q<ct.length;q++){var st=ct[q].eventable.options.holdDuration;st<j&&(j=st)}D.duration=j,D.timeout=setTimeout(function(){Qr({interaction:_,eventTarget:A,pointer:x,event:T,type:"hold"},g)},j)}})(h,c),Qr(h,c)},"interactions:up":function(h,c){xl(h),Qr(h,c),function(p,g){var _=p.interaction,x=p.pointer,T=p.event,A=p.eventTarget;_.pointerWasMoved||Qr({interaction:_,eventTarget:A,pointer:x,event:T,type:"tap"},g)}(h,c)},"interactions:cancel":function(h,c){xl(h),Qr(h,c)}},PointerEvent:wd,fire:Qr,collectEventTargets:Td,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Qr(h,c){var p=h.interaction,g=h.pointer,_=h.event,x=h.eventTarget,T=h.type,A=h.targets,I=A===void 0?Td(h,c):A,D=new wd(T,g,_,x,p,c.now());c.fire("pointerEvents:new",{pointerEvent:D});for(var M={interaction:p,pointer:g,event:_,eventTarget:x,targets:I,type:T,pointerEvent:D},L=0;L<I.length;L++){var G=I[L];for(var V in G.props||{})D[V]=G.props[V];var j=we(G.eventable,G.node);if(D._subtractOrigin(j),D.eventable=G.eventable,D.currentTarget=G.node,G.eventable.fire(D),D._addOrigin(j),D.immediatePropagationStopped||D.propagationStopped&&L+1<I.length&&I[L+1].node!==D.currentTarget)break}if(c.fire("pointerEvents:fired",M),T==="tap"){var q=D.double?Qr({interaction:p,pointer:g,event:_,eventTarget:x,type:"doubletap"},c):D;p.prevTap=q,p.tapTime=q.timeStamp}return D}function Td(h,c){var p=h.interaction,g=h.pointer,_=h.event,x=h.eventTarget,T=h.type,A=p.getPointerIndex(g),I=p.pointers[A];if(T==="tap"&&(p.pointerWasMoved||!I||I.downTarget!==x))return[];for(var D=oe(x),M={interaction:p,pointer:g,event:_,eventTarget:x,type:T,path:D,targets:[],node:null},L=0;L<D.length;L++){var G=D[L];M.node=G,c.fire("pointerEvents:collect-targets",M)}return T==="hold"&&(M.targets=M.targets.filter(function(V){var j,q;return V.eventable.options.holdDuration===((j=p.pointers[A])==null||(q=j.hold)==null?void 0:q.duration)})),M.targets}function xl(h){var c=h.interaction,p=h.pointerIndex,g=c.pointers[p].hold;g&&g.timeout&&(clearTimeout(g.timeout),g.timeout=null)}var H_=Object.freeze({__proto__:null,default:zs});function z_(h){var c=h.interaction;c.holdIntervalHandle&&(clearInterval(c.holdIntervalHandle),c.holdIntervalHandle=null)}var j_={id:"pointer-events/holdRepeat",install:function(h){h.usePlugin(zs);var c=h.pointerEvents;c.defaults.holdRepeatInterval=0,c.types.holdrepeat=h.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(h,c){return h["pointerEvents:".concat(c)]=z_,h},{"pointerEvents:new":function(h){var c=h.pointerEvent;c.type==="hold"&&(c.count=(c.count||0)+1)},"pointerEvents:fired":function(h,c){var p=h.interaction,g=h.pointerEvent,_=h.eventTarget,x=h.targets;if(g.type==="hold"&&x.length){var T=x[0].eventable.options.holdRepeatInterval;T<=0||(p.holdIntervalHandle=setTimeout(function(){c.pointerEvents.fire({interaction:p,eventTarget:_,type:"hold",pointer:g,event:g},c)},T))}}})},V_=j_,W_={id:"pointer-events/interactableTargets",install:function(h){var c=h.Interactable;c.prototype.pointerEvents=function(g){return lt(this.events.options,g),this};var p=c.prototype._backCompatOption;c.prototype._backCompatOption=function(g,_){var x=p.call(this,g,_);return x===this&&(this.events.options[g]=_),x}},listeners:{"pointerEvents:collect-targets":function(h,c){var p=h.targets,g=h.node,_=h.type,x=h.eventTarget;c.interactables.forEachMatch(g,function(T){var A=T.events,I=A.options;A.types[_]&&A.types[_].length&&T.testIgnoreAllow(I,g,x)&&p.push({node:g,eventable:A,props:{interactable:T}})})},"interactable:new":function(h){var c=h.interactable;c.events.getRect=function(p){return c.getRect(p)}},"interactable:set":function(h,c){var p=h.interactable,g=h.options;lt(p.events.options,c.pointerEvents.defaults),lt(p.events.options,g.pointerEvents||{})}}},X_=W_,Y_={id:"pointer-events",install:function(h){h.usePlugin(H_),h.usePlugin(V_),h.usePlugin(X_)}},q_=Y_,K_={id:"reflow",install:function(h){var c=h.Interactable;h.actions.phases.reflow=!0,c.prototype.reflow=function(p){return function(g,_,x){for(var T=g.getAllElements(),A=x.window.Promise,I=A?[]:null,D=function(){var L=T[M],G=g.getRect(L);if(!G)return 1;var V,j=Ns(x.interactions.list,function(st){return st.interacting()&&st.interactable===g&&st.element===L&&st.prepared.name===_.name});if(j)j.move(),I&&(V=j._reflowPromise||new A(function(st){j._reflowResolve=st}));else{var q=Qt(G),ct=function(st){return{coords:st,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:q.x,y:q.y},client:{x:q.x,y:q.y},timeStamp:x.now()});V=function(st,mt,St,Dt,wt){var Pt=st.interactions.new({pointerType:"reflow"}),Se={interaction:Pt,event:wt,pointer:wt,eventTarget:St,phase:"reflow"};Pt.interactable=mt,Pt.element=St,Pt.prevEvent=wt,Pt.updatePointer(wt,wt,St,!0),Lu(Pt.coords.delta),cl(Pt.prepared,Dt),Pt._doPhase(Se);var Zt=st.window,Oe=Zt.Promise,We=Oe?new Oe(function(kr){Pt._reflowResolve=kr}):void 0;return Pt._reflowPromise=We,Pt.start(Dt,mt,St),Pt._interacting?(Pt.move(Se),Pt.end(wt)):(Pt.stop(),Pt._reflowResolve()),Pt.removePointer(wt,wt),We}(x,g,L,_,ct)}I&&I.push(V)},M=0;M<T.length&&!D();M++);return I&&A.all(I).then(function(){return g})}(this,p,h)}},listeners:{"interactions:stop":function(h,c){var p=h.interaction;p.pointerType==="reflow"&&(p._reflowResolve&&p._reflowResolve(),function(g,_){g.splice(g.indexOf(_),1)}(c.interactions.list,p))}}},Z_=K_;if(Ee.use(rd),Ee.use(ld),Ee.use(q_),Ee.use(f_),Ee.use(G_),Ee.use(r_),Ee.use(Vy),Ee.use(Xy),Ee.use(Z_),Ee.default=Ee,s(r)==="object"&&r)try{r.exports=Ee}catch{}return Ee.default=Ee,Ee})})(ga,ga.exports);var LR=ga.exports;const BR=Xh(LR),FR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABmCAMAAABBXBeAAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvdQTFRFAAAAAAAAAgICAwMDDQsLDg0NCgkJAwICAAAACAcHBwYGFRISQyMecTYtAQAADAsLEQ8PNzU1WVVUaGhob29vdHR0bWpqVVBPJSQkERAQBgUFGBYWEBAQDQsLSkpKkZGRzMzM5OPk9PPz/////fv76enpzs7OpaWlZWVlMjAwExISDg0NAwEBHh4eBQUFBAQESEVEqKio9vb2//7+2dnZYGBgBAQEAgICDgoKKigoh4eH1tXV4ODgAQEBBgICGxkaOTk57e3t+Pj4/v39tLS0xsbGQD4+FBMTCAgIGxISGxgYq6ur/Pr63NzcoaGhmZmZAAAAEg8Pv7+/0tLSlJSUjY2NFRQUFBQUAwAADQwMLx8fISAg8fHxubm5iYmJSC8uBQUFDgwM6+vrenp6g4KCBAEBr6+vFhUVwbKy5+fnnZ2dHRwcybu65tjY6t3c8eno+PT0XFxct6mp5NbV4dPR4dHQ6NnZ9vDwYmJiQkJCGhgXsKWk5tbW4M/P6t/e+vb2DAsLAgEB18PD49TT38zL49PS387N3MjK+/j4zMrKFxYW4cXRZGRk+PHzFxUV0L282tra7uTjFxUVGhkZeXBvFxcXICAgTkBB6Nvb7+Dg9e7skYiHAAAA1L2/2tTU7OLhraGgMCsq08jHFhQUl42LCwoKw7W1BQQE8OflKyIhDgsLpJuagnp48uvpopeWdGtpt6KhqpOSwKWkt5iXrZCOBwcHjGJhgFJQfD87ejcwbTErXCgjYysmdjYujU1KpoJ/YFlYi4B/zra0nmZmfTgxVScig0A6jUE3XiwncjQtfzsyajg1mE5IoFFJpk9BikI2r1RFslZGaTIplUc6ok0/ikdAal5eGwkJgz0zfDsxqlJDkUQ5k0Q5gjsyMxYUiEA1mUg8KBEOhT00ai8pZi4oAwICdDUtBgECQx0bTiIeq1JDnUk9gElGo3Nxi1ZVxampn4B8q42JjnZz2MrJl3x59evqknp3KioqqYmFnJKQDAwMERERhYWFx3P0eAAAAP10Uk5TABA6b6nR6/v//9W8sm8W5vv7//////////9ioe3/////////////////3nkmuPn/////////V0il/////yEzh//////////nQpX///////8cjv//////dQaAif////+hLsn///8L/8P////////////////////////M///////xTf//////////mf///67////Tqv/bUv//////Hv///////7b/a//v///f//////////////X//////////////////////////////////////////////////////////////4X//////////////////////4T//5Ut/xDIcLIAAAotSURBVHic7Zh7VBNnFsDvNxNIJoHMJDRIWCwvNeHhAj7AR5Fqz/qoumK1bba4LdZiT5+7x3ZtD92j7dlt6+LWdte6e1Zqq60Ubeu2i325LRa1SqUVEAIEEBJQwCCQZHgkATKzE94hMyk5/rv3j0zm5s4v93vcxzcIhASNCfeNxbhrr6Cl25hfLe+XiJwAkhGO+8MKoBiQtfuFwdSoC1Tjzkx4ZoQYVMvOFJOIUIOG+3+FzUNNcUPTs2JN2UwwKBVVoBSE7DYvUwzYsPo+Fl9w4ecwK9CtZo3CGNM63SwSWqIQGIEb1vkM9LVPTOLss2jVlUWozsuKCtdjUTKkd3+fVQ6/9BrYJCYTNTVEz2uzeHsMEBeIKlEyKh+5iVYWbTopgNGhC13RTLjXaEaF7L+zOY6AUQwkX7Te9yEvJpxq3tJHC0AAljoll+J65lwElGTuAFC7Kh485o3JRuUNoYGMEAQgA7UYI2NqzUDOll/i7tXdRk8Oh8np+hLLMnQIQ7i1ttxXTKbUmYFdWU67FQrNKY9xoZzrkSejltywm3xhVn8XayCvzzXD0q8fOLO6ysxCkvqIckpooLSrKQsRYrm9fs1utVKU1cqDYTJLaLJ1nhnurF6udyVd5/ZmWJP1Pln+BCa9O0qLBgMRYnAH8VNLpCBmacR5M2QULdcnKZrda8Ho3txVpJ+YG7kD3+UAIOxSLgIL+CNPvbiEziC7L8LqU0v10RWbzrmVkVV9L6K94xhYcVn5G+5COFl5/7d8voxisA0chqHv0t9z3jW2qMNmDXVuHANpV1fdKQMKOQN6TvNPcfycEprJvFEO6rq79Nqmlf8d0y/71hJyb/4YBh78T0qSTInQQIV3OHli4hs1eu38kxjkHI42cT/sPGp85DA7vovz9qQkzXbIzRUmYYx68b9FoNA1nxFt/r4DItd/OWKrUJ7f9TY9htGl5lIvAGO6xD818ExLCR0/p1kPya3qGpE8rBa2Kb8Z9Xz1F515f6THYkq3/A/RT7UWC1BGMIp05xnAyWE6oSPrIGyUO0OHRrbNUtU/30ATEU4egzfzMB+YsNSmGth5s8GQ0MFaYKMWOboj8kb2x5JT4ol8I3/9uV+X4T4wya3DNCRF9hdzGNa61YXFNFK3EDq984AtY9Nk2kq7uqPypg8MToYaYNkd1cY1P7KkaUNYF7f1CQcVuseC/+2xScyKMmpxrQBGkV5Cu1Qc5h5Z16U1P2adNj0bZBDbgTJ/bNMML8ufkkSxwJScVwUxDQaXKqUYtPNaribGfS+2Ps0YwQ7z0ePiXe548PAm75hJGLPT8pMREmL1zSnfPdAA91sGrKz2ech/aiT/TMVsUYgEgkGR3l+8E//aCGvEX7iG+9aVxmnm3Yo6VMG+mzVqMInJLty63vnnyUcp61RMtRHHIoyQGHPBIl9YbnvSrMm1wWTFmsQkvrT7fkVA/iQGYBxE9dwz93CY4d5LsCam9hwTLjG9Wpb2CORJHwMvjPydhz9oVL89+miUO3tRbo7bKcqi1Jaq65ObISymrYVTbVR9bICQ9snkNKVqikTHLyvMn0+fl5HBRZmADJl9bgwN6xn2iEfJm4Ip2EE+TcOS3Z7TMgVGUaZRzgZVfJbuvak/T8GssGpDxVLxLS9/JlmjCf+FTkz+fGyNAAZkrkK9VSoOPsifkMdlazBYig26o0KYV17DdsyyYuQdBoHtMyIbVOBg3z3wkMd/efQ3Mpf2V3KrkrUuOi6QTSFuy012wH7ctk58QhCTuHVfYSnJAE1aFvOD8gysjYGUnBc+0XvoPbutVGd94XcSFygR44iVlym+aYk0AaU2sO4Vsm1Iv9XDoB7QPst6TrBX75fQBOR+e1OgGHOAGLMTRPRIQ8tccFLW+EYpSHoALflTff4XJ3xiIDx/y6rNrRE1cqScg4812MMIY0Sot1LE9gAsDF8LOE6DbwysKMXhX1Gfb0T9QU5JfxDXoVsDYZBCQ4Fdg1cG+tc8adGEkyemP+XdF+uq9z4M0e9bMAqhLq7H5tphhhX1Bdt6WTby5SLIK7js9Qxvly4PsjIVnCMOIKxyJxDGUAwIC1dVUTybfXp9Ps8j/GeG7MK6XpdTaUe4jOljqU4QQUCARRyiGXqUDyKESa2q73W5FM6BQDlCJnVXr9YJTWRowJyVX/HaC2DaYiuGiF6liMWHB264wpFE6kTgCHJp1n3qDwYr2G5ExrCbMsoxIDVpbcGWAXZWQMcsYrt3n+8Dw9W++mtBEmCdv3B29CdXMTKYO3SdMG9KjvJaa1+Y1KpiFbL3u2Jq2SAV2wzRVOeAaigIle/jOb4IY9pia11d/ayGhiGpogOXOZ2sPQIkvZmkX5i0z6JbMDOB9btcJM3iWEdcLcy308plbfz2gt4Yq1OugyVYSdq6aGkgO9y3oD2ciTyS5Rdme2Gx9JYWoL2XUHfbtC5ph8ocJAouDvpprx8Y3VfOMgZnhyFQ1BqK1A67g0DdEcTfpXszSqcHty9MEbPqLcocchMnUOtsOy4KqoHFuQ0toKyenrB8DirN3lAsCXHQoVJUTrkAD5ehfZ9wembxZxI+dwQwUJB3ojWuDte2QbhBW7vofevxUf3yj3hnWQiT+NKjp9JQZTB0L0J7E/dP6F1mnYgnyIUw2eWNHegCpLPwHka0HZ/QZ5QG6HmOgUKYFZdDa85zlWsBVniNsqZVXbGPnZCU1d7HZx/eFCobSzjK27/fgzFA0LERZU6S+N5usvV5nZ59YDIffLT7rGzBod8doBmqE8XXphClCfvi7Sa610LMHKMzVRauEuc9d8DGck0JLgmZFQBc+SMW3ijwBwOvvP7mQ1fb9Q53xaewnrniSq4UxtaQRQYlz1scQYwcDZ644mDG+gYKY6w42MnBgDdO/eW8HxguyKXbZvWM31GY++UFO/+js3wz7AOTLj1ny52mk1Sc3f8Mn7EwBl451XBmwctTbRO/LNp/kTcZ+8BAmsEZ/VS4Y+NbIxtPGfcEPTehkN/UFwbe2XtHPSj2FVw9+cChH+C9AXESz+z+PIaLiccPVh3JdhuVF8ZdvNamF7D7GYzbIv+YZdH7f82Vbkv/7YvF/IVhBpgx+SAnctjW9wjjTyvAI+kvflin6Obdwv5gYFC+sTyms3aL3wvuKUPBoQFRrp4FR28Pg+Tb5h5M+ZwOvD0M5O2Jo1d3f5o986aNV/CANfqoVDHvmvuBSWjaUAF3H1/J1yn5gdn81eoaGKZ2+1OnvEWXmvtwMSSasnbfFibnqGgrd/R9lzfh+IHJ3EFgt49ZW/JEETfPLV18DdfMMdtP3NXMnbJb1/K1xjPGpFYFkdzl7gLe4JwxJreykWsBsN5Qii8DzhSztr3d7Yy8LuaGP23SdElo6tNwl6HO2wvNQblU4X55qbq9RFGwQ7Xu2+XdZzfzV5iZYnKwYyjtBxCodjNfqcwfkfLxf/B2s/5gQNdmaeVtrf3D+JT/Y4Tlf5EfDd6dTIMdAAAAAElFTkSuQmCC",NR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAMeBAMAAABSNW+wAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFQTFRFAAAABgECvkk+AAAABAEBAAAABQUFAgIClTgwAgICBgIC3qD5uQAAAAt0Uk5TAP///wseLjr/SDP8D1UBAAABOElEQVR4nO3QsQnCABRFUQMOYGdhpRu4ihO4jbULuoHBDZLaCCeNCML95ePAhztsFjfsptdy+jDHcd2cH+vm9PzOr3809bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj83P+mwvh/39dn0fZ/YJP3nrYpeJAAAAAElFTkSuQmCC",UR=["src"],$R=["src"],GR=It({__name:"SakuraScrollToTop",props:{height:{default:600},position:{default:.9},mass:{default:2},gravity:{},friction:{},floatAmplitude:{default:1.3},floatSpeed:{default:.03}},setup(r){const t=r,{y:e}=du(),{width:i}=Yx(),{toTop:s}=cy();let n,o;const a=[],l=[];let u=null,d=!1;const f=_t(),m=_t(),v=_t(),y=_t(!1);class b{constructor(P,O,U=!1,$=1,Y=15,H=.9){this.x=P,this.y=O,this.oldX=P,this.oldY=O,this.fixed=U,this.mass=$,this.gravity=Y,this.friction=H,this.el=U?m.value:f.value,BR(this.el).draggable({}).on("dragstart",()=>{u=this,d=!0}).on("dragmove",B=>{d&&(n=B.clientX,o=B.clientY)}).on("dragend",()=>{u&&y.value&&s(),u=null,d=!1})}update(){if(!this.fixed){const P=this.x,O=this.y;this.x+=(this.x-this.oldX)*this.friction,this.y+=(this.y-this.oldY)*this.friction+this.gravity,this.oldX=P,this.oldY=O}this.updateElement()}updateElement(){this.el.style.left=`${this.x}px`,this.el.style.top=`${this.y-20}px`}reset(){this.x=0,this.y=0}}class w{constructor(P,O){this.n1=P,this.n2=O;const U=P.x-O.x,$=P.y-O.y;this.dist=Math.sqrt(U*U+$*$),this.el=v.value}solve(){let P=this.n1.x-this.n2.x,O=this.n1.y-this.n2.y;const $=.5*(Math.sqrt(P*P+O*O)-this.dist)/this.dist;P*=$,O*=$;const Y=this.n1.mass+this.n2.mass,H=this.n1.mass/Y,B=this.n2.mass/Y;this.n1.fixed||(this.n1.x-=P*B,this.n1.y-=O*B),this.n2.fixed||(this.n2.x+=P*H,this.n2.y+=O*H),this.updateElement()}updateElement(){const P=this.n1.x,O=this.n1.y,U=this.n2.x,$=this.n2.y,Y=Math.sqrt((U-P)**2+($-O)**2),H=Math.atan2(-(U-P),$-O)*180/Math.PI;this.el.style.height=`${Y}px`,this.el.style.left=`${P}px`,this.el.style.top=`${O}px`,this.el.style.transform=`rotate(${H}deg)`}}function S(){const{height:N,position:P,mass:O,gravity:U,friction:$}=t,Y=new b(i.value*P,-100,!0),H=new b(i.value*P+N,-100,!1,O,U,$),B=new w(Y,H);a.push(Y),a.push(H),l.push(B),requestAnimationFrame(E)}let C=0;function E(){for(const N of a)N.update();u&&(u.x+=(n-u.x)*.6,u.y+=(o-u.y)*.6);for(const N of l)N.solve(),N.updateElement();d||(C+=t.floatSpeed,a[1].y+=Math.sin(C)*t.floatAmplitude),requestAnimationFrame(E)}function R(){for(const N of l)N.updateElement()}qt([e,i],([N,P])=>{var O;if(N>200)if(P<=Ox.lg)y.value=!1;else{if(y.value===!0)return;(O=a[1])==null||O.reset(),y.value=!0}else y.value=!1},{immediate:!0});let k;return qt(i,N=>{clearTimeout(k),k=setTimeout(()=>{var P;a[0].x=N*t.position,(P=a[1])==null||P.reset(),R()},200)}),Xr(()=>setTimeout(()=>S(),0)),(N,P)=>_n((W(),at("div",null,[vt("div",{ref_key:"nodeRef",ref:m},null,512),vt("img",{ref_key:"imgRef",ref:f,class:"sakura-to-top-node",src:Q(FR)},null,8,UR),vt("img",{ref_key:"constraintRef",ref:v,class:"sakura-to-top-line",src:Q(NR)},null,8,$R)],512)),[[Xo,y.value]])}}),HR=me(GR,[["__scopeId","data-v-dc637608"]]),zR="/assets/iloli.D82BDgdX.gif",jR={class:"mashiro-search-container"},VR={class:"flex-center relative my-4",flex:"~",rounded:""},WR=["placeholder"],XR=It({__name:"SakuraSearch",props:{open:{type:Boolean}},setup(r){const t=r,e=wR(),i=SR(),s=Vh(),{t:n}=Yr(),o=_t(),a=_t(),l=_t();qt(()=>t.open,async()=>{t.open&&setTimeout(()=>{var d;(d=l.value)==null||d.focus()},0)});function u(){s.push({path:"/search",query:{q:o.value}}),i.close()}return(d,f)=>(W(),zt(pm,{name:"fade",onEnter:f[1]||(f[1]=m=>e.value=!0),onAfterLeave:f[2]||(f[2]=m=>e.value=!1)},{default:jt(()=>[r.open?(W(),at("div",{key:0,ref_key:"searchContainer",ref:a,class:"mashiro-search",style:br({"--sakura-search-bg-img":`url('${Q(zR)}')`})},[vt("div",jR,[f[4]||(f[4]=vt("p",null," ÊÉ≥Ë¶ÅÊâæÁÇπ‰ªÄ‰πàÂë¢Ôºü",-1)),vt("div",VR,[f[3]||(f[3]=vt("div",{class:"i-fa-search absolute left-0 pl-12"},null,-1)),_n(vt("input",{ref_key:"searchInputRef",ref:l,"onUpdate:modelValue":f[0]||(f[0]=m=>o.value=m),class:"mashiro-search-input",placeholder:Q(n)("search.placeholder"),onKeyup:dm(u,["enter"])},null,40,WR),[[h0,o.value]])])])],4)):At("v-if",!0)]),_:1}))}}),uy=me(XR,[["__scopeId","data-v-b600617f"]]),YR=Object.freeze(Object.defineProperty({__proto__:null,default:uy},Symbol.toStringTag,{value:"Module"})),qR=["title"],KR={key:0,"i-mdi-search":""},ZR={key:1,text:"!2xl","i-mdi-close":""},QR=It({__name:"SakuraSearchBtn",props:{open:{type:Boolean,default:!1}},emits:["close","open"],setup(r,{emit:t}){const e=r,i=t,{t:s}=Yr();function n(){e.open?i("close"):i("open")}return(o,a)=>(W(),at("button",{class:"sakura-icon-btn sakura-search-btn",title:Q(s)("menu.search"),onClick:n},[r.open?(W(),at("div",ZR)):(W(),at("div",KR))],8,qR))}}),JR={flex:"center"},t2=It({__name:"SakuraSearchTrigger",setup(r){const t=Os(),e=Ve(),i=tt(()=>e.value.search.type==="algolia"),s=tt(()=>e.value.search.type==="fuse"),n=i.value&&u0({loader:()=>pe(()=>import("./SakuraAlgoliaSearch.bt4kMs3f.js"),__vite__mapDeps([41,4,3,2,6,5,7])),errorComponent:pe(()=>Promise.resolve().then(()=>YR),void 0)});return(o,a)=>{const l=QR,u=uy;return W(),at("div",JR,[Ht(l,{open:Q(t).search.isOpen&&!i.value,onOpen:Q(t).search.open,onClose:Q(t).search.close},null,8,["open","onOpen","onClose"]),i.value?(W(),zt(Q(n),{key:0,open:Q(t).search.isOpen,onClose:Q(t).search.close},null,8,["open","onClose"])):s.value?(W(),zt(u,{key:1,open:Q(t).search.isOpen,onClose:Q(t).search.close},null,8,["open","onClose"])):At("v-if",!0)])}}}),e2=["title"],r2=It({__name:"SakuraToggleLocale",props:{toggleLocaleIcon:{}},setup(r){const t=r,{t:e,locale:i}=Yr(),{toggleLocales:s}=Qx(),n=ke(),o=tt(()=>{var a;return t.toggleLocaleIcon||((a=n.value.ui.toggleLocaleButton)==null?void 0:a.icon)});return(a,l)=>(W(),at("button",{class:"sakura-icon-btn sakura-toggle-locale",title:Q(e)("button.toggle_langs"),onClick:l[0]||(l[0]=(...u)=>Q(s)&&Q(s)(...u))},[vt("div",{class:re(["transform transition",[o.value,Q(i)==="en"?"rotate-y-180":""]])},null,2)],8,e2))}}),i2=It({__name:"SakuraToggleDark",props:{darkIcon:{},lightIcon:{}},setup(r){const t=r,e=ke(),i=Wm(),s=tt(()=>{var o;return t.darkIcon||((o=e.value.ui.toggleDarkButton)==null?void 0:o.darkIcon)}),n=tt(()=>{var o;return t.lightIcon||((o=e.value.ui.toggleDarkButton)==null?void 0:o.lightIcon)});return(o,a)=>(W(),at("button",{class:"sakura-icon-btn sakura-toggle-dark select-none",type:"button","aria-label":"Toggle Color Scheme",onClick:a[0]||(a[0]=(...l)=>Q(i).toggleDarkWithTransition&&Q(i).toggleDarkWithTransition(...l))},[vt("div",{class:re(Q(i).isDark?s.value:n.value)},null,2)]))}}),s2=["aria-haspopup","aria-expanded"],n2={key:0,class:"sakura-dropdown-menu"},o2=It({__name:"SakuraDropdown",props:{isShow:{type:Boolean,default:!0}},setup(r){const t=_t(!1);return(e,i)=>(W(),at("div",{class:"sakura-dropdown","aria-haspopup":!!e.$slots.menu,"aria-expanded":t.value,onMouseover:i[0]||(i[0]=s=>t.value=!0),onMouseleave:i[1]||(i[1]=s=>t.value=!1)},[Nt(e.$slots,"button",{},void 0,!0),r.isShow&&e.$slots.menu?(W(),at("div",n2,[Nt(e.$slots,"menu",{},void 0,!0)])):At("v-if",!0)],40,s2))}}),a2=me(o2,[["__scopeId","data-v-4c068fa2"]]),l2=["href"],c2={key:0,class:"icon-link inline-block","i-ri-arrow-right-up-line":""},Ru=It({__name:"AppLink",props:{showExternalIcon:{type:Boolean},to:{},href:{}},setup(r){const t=r,e=tt(()=>t.href||t.to||"#"),i=tt(()=>typeof e.value=="string"&&e.value.startsWith("http"));return(s,n)=>{const o=je("RouterLink");return i.value?(W(),at("a",Hr({key:0},s.$attrs,{href:e.value,target:"_blank"}),[Nt(s.$slots,"default"),r.showExternalIcon?(W(),at("div",c2)):At("v-if",!0)],16,l2)):(W(),zt(o,Hr({key:1},s.$attrs,{to:e.value}),{default:jt(()=>[Nt(s.$slots,"default")]),_:3},16,["to"]))}}}),h2=It({__name:"SakuraNavLink",props:{text:{},locale:{},link:{},icon:{},animated:{},target:{},items:{}},setup(r){const t=r,{t:e}=Yr(),i=tt(()=>t.locale?`${t.text??""} ${e(t.locale)}`:t.text);return(s,n)=>{const o=Ru;return W(),zt(o,{class:re(["sakura-nav-link",r.animated]),title:i.value,to:r.link,target:r.target,rel:"noopener"},{default:jt(()=>[r.icon?(W(),at("span",{key:0,class:re([[r.icon],"hvr-icon sakura-icon sakura-nav-link-icon mr-0.5"]),"inline-flex":""},null,2)):At("v-if",!0),i.value?(W(),at("span",{key:1,truncate:"",class:re(["sakura-nav-link-text",[{"<lg:hidden":r.icon}]])},te(i.value),3)):At("v-if",!0),Nt(s.$slots,"default",{},void 0,!0)]),_:3},8,["title","to","target","class"])}}}),dy=me(h2,[["__scopeId","data-v-9e758860"]]),u2={class:"sakura-dropdown-list",flex:"~ col center"},d2=50,p2=It({__name:"SakuraNavbarLinkItem",props:{text:{},locale:{},link:{},icon:{},animated:{},target:{},items:{}},setup(r){const t=r,e=_t(!1),i=_t(null);function s(){e.value=!0,a()}function n(){e.value=!1}function o(){i.value=setTimeout(()=>{n()},d2)}function a(){i.value!==null&&(clearTimeout(i.value),i.value=null)}return(l,u)=>{var m;const d=dy,f=a2;return W(),zt(f,{"is-show":!!((m=r.items)!=null&&m.length),class:"sakura-navbar-link-item",onMouseenter:s,onMouseleave:o},{button:jt(()=>[Ht(d,jh(fm(t)),null,16)]),menu:jt(()=>[vt("div",u2,[(W(!0),at(Ie,null,kn(r.items,v=>(W(),zt(d,Hr({key:v.text},{ref_for:!0},v),null,16))),128))])]),_:1},8,["is-show"])}}}),f2=me(p2,[["__scopeId","data-v-eeb1ce95"]]),m2=It({__name:"SakuraNavbarLink",props:{navbar:{},showMarker:{type:Boolean,default:!1}},setup(r){const t=r,e=Wi(),{locale:i}=Yr(),s=_t(),n=_t(!0),o=_t();function a(){if(!t.showMarker)return;const l=document.querySelector(".sakura-navbar-link .router-link-active"),u=l,d=o.value;if(!l){console.error("Not found: .sakura-navbar-link .router-link-active");return}const f=u.getBoundingClientRect(),m=d.getBoundingClientRect(),v=f.left-m.left;s.value.style.left=`${v}px`,s.value.style.width=`${(l==null?void 0:l.offsetWidth)||0}px`}return qt(()=>e.path,()=>Ui(a)),qt(()=>i.value,()=>setTimeout(()=>a(),0)),Xr(()=>{setTimeout(()=>{n.value=!1},500),Ui(()=>{a()})}),(l,u)=>{const d=f2;return W(),at("nav",{ref_key:"navLink",ref:o,class:re(["sakura-navbar-link",n.value&&"sakura-preload"])},[(W(!0),at(Ie,null,kn(r.navbar,(f,m)=>(W(),zt(d,Hr({key:m},{ref_for:!0},f),null,16))),128)),r.showMarker?(W(),at("div",{key:0,ref_key:"marker",ref:s,class:"marker"},null,512)):At("v-if",!0)],2)}}}),g2=me(m2,[["__scopeId","data-v-9a8e7c84"]]),v2={class:"sakura-navbar-brand"},y2=["src"],_2={key:1,class:"navbar-title relative"},b2={key:0},x2={mr1:""},w2={mr1:"",class:"sakura-hvr-rotate"},T2={key:0,class:"navbar-subtitle"},E2=It({__name:"SakuraNavbarBrand",props:{favicon:{type:Boolean},title:{},hamburger:{type:Boolean},subTitle:{}},setup(r){const t=Ve();return(e,i)=>{const s=je("RouterLink");return W(),at("div",v2,[r.favicon?(W(),at("img",{key:0,class:"h-40px w-40px",alt:"logo",src:Q(t).favicon},null,8,y2)):At("v-if",!0),r.title?(W(),at("ruby",_2,[Ht(s,{class:"logo-link",to:"/","aria-label":Q(t).title},{default:jt(()=>[typeof r.title=="string"?(W(),at("span",b2,te(r.title),1)):(W(),at(Ie,{key:1},[vt("span",x2,te(r.title[0]),1),vt("span",w2,te(r.title[1]),1),vt("span",null,te(r.title[2]),1)],64))]),_:1},8,["aria-label"]),r.subTitle?(W(),at("rt",T2,te(r.subTitle),1)):At("v-if",!0)])):At("v-if",!0)])}}}),S2=me(E2,[["__scopeId","data-v-8d58ab7d"]]),A2=["aria-expanded"],C2=It({__name:"SakuraHamburgerUneven",props:{active:{type:Boolean}},setup(r){return(t,e)=>(W(),at("button",{class:re(["mobile-btn",r.active?"mobile-btn-open":""]),"aria-label":"mobile navigation","aria-expanded":r.active},[At(" TODO: Add more color configurations? "),vt("span",{class:re(r.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2),vt("span",{class:re(r.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2),vt("span",{class:re(r.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2)],10,A2))}}),P2=me(C2,[["__scopeId","data-v-2637eb86"]]),I2=It({__name:"SakuraHamburgerOld",props:{active:{type:Boolean}},setup(r){return(t,e)=>(W(),at("button",{class:re(["mashiro-burger-menu",r.active&&"mashiro-menu-on"])},[...e[0]||(e[0]=[vt("div",{class:"mashiro-burger"},null,-1)])],2))}}),R2=me(I2,[["__scopeId","data-v-149e24d8"]]),M2={flex:"~ items-center"},k2={"h-full":"","print:op0":"",flex:"~ center",class:"sakura-navbar-tools"},D2=It({__name:"SakuraNavbar",props:{navbar:{},options:{}},setup(r){const t=r,e=Os(),i=ke(),{isIncludes:s}=eR(),{y:n}=du(),o=_t(!0),a=_t(!1),l=tt(()=>t.navbar||i.value.navbar),u=tt(()=>t.options||i.value.navbarOptions),{autoHide:d,favicon:f,animIn:m,animOut:v,showMarker:y,title:b,subTitle:w,enableHover:S,offset:C}=u.value,E=tt(()=>n.value>C),R=tt(()=>{if(!s(u.value.autoHide))return!0;const N=s(u.value.invert);return S&&a.value||(N?E.value:!E.value)});return(k,N)=>{const P=R2,O=P2,U=S2,$=g2,Y=i2,H=r2,B=t2;return W(),at(Ie,null,[At(" NOTE: Dynamic :class switching affects triggering the component loader for some reason, not sure why. "),vt("header",{flex:"~",w:"full",fixed:"","top-0":"","z-100":"",class:"sakura-navbar",onMouseover:N[1]||(N[1]=F=>a.value=!0),onMouseleave:N[2]||(N[2]=F=>a.value=!1)},[vt("div",{class:re(["navbar-content sakura-safe-padding",{"active-header":R.value,"has-scrolled":E.value,"no-animation":o.value}]),flex:"~ items-center justify-between",w:"full"},[Nt(k.$slots,"brand",{},()=>{var F;return[vt("div",M2,[((F=Q(i).sidebarOptions)==null?void 0:F.position)==="left"?(W(),at("div",{key:0,class:re(["flex-center",!Q(i).sidebarOptions.enableOnDesktop&&"md:hidden"])},[Q(i).navbarOptions.hamburgerStyle==="old"?(W(),zt(P,{key:0,class:"mr-4",active:Q(e).sidebar.isOpen,onClick:Q(e).sidebar.toggle},null,8,["active","onClick"])):At("v-if",!0),Q(i).navbarOptions.hamburgerStyle==="uneven"?(W(),zt(O,{key:1,class:"mr-4",active:Q(e).sidebar.isOpen,onClick:Q(e).sidebar.toggle},null,8,["active","onClick"])):At("v-if",!0)],2)):At("v-if",!0),Ht(U,{favicon:Q(f),title:Q(b),"sub-title":Q(w)},null,8,["favicon","title","sub-title"])])]}),Nt(k.$slots,"link",{},()=>[Ht($,{class:re(Q(d)&&(R.value?Q(m):Q(v))),navbar:l.value,"show-marker":Q(y)},null,8,["class","navbar","show-marker"])]),Nt(k.$slots,"tool",{},()=>{var F;return[vt("div",k2,[u.value.tools.includes("toggleDark")?(W(),zt(Y,{key:0})):At("v-if",!0),u.value.tools.includes("toggleLocale")?(W(),zt(H,{key:1})):At("v-if",!0),u.value.tools.includes("search")?(W(),zt(B,{key:2})):At("v-if",!0),((F=Q(i).sidebarOptions)==null?void 0:F.position)==="right"?(W(),at("div",{key:3,"i-ri-menu-4-fill":"",onClick:N[0]||(N[0]=(...z)=>Q(e).sidebar.toggle&&Q(e).sidebar.toggle(...z))})):At("v-if",!0),Nt(k.$slots,"tool-ext")])]})],2)],32)],2112)}}}),O2=It({__name:"SakuraScrollIndicator",setup(r){const t=cy();return(e,i)=>(W(),at("div",{class:"sakura-scroll-indicator",style:br({width:`${Q(t).percentage.value*100}%`})},null,4))}}),L2=me(O2,[["__scopeId","data-v-7bd2c8b9"]]),B2={class:"sakura-sidebar-offset sakura-main"},F2=It({__name:"layout",setup(r){const t=Os(),e=ke(),i=tg();return(s,n)=>{var f;const o=L2,a=D2,l=je("RouterView"),u=HR,d=OR;return W(),at(Ie,null,[At(" NOTE: Avoid placing sakura-sidebar-offset at the top; it affects absolute positioning "),vt("div",{class:re(["app-container custom-background antialiased",`has-${Q(i)}-layout`]),style:br(Q(t).sidebar.isOpen?((f=Q(e).sidebarOptions)==null?void 0:f.position)==="left"?"--sakura-private-sidebar-offset: var(--sakura-sidebar-offset)":"--sakura-private-sidebar-offset: calc(var(--sakura-sidebar-offset) * -1)":"")},[Nt(s.$slots,"scroll-indicator",{},()=>[Q(e).scrollIndicator?(W(),zt(o,{key:0})):At("v-if",!0)],!0),Nt(s.$slots,"navbar",{},()=>[Ht(a,{class:"sakura-sidebar-offset"})],!0),vt("main",B2,[Nt(s.$slots,"default",{},()=>[Ht(l,null,{default:jt(({Component:m})=>[(W(),zt(um(m),null,{"main-header":jt(()=>[Nt(s.$slots,"main-header",{},void 0,!0)]),"main-header-after":jt(()=>[Nt(s.$slots,"main-header-after",{},void 0,!0)]),main:jt(()=>[Nt(s.$slots,"main",{},void 0,!0)]),"main-content":jt(()=>[Nt(s.$slots,"main-content",{},void 0,!0)]),"main-content-after":jt(()=>[Nt(s.$slots,"main-content-after",{},void 0,!0)]),"main-nav-before":jt(()=>[Nt(s.$slots,"main-nav-before",{},void 0,!0)]),"main-nav-after":jt(()=>[Nt(s.$slots,"main-nav-after",{},void 0,!0)]),"aside-custom":jt(()=>[Nt(s.$slots,"aside-custom",{},void 0,!0)]),footer:jt(()=>[Nt(s.$slots,"footer",{},void 0,!0)]),_:3}))]),_:3})],!0)]),Nt(s.$slots,"to-top",{},()=>[Q(e).scrollToTop&&(Q(e).scrollToTop==="cord"||Q(e).scrollToTop===!0)?(W(),zt(u,{key:0})):At("v-if",!0)],!0),Nt(s.$slots,"footer",{},()=>[Ht(d,{class:"sakura-sidebar-offset"})],!0),At(" <SakuraChangSkin /> ")],6)],2112)}}}),N2=me(F2,[["__scopeId","data-v-73ded2f2"]]),U2={key:0,class:"sakura-count"},$2={key:1,class:"sakura-count"},G2={key:2,class:"sakura-count"},H2=It({__name:"SakuraSidebarCount",props:{locale:{}},setup(r){const t=lu(),e=fx(),i=ew(),s=ke();return(n,o)=>Q(s).sidebarOptions.showCounts?(W(),at(Ie,{key:0},[r.locale==="menu.archives"?(W(),at("sup",U2,te(Q(t).postList.length),1)):r.locale==="menu.categories"?(W(),at("sup",$2,te(Array.from(Q(e).children).length),1)):r.locale==="menu.tags"?(W(),at("sup",G2,te(Array.from(Q(i)).length),1)):At("v-if",!0)],64)):At("v-if",!0)}}),z2=me(H2,[["__scopeId","data-v-22608c85"]]),j2={key:1,class:"sakura-sidebar-link-items"},V2=It({__name:"SakuraSidebarLinkItem",props:{items:{},item:{}},setup(r){return(t,e)=>{var o;const i=z2,s=dy,n=je("SakuraSidebarLinkItem",!0);return r.item?(W(),zt(s,jh(Hr({key:0},r.item)),{default:jt(()=>[Ht(i,{locale:r.item.locale},null,8,["locale"])]),_:1},16)):(o=r.items)!=null&&o.length?(W(),at("ul",j2,[(W(!0),at(Ie,null,kn(r.items,(a,l)=>(W(),at("li",{key:l},[Ht(n,{item:a,class:"sakura-sidebar-link-item"},null,8,["item"]),a.items?(W(),zt(n,{key:0,items:a.items,class:"sakura-sidebar-link-sub-items"},null,8,["items"])):At("v-if",!0)]))),128))])):At("v-if",!0)}}}),W2=me(V2,[["__scopeId","data-v-c8f18fb2"]]),X2={class:"sakura-sidebar-link"},Y2=It({__name:"SakuraSidebarLink",props:{sidebar:{}},setup(r){const t=r,e=ke(),i=Wi(),s=_t(),n=tt(()=>t.sidebar||(Array.isArray(e.value.sidebar)&&e.value.sidebar.length>0?e.value.sidebar:e.value.navbar));qt(()=>i.path,()=>Ui(()=>o()));function o(){const a=document.querySelector(".sakura-sidebar-link .router-link-active");s.value.style.top=`${(a==null?void 0:a.offsetTop)||0}px`,s.value.style.height=`${(a==null?void 0:a.offsetHeight)||0}px`}return Xr(()=>{Ui(()=>o()),s.value=document.querySelector(".sakura-sidebar #marker")}),(a,l)=>{const u=W2;return W(),at("nav",X2,[Ht(u,{items:n.value,class:"mx-auto"},null,8,["items"]),l[0]||(l[0]=vt("div",{id:"marker"},null,-1))])}}}),q2=me(Y2,[["__scopeId","data-v-0bc3e539"]]),K2={class:"links-of-author"},Z2=["href","title"],Q2=It({__name:"SakuraSocialLinks",setup(r){const t=Ve();return(e,i)=>(W(),at("div",K2,[(W(!0),at(Ie,null,kn(Q(t).social,(s,n)=>(W(),at("a",{key:n,class:"sakura-icon-btn links-of-author-item",rel:"noopener",href:s.link,title:s.name,target:"_blank",style:br(`color:${s.color}`)},[vt("div",{class:re(["icon",s.icon])},null,2)],12,Z2))),128))]))}}),J2=me(Q2,[["__scopeId","data-v-3450e641"]]),tM=["src","alt"],eM={key:2,class:"absolute top-0 h-full w-full"},rM=It({__name:"SakuraImageCard",props:{src:{},to:{},alt:{},errorImg:{},scale:{default:1.2},rotate:{default:0},skewX:{default:0},skewY:{default:0},opacity:{default:1},translateX:{default:0},translateY:{default:0},transitionDuration:{default:"var(--va-transition-duration)"},transitionTimingFunction:{default:"ease"},overlay:{type:Boolean,default:!1},overlayColor:{default:"rgba(0, 0, 0, 0.5)"},overlayOpacity:{default:.5},overlayOpacityInitial:{default:0}},setup(r){const t=r,e=ke(),i=_t(!1),s=_t(!1),n=tt(()=>{var d;return t.errorImg?kf(t.errorImg):(d=e.value)==null?void 0:d.notFoundImage}),o=tt(()=>i.value?{transform:`scale(${t.scale}) rotate(${t.rotate}deg) skew(${t.skewX}deg, ${t.skewY}deg) translate(${t.translateX}px, ${t.translateY}px)`,opacity:t.opacity,transition:`transform ${t.transitionDuration} ${t.transitionTimingFunction}, opacity ${t.transitionDuration} ${t.transitionTimingFunction}`}:{transition:`transform ${t.transitionDuration} ${t.transitionTimingFunction}, opacity ${t.transitionDuration} ${t.transitionTimingFunction}`}),a=tt(()=>({opacity:i.value?t.overlayOpacity:t.overlayOpacityInitial,backgroundColor:t.overlayColor}));function l(d){const f=d.target;if(f.setAttribute("data-src",f.src),!n.value){s.value=!0;return}s.value=!1,f.src=n.value}const u=tt(()=>{const d=t.src?kf(t.src):"";return d&&d.includes("?random")?d.replace("?random",`?random=${Math.random()}`):d});return(d,f)=>{const m=Ru;return W(),at("div",{class:"sakura-image-card relative overflow-hidden",onMouseover:f[0]||(f[0]=v=>i.value=!0),onMouseleave:f[1]||(f[1]=v=>i.value=!1)},[Ht(m,{w:"full",h:"full",to:t.to||"","aria-label":"Go to Post",class:re({"cursor-default":!t.to})},{default:jt(()=>[u.value?_n((W(),at("img",{key:0,class:"h-full w-full object-cover",loading:"lazy",src:u.value,alt:t.alt||"cover",style:br(o.value),onError:l},null,44,tM)),[[Xo,!s.value]]):At("v-if",!0),_n(vt("div",{class:"h-full w-full bg-$sakura-color-background opacity-70",style:br(o.value),flex:"~ center"},[...f[2]||(f[2]=[vt("div",{"i-fa6-solid-image":"",w:"30%",h:"30%"},null,-1)])],4),[[Xo,s.value||!u.value]]),r.overlay?(W(),at("div",{key:1,class:"sakura-image-card-overlay",style:br(a.value)},null,4)):At("v-if",!0),d.$slots.default?(W(),at("div",eM,[Nt(d.$slots,"default",{},void 0,!0)])):At("v-if",!0)]),_:3},8,["to","class"])],32)}}}),iM=me(rM,[["__scopeId","data-v-1fae09bc"]]),sM={class:"site-info flex flex-col items-center"},nM=["title"],oM={class:"site-author-name leading-6",m:"t-0 b-4"},aM={key:1,class:"site-name"},lM={key:2,class:"site-subtitle block",text:"xs"},cM={key:3,class:"site-description my-1"},hM=It({__name:"SakuraSiteInfo",setup(r){const t=Ve(),e=Vh();return(i,s)=>{const n=iM,o=je("RouterLink");return W(),at("div",sM,[Ht(o,{class:"site-author-avatar",to:"/about"},{default:jt(()=>[Ht(n,{class:"rounded-full",src:Q(t).author.avatar,alt:"avatar"},null,8,["src"]),vt("span",{class:"site-author-status",title:Q(t).author.status.message},te(Q(t).author.status.emoji),9,nM)]),_:1}),vt("div",oM,[Ht(o,{to:"/about"},{default:jt(()=>[hi(te(Q(t).author.name),1)]),_:1})]),Q(e).hasRoute("/about/site")?(W(),zt(o,{key:0,to:"/about/site",class:"site-name"},{default:jt(()=>[hi(te(Q(t).title),1)]),_:1})):(W(),at("span",aM,te(Q(t).title),1)),Q(t).subtitle?(W(),at("h4",lM,te(Q(t).subtitle),1)):At("v-if",!0),Q(t).description?(W(),at("div",cM,te(Q(t).description),1)):At("v-if",!0)])}}}),uM={key:0,class:"va-overlay"},dM=It({__name:"ValaxyOverlay",props:{show:{type:Boolean,default:!1}},setup(r){return(t,e)=>(W(),zt(pm,{name:"fade"},{default:jt(()=>[r.show?(W(),at("div",uM)):At("v-if",!0)]),_:1}))}}),pM=It({__name:"SakuraSidebar",props:{position:{}},setup(r){const t=r,e=Os(),i=ke(),s=_t(t.position??i.value.sidebarOptions.position);return(n,o)=>{const a=dM,l=hM,u=J2,d=q2,f=hy;return W(),at("div",null,[Ht(a,{class:"bg-$sakura-color-overlay-background md:hidden",show:Q(e).sidebar.isOpen,onClick:Q(e).sidebar.close},null,8,["show","onClick"]),vt("aside",{class:re(["sakura-sidebar inset-y-0 overflow-y-auto transition",[Q(e).sidebar.isOpen&&"open",s.value]]),text:"center",bg:"contain no-repeat"},[Nt(n.$slots,"default",{},()=>[Ht(l),Ht(u),Ht(d,{class:"mt-4"})],!0),Nt(n.$slots,"copyright",{},()=>[Ht(f)],!0)],2)])}}}),fM=me(pM,[["__scopeId","data-v-852b5877"]]),mM=It({__name:"ValaxyThemeApp",setup(r){const t=Wm();return On({meta:[{name:"theme-color",content:t.themeColor},{name:"msapplication-TileColor",content:t.themeColor}]}),(e,i)=>{const s=fM,n=je("RouterView"),o=N2;return W(),at(Ie,null,[Ht(s,{class:"sakura-app-sidebar"}),Ht(o,null,{default:jt(()=>[Ht(n)]),_:1})],64)}}}),gM=It({render:()=>null}),vM=It({__name:"ValaxyApp",setup(r){const t=tg();return t.value!=="empty"&&hx(),(e,i)=>{const s=mM,n=BI;return Q(t)!=="empty"?(W(),at(Ie,{key:0},[Ht(s),Ht(n),Ht(Q(gM))],64)):At("v-if",!0)}}}),yM=It({__name:"App",setup(r){return(t,e)=>{const i=vM;return W(),zt(i)}}});function _M(r){return{page:tt(()=>r.currentRoute.value.data),frontmatter:tt(()=>r.currentRoute.value.meta.frontmatter)}}function bM(){const r=au();return tt(()=>{const t=r.value.addons["valaxy-addon-bangumi"].options;return t?{...t,bilibiliEnabled:t.bilibiliEnabled??!0,bgmEnabled:t.bgmEnabled??!0,pageSize:t.pageSize??15,customEnabled:t.customEnabled??!1,customLabel:t.customLabel??"Ëá™ÂÆö‰πâ"}:(console.warn("`valaxy-addon-bangumi` options not found"),{api:""})})}const xM=Object.freeze(Object.defineProperty({__proto__:null,useAddonBangumi:bM},Symbol.toStringTag,{value:"Module"})),wM=`bilibili-bangumi {
  --bbc-primary-color: var(--sakura-color-primary);
  --bbc-label-color: var(--sakura-color-primary);
  --bbc-text-base-color: var(--sakura-color-text);
}

.bbc-header-platform .bbc-tabs {
  /** 0 elements **/
  &:not(:has(*)) {
    display: none;
  }

  /** 1 elements **/
  &:has(> :last-child:nth-child(1)) {
    display: none;
  }

  /** >= 2 elements **/
  &:has(> :last-child:nth-child(2)) {
    display: flex;
  }
}
`;function TM(r,t){if(r.querySelector("style[data-bangumi]"))return;const e=document.createElement("style");e.setAttribute("data-bangumi","true"),e.textContent=t,r.appendChild(e)}function EM(){customElements.whenDefined("bilibili-bangumi").then(()=>{const r=document.querySelector("bilibili-bangumi"),t=r==null?void 0:r.shadowRoot;if(!t){console.warn("bilibili-bangumi element or shadowRoot not found.");return}TM(t,wM)})}function SM(r){const t=Os(),{isMd:e}=Kx();r.scrollDamping&&!e&&xR();const i=r.sidebarOptions;i.persistence==="permanent"?t.sidebar.isOpen=oR(ma.IS_SIDEBAR_OPEN)||i.initialState:i.persistence==="session"?t.sidebar.isOpen=lR(ma.IS_SIDEBAR_OPEN)||i.initialState:t.sidebar.isOpen=i.initialState,gm(xM)||EM()}const AM=async r=>{const{router:t,isClient:e,app:i}=r,{toScrollPosition:s}=await pe(async()=>{const{toScrollPosition:o}=await import("./rolling.Cq7_JC1c.js");return{toScrollPosition:o}},__vite__mapDeps([42,4,43,3,2,6,5,7]));if(!e)return;const n=i.runWithContext(()=>ke().value);t.isReady().then(()=>SM(n)),s(t)},Le={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},Ff={silent:{level:-1},fatal:{level:Le.fatal},error:{level:Le.error},warn:{level:Le.warn},log:{level:Le.log},info:{level:Le.info},success:{level:Le.success},fail:{level:Le.fail},ready:{level:Le.info},start:{level:Le.info},box:{level:Le.info},debug:{level:Le.debug},trace:{level:Le.trace},verbose:{level:Le.verbose}};function wc(r){if(r===null||typeof r!="object")return!1;const t=Object.getPrototypeOf(r);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Dh(r,t,e=".",i){if(!wc(t))return Dh(r,{},e);const s=Object.assign({},t);for(const n in r){if(n==="__proto__"||n==="constructor")continue;const o=r[n];o!=null&&(Array.isArray(o)&&Array.isArray(s[n])?s[n]=[...o,...s[n]]:wc(o)&&wc(s[n])?s[n]=Dh(o,s[n],(e?`${e}.`:"")+n.toString()):s[n]=o)}return s}function CM(r){return(...t)=>t.reduce((e,i)=>Dh(e,i,""),{})}const PM=CM();function IM(r){return Object.prototype.toString.call(r)==="[object Object]"}function RM(r){return!(!IM(r)||!r.message&&!r.args||r.stack)}let Tc=!1;const Nf=[];class xe{constructor(t={}){it(this,"options");it(this,"_lastLog");it(this,"_mockFn");const e=t.types||Ff;this.options=PM({...t,defaults:{...t.defaults},level:Ec(t.level,e),reporters:[...t.reporters||[]]},{types:Ff,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const i in e){const s={type:i,...this.options.defaults,...e[i]};this[i]=this._wrapLogFn(s),this[i].raw=this._wrapLogFn(s,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=Ec(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){const e=new xe({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){const e=this.options.reporters.indexOf(t);if(e!==-1)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(const t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=i=>{this[e].raw(String(i).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){Tc=!0}resumeLogs(){Tc=!1;const t=Nf.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){const e=t||this.options.mockFn;if(this._mockFn=e,typeof e=="function")for(const i in this.options.types)this[i]=e(i,this.options.types[i])||this[i],this[i].raw=this[i]}_wrapLogFn(t,e){return(...i)=>{if(Tc){Nf.push([this,t,i,e]);return}return this._logFn(t,i,e)}}_logFn(t,e,i){if((t.level||0)>this.level)return!1;const s={date:new Date,args:[],...t,level:Ec(t.level,this.options.types)};!i&&e.length===1&&RM(e[0])?Object.assign(s,e[0]):s.args=[...e],s.message&&(s.args.unshift(s.message),delete s.message),s.additional&&(Array.isArray(s.additional)||(s.additional=s.additional.split(`
`)),s.args.push(`
`+s.additional.join(`
`)),delete s.additional),s.type=typeof s.type=="string"?s.type.toLowerCase():"log",s.tag=typeof s.tag=="string"?s.tag:"";const n=(a=!1)=>{const l=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&l>0){const u=[...this._lastLog.object.args];l>1&&u.push(`(repeated ${l} times)`),this._log({...this._lastLog.object,args:u}),this._lastLog.count=1}a&&(this._lastLog.object=s,this._log(s))};clearTimeout(this._lastLog.timeout);const o=this._lastLog.time&&s.date?s.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=s.date,o<this.options.throttle)try{const a=JSON.stringify([s.type,s.tag,s.args]),l=this._lastLog.serialized===a;if(this._lastLog.serialized=a,l&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(n,this.options.throttle);return}}catch{}n(!0)}_log(t){for(const e of this.options.reporters)e.log(t,{options:this.options})}}function Ec(r,t={},e=3){return r===void 0?e:typeof r=="number"?r:t[r]&&t[r].level!==void 0?t[r].level:e}xe.prototype.add=xe.prototype.addReporter;xe.prototype.remove=xe.prototype.removeReporter;xe.prototype.clear=xe.prototype.removeReporter;xe.prototype.withScope=xe.prototype.withTag;xe.prototype.mock=xe.prototype.mockTypes;xe.prototype.pause=xe.prototype.pauseLogs;xe.prototype.resume=xe.prototype.resumeLogs;function MM(r={}){return new xe(r)}class kM{constructor(t){it(this,"options");it(this,"defaultColor");it(this,"levelColorMap");it(this,"typeColorMap");this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:t===1?console.__warn||console.warn:console.__log||console.log}log(t){const e=this._getLogFn(t.level),i=t.type==="log"?"":t.type,s=t.tag||"",o=`
      background: ${this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,a=`%c${[s,i].filter(Boolean).join(":")}`;typeof t.args[0]=="string"?e(`${a}%c ${t.args[0]}`,o,"",...t.args.slice(1)):e(a,o,...t.args)}}function DM(r={}){return MM({reporters:r.reporters||[new kM({})],prompt(e,i={}){return i.type==="confirm"?Promise.resolve(confirm(e)):Promise.resolve(prompt(e))},...r})}DM();const OM=["top","right","bottom","left"],Uf=["start","end"],$f=OM.reduce((r,t)=>r.concat(t,t+"-"+Uf[0],t+"-"+Uf[1]),[]),Cn=Math.min,Di=Math.max,LM={left:"right",right:"left",bottom:"top",top:"bottom"},BM={start:"end",end:"start"};function Oh(r,t,e){return Di(r,Cn(t,e))}function Zi(r,t){return typeof r=="function"?r(t):r}function Cr(r){return r.split("-")[0]}function ir(r){return r.split("-")[1]}function py(r){return r==="x"?"y":"x"}function Mu(r){return r==="y"?"height":"width"}const FM=new Set(["top","bottom"]);function Gr(r){return FM.has(Cr(r))?"y":"x"}function ku(r){return py(Gr(r))}function fy(r,t,e){e===void 0&&(e=!1);const i=ir(r),s=ku(r),n=Mu(s);let o=s==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[n]>t.floating[n]&&(o=ya(o)),[o,ya(o)]}function NM(r){const t=ya(r);return[va(r),t,va(t)]}function va(r){return r.replace(/start|end/g,t=>BM[t])}const Gf=["left","right"],Hf=["right","left"],UM=["top","bottom"],$M=["bottom","top"];function GM(r,t,e){switch(r){case"top":case"bottom":return e?t?Hf:Gf:t?Gf:Hf;case"left":case"right":return t?UM:$M;default:return[]}}function HM(r,t,e,i){const s=ir(r);let n=GM(Cr(r),e==="start",i);return s&&(n=n.map(o=>o+"-"+s),t&&(n=n.concat(n.map(va)))),n}function ya(r){return r.replace(/left|right|bottom|top/g,t=>LM[t])}function zM(r){return{top:0,right:0,bottom:0,left:0,...r}}function my(r){return typeof r!="number"?zM(r):{top:r,right:r,bottom:r,left:r}}function mn(r){const{x:t,y:e,width:i,height:s}=r;return{width:i,height:s,top:e,left:t,right:t+i,bottom:e+s,x:t,y:e}}function zf(r,t,e){let{reference:i,floating:s}=r;const n=Gr(t),o=ku(t),a=Mu(o),l=Cr(t),u=n==="y",d=i.x+i.width/2-s.width/2,f=i.y+i.height/2-s.height/2,m=i[a]/2-s[a]/2;let v;switch(l){case"top":v={x:d,y:i.y-s.height};break;case"bottom":v={x:d,y:i.y+i.height};break;case"right":v={x:i.x+i.width,y:f};break;case"left":v={x:i.x-s.width,y:f};break;default:v={x:i.x,y:i.y}}switch(ir(t)){case"start":v[o]-=m*(e&&u?-1:1);break;case"end":v[o]+=m*(e&&u?-1:1);break}return v}const jM=async(r,t,e)=>{const{placement:i="bottom",strategy:s="absolute",middleware:n=[],platform:o}=e,a=n.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:r,floating:t,strategy:s}),{x:d,y:f}=zf(u,i,l),m=i,v={},y=0;for(let b=0;b<a.length;b++){const{name:w,fn:S}=a[b],{x:C,y:E,data:R,reset:k}=await S({x:d,y:f,initialPlacement:i,placement:m,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:r,floating:t}});d=C??d,f=E??f,v={...v,[w]:{...v[w],...R}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:r,floating:t,strategy:s}):k.rects),{x:d,y:f}=zf(u,m,l)),b=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:v}};async function qa(r,t){var e;t===void 0&&(t={});const{x:i,y:s,platform:n,rects:o,elements:a,strategy:l}=r,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=Zi(t,r),y=my(v),w=a[m?f==="floating"?"reference":"floating":f],S=mn(await n.getClippingRect({element:(e=await(n.isElement==null?void 0:n.isElement(w)))==null||e?w:w.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),C=f==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,E=await(n.getOffsetParent==null?void 0:n.getOffsetParent(a.floating)),R=await(n.isElement==null?void 0:n.isElement(E))?await(n.getScale==null?void 0:n.getScale(E))||{x:1,y:1}:{x:1,y:1},k=mn(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:C,offsetParent:E,strategy:l}):C);return{top:(S.top-k.top+y.top)/R.y,bottom:(k.bottom-S.bottom+y.bottom)/R.y,left:(S.left-k.left+y.left)/R.x,right:(k.right-S.right+y.right)/R.x}}const VM=r=>({name:"arrow",options:r,async fn(t){const{x:e,y:i,placement:s,rects:n,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=Zi(r,t)||{};if(u==null)return{};const f=my(d),m={x:e,y:i},v=ku(s),y=Mu(v),b=await o.getDimensions(u),w=v==="y",S=w?"top":"left",C=w?"bottom":"right",E=w?"clientHeight":"clientWidth",R=n.reference[y]+n.reference[v]-m[v]-n.floating[y],k=m[v]-n.reference[v],N=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let P=N?N[E]:0;(!P||!await(o.isElement==null?void 0:o.isElement(N)))&&(P=a.floating[E]||n.floating[y]);const O=R/2-k/2,U=P/2-b[y]/2-1,$=Cn(f[S],U),Y=Cn(f[C],U),H=$,B=P-b[y]-Y,F=P/2-b[y]/2+O,z=Oh(H,F,B),Z=!l.arrow&&ir(s)!=null&&F!==z&&n.reference[y]/2-(F<H?$:Y)-b[y]/2<0,et=Z?F<H?F-H:F-B:0;return{[v]:m[v]+et,data:{[v]:z,centerOffset:F-z-et,...Z&&{alignmentOffset:et}},reset:Z}}});function WM(r,t,e){return(r?[...e.filter(s=>ir(s)===r),...e.filter(s=>ir(s)!==r)]:e.filter(s=>Cr(s)===s)).filter(s=>r?ir(s)===r||(t?va(s)!==s:!1):!0)}const XM=function(r){return r===void 0&&(r={}),{name:"autoPlacement",options:r,async fn(t){var e,i,s;const{rects:n,middlewareData:o,placement:a,platform:l,elements:u}=t,{crossAxis:d=!1,alignment:f,allowedPlacements:m=$f,autoAlignment:v=!0,...y}=Zi(r,t),b=f!==void 0||m===$f?WM(f||null,v,m):m,w=await qa(t,y),S=((e=o.autoPlacement)==null?void 0:e.index)||0,C=b[S];if(C==null)return{};const E=fy(C,n,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==C)return{reset:{placement:b[0]}};const R=[w[Cr(C)],w[E[0]],w[E[1]]],k=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:C,overflows:R}],N=b[S+1];if(N)return{data:{index:S+1,overflows:k},reset:{placement:N}};const P=k.map($=>{const Y=ir($.placement);return[$.placement,Y&&d?$.overflows.slice(0,2).reduce((H,B)=>H+B,0):$.overflows[0],$.overflows]}).sort(($,Y)=>$[1]-Y[1]),U=((s=P.filter($=>$[2].slice(0,ir($[0])?2:3).every(Y=>Y<=0))[0])==null?void 0:s[0])||P[0][0];return U!==a?{data:{index:S+1,overflows:k},reset:{placement:U}}:{}}}},YM=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(t){var e,i;const{placement:s,middlewareData:n,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...w}=Zi(r,t);if((e=n.arrow)!=null&&e.alignmentOffset)return{};const S=Cr(s),C=Gr(a),E=Cr(a)===a,R=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=m||(E||!b?[ya(a)]:NM(a)),N=y!=="none";!m&&N&&k.push(...HM(a,b,y,R));const P=[a,...k],O=await qa(t,w),U=[];let $=((i=n.flip)==null?void 0:i.overflows)||[];if(d&&U.push(O[S]),f){const F=fy(s,o,R);U.push(O[F[0]],O[F[1]])}if($=[...$,{placement:s,overflows:U}],!U.every(F=>F<=0)){var Y,H;const F=(((Y=n.flip)==null?void 0:Y.index)||0)+1,z=P[F];if(z&&(!(f==="alignment"?C!==Gr(z):!1)||$.every(ut=>Gr(ut.placement)===C?ut.overflows[0]>0:!0)))return{data:{index:F,overflows:$},reset:{placement:z}};let Z=(H=$.filter(et=>et.overflows[0]<=0).sort((et,ut)=>et.overflows[1]-ut.overflows[1])[0])==null?void 0:H.placement;if(!Z)switch(v){case"bestFit":{var B;const et=(B=$.filter(ut=>{if(N){const yt=Gr(ut.placement);return yt===C||yt==="y"}return!0}).map(ut=>[ut.placement,ut.overflows.filter(yt=>yt>0).reduce((yt,X)=>yt+X,0)]).sort((ut,yt)=>ut[1]-yt[1])[0])==null?void 0:B[0];et&&(Z=et);break}case"initialPlacement":Z=a;break}if(s!==Z)return{reset:{placement:Z}}}return{}}}},qM=new Set(["left","top"]);async function KM(r,t){const{placement:e,platform:i,elements:s}=r,n=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=Cr(e),a=ir(e),l=Gr(e)==="y",u=qM.has(o)?-1:1,d=n&&l?-1:1,f=Zi(t,r);let{mainAxis:m,crossAxis:v,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(v=a==="end"?y*-1:y),l?{x:v*d,y:m*u}:{x:m*u,y:v*d}}const ZM=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(t){var e,i;const{x:s,y:n,placement:o,middlewareData:a}=t,l=await KM(t,r);return o===((e=a.offset)==null?void 0:e.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:n+l.y,data:{...l,placement:o}}}}},QM=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(t){const{x:e,y:i,placement:s}=t,{mainAxis:n=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:S,y:C}=w;return{x:S,y:C}}},...l}=Zi(r,t),u={x:e,y:i},d=await qa(t,l),f=Gr(Cr(s)),m=py(f);let v=u[m],y=u[f];if(n){const w=m==="y"?"top":"left",S=m==="y"?"bottom":"right",C=v+d[w],E=v-d[S];v=Oh(C,v,E)}if(o){const w=f==="y"?"top":"left",S=f==="y"?"bottom":"right",C=y+d[w],E=y-d[S];y=Oh(C,y,E)}const b=a.fn({...t,[m]:v,[f]:y});return{...b,data:{x:b.x-e,y:b.y-i,enabled:{[m]:n,[f]:o}}}}}},JM=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(t){var e,i;const{placement:s,rects:n,platform:o,elements:a}=t,{apply:l=()=>{},...u}=Zi(r,t),d=await qa(t,u),f=Cr(s),m=ir(s),v=Gr(s)==="y",{width:y,height:b}=n.floating;let w,S;f==="top"||f==="bottom"?(w=f,S=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(S=f,w=m==="end"?"top":"bottom");const C=b-d.top-d.bottom,E=y-d.left-d.right,R=Cn(b-d[w],C),k=Cn(y-d[S],E),N=!t.middlewareData.shift;let P=R,O=k;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(O=E),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(P=C),N&&!m){const $=Di(d.left,0),Y=Di(d.right,0),H=Di(d.top,0),B=Di(d.bottom,0);v?O=y-2*($!==0||Y!==0?$+Y:Di(d.left,d.right)):P=b-2*(H!==0||B!==0?H+B:Di(d.top,d.bottom))}await l({...t,availableWidth:O,availableHeight:P});const U=await o.getDimensions(a.floating);return y!==U.width||b!==U.height?{reset:{rects:!0}}:{}}}};function He(r){var t;return((t=r.ownerDocument)==null?void 0:t.defaultView)||window}function Er(r){return He(r).getComputedStyle(r)}const jf=Math.min,gn=Math.max,_a=Math.round;function gy(r){const t=Er(r);let e=parseFloat(t.width),i=parseFloat(t.height);const s=r.offsetWidth,n=r.offsetHeight,o=_a(e)!==s||_a(i)!==n;return o&&(e=s,i=n),{width:e,height:i,fallback:o}}function yi(r){return yy(r)?(r.nodeName||"").toLowerCase():""}let ko;function vy(){if(ko)return ko;const r=navigator.userAgentData;return r&&Array.isArray(r.brands)?(ko=r.brands.map(t=>t.brand+"/"+t.version).join(" "),ko):navigator.userAgent}function Sr(r){return r instanceof He(r).HTMLElement}function di(r){return r instanceof He(r).Element}function yy(r){return r instanceof He(r).Node}function Vf(r){return typeof ShadowRoot>"u"?!1:r instanceof He(r).ShadowRoot||r instanceof ShadowRoot}function Ka(r){const{overflow:t,overflowX:e,overflowY:i,display:s}=Er(r);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(s)}function tk(r){return["table","td","th"].includes(yi(r))}function Lh(r){const t=/firefox/i.test(vy()),e=Er(r),i=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||!!i&&i!=="none"||t&&e.willChange==="filter"||t&&!!e.filter&&e.filter!=="none"||["transform","perspective"].some(s=>e.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const n=e.contain;return n!=null&&n.includes(s)})}function _y(){return!/^((?!chrome|android).)*safari/i.test(vy())}function Du(r){return["html","body","#document"].includes(yi(r))}function by(r){return di(r)?r:r.contextElement}const xy={x:1,y:1};function Es(r){const t=by(r);if(!Sr(t))return xy;const e=t.getBoundingClientRect(),{width:i,height:s,fallback:n}=gy(t);let o=(n?_a(e.width):e.width)/i,a=(n?_a(e.height):e.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function Pn(r,t,e,i){var s,n;t===void 0&&(t=!1),e===void 0&&(e=!1);const o=r.getBoundingClientRect(),a=by(r);let l=xy;t&&(i?di(i)&&(l=Es(i)):l=Es(r));const u=a?He(a):window,d=!_y()&&e;let f=(o.left+(d&&((s=u.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,m=(o.top+(d&&((n=u.visualViewport)==null?void 0:n.offsetTop)||0))/l.y,v=o.width/l.x,y=o.height/l.y;if(a){const b=He(a),w=i&&di(i)?He(i):i;let S=b.frameElement;for(;S&&i&&w!==b;){const C=Es(S),E=S.getBoundingClientRect(),R=getComputedStyle(S);E.x+=(S.clientLeft+parseFloat(R.paddingLeft))*C.x,E.y+=(S.clientTop+parseFloat(R.paddingTop))*C.y,f*=C.x,m*=C.y,v*=C.x,y*=C.y,f+=E.x,m+=E.y,S=He(S).frameElement}}return{width:v,height:y,top:m,right:f+v,bottom:m+y,left:f,x:f,y:m}}function pi(r){return((yy(r)?r.ownerDocument:r.document)||window.document).documentElement}function Za(r){return di(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function wy(r){return Pn(pi(r)).left+Za(r).scrollLeft}function In(r){if(yi(r)==="html")return r;const t=r.assignedSlot||r.parentNode||Vf(r)&&r.host||pi(r);return Vf(t)?t.host:t}function Ty(r){const t=In(r);return Du(t)?t.ownerDocument.body:Sr(t)&&Ka(t)?t:Ty(t)}function ba(r,t){var e;t===void 0&&(t=[]);const i=Ty(r),s=i===((e=r.ownerDocument)==null?void 0:e.body),n=He(i);return s?t.concat(n,n.visualViewport||[],Ka(i)?i:[]):t.concat(i,ba(i))}function Wf(r,t,e){return t==="viewport"?mn(function(i,s){const n=He(i),o=pi(i),a=n.visualViewport;let l=o.clientWidth,u=o.clientHeight,d=0,f=0;if(a){l=a.width,u=a.height;const m=_y();(m||!m&&s==="fixed")&&(d=a.offsetLeft,f=a.offsetTop)}return{width:l,height:u,x:d,y:f}}(r,e)):di(t)?mn(function(i,s){const n=Pn(i,!0,s==="fixed"),o=n.top+i.clientTop,a=n.left+i.clientLeft,l=Sr(i)?Es(i):{x:1,y:1};return{width:i.clientWidth*l.x,height:i.clientHeight*l.y,x:a*l.x,y:o*l.y}}(t,e)):mn(function(i){const s=pi(i),n=Za(i),o=i.ownerDocument.body,a=gn(s.scrollWidth,s.clientWidth,o.scrollWidth,o.clientWidth),l=gn(s.scrollHeight,s.clientHeight,o.scrollHeight,o.clientHeight);let u=-n.scrollLeft+wy(i);const d=-n.scrollTop;return Er(o).direction==="rtl"&&(u+=gn(s.clientWidth,o.clientWidth)-a),{width:a,height:l,x:u,y:d}}(pi(r)))}function Xf(r){return Sr(r)&&Er(r).position!=="fixed"?r.offsetParent:null}function Yf(r){const t=He(r);let e=Xf(r);for(;e&&tk(e)&&Er(e).position==="static";)e=Xf(e);return e&&(yi(e)==="html"||yi(e)==="body"&&Er(e).position==="static"&&!Lh(e))?t:e||function(i){let s=In(i);for(;Sr(s)&&!Du(s);){if(Lh(s))return s;s=In(s)}return null}(r)||t}function ek(r,t,e){const i=Sr(t),s=pi(t),n=Pn(r,!0,e==="fixed",t);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&e!=="fixed")if((yi(t)!=="body"||Ka(s))&&(o=Za(t)),Sr(t)){const l=Pn(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else s&&(a.x=wy(s));return{x:n.left+o.scrollLeft-a.x,y:n.top+o.scrollTop-a.y,width:n.width,height:n.height}}const rk={getClippingRect:function(r){let{element:t,boundary:e,rootBoundary:i,strategy:s}=r;const n=e==="clippingAncestors"?function(u,d){const f=d.get(u);if(f)return f;let m=ba(u).filter(w=>di(w)&&yi(w)!=="body"),v=null;const y=Er(u).position==="fixed";let b=y?In(u):u;for(;di(b)&&!Du(b);){const w=Er(b),S=Lh(b);(y?S||v:S||w.position!=="static"||!v||!["absolute","fixed"].includes(v.position))?v=w:m=m.filter(C=>C!==b),b=In(b)}return d.set(u,m),m}(t,this._c):[].concat(e),o=[...n,i],a=o[0],l=o.reduce((u,d)=>{const f=Wf(t,d,s);return u.top=gn(f.top,u.top),u.right=jf(f.right,u.right),u.bottom=jf(f.bottom,u.bottom),u.left=gn(f.left,u.left),u},Wf(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(r){let{rect:t,offsetParent:e,strategy:i}=r;const s=Sr(e),n=pi(e);if(e===n)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((s||!s&&i!=="fixed")&&((yi(e)!=="body"||Ka(n))&&(o=Za(e)),Sr(e))){const u=Pn(e);a=Es(e),l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:di,getDimensions:function(r){return Sr(r)?gy(r):r.getBoundingClientRect()},getOffsetParent:Yf,getDocumentElement:pi,getScale:Es,async getElementRects(r){let{reference:t,floating:e,strategy:i}=r;const s=this.getOffsetParent||Yf,n=this.getDimensions;return{reference:ek(t,await s(e),i),floating:{x:0,y:0,...await n(e)}}},getClientRects:r=>Array.from(r.getClientRects()),isRTL:r=>Er(r).direction==="rtl"},ik=(r,t,e)=>{const i=new Map,s={platform:rk,...e},n={...s.platform,_c:i};return jM(r,t,{...s,platform:n})};function Ey(r,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(typeof t[e]=="object"&&r[e]?Ey(r[e],t[e]):r[e]=t[e])}const sr={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:r=>[...r,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Rn(r,t){let e=sr.themes[r]||{},i;do i=e[t],typeof i>"u"?e.$extend?e=sr.themes[e.$extend]||{}:(e=null,i=sr[t]):e=null;while(e);return i}function sk(r){const t=[r];let e=sr.themes[r]||{};do e.$extend&&!e.$resetCss?(t.push(e.$extend),e=sr.themes[e.$extend]||{}):e=null;while(e);return t.map(i=>`v-popper--theme-${i}`)}function qf(r){const t=[r];let e=sr.themes[r]||{};do e.$extend?(t.push(e.$extend),e=sr.themes[e.$extend]||{}):e=null;while(e);return t}let Ps=!1;if(typeof window<"u"){Ps=!1;try{const r=Object.defineProperty({},"passive",{get(){Ps=!0}});window.addEventListener("test",null,r)}catch{}}let Sy=!1;typeof window<"u"&&typeof navigator<"u"&&(Sy=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const Ay=["auto","top","bottom","left","right"].reduce((r,t)=>r.concat([t,`${t}-start`,`${t}-end`]),[]),Kf={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},Zf={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function Qf(r,t){const e=r.indexOf(t);e!==-1&&r.splice(e,1)}function Sc(){return new Promise(r=>requestAnimationFrame(()=>{requestAnimationFrame(r)}))}const Qe=[];let Ai=null;const Jf={};function tm(r){let t=Jf[r];return t||(t=Jf[r]=[]),t}let Bh=function(){};typeof window<"u"&&(Bh=window.Element);function Lt(r){return function(t){return Rn(t.theme,r)}}const Ac="__floating-vue__popper",Cy=()=>It({name:"VPopper",provide(){return{[Ac]:{parentPopper:this}}},inject:{[Ac]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:Lt("disabled")},positioningDisabled:{type:Boolean,default:Lt("positioningDisabled")},placement:{type:String,default:Lt("placement"),validator:r=>Ay.includes(r)},delay:{type:[String,Number,Object],default:Lt("delay")},distance:{type:[Number,String],default:Lt("distance")},skidding:{type:[Number,String],default:Lt("skidding")},triggers:{type:Array,default:Lt("triggers")},showTriggers:{type:[Array,Function],default:Lt("showTriggers")},hideTriggers:{type:[Array,Function],default:Lt("hideTriggers")},popperTriggers:{type:Array,default:Lt("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:Lt("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:Lt("popperHideTriggers")},container:{type:[String,Object,Bh,Boolean],default:Lt("container")},boundary:{type:[String,Bh],default:Lt("boundary")},strategy:{type:String,validator:r=>["absolute","fixed"].includes(r),default:Lt("strategy")},autoHide:{type:[Boolean,Function],default:Lt("autoHide")},handleResize:{type:Boolean,default:Lt("handleResize")},instantMove:{type:Boolean,default:Lt("instantMove")},eagerMount:{type:Boolean,default:Lt("eagerMount")},popperClass:{type:[String,Array,Object],default:Lt("popperClass")},computeTransformOrigin:{type:Boolean,default:Lt("computeTransformOrigin")},autoMinSize:{type:Boolean,default:Lt("autoMinSize")},autoSize:{type:[Boolean,String],default:Lt("autoSize")},autoMaxSize:{type:Boolean,default:Lt("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:Lt("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:Lt("preventOverflow")},overflowPadding:{type:[Number,String],default:Lt("overflowPadding")},arrowPadding:{type:[Number,String],default:Lt("arrowPadding")},arrowOverflow:{type:Boolean,default:Lt("arrowOverflow")},flip:{type:Boolean,default:Lt("flip")},shift:{type:Boolean,default:Lt("shift")},shiftCrossAxis:{type:Boolean,default:Lt("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:Lt("noAutoFocus")},disposeTimeout:{type:Number,default:Lt("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(r=>r.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var r;return(r=this[Ac])==null?void 0:r.parentPopper},hasPopperShowTriggerHover(){var r,t;return((r=this.popperTriggers)==null?void 0:r.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(r){r?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((r,t)=>(r[t]="$_computePosition",r),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:r=null,skipDelay:t=!1,force:e=!1}={}){var i,s;(i=this.parentPopper)!=null&&i.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(e||!this.disabled)&&(((s=this.parentPopper)==null?void 0:s.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(r,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:r=null,skipDelay:t=!1}={}){var e;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((e=this.parentPopper)==null?void 0:e.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(r,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var r;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((r=this.referenceNode)==null?void 0:r.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const r={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&r.middleware.push(ZM({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?r.middleware.push(XM({alignment:this.placement.split("-")[1]??""})):r.placement=this.placement,this.preventOverflow&&(this.shift&&r.middleware.push(QM({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&r.middleware.push(YM({padding:this.overflowPadding,boundary:this.boundary}))),r.middleware.push(VM({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&r.middleware.push({name:"arrowOverflow",fn:({placement:i,rects:s,middlewareData:n})=>{let o;const{centerOffset:a}=n.arrow;return i.startsWith("top")||i.startsWith("bottom")?o=Math.abs(a)>s.reference.width/2:o=Math.abs(a)>s.reference.height/2,{data:{overflow:o}}}}),this.autoMinSize||this.autoSize){const i=this.autoSize?this.autoSize:this.autoMinSize?"min":null;r.middleware.push({name:"autoSize",fn:({rects:s,placement:n,middlewareData:o})=>{var a;if((a=o.autoSize)!=null&&a.skip)return{};let l,u;return n.startsWith("top")||n.startsWith("bottom")?l=s.reference.width:u=s.reference.height,this.$_innerNode.style[i==="min"?"minWidth":i==="max"?"maxWidth":"width"]=l!=null?`${l}px`:null,this.$_innerNode.style[i==="min"?"minHeight":i==="max"?"maxHeight":"height"]=u!=null?`${u}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,r.middleware.push(JM({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:i,availableHeight:s})=>{this.$_innerNode.style.maxWidth=i!=null?`${i}px`:null,this.$_innerNode.style.maxHeight=s!=null?`${s}px`:null}})));const e=await ik(this.$_referenceNode,this.$_popperNode,r);Object.assign(this.result,{x:e.x,y:e.y,placement:e.placement,strategy:e.strategy,arrow:{...e.middlewareData.arrow,...e.middlewareData.arrowOverflow}})},$_scheduleShow(r,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),Ai&&this.instantMove&&Ai.instantMove&&Ai!==this.parentPopper){Ai.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(r,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(Ai=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(r){const t=this.delay;return parseInt(t&&t[r]||t||0)},async $_applyShow(r=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=r,!this.isShown&&(this.$_ensureTeleport(),await Sc(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...ba(this.$_referenceNode),...ba(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),e=this.$_popperNode.querySelector(".v-popper__wrapper"),i=e.parentNode.getBoundingClientRect(),s=t.x+t.width/2-(i.left+e.offsetLeft),n=t.y+t.height/2-(i.top+e.offsetTop);this.result.transformOrigin=`${s}px ${n}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const r=this.showGroup;if(r){let t;for(let e=0;e<Qe.length;e++)t=Qe[e],t.showGroup!==r&&(t.hide(),t.$emit("close-group"))}Qe.push(this),document.body.classList.add("v-popper--some-open");for(const t of qf(this.theme))tm(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await Sc(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(r=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=r,Qf(Qe,this),Qe.length===0&&document.body.classList.remove("v-popper--some-open");for(const e of qf(this.theme)){const i=tm(e);Qf(i,this),i.length===0&&document.body.classList.remove(`v-popper--some-open--${e}`)}Ai===this&&(Ai=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await Sc(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let r=this.container;if(typeof r=="string"?r=window.document.querySelector(r):r===!1&&(r=this.$_targetNodes[0].parentNode),!r)throw new Error("No container for popover: "+this.container);r.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const r=e=>{this.isShown&&!this.$_hideInProgress||(e.usedByTooltip=!0,!this.$_preventShow&&this.show({event:e}))};this.$_registerTriggerListeners(this.$_targetNodes,Kf,this.triggers,this.showTriggers,r),this.$_registerTriggerListeners([this.$_popperNode],Kf,this.popperTriggers,this.popperShowTriggers,r);const t=e=>{e.usedByTooltip||this.hide({event:e})};this.$_registerTriggerListeners(this.$_targetNodes,Zf,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],Zf,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(r,t,e){this.$_events.push({targetNodes:r,eventType:t,handler:e}),r.forEach(i=>i.addEventListener(t,e,Ps?{passive:!0}:void 0))},$_registerTriggerListeners(r,t,e,i,s){let n=e;i!=null&&(n=typeof i=="function"?i(n):i),n.forEach(o=>{const a=t[o];a&&this.$_registerEventListeners(r,a,s)})},$_removeEventListeners(r){const t=[];this.$_events.forEach(e=>{const{targetNodes:i,eventType:s,handler:n}=e;!r||r===s?i.forEach(o=>o.removeEventListener(s,n)):t.push(e)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(r,t=!1){this.$_showFrameLocked||(this.hide({event:r}),r.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(r,t){for(const e of this.$_targetNodes){const i=e.getAttribute(r);i&&(e.removeAttribute(r),e.setAttribute(t,i))}},$_applyAttrsToTarget(r){for(const t of this.$_targetNodes)for(const e in r){const i=r[e];i==null?t.removeAttribute(e):t.setAttribute(e,i)}},$_updateParentShownChildren(r){let t=this.parentPopper;for(;t;)r?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const r=this.$_referenceNode.getBoundingClientRect();if(vn>=r.left&&vn<=r.right&&yn>=r.top&&yn<=r.bottom){const t=this.$_popperNode.getBoundingClientRect(),e=vn-ii,i=yn-si,s=t.left+t.width/2-ii+(t.top+t.height/2)-si+t.width+t.height,n=ii+e*s,o=si+i*s;return Do(ii,si,n,o,t.left,t.top,t.left,t.bottom)||Do(ii,si,n,o,t.left,t.top,t.right,t.top)||Do(ii,si,n,o,t.right,t.top,t.right,t.bottom)||Do(ii,si,n,o,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(Sy){const r=Ps?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>em(t,!0),r),document.addEventListener("touchend",t=>rm(t,!0),r)}else window.addEventListener("mousedown",r=>em(r,!1),!0),window.addEventListener("click",r=>rm(r,!1),!0);window.addEventListener("resize",ok)}function em(r,t){if(sr.autoHideOnMousedown)Py(r,t);else for(let e=0;e<Qe.length;e++){const i=Qe[e];try{i.mouseDownContains=i.popperNode().contains(r.target)}catch{}}}function rm(r,t){sr.autoHideOnMousedown||Py(r,t)}function Py(r,t){const e={};for(let i=Qe.length-1;i>=0;i--){const s=Qe[i];try{const n=s.containsGlobalTarget=s.mouseDownContains||s.popperNode().contains(r.target);s.pendingHide=!1,requestAnimationFrame(()=>{if(s.pendingHide=!1,!e[s.randomId]&&im(s,n,r)){if(s.$_handleGlobalClose(r,t),!r.closeAllPopover&&r.closePopover&&n){let a=s.parentPopper;for(;a;)e[a.randomId]=!0,a=a.parentPopper;return}let o=s.parentPopper;for(;o&&im(o,o.containsGlobalTarget,r);)o.$_handleGlobalClose(r,t),o=o.parentPopper}})}catch{}}}function im(r,t,e){return e.closeAllPopover||e.closePopover&&t||nk(r,e)&&!t}function nk(r,t){if(typeof r.autoHide=="function"){const e=r.autoHide(t);return r.lastAutoHide=e,e}return r.autoHide}function ok(){for(let r=0;r<Qe.length;r++)Qe[r].$_computePosition()}let ii=0,si=0,vn=0,yn=0;typeof window<"u"&&window.addEventListener("mousemove",r=>{ii=vn,si=yn,vn=r.clientX,yn=r.clientY},Ps?{passive:!0}:void 0);function Do(r,t,e,i,s,n,o,a){const l=((o-s)*(t-n)-(a-n)*(r-s))/((a-n)*(e-r)-(o-s)*(i-t)),u=((e-r)*(t-n)-(i-t)*(r-s))/((a-n)*(e-r)-(o-s)*(i-t));return l>=0&&l<=1&&u>=0&&u<=1}const ak={extends:Cy()},Qa=(r,t)=>{const e=r.__vccOpts||r;for(const[i,s]of t)e[i]=s;return e};function lk(r,t,e,i,s,n){return W(),at("div",{ref:"reference",class:re(["v-popper",{"v-popper--shown":r.slotData.isShown}])},[Nt(r.$slots,"default",jh(fm(r.slotData)))],2)}const ck=Qa(ak,[["render",lk]]);function hk(){var r=window.navigator.userAgent,t=r.indexOf("MSIE ");if(t>0)return parseInt(r.substring(t+5,r.indexOf(".",t)),10);var e=r.indexOf("Trident/");if(e>0){var i=r.indexOf("rv:");return parseInt(r.substring(i+3,r.indexOf(".",i)),10)}var s=r.indexOf("Edge/");return s>0?parseInt(r.substring(s+5,r.indexOf(".",s)),10):-1}let Wo;function Fh(){Fh.init||(Fh.init=!0,Wo=hk()!==-1)}var Ja={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Fh(),Ui(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const r=document.createElement("object");this._resizeObject=r,r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex",-1),r.onload=this.addResizeHandlers,r.type="text/html",Wo&&this.$el.appendChild(r),r.data="about:blank",Wo||this.$el.appendChild(r)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Wo&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const uk=f0();d0("data-v-b329ee4c");const dk={class:"resize-observer",tabindex:"-1"};p0();const pk=uk((r,t,e,i,s,n)=>(W(),zt("div",dk)));Ja.render=pk;Ja.__scopeId="data-v-b329ee4c";Ja.__file="src/components/ResizeObserver.vue";const Iy=(r="theme")=>({computed:{themeClass(){return sk(this[r])}}}),fk=It({name:"VPopperContent",components:{ResizeObserver:Ja},mixins:[Iy()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(r){return r!=null&&!isNaN(r)?`${r}px`:null}}}),mk=["id","aria-hidden","tabindex","data-popper-placement"],gk={ref:"inner",class:"v-popper__inner"},vk=vt("div",{class:"v-popper__arrow-outer"},null,-1),yk=vt("div",{class:"v-popper__arrow-inner"},null,-1),_k=[vk,yk];function bk(r,t,e,i,s,n){const o=je("ResizeObserver");return W(),at("div",{id:r.popperId,ref:"popover",class:re(["v-popper__popper",[r.themeClass,r.classes.popperClass,{"v-popper__popper--shown":r.shown,"v-popper__popper--hidden":!r.shown,"v-popper__popper--show-from":r.classes.showFrom,"v-popper__popper--show-to":r.classes.showTo,"v-popper__popper--hide-from":r.classes.hideFrom,"v-popper__popper--hide-to":r.classes.hideTo,"v-popper__popper--skip-transition":r.skipTransition,"v-popper__popper--arrow-overflow":r.result&&r.result.arrow.overflow,"v-popper__popper--no-positioning":!r.result}]]),style:br(r.result?{position:r.result.strategy,transform:`translate3d(${Math.round(r.result.x)}px,${Math.round(r.result.y)}px,0)`}:void 0),"aria-hidden":r.shown?"false":"true",tabindex:r.autoHide?0:void 0,"data-popper-placement":r.result?r.result.placement:void 0,onKeyup:t[2]||(t[2]=dm(a=>r.autoHide&&r.$emit("hide"),["esc"]))},[vt("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=a=>r.autoHide&&r.$emit("hide"))}),vt("div",{class:"v-popper__wrapper",style:br(r.result?{transformOrigin:r.result.transformOrigin}:void 0)},[vt("div",gk,[r.mounted?(W(),at(Ie,{key:0},[vt("div",null,[Nt(r.$slots,"default")]),r.handleResize?(W(),zt(o,{key:0,onNotify:t[1]||(t[1]=a=>r.$emit("resize",a))})):At("",!0)],64)):At("",!0)],512),vt("div",{ref:"arrow",class:"v-popper__arrow-container",style:br(r.result?{left:r.toPx(r.result.arrow.x),top:r.toPx(r.result.arrow.y)}:void 0)},_k,4)],4)],46,mk)}const Ry=Qa(fk,[["render",bk]]),My={methods:{show(...r){return this.$refs.popper.show(...r)},hide(...r){return this.$refs.popper.hide(...r)},dispose(...r){return this.$refs.popper.dispose(...r)},onResize(...r){return this.$refs.popper.onResize(...r)}}};let Nh=function(){};typeof window<"u"&&(Nh=window.Element);const xk=It({name:"VPopperWrapper",components:{Popper:ck,PopperContent:Ry},mixins:[My,Iy("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,Nh,Boolean],default:void 0},boundary:{type:[String,Nh],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(r=>r!==this.$refs.popperContent.$el)}}});function wk(r,t,e,i,s,n){const o=je("PopperContent"),a=je("Popper");return W(),zt(a,Hr({ref:"popper"},r.$props,{theme:r.finalTheme,"target-nodes":r.getTargetNodes,"popper-node":()=>r.$refs.popperContent.$el,class:[r.themeClass],onShow:t[0]||(t[0]=()=>r.$emit("show")),onHide:t[1]||(t[1]=()=>r.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=l=>r.$emit("update:shown",l)),onApplyShow:t[3]||(t[3]=()=>r.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>r.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>r.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>r.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>r.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>r.$emit("resize"))}),{default:jt(({popperId:l,isShown:u,shouldMountContent:d,skipTransition:f,autoHide:m,show:v,hide:y,handleResize:b,onResize:w,classes:S,result:C})=>[Nt(r.$slots,"default",{shown:u,show:v,hide:y}),Ht(o,{ref:"popperContent","popper-id":l,theme:r.finalTheme,shown:u,mounted:d,"skip-transition":f,"auto-hide":m,"handle-resize":b,classes:S,result:C,onHide:y,onResize:w},{default:jt(()=>[Nt(r.$slots,"popper",{shown:u,hide:y})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const Ou=Qa(xk,[["render",wk]]),Tk={...Ou,name:"VDropdown",vPopperTheme:"dropdown"},Ek={...Ou,name:"VMenu",vPopperTheme:"menu"},Sk={...Ou,name:"VTooltip",vPopperTheme:"tooltip"},Ak=It({name:"VTooltipDirective",components:{Popper:Cy(),PopperContent:Ry},mixins:[My],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:r=>Rn(r.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:r=>Rn(r.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(r){if(typeof this.content=="function"&&this.$_isShown&&(r||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,e=this.content(this);e.then?e.then(i=>this.onResult(t,i)):this.onResult(t,e)}},onResult(r,t){r===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),Ck=["innerHTML"],Pk=["textContent"];function Ik(r,t,e,i,s,n){const o=je("PopperContent"),a=je("Popper");return W(),zt(a,Hr({ref:"popper"},r.$attrs,{theme:r.theme,"target-nodes":r.targetNodes,"popper-node":()=>r.$refs.popperContent.$el,onApplyShow:r.onShow,onApplyHide:r.onHide}),{default:jt(({popperId:l,isShown:u,shouldMountContent:d,skipTransition:f,autoHide:m,hide:v,handleResize:y,onResize:b,classes:w,result:S})=>[Ht(o,{ref:"popperContent",class:re({"v-popper--tooltip-loading":r.loading}),"popper-id":l,theme:r.theme,shown:u,mounted:d,"skip-transition":f,"auto-hide":m,"handle-resize":y,classes:w,result:S,onHide:v,onResize:b},{default:jt(()=>[r.html?(W(),at("div",{key:0,innerHTML:r.finalContent},null,8,Ck)):(W(),at("div",{key:1,textContent:te(r.finalContent)},null,8,Pk))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const Rk=Qa(Ak,[["render",Ik]]),ky="v-popper--has-tooltip";function Mk(r,t){let e=r.placement;if(!e&&t)for(const i of Ay)t[i]&&(e=i);return e||(e=Rn(r.theme||"tooltip","placement")),e}function Dy(r,t,e){let i;const s=typeof t;return s==="string"?i={content:t}:t&&s==="object"?i=t:i={content:!1},i.placement=Mk(i,e),i.targetNodes=()=>[r],i.referenceNode=()=>r,i}let Cc,Mn,kk=0;function Dk(){if(Cc)return;Mn=_t([]),Cc=hm({name:"VTooltipDirectiveApp",setup(){return{directives:Mn}},render(){return this.directives.map(t=>m0(Rk,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const r=document.createElement("div");document.body.appendChild(r),Cc.mount(r)}function Ok(r,t,e){Dk();const i=_t(Dy(r,t,e)),s=_t(!1),n={id:kk++,options:i,shown:s};return Mn.value.push(n),r.classList&&r.classList.add(ky),r.$_popper={options:i,item:n,show(){s.value=!0},hide(){s.value=!1}}}function Oy(r){if(r.$_popper){const t=Mn.value.indexOf(r.$_popper.item);t!==-1&&Mn.value.splice(t,1),delete r.$_popper,delete r.$_popperOldShown,delete r.$_popperMountTarget}r.classList&&r.classList.remove(ky)}function sm(r,{value:t,modifiers:e}){const i=Dy(r,t,e);if(!i.content||Rn(i.theme||"tooltip","disabled"))Oy(r);else{let s;r.$_popper?(s=r.$_popper,s.options.value=i):s=Ok(r,t,e),typeof t.shown<"u"&&t.shown!==r.$_popperOldShown&&(r.$_popperOldShown=t.shown,t.shown?s.show():s.hide())}}const Lk={beforeMount:sm,updated:sm,beforeUnmount(r){Oy(r)}};function nm(r){r.addEventListener("mousedown",xa),r.addEventListener("click",xa),r.addEventListener("touchstart",Ly,Ps?{passive:!0}:!1)}function om(r){r.removeEventListener("mousedown",xa),r.removeEventListener("click",xa),r.removeEventListener("touchstart",Ly),r.removeEventListener("touchend",By),r.removeEventListener("touchcancel",Fy)}function xa(r){const t=r.currentTarget;r.closePopover=!t.$_vclosepopover_touch,r.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function Ly(r){if(r.changedTouches.length===1){const t=r.currentTarget;t.$_vclosepopover_touch=!0;const e=r.changedTouches[0];t.$_vclosepopover_touchPoint=e,t.addEventListener("touchend",By),t.addEventListener("touchcancel",Fy)}}function By(r){const t=r.currentTarget;if(t.$_vclosepopover_touch=!1,r.changedTouches.length===1){const e=r.changedTouches[0],i=t.$_vclosepopover_touchPoint;r.closePopover=Math.abs(e.screenY-i.screenY)<20&&Math.abs(e.screenX-i.screenX)<20,r.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function Fy(r){const t=r.currentTarget;t.$_vclosepopover_touch=!1}const Bk={beforeMount(r,{value:t,modifiers:e}){r.$_closePopoverModifiers=e,(typeof t>"u"||t)&&nm(r)},updated(r,{value:t,oldValue:e,modifiers:i}){r.$_closePopoverModifiers=i,t!==e&&(typeof t>"u"||t?nm(r):om(r))},beforeUnmount(r){om(r)}};function Fk(r,t={}){r.$_vTooltipInstalled||(r.$_vTooltipInstalled=!0,Ey(sr,t),r.directive("tooltip",Lk),r.directive("close-popper",Bk),r.component("VTooltip",Sk),r.component("VDropdown",Tk),r.component("VMenu",Ek))}const Nk={version:"5.2.2",install:Fk,options:sr};async function Uk({app:r},t){const e={};r.use(Nk,Object.assign(e,t.value.siteConfig.floatingVue||{}))}const $k=async({head:r,isClient:t})=>{t||r==null||r.use(W0())},Gk={intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Template"}},hi:{t:0,b:{t:2,i:[{t:3}],s:"Hello, Valaxy!"}}}},Hk={intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Ê®°Áâà"}},hi:{t:0,b:{t:2,i:[{t:3}],s:"‰Ω†Â•ΩÔºåValaxy"}}}},zk={valaxy_theme_sakura:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Theme Sakura"}},statistics:{pv:{t:0,b:{t:2,i:[{t:3}],s:"Page views"}}}},jk={valaxy_theme_sakura:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy ‰∏ªÈ¢ò Sakura"}},statistics:{pv:{t:0,b:{t:2,i:[{t:3}],s:"ÊµèËßàÈáè"}}}},Vk={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}},go:{t:0,b:{t:2,i:[{t:3}],s:"GO"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"Switch to light mode"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"Switch to dark mode"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"Change languages"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"Appearance"}}},intro:{desc:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Theme Yun"},{t:2,i:[{t:3}],s:"Valaxy"}]}},hi:{t:0,b:{t:2,i:[{t:3,v:"Hi, "},{t:4,k:"name"},{t:3,v:"!"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"Oops! Space collapsed!"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"Archive"}},category:{t:0,b:{t:2,i:[{t:3}],s:"Category"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"Tag"}},album:{t:0,b:{t:2,i:[{t:3}],s:"Album"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"Gallery"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"Menu"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"Archives"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"Categories"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"Tags"}},about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"Overview"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"Table of Contents"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"Return to top"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"DECRYPT"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"Posted on "}},edited:{t:0,b:{t:2,i:[{t:3}],s:"Edited on "}},created:{t:0,b:{t:2,i:[{t:3}],s:"Created"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"Modified"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Edit this post"}},more:{t:0,b:{t:2,i:[{t:3}],s:"more"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"Untitled"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"This post does not have a Table of Contents"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"Views"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"Comments"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"Related posts"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"View link"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"READ MORE"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"Cover"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"This article was last updated "},{t:4,k:"ago"},{t:3,v:". The information described in this article may have changed."}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"Post author"}},link:{t:0,b:{t:2,i:[{t:3}],s:"Post link"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"Copyright Notice"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"All articles in this blog are licensed under "},{t:5,i:0},{t:3,v:" unless otherwise stated."}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"Powered by "},{t:5,i:0}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"Theme"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"Total Views"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"Total Visitors"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No posts"},{t:2,i:[{t:3}],s:"1 post"},{t:2,i:[{t:4,k:"count"},{t:3,v:" posts"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No categories"},{t:2,i:[{t:3}],s:"1 category"},{t:2,i:[{t:4,k:"count"},{t:3,v:" categories"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No tags"},{t:2,i:[{t:3}],s:"1 tag"},{t:2,i:[{t:4,k:"count"},{t:3,v:" tags"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No album"},{t:2,i:[{t:3}],s:"1 album"},{t:2,i:[{t:4,k:"count"},{t:3,v:" albums"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No photo"},{t:2,i:[{t:3}],s:"1 photo"},{t:2,i:[{t:4,k:"count"},{t:3,v:" photos"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"Uncategorized"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Searching..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"We could not find any results for the search: "},{t:4,k:"query"},{t:3,v:"."}]}},hits_time:{t:0,b:{t:2,i:[{t:4,k:"hits"},{t:3,v:" results found in "},{t:4,k:"time"},{t:3,v:" ms"}]}},hits:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" results found"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:", "}},period:{t:0,b:{t:2,i:[{t:3}],s:". "}},colon:{t:0,b:{t:2,i:[{t:3}],s:": "}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"Donate"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"Word count in article"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"Total words"}},time:{t:0,b:{t:2,i:[{t:3}],s:"Reading time"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"Total reading time"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Day"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Days"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Hour"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Hours"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Minute"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Minutes"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Second"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Seconds"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"Last updated"}}}},Wk={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"ÂÖ≥‰∫é"}},back:{t:0,b:{t:2,i:[{t:3}],s:"ËøîÂõû"}},go:{t:0,b:{t:2,i:[{t:3}],s:"Á°ÆÂÆö"}},home:{t:0,b:{t:2,i:[{t:3}],s:"È¶ñÈ°µ"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"ÂàáÊç¢‰∫ÆËâ≤Ê®°Âºè"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"ÂàáÊç¢Ê∑±Ëâ≤Ê®°Âºè"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"ÂàáÊç¢ËØ≠Ë®Ä"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"Â§ñËßÇ"}}},intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"‰∏ªÈ¢ò Yun"}},hi:{t:0,b:{t:2,i:[{t:3,v:"‰Ω†Â•ΩÔºå"},{t:4,k:"name"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"Êú™ÊâæÂà∞È°µÈù¢"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"ÂΩíÊ°£"}},category:{t:0,b:{t:2,i:[{t:3}],s:"ÂàÜÁ±ª"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"Ê†áÁ≠æ"}},album:{t:0,b:{t:2,i:[{t:3}],s:"Áõ∏ÂÜå"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"ÂõæÁâáÂ∫ì"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"ËèúÂçï"}},home:{t:0,b:{t:2,i:[{t:3}],s:"È¶ñÈ°µ"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"ÂΩíÊ°£"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"ÂàÜÁ±ª"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"Ê†áÁ≠æ"}},about:{t:0,b:{t:2,i:[{t:3}],s:"ÂÖ≥‰∫é"}},search:{t:0,b:{t:2,i:[{t:3}],s:"ÊêúÁ¥¢"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"Á´ôÁÇπÊ¶ÇËßà"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"ÊñáÁ´†ÁõÆÂΩï"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"ËøîÂõûÈ°∂ÈÉ®"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"Ëß£ÂØÜ"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"ÂèëË°®‰∫é"}},edited:{t:0,b:{t:2,i:[{t:3}],s:"Êõ¥Êñ∞‰∫é"}},created:{t:0,b:{t:2,i:[{t:3}],s:"ÂàõÂª∫Êó∂Èó¥"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"‰øÆÊîπÊó∂Èó¥"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"ÁºñËæë"}},more:{t:0,b:{t:2,i:[{t:3}],s:"Êõ¥Â§ö"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"Êú™ÂëΩÂêç"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"Ê≠§ÊñáÁ´†Êú™ÂåÖÂê´ÁõÆÂΩï"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"ÈòÖËØªÊ¨°Êï∞"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"ËØÑËÆ∫Êï∞"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"Áõ∏ÂÖ≥ÊñáÁ´†"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"Êü•ÁúãÈìæÊé•"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"ÈòÖËØªÊõ¥Â§ö"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"Â∞ÅÈù¢"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"Êú¨ÊñáÊúÄÂêéÊõ¥Êñ∞‰∫é "},{t:4,k:"ago"},{t:3,v:"ÔºåÊñá‰∏≠ÊâÄÊèèËø∞ÁöÑ‰ø°ÊÅØÂèØËÉΩÂ∑≤ÂèëÁîüÊîπÂèò„ÄÇ"}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"Êú¨Êñá‰ΩúËÄÖ"}},link:{t:0,b:{t:2,i:[{t:3}],s:"Êú¨ÊñáÈìæÊé•"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"ÁâàÊùÉÂ£∞Êòé"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"Êú¨ÂçöÂÆ¢ÊâÄÊúâÊñáÁ´†Èô§ÁâπÂà´Â£∞ÊòéÂ§ñÔºåÂùáÈªòËÆ§ÈááÁî® "},{t:5,i:0},{t:3,v:" ËÆ∏ÂèØÂçèËÆÆ„ÄÇ"}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"Áî± "},{t:5,i:0},{t:3,v:" È©±Âä®"}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"‰∏ªÈ¢ò"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"ÊÄªËÆøÈóÆÈáè"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"ÊÄªËÆøÂÆ¢Èáè"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"ÊöÇÊó†ÊñáÁ´†"},{t:2,i:[{t:3}],s:"ÂÖ±ËÆ° 1 ÁØáÊñáÁ´†"},{t:2,i:[{t:3,v:"ÂÖ±ËÆ° "},{t:4,k:"count"},{t:3,v:" ÁØáÊñáÁ´†"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"ÊöÇÊó†ÂàÜÁ±ª"},{t:2,i:[{t:3}],s:"ÂÖ±ËÆ° 1 ‰∏™ÂàÜÁ±ª"},{t:2,i:[{t:3,v:"ÂÖ±ËÆ° "},{t:4,k:"count"},{t:3,v:" ‰∏™ÂàÜÁ±ª"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"ÊöÇÊó†Ê†áÁ≠æ"},{t:2,i:[{t:3}],s:"ÂÖ±ËÆ° 1 ‰∏™Ê†áÁ≠æ"},{t:2,i:[{t:3,v:"ÂÖ±ËÆ° "},{t:4,k:"count"},{t:3,v:" ‰∏™Ê†áÁ≠æ"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"ÊöÇÊó†Áõ∏ÂÜå"},{t:2,i:[{t:3}],s:"ÂÖ±ËÆ° 1 ‰∏™Áõ∏ÂÜå"},{t:2,i:[{t:3,v:"ÂÖ±ËÆ° "},{t:4,k:"count"},{t:3,v:" ‰∏™Áõ∏ÂÜå"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"ÊöÇÊó†ÁÖßÁâá"},{t:2,i:[{t:3}],s:"ÂÖ±ËÆ° 1 Âº†ÁÖßÁâá"},{t:2,i:[{t:3,v:"ÂÖ±ËÆ° "},{t:4,k:"count"},{t:3,v:" Âº†ÁÖßÁâá"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"Êú™ÂàÜÁ±ª"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"ÊêúÁ¥¢..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"Êâæ‰∏çÂà∞ÊÇ®Êü•ËØ¢ÁöÑÂÜÖÂÆπ: "},{t:4,k:"query"}]}},hits_time:{t:0,b:{t:2,i:[{t:3,v:"ÊâæÂà∞ "},{t:4,k:"hits"},{t:3,v:" Êù°ÁªìÊûúÔºàÁî®Êó∂ "},{t:4,k:"time"},{t:3,v:" ÊØ´ÁßíÔºâ"}]}},hits:{t:0,b:{t:2,i:[{t:3,v:"ÊâæÂà∞ "},{t:4,k:"count"},{t:3,v:" Êù°ÁªìÊûú"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:"Ôºå"}},period:{t:0,b:{t:2,i:[{t:3}],s:"„ÄÇ"}},colon:{t:0,b:{t:2,i:[{t:3}],s:"Ôºö"}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"ÊâìËµè"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"ËøîÂõû"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"Êú¨ÊñáÂ≠óÊï∞"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"Á´ôÁÇπÊÄªÂ≠óÊï∞"}},time:{t:0,b:{t:2,i:[{t:3}],s:"ÈòÖËØªÊó∂Èïø"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"Á´ôÁÇπÊÄªÈòÖËØªÊó∂Èïø"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Â§©"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Â§©"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Â∞èÊó∂"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Â∞èÊó∂"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 ÂàÜ"},{t:2,i:[{t:4,k:"count"},{t:3,v:" ÂàÜ"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Áßí"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Áßí"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"ÊúÄÂêéÊõ¥Êñ∞‰∫é"}}}},Ne={"zh-CN":{},en:{}},Ls=qh((r,t,e)=>{if(t&&r[t]&&Array.isArray(r[t])&&Array.isArray(e))return r[t]=e,!0});Ne["zh-CN"]=Ls(Wk,Ne["zh-CN"]);Ne.en=Ls(Vk,Ne.en);Ne["zh-CN"]=Ls(jk,Ne["zh-CN"]);Ne.en=Ls(zk,Ne.en);Ne["zh-CN"]=Ls(Hk,Ne["zh-CN"]);Ne.en=Ls(Gk,Ne.en);const am=S0({locale:"",messages:Ne});async function Xk({app:r,router:t},e){const i=ka("valaxy-locale",(e==null?void 0:e.value.siteConfig.lang)||"en");am.global.locale.value=i.value,r.use(am),t.isReady().then(()=>{})}function Yk(r,t){const e=r;Xk(r,t),$k(r),E0(r),A0(r),Uk(r,t),AM(e)}const Uh=ax();function qk(r){r.app.component("AppLink",Ru)}const{redirectRoutes:Kk,useVueRouter:Zk}=Uh.value.runtimeConfig.redirects;Zk&&Wh.push(...Kk);Wh.forEach(r=>{var t;(t=r==null?void 0:r.children)==null||t.forEach(e=>{e.path=encodeURI(e.path)})});function Ny(r){return r.filter(t=>{var e,i;return t.children&&(t.children=Ny(t.children)),!((i=(e=t.meta)==null?void 0:e.frontmatter)!=null&&i.draft)})}const Qk=ow(Ny(Wh));pw(yM,{routes:Qk,base:"/",scrollBehavior(r,t){if(r.path!==t.path)return{top:0}}},r=>{const{app:t,router:e}=r,i=_M(e);t.provide(nx,i),t.use(y0,{router:e}),t.provide(jm,Uh),qk(r),Yk(r,Uh)});export{CC as $,Ae as A,pD as B,gD as C,lD as D,Ru as E,ew as F,kf as G,dD as H,Ox as I,fe as J,On as K,Ud as L,sT as M,yD as N,kt as O,_D as P,vD as Q,or as R,Ur as S,Bt as T,Yt as U,Fn as V,wu as W,dt as X,Hv as Y,Fe as Z,iM as _,lu as a,pt as a0,xv as a1,WP as a2,Mi as a3,ot as a4,oD as a5,Lf as a6,ix as b,fD as c,ex as d,mD as e,cD as f,hD as g,fx as h,Pr as i,Ve as j,Os as k,ke as l,tw as m,cy as n,Wm as o,Hx as p,xD as q,kx as r,Od as s,au as t,bM as u,gm as v,uD as w,Da as x,cx as y,tg as z};
