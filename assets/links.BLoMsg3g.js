import{_ as D}from"./SakuraPage.vue_vue_type_style_index_0_lang.CjoIdmB9.js";import{i as x,l as F,_ as I,x as M}from"./app.NFAAdwm6.js";import"./chunks/dayjs.CPPL_t8N.js";import{r as V,w as A,j as v,f as E,O as d,L as m,S as i,F as P,X as N,y as p,a2 as R,u as h,U as X,V as S,J as C,M as j,K as k,a1 as g,Y as O}from"./framework.DzQMb1nT.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.DHaAMvDf.js";import"./chunks/vue-router.CwyAnJZE.js";import"./chunks/pinia.j8_R8H-A.js";import"./chunks/vue-i18n.BMpzDVHc.js";import"./chunks/nprogress.D6qpKeA8.js";function T(e,o=!1){const s=V();return A(()=>e,async()=>{let a;if(typeof e=="string"){if(!x)return;a=await fetch(e).then(n=>n.json())||[]}else{if(!x){a=e;return}a=[];const n=async t=>{var _,c,r,f,y;try{const l=await fetch(t.rss);if(l.ok){const w=await l.text(),u=new DOMParser().parseFromString(w,"application/xml"),L=t.blog||((_=u.querySelector("title"))==null?void 0:_.textContent),b=t.name||((c=u.querySelector("author > name"))==null?void 0:c.textContent),$=(r=u.querySelector('link[rel="alternate"]'))==null?void 0:r.getAttribute("href"),q=t.desc||((f=u.querySelector("subtitle"))==null?void 0:f.textContent),B={avatar:t.avatar||((y=u.querySelector("logo"))==null?void 0:y.textContent),name:b,url:$,color:"#EE9CA7",blog:L,desc:q};a.push(B)}else console.error(`Failed to fetch XML from ${t.rss}:`,l.status,l.statusText)}catch(l){console.error(`Error fetching XML from ${t.rss}:`,l)}};await Promise.all(e.map(n))}s.value=o?Array.from(a).sort(()=>Math.random()-.5):a},{immediate:!0}),{data:s}}const U={class:"links"},z={class:"link-items"},J=["href","title"],K={class:"link-left"},Y={class:"link-info",m:"l-2"},G={class:"link-blog",font:"serif black"},H={class:"link-desc"},Q=v({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(e){const o=e,s=F(),{data:a}=T(o.links,o.random),n=E(()=>{var t;return(t=s.value.ui.links)==null?void 0:t.image});return(t,_)=>{const c=I;return m(),d("div",U,[i("ul",z,[(m(!0),d(P,null,N(p(a),(r,f)=>(m(),d("li",{key:f,class:"link-item",style:R(`--primary-color: ${r.color}`)},[i("a",{class:"link-url",p:"x-4 y-2",href:r.url,title:r.name,alt:"portrait",rel:"friend",target:"_blank"},[i("div",K,[h(c,X({ref_for:!0},n.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:r.avatar,alt:r.name,"error-img":e.errorImg}),null,16,["src","alt","error-img"])]),i("div",Y,[i("div",G,S(r.blog),1),i("div",H,S(r.desc),1)])],8,J)],4))),128))])])}}}),W=C(Q,[["__scopeId","data-v-fb22ebcf"]]),Z=v({__name:"SakuraLinksLayout",setup(e){const o=M();return(s,a)=>{const n=W,t=j("RouterView"),_=D;return m(),k(_,null,{default:g(()=>[h(t,null,{default:g(({Component:c})=>[(m(),k(O(c),null,{"main-content":g(()=>[h(n,{links:p(o).links,random:p(o).random,"error-img":p(o).errorImg},null,8,["links","random","error-img"])]),_:1}))]),_:1})]),_:1})}}}),tt={};function et(e,o){const s=Z;return m(),k(s)}const ft=C(tt,[["render",et]]);export{ft as default};
