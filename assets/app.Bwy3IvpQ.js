const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/view-transition.IkvUpX_n.css","assets/404.KtaBkSAz.js","assets/chunks/vue-router.CysrPoQU.js","assets/framework.JYNd-MJe.js","assets/chunks/dayjs.DPscOGnl.js","assets/chunks/vue-i18n.CrIghDB1.js","assets/chunks/pinia.DXtYSkKd.js","assets/chunks/nprogress.DgNGesC2.js","assets/404.BVla_BTh.css","assets/empty.Crytpx3C.js","assets/post.Crytpx3C.js","assets/anime.C5-1Z1rQ.js","assets/SakuraPage.vue_vue_type_style_index_0_lang.BqwetR2q.js","assets/SakuraMultiColumns.vue_vue_type_script_setup_true_lang.C_ZnLQF2.js","assets/SakuraPage.Cfl31x9h.css","assets/anime.pRyB0Qdd.css","assets/archives.BDEMG_zJ.js","assets/archives.CunYAfFJ.css","assets/categories.CyB2MDbs.js","assets/SakuraPostList.ekRp5_4j.js","assets/SakuraPostDate.BzZDySaE.js","assets/SakuraPostDate.CQWV6bLq.css","assets/SakuraPostList.BdVe3Ztz.css","assets/categories.FiO9idAV.css","assets/comment.vc2YGwyo.js","assets/hitokoto.CYHuLv51.js","assets/comment.BzTpJtlv.css","assets/home.Cwweg5zM.js","assets/home.BbDjia3H.css","assets/links.DuZ0GlyN.js","assets/links.3SwEtdCV.css","assets/post.BnN41Qpt.js","assets/content.P6FKF6a6.js","assets/post.B1giPUxD.css","assets/search.0W0rihGp.js","assets/search.DmypUj8z.css","assets/tags.Dj4RD0OV.js","assets/tags.CdPrbPBx.css","assets/animation-in.BI4ri2UH.css","assets/index.DEmQf-20.js","assets/Live2DApp.DHI_2l36.js","assets/SakuraAlgoliaSearch.aUIORlBk.js","assets/rolling.DQdrjCAw.js","assets/router.C1axOHAx.js"])))=>i.map(i=>d[i]);
var K_=Object.defineProperty;var Td=r=>{throw TypeError(r)};var Z_=(r,t,e)=>t in r?K_(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var it=(r,t,e)=>Z_(r,typeof t!="symbol"?t+"":t,e),Q_=(r,t,e)=>t.has(r)||Td("Cannot "+e);var Ws=(r,t,e)=>(Q_(r,t,"read from private field"),e?e.call(r):t.get(r)),Ed=(r,t,e)=>t.has(r)?Td("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import{B as Ot,b as $c,h as Gc,i as Hc,r as yt,C as zc,D as J_,y as t0,z as e0,l as Ta,E as r0,s as Vt,f as et,v as K,w as qt,p as Xr,n as $i,g as i0,o as s0,q as nm,G as n0,H as om,I as o0,a as Ph,_ as pe,J as me,K as zt,L as W,M as je,j as It,N as am,O as at,F as Ie,P as At,Q as bn,R as Yo,S as vt,U as Hr,V as te,W as re,X as Dn,Y as lm,Z as ui,$ as a0,u as Ht,a0 as Nt,a1 as jt,a2 as br,a3 as hm,a4 as l0,a5 as cm,a6 as h0,a7 as jc,a8 as um,a9 as c0,aa as u0,ab as d0,k as p0}from"./framework.JYNd-MJe.js";import{u as Vc,a as Xi,c as f0,b as m0,r as Wc,D as g0}from"./chunks/vue-router.CysrPoQU.js";import{d as mi,r as v0,t as y0,u as _0,g as Xc,c as gs,a as b0}from"./chunks/dayjs.DPscOGnl.js";import{c as x0,d as Ea,i as w0}from"./chunks/pinia.DXtYSkKd.js";import{u as Yr,c as T0}from"./chunks/vue-i18n.CrIghDB1.js";import{i as E0}from"./chunks/nprogress.DgNGesC2.js";const Yc="virtual:valaxy-addons:empty",dm=Yc;function pm(r){return r&&r.name===Yc}const S0={name:dm},tD=Object.freeze(Object.defineProperty({__proto__:null,default:S0,emptyAddonName:Yc,isEmptyAddon:pm,name:dm},Symbol.toStringTag,{value:"Module"}));function Tl(r){if(r===null||typeof r!="object")return!1;const t=Object.getPrototypeOf(r);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Ih(r,t,e=".",i){if(!Tl(t))return Ih(r,{},e,i);const s=Object.assign({},t);for(const n in r){if(n==="__proto__"||n==="constructor")continue;const o=r[n];o!=null&&(i&&i(s,n,o,e)||(Array.isArray(o)&&Array.isArray(s[n])?s[n]=[...o,...s[n]]:Tl(o)&&Tl(s[n])?s[n]=Ih(o,s[n],(e?`${e}.`:"")+n.toString(),i):s[n]=o))}return s}function qc(r){return(...t)=>t.reduce((e,i)=>Ih(e,i,"",r),{})}const A0=qc(),C0=new Set(["link","style","script","noscript"]),P0=new Set(["title","titleTemplate","script","style","noscript"]),Sd=new Set(["base","meta","link","style","script","noscript"]),I0=new Set(["title","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"]),R0=new Set(["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"]),M0=new Set(["key","tagPosition","tagPriority","tagDuplicateStrategy","innerHTML","textContent","processTemplateParams"]),k0=new Set(["templateParams","htmlAttrs","bodyAttrs"]),Kc=new Set(["theme-color","google-site-verification","og","article","book","profile","twitter","author"]),xn={META:new Set(["twitter"]),OG:new Set(["og","book","article","profile","fb"]),MEDIA:new Set(["ogImage","ogVideo","ogAudio","twitterImage"]),HTTP_EQUIV:new Set(["contentType","defaultStyle","xUaCompatible"])},D0={articleExpirationTime:"article:expiration_time",articleModifiedTime:"article:modified_time",articlePublishedTime:"article:published_time",bookReleaseDate:"book:release_date",fbAppId:"fb:app_id",ogAudioSecureUrl:"og:audio:secure_url",ogAudioUrl:"og:audio",ogImageSecureUrl:"og:image:secure_url",ogImageUrl:"og:image",ogSiteName:"og:site_name",ogVideoSecureUrl:"og:video:secure_url",ogVideoUrl:"og:video",profileFirstName:"profile:first_name",profileLastName:"profile:last_name",profileUsername:"profile:username",msapplicationConfig:"msapplication-Config",msapplicationTileColor:"msapplication-TileColor",msapplicationTileImage:"msapplication-TileImage"},fm={appleItunesApp:{unpack:{entrySeparator:", ",resolve:({key:r,value:t})=>`${Lr(r)}=${t}`}},refresh:{metaKey:"http-equiv",unpack:{entrySeparator:";",resolve:({key:r,value:t})=>r==="seconds"?`${t}`:void 0}},robots:{unpack:{entrySeparator:", ",resolve:({key:r,value:t})=>typeof t=="boolean"?Lr(r):`${Lr(r)}:${t}`}},contentSecurityPolicy:{metaKey:"http-equiv",unpack:{entrySeparator:"; ",resolve:({key:r,value:t})=>`${Lr(r)} ${t}`}},charset:{}};function Lr(r){const t=r.replace(/([A-Z])/g,"-$1").toLowerCase(),e=t.indexOf("-");return e===-1?t:xn.META.has(t.slice(0,e))||xn.OG.has(t.slice(0,e))?r.replace(/([A-Z])/g,":$1").toLowerCase():t}function mm(r){return Object.fromEntries(Object.entries(r).filter(([t,e])=>String(e)!=="false"&&t))}function Rh(r){return Array.isArray(r)?r.map(Rh):!r||typeof r!="object"?r:Object.fromEntries(Object.entries(r).map(([t,e])=>[Lr(t),Rh(e)]))}function gm(r,t={}){const{entrySeparator:e="",keyValueSeparator:i="",wrapValue:s,resolve:n}=t;return Object.entries(r).map(([o,a])=>{if(n){const u=n({key:o,value:a});if(u!==void 0)return u}const l=typeof a=="object"?gm(a,t):typeof a=="number"?a.toString():typeof a=="string"&&s?`${s}${a.replace(new RegExp(s,"g"),`\\${s}`)}${s}`:a;return`${o}${i}${l}`}).join(e)}function Ad(r,t){const e=mm(t),i=Lr(r),s=vm(i);if(!Kc.has(i))return[{[s]:i,...e}];const n=Object.fromEntries(Object.entries(e).map(([o,a])=>[`${r}${o==="url"?"":`${o[0].toUpperCase()}${o.slice(1)}`}`,a]));return qo(n||{}).sort((o,a)=>{var l,u;return(((l=o[s])==null?void 0:l.length)||0)-(((u=a[s])==null?void 0:u.length)||0)})}function vm(r){var i;if(((i=fm[r])==null?void 0:i.metaKey)==="http-equiv"||xn.HTTP_EQUIV.has(r))return"http-equiv";const t=Lr(r),e=t.indexOf(":");return e===-1?"name":xn.OG.has(t.slice(0,e))?"property":"name"}function O0(r){return D0[r]||Lr(r)}function B0(r,t){var e;return t==="refresh"?`${r.seconds};url=${r.url}`:gm(Rh(r),{keyValueSeparator:"=",entrySeparator:", ",resolve:({value:i,key:s})=>i===null?"":typeof i=="boolean"?s:void 0,...(e=fm[t])==null?void 0:e.unpack})}function qo(r){const t=[],e={};for(const[s,n]of Object.entries(r)){if(Array.isArray(n)){if(s==="themeColor"){n.forEach(o=>{typeof o=="object"&&o!==null&&t.push({name:"theme-color",...o})});continue}for(const o of n)if(typeof o=="object"&&o!==null){const a=[],l=[];for(const[u,d]of Object.entries(o)){const f=`${s}${u==="url"?"":`:${u}`}`,m=qo({[f]:d});(u==="url"?a:l).push(...m)}t.push(...a,...l)}else t.push(...typeof o=="string"?qo({[s]:o}):Ad(s,o));continue}if(typeof n=="object"&&n)if(xn.MEDIA.has(s)){const o=s.startsWith("twitter")?"twitter":"og",a=s.replace(/^(og|twitter)/,"").toLowerCase(),l=o==="twitter"?"name":"property";n.url&&t.push({[l]:`${o}:${a}`,content:n.url}),n.secureUrl&&t.push({[l]:`${o}:${a}:secure_url`,content:n.secureUrl});for(const[u,d]of Object.entries(n))u!=="url"&&u!=="secureUrl"&&t.push({[l]:`${o}:${a}:${u}`,content:d})}else Kc.has(Lr(s))?t.push(...Ad(s,n)):e[s]=mm(n);else e[s]=n}const i=Object.entries(e).map(([s,n])=>{if(s==="charset")return{charset:n===null?"_null":n};const o=vm(s),a=O0(s),l=n===null?"_null":typeof n=="object"?B0(n,s):typeof n=="number"?n.toString():n;return o==="http-equiv"?{"http-equiv":a,content:l}:{[o]:a,content:l}});return[...t,...i].map(s=>"content"in s&&s.content==="_null"?{...s,content:null}:s)}const L0={key:"flatMeta",hooks:{"entries:normalize":r=>{const t=[];r.tags=r.tags.map(e=>e.tag!=="_flatMeta"?e:(t.push(qo(e.props).map(i=>({...e,tag:"meta",props:i}))),!1)).filter(Boolean).concat(...t)}}},Cd=(r,t)=>r._w===t._w?r._p-t._p:r._w-t._w,Pd={base:-10,title:10},F0={critical:-8,high:-1,low:2},Id={meta:{"content-security-policy":-30,charset:-20,viewport:-15},link:{preconnect:20,stylesheet:60,preload:70,modulepreload:70,prefetch:90,"dns-prefetch":90,prerender:90},script:{async:30,defer:80,sync:50},style:{imported:40,sync:60}},N0=/@import/,Xs=r=>r===""||r===!0;function U0(r,t){var n;if(typeof t.tagPriority=="number")return t.tagPriority;let e=100;const i=F0[t.tagPriority]||0,s=r.resolvedOptions.disableCapoSorting?{link:{},script:{},style:{}}:Id;if(t.tag in Pd)e=Pd[t.tag];else if(t.tag==="meta"){const o=t.props["http-equiv"]==="content-security-policy"?"content-security-policy":t.props.charset?"charset":t.props.name==="viewport"?"viewport":null;o&&(e=Id.meta[o])}else t.tag==="link"&&t.props.rel?e=s.link[t.props.rel]:t.tag==="script"?Xs(t.props.async)?e=s.script.async:t.props.src&&!Xs(t.props.defer)&&!Xs(t.props.async)&&t.props.type!=="module"&&!((n=t.props.type)!=null&&n.endsWith("json"))?e=s.script.sync:Xs(t.props.defer)&&t.props.src&&!Xs(t.props.async)&&(e=s.script.defer):t.tag==="style"&&(e=t.innerHTML&&N0.test(t.innerHTML)?s.style.imported:s.style.sync);return(e||100)+i}const ni="%separator",$0=new RegExp(`${ni}(?:\\s*${ni})*`,"g");function G0(r,t,e=!1){var s;let i;if(t==="s"||t==="pageTitle")i=r.pageTitle;else if(t.includes(".")){const n=t.indexOf(".");i=(s=r[t.substring(0,n)])==null?void 0:s[t.substring(n+1)]}else i=r[t];if(i!==void 0)return e?(i||"").replace(/\\/g,"\\\\").replace(/</g,"\\u003C").replace(/"/g,'\\"'):i||""}function Js(r,t,e,i=!1){if(typeof r!="string"||!r.includes("%"))return r;let s=r;try{s=decodeURI(r)}catch{}const n=s.match(/%\w+(?:\.\w+)?/g);if(!n)return r;const o=r.includes(ni);return r=r.replace(/%\w+(?:\.\w+)?/g,a=>{if(a===ni||!n.includes(a))return a;const l=G0(t,a.slice(1),i);return l!==void 0?l:a}).trim(),o&&(r.endsWith(ni)&&(r=r.slice(0,-ni.length)),r.startsWith(ni)&&(r=r.slice(ni.length)),r=r.replace($0,e||"").trim()),r}const H0={meta:"content",link:"href",htmlAttrs:"lang"},z0=["innerHTML","textContent"],j0=r=>({key:"template-params",hooks:{"entries:normalize":t=>{var i,s,n;const e=((s=(i=t.tags.filter(o=>o.tag==="templateParams"&&o.mode==="server"))==null?void 0:i[0])==null?void 0:s.props)||{};Object.keys(e).length&&(r._ssrPayload={templateParams:{...((n=r._ssrPayload)==null?void 0:n.templateParams)||{},...e}})},"tags:resolve":({tagMap:t,tags:e})=>{var n;const i=((n=t.get("templateParams"))==null?void 0:n.props)||{},s=i.separator||"|";delete i.separator,i.pageTitle=Js(i.pageTitle||r._title||"",i,s);for(const o of e){if(o.processTemplateParams===!1)continue;const a=H0[o.tag];if(a&&typeof o.props[a]=="string")o.props[a]=Js(o.props[a],i,s);else if(o.processTemplateParams||o.tag==="titleTemplate"||o.tag==="title")for(const l of z0)typeof o[l]=="string"&&(o[l]=Js(o[l],i,s,o.tag==="script"&&o.props.type.endsWith("json")))}r._templateParams=i,r._separator=s},"tags:afterResolve":({tagMap:t})=>{const e=t.get("title");e!=null&&e.textContent&&e.processTemplateParams!==!1&&(e.textContent=Js(e.textContent,r._templateParams,r._separator))}}});function V0(r={}){return t=>(t.push({meta:[{name:"twitter:card",content:r.twitterCard||"summary_large_image",tagPriority:"low"},{property:"og:title",tagPriority:"low","data-infer":""},{property:"og:description",tagPriority:"low","data-infer":""}]}),{key:"infer-seo-meta",hooks:{"tags:beforeResolve":({tagMap:e})=>{var a,l;let i=t._titleTemplate||t._title;const s=e.get("meta:og:title");typeof(s==null?void 0:s.props["data-infer"])<"u"&&(typeof i=="function"&&(i=i(t._title)),s.props.content=r.ogTitle?r.ogTitle(i):i||"",s.processTemplateParams=!0);const n=(l=(a=e.get("meta:description"))==null?void 0:a.props)==null?void 0:l.content,o=e.get("meta:og:description");typeof(o==null?void 0:o.props["data-infer"])<"u"&&(o.props.content=r.ogDescription?r.ogDescription(n):n||"",o.processTemplateParams=!0)}}})}const W0=["name","property","http-equiv"];function ym(r){const t=r.split(":");return t.length?Kc.has(t[1]):!1}function Mh(r){const{props:t,tag:e}=r;if(R0.has(e))return e;if(e==="link"&&t.rel==="canonical")return"canonical";if(t.charset)return"charset";if(r.tag==="meta"){for(const i of W0)if(t[i]!==void 0)return`${e}:${t[i]}`}if(r.key)return`${e}:key:${r.key}`;if(t.id)return`${e}:id:${t.id}`;if(P0.has(e)){const i=r.textContent||r.innerHTML;if(i)return`${e}:content:${i}`}}function Rd(r){const t=r._h||r._d;if(t)return t;const e=r.textContent||r.innerHTML;return e||`${r.tag}:${Object.entries(r.props).map(([i,s])=>`${i}:${String(s)}`).join(",")}`}function Ko(r,t,e){typeof r==="function"&&(!e||e!=="titleTemplate"&&!(e[0]==="o"&&e[1]==="n"))&&(r=r());let s;if(t&&(s=t(e,r)),Array.isArray(s))return s.map(n=>Ko(n,t));if((s==null?void 0:s.constructor)===Object){const n={};for(const o of Object.keys(s))n[o]=Ko(s[o],t,o);return n}return s}function X0(r,t){const e=r==="style"?new Map:new Set;function i(s){const n=s.trim();if(n)if(r==="style"){const[o,...a]=n.split(":").map(l=>l.trim());o&&a.length&&e.set(o,a.join(":"))}else n.split(" ").filter(Boolean).forEach(o=>e.add(o))}return typeof t=="string"?r==="style"?t.split(";").forEach(i):i(t):Array.isArray(t)?t.forEach(s=>i(s)):t&&typeof t=="object"&&Object.entries(t).forEach(([s,n])=>{n&&n!=="false"&&(r==="style"?e.set(s.trim(),n):i(s))}),e}function _m(r,t){return r.props=r.props||{},t&&Object.entries(t).forEach(([e,i])=>{if(i===null){r.props[e]=null;return}if(e==="class"||e==="style"){r.props[e]=X0(e,i);return}if(M0.has(e)){if(["textContent","innerHTML"].includes(e)&&typeof i=="object"){let o=t.type;if(t.type||(o="application/json"),!(o!=null&&o.endsWith("json"))&&o!=="speculationrules")return;t.type=o,r.props.type=o,r[e]=JSON.stringify(i)}else r[e]=i;return}const s=String(i),n=e.startsWith("data-");s==="true"||s===""?r.props[e]=n?s:!0:!i&&n&&s==="false"?r.props[e]="false":i!==void 0&&(r.props[e]=i)}),r}function Y0(r,t){const e=typeof t=="object"&&typeof t!="function"?t:{[r==="script"||r==="noscript"||r==="style"?"innerHTML":"textContent"]:t},i=_m({tag:r,props:{}},e);return i.key&&C0.has(i.tag)&&(i.props["data-hid"]=i._h=i.key),i.tag==="script"&&typeof i.innerHTML=="object"&&(i.innerHTML=JSON.stringify(i.innerHTML),i.props.type=i.props.type||"application/json"),Array.isArray(i.props.content)?i.props.content.map(s=>({...i,props:{...i.props,content:s}})):i}function q0(r,t){if(!r)return[];typeof r=="function"&&(r=r());const e=(s,n)=>{for(let o=0;o<t.length;o++)n=t[o](s,n);return n};r=e(void 0,r);const i=[];return r=Ko(r,e),Object.entries(r||{}).forEach(([s,n])=>{if(n!==void 0)for(const o of Array.isArray(n)?n:[n])i.push(Y0(s,o))}),i.flat()}const K0=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Z0=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Q0=/^([/\\]\s*){2,}[^/\\]/,J0=/^\.?\//;function Zc(r,t={}){return typeof t=="boolean"&&(t={acceptRelative:t}),t.strict?K0.test(r):Z0.test(r)||(t.acceptRelative?Q0.test(r):!1)}function kh(r="",t){return r.endsWith("/")}function Qc(r="",t){return(kh(r)?r.slice(0,-1):r)||"/"}function bm(r="",t){return r.endsWith("/")?r:r+"/"}function xr(r,t){if(tb(t)||Zc(r))return r;const e=Qc(t);return r.startsWith(e)?r:xm(e,r)}function tb(r){return!r||r==="/"}function eb(r){return r&&r!=="/"}function xm(r,...t){let e=r||"";for(const i of t.filter(s=>eb(s)))if(e){const s=i.replace(J0,"");e=bm(e)+s}else e=i;return e}function rb(r){return typeof r=="string"?`'${r}'`:new ib().serialize(r)}const ib=function(){var t;class r{constructor(){Ed(this,t,new Map)}compare(i,s){const n=typeof i,o=typeof s;return n==="string"&&o==="string"?i.localeCompare(s):n==="number"&&o==="number"?i-s:String.prototype.localeCompare.call(this.serialize(i,!0),this.serialize(s,!0))}serialize(i,s){if(i===null)return"null";switch(typeof i){case"string":return s?i:`'${i}'`;case"bigint":return`${i}n`;case"object":return this.$object(i);case"function":return this.$function(i)}return String(i)}serializeObject(i){const s=Object.prototype.toString.call(i);if(s!=="[object Object]")return this.serializeBuiltInType(s.length<10?`unknown:${s}`:s.slice(8,-1),i);const n=i.constructor,o=n===Object||n===void 0?"":n.name;if(o!==""&&globalThis[o]===n)return this.serializeBuiltInType(o,i);if(typeof i.toJSON=="function"){const a=i.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(i))}serializeBuiltInType(i,s){const n=this["$"+i];if(n)return n.call(this,s);if(typeof(s==null?void 0:s.entries)=="function")return this.serializeObjectEntries(i,s.entries());throw new Error(`Cannot serialize ${i}`)}serializeObjectEntries(i,s){const n=Array.from(s).sort((a,l)=>this.compare(a[0],l[0]));let o=`${i}{`;for(let a=0;a<n.length;a++){const[l,u]=n[a];o+=`${this.serialize(l,!0)}:${this.serialize(u)}`,a<n.length-1&&(o+=",")}return o+"}"}$object(i){let s=Ws(this,t).get(i);return s===void 0&&(Ws(this,t).set(i,`#${Ws(this,t).size}`),s=this.serializeObject(i),Ws(this,t).set(i,s)),s}$function(i){const s=Function.prototype.toString.call(i);return s.slice(-15)==="[native code] }"?`${i.name||""}()[native]`:`${i.name}(${i.length})${s.replace(/\s*\n\s*/g,"")}`}$Array(i){let s="[";for(let n=0;n<i.length;n++)s+=this.serialize(i[n]),n<i.length-1&&(s+=",");return s+"]"}$Date(i){try{return`Date(${i.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(i){return`ArrayBuffer[${new Uint8Array(i).join(",")}]`}$Set(i){return`Set${this.$Array(Array.from(i).sort((s,n)=>this.compare(s,n)))}`}$Map(i){return this.serializeObjectEntries("Map",i.entries())}}t=new WeakMap;for(const e of["Error","RegExp","URL"])r.prototype["$"+e]=function(i){return`${e}(${i})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])r.prototype["$"+e]=function(i){return`${e}[${i.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])r.prototype["$"+e]=function(i){return`${e}[${i.join("n,")}${i.length>0?"n":""}]`};return r}(),sb=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],nb=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],ob="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",Ei=[];let ab=class{constructor(){it(this,"_data",new so);it(this,"_hash",new so([...sb]));it(this,"_nDataBytes",0);it(this,"_minBufferSize",0)}finalize(t){t&&this._append(t);const e=this._nDataBytes*8,i=this._data.sigBytes*8;return this._data.words[i>>>5]|=128<<24-i%32,this._data.words[(i+64>>>9<<4)+14]=Math.floor(e/4294967296),this._data.words[(i+64>>>9<<4)+15]=e,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(t,e){const i=this._hash.words;let s=i[0],n=i[1],o=i[2],a=i[3],l=i[4],u=i[5],d=i[6],f=i[7];for(let m=0;m<64;m++){if(m<16)Ei[m]=t[e+m]|0;else{const S=Ei[m-15],M=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,k=Ei[m-2],F=(k<<15|k>>>17)^(k<<13|k>>>19)^k>>>10;Ei[m]=M+Ei[m-7]+F+Ei[m-16]}const v=l&u^~l&d,y=s&n^s&o^n&o,b=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),w=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),E=f+w+v+nb[m]+Ei[m],P=b+y;f=d,d=u,u=l,l=a+E|0,a=o,o=n,n=s,s=E+P|0}i[0]=i[0]+s|0,i[1]=i[1]+n|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+l|0,i[5]=i[5]+u|0,i[6]=i[6]+d|0,i[7]=i[7]+f|0}_append(t){typeof t=="string"&&(t=so.fromUtf8(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(t){let e,i=this._data.sigBytes/64;t?i=Math.ceil(i):i=Math.max((i|0)-this._minBufferSize,0);const s=i*16,n=Math.min(s*4,this._data.sigBytes);if(s){for(let o=0;o<s;o+=16)this._doProcessBlock(this._data.words,o);e=this._data.words.splice(0,s),this._data.sigBytes-=n}return new so(e,n)}},so=class wm{constructor(t,e){it(this,"words");it(this,"sigBytes");t=this.words=t||[],this.sigBytes=e===void 0?t.length*4:e}static fromUtf8(t){const e=unescape(encodeURIComponent(t)),i=e.length,s=[];for(let n=0;n<i;n++)s[n>>>2]|=(e.charCodeAt(n)&255)<<24-n%4*8;return new wm(s,i)}toBase64(){const t=[];for(let e=0;e<this.sigBytes;e+=3){const i=this.words[e>>>2]>>>24-e%4*8&255,s=this.words[e+1>>>2]>>>24-(e+1)%4*8&255,n=this.words[e+2>>>2]>>>24-(e+2)%4*8&255,o=i<<16|s<<8|n;for(let a=0;a<4&&e*8+a*6<this.sigBytes*8;a++)t.push(ob.charAt(o>>>6*(3-a)&63))}return t.join("")}concat(t){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let e=0;e<t.sigBytes;e++){const i=t.words[e>>>2]>>>24-e%4*8&255;this.words[this.sigBytes+e>>>2]|=i<<24-(this.sigBytes+e)%4*8}else for(let e=0;e<t.sigBytes;e+=4)this.words[this.sigBytes+e>>>2]=t.words[e>>>2];this.sigBytes+=t.sigBytes}};function lb(r){return new ab().finalize(r).toBase64()}function Jc(r){return lb(rb(r))}function Ut(r){return{"@id":typeof r!="string"?r["@id"]:r}}function tu(r){try{const t=r instanceof Date?r:new Date(Date.parse(r));return`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}`}catch{}return typeof r=="string"?r:r.toString()}const hb=[/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,/^\d{4}-[01]\d-[0-3]\d$/,/^\d{4}-[01]\d$/,/^\d{4}$/];function cb(r){return hb.some(t=>t.test(r))}function zr(r){if(!r)return r;try{return r instanceof Date?r.toISOString():cb(r)?r:new Date(Date.parse(r)).toISOString()}catch{}return typeof r=="string"?r:r.toString()}const Pe="#identity";function bt(r,t,e){!(r!=null&&r[t])&&e&&(r[t]=e)}function nr(r){return Array.isArray(r)?r:[r]}function ub(r,t,e){const i=new Set(nr(r[t]));i.add(e),r[t]=[...i].filter(Boolean)}function ln(r,t){return Zc(t)?t:(t.includes("#")||(t=`#${t}`),`${r||""}${t}`)}function db(r,t){if(!r)return r;if(r.length>t){const e=r.substring(0,t);return e.substring(0,Math.min(e.length,e.lastIndexOf(" ")))}return r}function Rs(r,t){const e=r["@type"];if(e===t)return;const i=new Set([...nr(t),...nr(e)]);r["@type"]=i.size===1?e:[...i.values()]}function jr(r,t){return!t||Zc(t)||t[0]!=="/"&&t[0]!=="#"?t:xr(t,r)}function Ms(r){return r&&r.substring(r.lastIndexOf("#"))}function Tm(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)){if(r[t]&&typeof r[t]=="object"){if(r[t].__v_isReadonly||r[t].__v_isRef)return;Tm(r[t]);return}(r[t]===""||r[t]===null||r[t]===void 0)&&delete r[t]}return r}function Em(r){let t=9;for(let e=0;e<r.length;)t=Math.imul(t^r.charCodeAt(e++),9**9);return((t^t>>>9)+65536).toString(16).substring(1,8).toLowerCase()}const Dh={cast(r){return typeof r=="number"?{value:r}:r},defaults:{"@type":"QuantitativeValue"}},eu={defaults:{"@type":"MonetaryAmount"},resolve(r,t){return typeof r.value!="number"&&(r.value=ct(r.value,t,Dh)),r}},pb={defaults:{"@type":"MerchantReturnPolicy"},resolve(r,t){return r.returnPolicyCategory&&(r.returnPolicyCategory=xr(r.returnPolicyCategory,"https://schema.org/")),r.returnFees&&(r.returnFees=xr(r.returnFees,"https://schema.org/")),r.returnMethod&&(r.returnMethod=xr(r.returnMethod,"https://schema.org/")),r.returnShippingFeesAmount=ct(r.returnShippingFeesAmount,t,eu),r}},fb={defaults:{"@type":"DefinedRegion"}},mb={defaults:{"@type":"ShippingDeliveryTime"},resolve(r,t){return r.handlingTime=ct(r.handlingTime,t,Dh),r.transitTime=ct(r.transitTime,t,Dh),r}},gb={defaults:{"@type":"OfferShippingDetails"},resolve(r,t){return r.deliveryTime=ct(r.deliveryTime,t,mb),r.shippingDestination=ct(r.shippingDestination,t,fb),r.shippingRate=ct(r.shippingRate,t,eu),r}},On={cast(r){return typeof r=="number"||typeof r=="string"?{price:r}:r},defaults:{"@type":"Offer",availability:"InStock"},resolve(r,t){return bt(r,"priceCurrency",t.meta.currency),bt(r,"priceValidUntil",new Date(Date.UTC(new Date().getFullYear()+1,12,-1,0,0,0))),r.url&&jr(t.meta.host,r.url),r.availability&&(r.availability=xr(r.availability,"https://schema.org/")),r.itemCondition&&(r.itemCondition=xr(r.itemCondition,"https://schema.org/")),r.priceValidUntil&&(r.priceValidUntil=zr(r.priceValidUntil)),r.hasMerchantReturnPolicy=ct(r.hasMerchantReturnPolicy,t,pb),r.shippingDetails=ct(r.shippingDetails,t,gb),r}},Sm={defaults:{"@type":"AggregateOffer"},inheritMeta:[{meta:"currency",key:"priceCurrency"}],resolve(r,t){return r.offers=ct(r.offers,t,On),r.offers&&bt(r,"offerCount",nr(r.offers).length),r}},Sa={defaults:{"@type":"AggregateRating"}},ru={cast(r){return typeof r=="string"&&(r={name:r}),r},defaults:{"@type":"ListItem"},resolve(r,t){return typeof r.item=="string"?r.item=jr(t.meta.host,r.item):typeof r.item=="object"&&(r.item=ct(r.item,t)),r}},Am="#breadcrumb",Cm={defaults:{"@type":"BreadcrumbList"},idPrefix:["url",Am],resolve(r,t){if(r.itemListElement){let e=1;r.itemListElement=ct(r.itemListElement,t,ru,{array:!0,afterResolve(i){bt(i,"position",e++)}})}return r},resolveRootNode(r,{find:t}){const e=t(ar);e&&bt(e,"breadcrumb",Ut(r))}},Gi={alias:"image",cast(r){return typeof r=="string"&&(r={url:r}),r},defaults:{"@type":"ImageObject"},inheritMeta:["inLanguage"],idPrefix:"host",resolve(r,{meta:t}){return r.url=jr(t.host,r.url),bt(r,"contentUrl",r.url),r.height&&!r.width&&delete r.height,r.width&&!r.height&&delete r.width,r}},Aa={defaults:{"@type":"PostalAddress"}},Pm={defaults:{"@type":"SearchAction",target:{"@type":"EntryPoint"},"query-input":{"@type":"PropertyValueSpecification",valueRequired:!0,valueName:"search_term_string"}},resolve(r,t){return typeof r.target=="string"&&(r.target={"@type":"EntryPoint",urlTemplate:jr(t.meta.host,r.target)}),r}},wn="#website",vb={defaults:{"@type":"WebSite"},inheritMeta:["inLanguage",{meta:"host",key:"url"}],idPrefix:["host",wn],resolve(r,t){return r.potentialAction=ct(r.potentialAction,t,Pm,{array:!0}),r.publisher=ct(r.publisher,t),r},resolveRootNode(r,{find:t}){if(Ms(r["@id"])===wn){const e=t(Pe);e&&bt(r,"publisher",Ut(e));const i=t(ar);i&&bt(i,"isPartOf",Ut(r))}return r}},Hi={defaults:{"@type":"Organization"},idPrefix:["host",Pe],inheritMeta:[{meta:"host",key:"url"}],resolve(r,t){return Rs(r,"Organization"),r.address=ct(r.address,t,Aa),r},resolveRootNode(r,t){const e=Ms(r["@id"])===Pe,i=t.find(ar);if(r.logo&&e){if(!t.find("#organization")){const n=ct(r.logo,t,Gi,{root:!0,afterResolve(o){o["@id"]=ln(t.meta.host,"#logo"),bt(o,"caption",r.name)}});i&&n&&bt(i,"primaryImageOfPage",Ut(n)),t.nodes.push({"@type":"Organization",name:r.name,url:r.url,sameAs:r.sameAs,address:r.address,logo:ct(r.logo,t,Gi,{root:!1}).url,_priority:-1,"@id":ln(t.meta.host,"#organization")})}delete r.logo}e&&i&&bt(i,"about",Ut(r));const s=t.find(wn);s&&bt(s,"publisher",Ut(r))}},Im={defaults:{"@type":"ReadAction"},resolve(r,t){return r.target.includes(t.meta.url)||r.target.unshift(t.meta.url),r}},ar="#webpage",yb={defaults({meta:r}){const t=Qc(r.url.substring(r.url.lastIndexOf("/")+1));let e="WebPage";switch(t){case"about":case"about-us":e="AboutPage";break;case"search":e="SearchResultsPage";break;case"checkout":e="CheckoutPage";break;case"contact":case"get-in-touch":case"contact-us":e="ContactPage";break;case"faq":e="FAQPage";break}return{"@type":e}},idPrefix:["url",ar],inheritMeta:[{meta:"title",key:"name"},"description","datePublished","dateModified","url"],resolve(r,t){return r.dateModified=zr(r.dateModified),r.datePublished=zr(r.datePublished),Rs(r,"WebPage"),r.about=ct(r.about,t,Hi),r.breadcrumb=ct(r.breadcrumb,t,Cm),r.author=ct(r.author,t,gi),r.primaryImageOfPage=ct(r.primaryImageOfPage,t,Gi),r.potentialAction=ct(r.potentialAction,t,Im),r["@type"]==="WebPage"&&t.meta.url&&bt(r,"potentialAction",[{"@type":"ReadAction",target:[t.meta.url]}]),r},resolveRootNode(r,{find:t,meta:e}){const i=t(Pe),s=t(wn),n=t("#logo");i&&e.url===e.host&&bt(r,"about",Ut(i)),n&&bt(r,"primaryImageOfPage",Ut(n)),s&&bt(r,"isPartOf",Ut(s));const o=t(Am);return o&&bt(r,"breadcrumb",Ut(o)),r}},gi={cast(r){return typeof r=="string"?{name:r}:r},defaults:{"@type":"Person"},idPrefix:["host",Pe],resolve(r,t){return r.url&&(r.url=jr(t.meta.host,r.url)),r},resolveRootNode(r,{find:t,meta:e}){if(Ms(r["@id"])===Pe){bt(r,"url",e.host);const s=t(ar);s&&bt(s,"about",Ut(r));const n=t(wn);n&&bt(n,"publisher",Ut(r))}const i=t(Ca);i&&bt(i,"author",Ut(r))}},Ca="#article",_b={defaults:{"@type":"Article"},inheritMeta:["inLanguage","description","image","dateModified","datePublished",{meta:"title",key:"headline"}],idPrefix:["url",Ca],resolve(r,t){return r.author=ct(r.author,t,gi,{root:!0}),r.publisher=ct(r.publisher,t),r.dateModified=zr(r.dateModified),r.datePublished=zr(r.datePublished),Rs(r,"Article"),r.headline=db(r.headline,110),r},resolveRootNode(r,{find:t,meta:e}){var n;const i=t(ar),s=t(Pe);if(r.image&&!r.thumbnailUrl){const o=nr(r.image)[0];typeof o=="string"?bt(r,"thumbnailUrl",jr(e.host,o)):o!=null&&o["@id"]&&bt(r,"thumbnailUrl",(n=t(o["@id"]))==null?void 0:n.url)}return s&&(bt(r,"publisher",Ut(s)),bt(r,"author",Ut(s))),i&&(bt(r,"isPartOf",Ut(i)),bt(r,"mainEntityOfPage",Ut(i)),bt(i,"potentialAction",[{"@type":"ReadAction",target:[e.url]}]),bt(i,"dateModified",r.dateModified),bt(i,"datePublished",r.datePublished)),r}},Rm={defaults:{"@type":"Book"},inheritMeta:["inLanguage"],resolve(r,t){return r.bookFormat&&(r.bookFormat=xr(r.bookFormat,"https://schema.org/")),r.datePublished&&(r.datePublished=tu(r.datePublished)),r.author=ct(r.author,t),r},resolveRootNode(r,{find:t}){const e=t(Pe);return e&&bt(r,"provider",Ut(e)),r}},bb="#book",xb={defaults:{"@type":"Book"},inheritMeta:["description","url",{meta:"title",key:"name"}],idPrefix:["url",bb],resolve(r,t){return r.workExample=ct(r.workExample,t,Rm),r.author=ct(r.author,t),r.url&&xr(r.url,t.meta.host),r},resolveRootNode(r,{find:t}){const e=t(Pe);return e&&bt(r,"author",Ut(e)),r}},wb={defaults:{"@type":"Comment"},idPrefix:"url",resolve(r,t){return r.author=ct(r.author,t,gi,{root:!0}),r},resolveRootNode(r,{find:t}){const e=t(Ca);e&&bt(r,"about",Ut(e))}},Tb={defaults:{"@type":"Course"},resolve(r,t){return r.provider=ct(r.provider,t,Hi,{root:!0}),r},resolveRootNode(r,{find:t}){const e=t(Pe);return e&&bt(r,"provider",Ut(e)),r}},iu={defaults:{"@type":"Place"},resolve(r,t){return typeof r.address!="string"&&(r.address=ct(r.address,t,Aa)),r}},Mm={cast(r){return typeof r=="string"?{url:r}:r},defaults:{"@type":"VirtualLocation"}},Eb="#event",Sb={defaults:{"@type":"Event"},inheritMeta:["inLanguage","description","image",{meta:"title",key:"name"}],idPrefix:["url",Eb],resolve(r,t){var s;if(r.location){const n=r.location==="string"||((s=r.location)==null?void 0:s.url)!=="undefined";r.location=ct(r.location,t,n?Mm:iu)}r.performer=ct(r.performer,t,gi,{root:!0}),r.organizer=ct(r.organizer,t,Hi,{root:!0}),r.offers=ct(r.offers,t,On),r.eventAttendanceMode&&(r.eventAttendanceMode=xr(r.eventAttendanceMode,"https://schema.org/")),r.eventStatus&&(r.eventStatus=xr(r.eventStatus,"https://schema.org/"));const e=r.eventStatus==="https://schema.org/EventMovedOnline";return["startDate","previousStartDate","endDate"].forEach(n=>{e?r[n]=zr(r[n]):r[n]instanceof Date&&r[n].getHours()===0&&r[n].getMinutes()===0&&(r[n]=tu(r[n]))}),bt(r,"endDate",r.startDate),r},resolveRootNode(r,{find:t}){const e=t(Pe);e&&bt(r,"organizer",Ut(e))}},km={defaults:{"@type":"OpeningHoursSpecification",opens:"00:00",closes:"23:59"}},Oh={defaults:{"@type":["Organization","LocalBusiness"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",Pe],resolve(r,t){return Rs(r,["Organization","LocalBusiness"]),r.address=ct(r.address,t,Aa),r.openingHoursSpecification=ct(r.openingHoursSpecification,t,km),r=Ia({...r},t,Hi),r},resolveRootNode(r,t){return Hi.resolveRootNode(r,t),r}},Dm={cast(r){return r==="number"?{ratingValue:r}:r},defaults:{"@type":"Rating",bestRating:5,worstRating:1}},Ab={defaults:{"@type":["Organization","LocalBusiness","FoodEstablishment"]},inheritMeta:[{key:"url",meta:"host"},{key:"currenciesAccepted",meta:"currency"}],idPrefix:["host",Pe],resolve(r,t){return Rs(r,["Organization","LocalBusiness","FoodEstablishment"]),r.starRating=ct(r.starRating,t,Dm),r=Ia(r,t,Oh),r},resolveRootNode(r,t){return Oh.resolveRootNode(r,t),r}},Cb={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToDirection"}},su={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"HowToStep"},resolve(r,t){return r.url&&(r.url=jr(t.meta.url,r.url)),r.image&&(r.image=ct(r.image,t,Gi,{root:!0})),r.itemListElement&&(r.itemListElement=ct(r.itemListElement,t,Cb)),r}},Pb="#howto",Ib={defaults:{"@type":"HowTo"},inheritMeta:["description","image","inLanguage",{meta:"title",key:"name"}],idPrefix:["url",Pb],resolve(r,t){return r.step=ct(r.step,t,su),r},resolveRootNode(r,{find:t}){const e=t(ar);e&&bt(r,"mainEntityOfPage",Ut(e))}},Rb={defaults:{"@type":"ItemList"},resolve(r,t){if(r.itemListElement){let e=1;r.itemListElement=ct(r.itemListElement,t,ru,{array:!0,afterResolve(i){bt(i,"position",e++)}})}return r}},Mb={defaults:{"@type":"JobPosting"},idPrefix:["url","#job-posting"],resolve(r,t){return r.datePosted=zr(r.datePosted),r.hiringOrganization=ct(r.hiringOrganization,t,Hi),r.jobLocation=ct(r.jobLocation,t,iu),r.baseSalary=ct(r.baseSalary,t,eu),r.validThrough=zr(r.validThrough),r},resolveRootNode(r,{find:t}){const e=t(ar),i=t(Pe);return i&&bt(r,"hiringOrganization",Ut(i)),e&&bt(r,"mainEntityOfPage",Ut(e)),r}},Pa={defaults:{"@type":"Review"},inheritMeta:["inLanguage"],resolve(r,t){return r.reviewRating=ct(r.reviewRating,t,Dm),r.author=ct(r.author,t,gi),r}},Om={cast(r){return typeof r=="string"&&(r={url:r}),r},alias:"video",defaults:{"@type":"VideoObject"},inheritMeta:[{meta:"title",key:"name"},"description","image","inLanguage",{meta:"datePublished",key:"uploadDate"}],idPrefix:"host",resolve(r,t){if(r.uploadDate&&(r.uploadDate=zr(r.uploadDate)),r.url=jr(t.meta.host,r.url),r.caption&&!r.description&&(r.description=r.caption),r.description||(r.description="No description"),r.thumbnailUrl&&(typeof r.thumbnailUrl=="string"||Array.isArray(r.thumbnailUrl))){const e=nr(r.thumbnailUrl).map(i=>jr(t.meta.host,i));r.thumbnailUrl=e.length>1?e:e[0]}return r.thumbnail&&(r.thumbnail=ct(r.thumbnailUrl,t,Gi)),r},resolveRootNode(r,{find:t}){var e;if(r.image&&!r.thumbnail){const i=nr(r.image)[0];bt(r,"thumbnail",(e=t(i["@id"]))==null?void 0:e.url)}}},kb={defaults:{"@type":"Movie"},resolve(r,t){return r.aggregateRating=ct(r.aggregateRating,t,Sa),r.review=ct(r.review,t,Pa),r.director=ct(r.director,t,gi),r.actor=ct(r.actor,t,gi),r.trailer=ct(r.trailer,t,Om),r.dateCreated&&(r.dateCreated=tu(r.dateCreated)),r}},Db="#product",Ob={defaults:{"@type":"Product"},inheritMeta:["description","image",{meta:"title",key:"name"}],idPrefix:["url",Db],resolve(r,t){return bt(r,"sku",Em(r.name)),r.aggregateOffer=ct(r.aggregateOffer,t,Sm),r.aggregateRating=ct(r.aggregateRating,t,Sa),r.offers=ct(r.offers,t,On),r.review=ct(r.review,t,Pa),r},resolveRootNode(r,{find:t}){const e=t(ar),i=t(Pe);return i&&bt(r,"brand",Ut(i)),e&&bt(r,"mainEntityOfPage",Ut(e)),r}},Bb={cast(r){return typeof r=="string"?{text:r}:r},defaults:{"@type":"Answer"}},Lb={defaults:{"@type":"Question"},inheritMeta:["inLanguage"],idPrefix:"url",resolve(r,t){return r.question&&(r.name=r.question,delete r.question),r.answer&&(r.acceptedAnswer=r.answer,delete r.answer),r.acceptedAnswer=ct(r.acceptedAnswer,t,Bb),r},resolveRootNode(r,{find:t}){const e=t(ar);e&&nr(e["@type"]).includes("FAQPage")&&ub(e,"mainEntity",Ut(r))}},Fb="#recipe",Nb={defaults:{"@type":"Recipe"},inheritMeta:[{meta:"title",key:"name"},"description","image","datePublished"],idPrefix:["url",Fb],resolve(r,t){return r.recipeInstructions=ct(r.recipeInstructions,t,su),r},resolveRootNode(r,{find:t}){const e=t(Ca),i=t(ar);return e?bt(r,"mainEntityOfPage",Ut(e)):i&&bt(r,"mainEntityOfPage",Ut(i)),e!=null&&e.author&&bt(r,"author",e.author),r}},Ub={defaults:{"@type":"SoftwareApplication"},resolve(r,t){return Rs(r,"SoftwareApplication"),r.offers=ct(r.offers,t,On),r.aggregateRating=ct(r.aggregateRating,t,Sa),r.review=ct(r.review,t,Pa),r}};function Bm(r){switch(r){case"address":return Aa;case"aggregateOffer":return Sm;case"aggregateRating":return Sa;case"article":return _b;case"breadcrumb":return Cm;case"comment":return wb;case"event":return Sb;case"foodEstablishment":return Ab;case"virtualLocation":return Mm;case"place":return iu;case"howTo":return Ib;case"howToStep":return su;case"image":return Gi;case"localBusiness":return Oh;case"offer":return On;case"openingHours":return km;case"organization":return Hi;case"person":return gi;case"product":return Ob;case"question":return Lb;case"recipe":return Nb;case"review":return Pa;case"video":return Om;case"webPage":return yb;case"webSite":return vb;case"book":return xb;case"course":return Tb;case"itemList":return Rb;case"jobPosting":return Mb;case"listItem":return ru;case"movie":return kb;case"searchAction":return Pm;case"readAction":return Im;case"softwareApp":return Ub;case"bookEdition":return Rm}return null}function Lm(r){return!r.host&&r.canonicalHost&&(r.host=r.canonicalHost),!r.tagPosition&&r.position&&(r.tagPosition=r.position),!r.currency&&r.defaultCurrency&&(r.currency=r.defaultCurrency),!r.inLanguage&&r.defaultLanguage&&(r.inLanguage=r.defaultLanguage),r.path||(r.path="/"),!r.host&&typeof document<"u"&&(r.host=document.location.host),!r.url&&r.canonicalUrl&&(r.url=r.canonicalUrl),r.path!=="/"&&(r.trailingSlash&&!kh(r.path)?r.path=bm(r.path):!r.trailingSlash&&kh(r.path)&&(r.path=Qc(r.path))),r.url=xm(r.host||"",r.path),{...r,host:r.host,url:r.url,currency:r.currency,image:r.image,inLanguage:r.inLanguage,title:r.title,description:r.description,datePublished:r.datePublished,dateModified:r.dateModified}}function Ia(r,t,e){var i;if(e!=null&&e.cast&&(r=e.cast(r,t)),e!=null&&e.defaults){let s=e.defaults||{};typeof s=="function"&&(s=s(t)),r={...s,...r}}(i=e==null?void 0:e.inheritMeta)==null||i.forEach(s=>{typeof s=="string"?bt(r,s,t.meta[s]):bt(r,s.key,t.meta[s.meta])}),e!=null&&e.resolve&&(r=e.resolve(r,t));for(const s in r){const n=r[s];Array.isArray(n)&&n.forEach((o,a)=>{typeof o=="object"&&(o!=null&&o._resolver)&&(r[s][a]=ct(o,t,o._resolver))}),typeof n=="object"&&(n!=null&&n._resolver)&&(r[s]=ct(n,t,n._resolver))}return Tm(r),r}function Bh(r,t,e,i=!1){var l,u,d,f;if(r["@id"]&&r["@id"].startsWith("http"))return r;const s=e&&(Array.isArray(e.idPrefix)?e.idPrefix[0]:e.idPrefix)||"url",n=r["@id"]||(e?Array.isArray(e.idPrefix)?(l=e.idPrefix)==null?void 0:l[1]:void 0:"");if(!r["@id"]&&i&&n)return r["@id"]=ln(t.meta[s],n),r;if((u=r["@id"])!=null&&u.startsWith("#/schema/")||(d=r["@id"])!=null&&d.startsWith("/"))return r["@id"]=ln(t.meta[s],r["@id"]),r;let o=e==null?void 0:e.alias;o||(o=(((f=nr(r["@type"]))==null?void 0:f[0])||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase());const a={};for(const m in r)m[0]!=="_"&&Object.prototype.hasOwnProperty.call(r,m)&&(a[m]=r[m]);return r["@id"]=ln(t.meta[s],`#/schema/${o}/${r["@id"]||Em(JSON.stringify(a))}`),r}function ct(r,t,e,i={}){if(!r)return r;const s=nr(r).map(n=>{var u;const o=Object.keys(n).length;if(o===1&&n["@id"]||o===2&&n["@id"]&&n["@type"])return Bh({"@id":((u=t.find(n["@id"]))==null?void 0:u["@id"])||n["@id"]},t);let a=e;if(n._resolver&&(a=n._resolver,typeof a=="string"&&(a=Bm(a)),delete n._resolver),!a)return n;let l=Ia(n,t,a);return i.afterResolve&&i.afterResolve(l),(i.generateId||i.root)&&(l=Bh(l,t,a,!1)),i.root?(a.resolveRootNode&&a.resolveRootNode(l,t),t.push(l),Ut(l["@id"])):l});return!i.array&&s.length===1?s[0]:s}function Fm(r,t){return r.reduce((e,i,s,n)=>{const o=t(i,s,n);return e[o]||(e[o]=[]),e[o].push(i),e},{})}function $b(r,t){return Object.values(Fm(r,t)).map(e=>e[e.length-1])}const nu=qc((r,t,e)=>{if(Array.isArray(r[t])){if(Array.isArray(e)){const i={};for(const s of[...r[t],...e])i[Jc(s)]=s;return r[t]=Object.values(i),t==="itemListElement"&&(r[t]=[...$b(r[t],s=>s.position)]),!0}return r[t]=nu(r[t],Array.isArray(e)?e:[e]),!0}});function Gb(r){const t={};for(const e of r.keys()){const i=r[e],s=Ms(i["@id"]||Jc(i));t[s]&&i._dedupeStrategy!=="replace"?t[s]=nu(r[e],t[s]):t[s]=r[e]}return Object.values(t)}function Hb(r){const t=r.keys(),e={};for(const i of t){const s=r[i],n=Ms(s["@id"]||Jc(s)),o=Fm(Object.keys(s),u=>{const d=s[u];return u[0]==="_"?"ignored":Array.isArray(d)||typeof d=="object"?"relations":"primitives"}),a=[...(o.primitives||[]).sort(),...(o.relations||[]).sort()];let l={};for(const u of a)l[u]=s[u];e[n]&&(l=nu(l,e[n])),e[n]=l}return Object.values(e)}const zb=["translationOfWork","workTranslation"];function jb(){const r={find(t){let e=s=>s;t[0]==="#"?e=Ms:t[0]==="/"&&(e=s=>s.replace(/(https?:)?\/\//,"").split("/")[0]);const i=e(t);return r.nodes.filter(s=>!!s["@id"]).find(s=>e(s["@id"])===i)},push(t){nr(t).forEach(e=>{const i=e;r.nodes.push(i)})},resolveGraph(t){return r.meta=Lm({...t}),r.nodes.forEach((e,i)=>{const s=e._resolver;e=Ia(e,r,s),e=Bh(e,r,s,!0),r.nodes[i]=e}),r.nodes=Gb(r.nodes),r.nodes.forEach(e=>{var i;e.image&&typeof e.image=="string"&&(e.image=ct(e.image,r,Gi,{root:!0})),zb.forEach(s=>{e[s]=ct(e[s],r)}),(i=e._resolver)!=null&&i.resolveRootNode&&e._resolver.resolveRootNode(e,r),delete e._resolver}),Hb(r.nodes)},nodes:[],meta:{}};return r}function Vb(r){return Wb({},()=>({}))}function Wb(r,t,e){r=Lm({...r});let i,s={};return n=>(n.use(j0),{key:"schema-org",hooks:{"entries:normalize":async({tags:o})=>{i=i||jb();for(const a of o){if(a.tag==="script"&&a.props.type==="application/ld+json"&&a.props.nodes){const l=await a.props.nodes;for(const u of Array.isArray(l)?l:[l]){if(typeof u!="object"||Object.keys(u).length===0)continue;const d={...u,_dedupeStrategy:a.tagDuplicateStrategy,_resolver:Bm(await u._resolver)};i.push(d)}a.tagPosition=a.tagPosition||r.tagPosition==="head"?"head":"bodyClose"}if(a.tag==="htmlAttrs"&&a.props.lang)s.inLanguage=a.props.lang;else if(a.tag==="title")s.title=a.textContent;else if(a.tag==="meta"&&a.props.name==="description")s.description=a.props.content;else if(a.tag==="link"&&a.props.rel==="canonical"){if(s.url=a.props.href,s.url&&!s.host)try{s.host=new URL(s.url).origin}catch{}}else a.tag==="meta"&&a.props.property==="og:image"?s.image=a.props.content:a.tag==="templateParams"&&a.props.schemaOrg&&(s={...s,...a.props.schemaOrg},delete a.props.schemaOrg)}},"tags:resolve":async o=>{for(const a in o.tags){const l=o.tags[a];if(l.tag==="script"&&l.props.type==="application/ld+json"&&l.props.nodes){delete l.props.nodes;const u=i.resolveGraph({...await(t==null?void 0:t())||{},...r,...s});if(!u.length){l.props={};return}l.innerHTML=JSON.stringify({"@context":"https://schema.org","@graph":u},(d,f)=>typeof f!="object"?Js(f,n._templateParams,n._separator):f,0);return}}},"tags:afterResolve":o=>{let a;for(const l in o.tags){const u=o.tags[l];if(u.props.type==="application/ld+json"&&u.props.nodes||u.key==="schema-org-graph"){if(delete u.props.nodes,typeof a>"u"){a=l;continue}o.tags[a].props=A0(o.tags[a].props,u.props),delete o.tags[a].props.nodes,o.tags[l]=!1}}o.tags=o.tags.filter(Boolean)}}})}function Md(r){return r.script?r:{script:[{type:"application/ld+json",key:"schema-org-graph",nodes:r}]}}function kd(r,t){const e=typeof t=="function"?t(r):t,i=e.key||String(r.plugins.size+1);r.plugins.get(i)||(r.plugins.set(i,e),r.hooks.addHooks(e.hooks||{}))}function Xb(r={}){var a;const t=x0();t.addHooks(r.hooks||{});const e=!r.document,i=new Map,s=new Map,n=[],o={_entryCount:1,plugins:s,dirty:!1,resolvedOptions:r,hooks:t,ssr:e,entries:i,headEntries(){return[...i.values()]},use:l=>kd(o,l),push(l,u){const d={...u||{}};delete d.head;const f=d._index??o._entryCount++,m={_i:f,input:l,options:d},v={_poll(y=!1){o.dirty=!0,!y&&n.push(f),t.callHook("entries:updated",o)},dispose(){i.delete(f)&&v._poll(!0)},patch(y){(!d.mode||d.mode==="server"&&e||d.mode==="client"&&!e)&&(m.input=y,i.set(f,m),v._poll())}};return v.patch(l),v},async resolveTags(){var v;const l={tagMap:new Map,tags:[],entries:[...o.entries.values()]};for(await t.callHook("entries:resolve",l);n.length;){const y=n.shift(),b=i.get(y);if(b){const w={tags:q0(b.input,r.propResolvers||[]).map(E=>Object.assign(E,b.options)),entry:b};await t.callHook("entries:normalize",w),b._tags=w.tags.map((E,P)=>(E._w=U0(o,E),E._p=(b._i<<10)+P,E._d=Mh(E),E))}}let u=!1;l.entries.flatMap(y=>(y._tags||[]).map(b=>({...b,props:{...b.props}}))).sort(Cd).reduce((y,b)=>{const w=String(b._d||b._p);if(!y.has(w))return y.set(w,b);const E=y.get(w);if(((b==null?void 0:b.tagDuplicateStrategy)||(k0.has(b.tag)?"merge":null)||(b.key&&b.key===E.key?"merge":null))==="merge"){const S={...E.props};Object.entries(b.props).forEach(([M,k])=>S[M]=M==="style"?new Map([...E.props.style||new Map,...k]):M==="class"?new Set([...E.props.class||new Set,...k]):k),y.set(w,{...b,props:S})}else b._p>>10===E._p>>10&&b.tag==="meta"&&ym(w)?(y.set(w,Object.assign([...Array.isArray(E)?E:[E],b],b)),u=!0):(b._w===E._w?b._p>E._p:(b==null?void 0:b._w)<(E==null?void 0:E._w))&&y.set(w,b);return y},l.tagMap);const d=l.tagMap.get("title"),f=l.tagMap.get("titleTemplate");if(o._title=d==null?void 0:d.textContent,f){const y=f==null?void 0:f.textContent;if(o._titleTemplate=y,y){let b=typeof y=="function"?y(d==null?void 0:d.textContent):y;typeof b=="string"&&!o.plugins.has("template-params")&&(b=b.replace("%s",(d==null?void 0:d.textContent)||"")),d?b===null?l.tagMap.delete("title"):l.tagMap.set("title",{...d,textContent:b}):(f.tag="title",f.textContent=b)}}l.tags=Array.from(l.tagMap.values()),u&&(l.tags=l.tags.flat().sort(Cd)),await t.callHook("tags:beforeResolve",l),await t.callHook("tags:resolve",l),await t.callHook("tags:afterResolve",l);const m=[];for(const y of l.tags){const{innerHTML:b,tag:w,props:E}=y;if(I0.has(w)&&!(Object.keys(E).length===0&&!y.innerHTML&&!y.textContent)&&!(w==="meta"&&!E.content&&!E["http-equiv"]&&!E.charset)){if(w==="script"&&b){if((v=E.type)!=null&&v.endsWith("json")){const P=typeof b=="string"?b:JSON.stringify(b);y.innerHTML=P.replace(/</g,"\\u003C")}else typeof b=="string"&&(y.innerHTML=b.replace(new RegExp(`</${w}`,"g"),`<\\/${w}`));y._d=Mh(y)}m.push(y)}}return m}};return((r==null?void 0:r.plugins)||[]).forEach(l=>kd(o,l)),o.hooks.callHook("init",o),(a=r.init)==null||a.forEach(l=>l&&o.push(l)),o}const Yb=(r,t)=>$c(t)?Ot(t):t,Nm="usehead";function qb(r){return{install(e){e.config.globalProperties.$unhead=r,e.config.globalProperties.$head=r,e.provide(Nm,r)}}.install}function ou(){if(Gc()){const r=Hc(Nm);if(!r)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return r}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}function Bn(r,t={}){const e=t.head||ou();return e.ssr?e.push(r||{},t):Kb(e,r,t)}function Kb(r,t,e={}){const i=yt(!1);let s;return zc(()=>{const o=i.value?{}:Ko(t,Yb);s?s.patch(o):s=r.push(o,e)}),Ta()&&(J_(()=>{s.dispose()}),t0(()=>{i.value=!0}),e0(()=>{i.value=!1})),s}function Zb(r={},t={}){(t.head||ou()).use(L0);const{title:i,titleTemplate:s,...n}=r;return Bn({title:i,titleTemplate:s,_flatMeta:n},t)}function Ra(r,t){return r||(r={}),r._resolver=t,r}function rD(r){return Ra(r,"article")}function Qb(r){return Ra(r,"person")}function Jb(r){return Ra(r,"webPage")}function tx(r){return Ra(r,"webSite")}function ex(r=[],t={}){(t.head||ou()).use(Vb());const i=Bn(Md(r),t),s=i.patch;return i.patch=n=>s(Md(n)),i}mi.extend(v0);mi.extend(y0);mi.extend(_0);function iD(r,t={}){return typeof r=="string"&&(r=new Date(r)),mi.tz(mi.utc(r),t.timezone).format(t.template||"YYYY-MM-DD")}function Dd(r,t=!0){return r.sort((e,i)=>{const s=+new Date(e.date||""),n=+new Date(i.date||"");return t?n-s:s-n})}function rx(){const r=Ve();r0(()=>{r.value.timezone&&mi.tz.setDefault(r.value.timezone)})}const Um='{"siteConfig":{"mode":"auto","url":"/","lang":"zh-CN","languages":["en","zh-CN"],"timezone":"","title":"風の城","description":"六朝何事,只成门户私计","subtitle":"懒狗随缘更新ing...","author":{"avatar":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/%E7%97%85%E5%A8%87%E9%B8%BD%E5%AD%90%281%29%281%29.png","email":"i@valaxy.site","link":"https://valaxy.site","name":"風丶Breeze","status":{"emoji":"🐀","message":"The moonlight is beautiful."}},"favicon":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/%E5%8D%AB%E6%98%9F.svg","feed":{"name":"","favicon":"/favicon.svg"},"social":[{"name":"GitHub","link":"https://github.com/wzdxslzgzbdm","icon":"i-ri-github-line","color":"#6e5494"},{"name":"网易云音乐","link":"https://music.163.com/#/user/home?id=1623545907","icon":"i-ri-netease-cloud-music-line","color":"#C20C0C"},{"name":"哔哩哔哩","link":"https://space.bilibili.com/285247009?spm_id_from=444.41.0.0","icon":"i-ri-bilibili-line","color":"#FF8EB3"},{"name":"E-Mail","link":"mailto:fx17628692325@163.com","icon":"i-ri-mail-line","color":"#8E71C1"},{"name":"Travelling","link":"https://www.travellings.cn/go.html","icon":"i-ri-train-line","color":"var(--va-c-text)"}],"lastUpdated":true,"license":{"enabled":true,"language":"","type":"by-nc-sa"},"sponsor":{"enable":true,"description":"赞....赞助什么的 请多来一点","methods":[{"name":"支付宝","url":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/zfb.jpg","color":"#00A3EE","icon":"i-ri-alipay-line"},{"name":"QQ 支付","url":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/qq.jpg","color":"#12B7F5","icon":"i-ri-qq-line"},{"name":"微信支付","url":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/wx.png","color":"#2DC100","icon":"i-ri-wechat-pay-line"}],"title":"生活不易，懒狗卖艺，大哥大嫂行行好"},"search":{"enable":false,"type":"fuse"},"fuse":{"dataPath":"valaxy-fuse-list.json","options":{"keys":[]}},"comment":{"enable":false},"frontmatter":{"time_warning":15552000000},"cdn":{"prefix":"https://unpkg.com/"},"mediumZoom":{"enable":false,"selector":"","options":{}},"vanillaLazyload":{"enable":false,"options":{}},"floatingVue":{"disabled":false,"distance":5,"skidding":0,"container":"body","instantMove":false,"disposeTimeout":150,"popperTriggers":[],"strategy":"absolute","preventOverflow":true,"flip":true,"shift":true,"overflowPadding":0,"arrowPadding":0,"arrowOverflow":true,"autoHideOnMousedown":false,"themes":{"tooltip":{"placement":"top","triggers":["hover","focus","touch"],"delay":{"show":200,"hide":0},"handleResize":false,"html":false,"loadingContent":"..."},"dropdown":{"placement":"bottom","triggers":["click"],"delay":0,"handleResize":true,"autoHide":true},"menu":{"$extend":"dropdown","triggers":["hover","focus"],"popperTriggers":["hover"],"delay":{"show":0,"hide":400}}}},"statistics":{"enable":false,"readTime":{"speed":{"cn":300,"en":100}}},"pageSize":7,"encrypt":{"enable":false,"algorithm":"AES-CBC","salt":{"0":242,"1":112,"2":10,"3":188,"4":54,"5":30,"6":243,"7":0,"8":91,"9":10,"10":164,"11":237,"12":230,"13":215,"14":64,"15":86},"iv":{"0":221,"1":168,"2":60,"3":208,"4":19,"5":72,"6":100,"7":175,"8":122,"9":182,"10":11,"11":242,"12":196,"13":53,"14":182,"15":110}},"redirects":{"useVueRouter":true,"rules":[]}},"theme":"sakura","themeConfig":{"pkg":{"name":"valaxy-theme-sakura","version":"0.9.4","author":{"email":"3322543587@qq.com","name":"WRXinYue","url":"https://wrxinyue.org"},"homepage":"https://github.com/WRXinYue/valaxy-theme-sakura","repository":{"type":"git","url":"https://github.com/WRXinYue/valaxy-theme-sakura.git"},"publishConfig":{"@wrxinyue:registry":"https://npm.pkg.github.com"},"keywords":["valaxy","theme","sakura","vue"],"main":"client/index.ts","types":"types/index.d.ts","peerDependencies":{"valaxy-addon-hitokoto":"^0.0.1","valaxy-addon-vercount":"^0.0.6"},"dependencies":{"@ctrl/tinycolor":"^4.1.0","@iconify-json/fa6-solid":"^1.2.3","@iconify-json/mdi":"^1.2.3","interactjs":"^1.10.27","lenis":"^1.2.3","typeit":"^8.8.7"},"devDependencies":{"@interactjs/types":"^1.10.27","valaxy":"^0.23.3"},"scripts":{"release":"bumpp && npm publish"}},"valaxyDarkOptions":{"circleTransition":true},"ui":{"primary":"#fe9500","notice":{"icon":"i-fa6-solid:bullhorn"},"pageHeader":{"image":{"scale":1}},"postList":{"icon":"i-fa-envira","image":{"rotate":5,"scale":1.1,"transitionDuration":"0.45s"},"responsive":{}},"pinnedPost":{"icon":"i-fa-anchor","image":{"scale":1.1}},"links":{"image":{"scale":1,"rotate":360}},"scrollDown":{"icon":"i-fa-chevron-down"},"toggleLocaleButton":{"icon":"i-ri-translate"},"toggleDarkButton":{"darkIcon":"i-line-md-sunny-outline-to-moon-loop-transition","lightIcon":"i-line-md-moon-alt-to-sunny-outline-loop-transition"}},"navbarTitle":"","favicon":false,"hero":{"title":"Breezeの笔记站","motto":"You got to put the past behind you before you can move on.","urls":["https://img.mnorg.com/imgs/2025/06/16/684f7788b1f0d.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b8be752.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b709909.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b8ad1f8.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b7d2a68.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b7d19c6.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b7e00ff.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b5ee4fe.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b6000c6.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b6d4a44.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b6e0919.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76b5d0981.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76504102c.jpg","https://img.mnorg.com/imgs/2025/06/16/684f765061d42.jpg","https://img.mnorg.com/imgs/2025/06/16/684f76506e081.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764f3ea22.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764f42daf.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764f9f5e0.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764e5b019.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764e54b36.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764e6994f.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764d57dc5.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764d73cf7.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764da4a0c.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764c5d2ef.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764c59f67.jpg","https://img.mnorg.com/imgs/2025/06/16/684f764c5dd5a.jpg","https://img.mnorg.com/imgs/2025/06/13/684bea22b6e23.png","https://valaxy-theme-sakura.s3.bitiful.net/wallpaper/yae-miko-sunset-sakura-genshin-impact-moewalls-com.mp4"],"randomUrls":true,"fixedImg":true,"style":"","typewriter":true,"enableHitokoto":true,"disablePictureInPicture":false,"socialStyle":"merge","playerUrl":"https://breeze-info.oss-rg-china-mainland.aliyuncs.com/%E6%98%8E%E6%97%A5%E9%A6%99.mp4","waveTheme":"horizontal"},"navbar":[{"icon":"i-fa-fort-awesome","locale":"menu.home","link":"/"},{"text":"心爱之人","link":"/girls","icon":"i-ri-women-line"},{"text":"友情链接","icon":"i-ri-genderless-line","link":"/links"},{"text":"关于","icon":"i-fa-leaf","link":"/about"}],"navbarOptions":{"title":["Breeze","風"],"animIn":"sakura-fade-in-left","animOut":"sakura-fade-out-left","showMarker":false,"offset":0,"enableHover":true,"tools":["toggleDark","search"],"hamburgerStyle":"uneven","subTitle":"风过无痕，影存片刻；此刹之光，亦是吾所唯一之证。","invert":["home"],"autoHide":["home"]},"sidebar":[{"text":"🌈","locale":"menu.home","link":"/"}],"sidebarOptions":{"position":"left","offset":true,"initialState":false,"persistence":"session","enableOnDesktop":false,"showCounts":true},"postList":{"text":"文章列表","isImageReversed":true,"defaultImage":["https://www.dmoe.cc/random.php?random","https://img.xjh.me/random_img.php?random?type=bg&return=302"]},"pinnedPost":{"text":"START:DASH!!"},"footer":{"since":2019,"icon":{"animated":true,"url":"https://sponsors.yunyoujun.cn","title":"Breeze","img":"https://img.mnorg.com/imgs/2025/06/16/684f7abb92859.png"},"powered":true},"tags":{"rainbow":true},"pagination":{"type":"infinite-scroll","animation":true,"infiniteScrollOptions":{"preload":true}},"scrollDamping":false,"scrollAnimation":true,"scrollIndicator":true,"scrollLock":false,"scrollToTop":true,"scrollDown":{"enable":true},"notice":{"message":"<b>这是Breeze的新站点，欢迎访问！友链互换请从以上方式任意联系</b></br>"},"postFooter":{"navigationMerge":true}},"build":{"ssgForPagination":false},"deploy":{},"runtimeConfig":{"addons":{"valaxy-addon-waline":{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://waline.wrxinyue.org","pageview":true,"comment":true},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-waline","props":{},"pkg":{"name":"valaxy-addon-waline","version":"0.2.1","description":"Waline Composition API for Valaxy","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-waline"},"keywords":["valaxy","addon","waline"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":">=0.22"},"dependencies":{"@waline/client":"3.4.1"}},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-waline/valaxy.config.ts"},"valaxy-addon-meting":{"name":"valaxy-addon-meting","enable":true,"global":true,"props":{"id":"2489775340","server":"netease","type":"playlist"},"options":{"autoHidden":true,"animationIn":true,"lyricHidden":true},"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-meting","pkg":{"name":"valaxy-addon-meting","global":true,"version":"0.1.4","license":"MIT","repository":{"url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-meting","type":"git"},"keywords":["valaxy","addon","meting"]},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-meting/valaxy.config.ts"},"valaxy-addon-live2d":{"name":"valaxy-addon-live2d","enable":true,"global":true,"options":{"enableLive2D":["Tia","Pio","XiaoYun"],"live2DCollection":{"Asuna":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_01/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_02/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_03/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_04/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_05/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_06/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_07/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_08/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_09/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_12/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_13/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_14/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_15/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_16/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_17/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_18/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_19/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_20/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_21/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_22/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_23/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_24/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_25/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_26/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_27/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_28/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_29/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_30/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_31/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_33/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_34/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_35/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_36/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_37/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_38/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_39/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_40/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_41/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_43/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_44/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_45/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_46/index.json"]},"Type95":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/destroy/index.json"]},"HK416":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/destroy/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/destroy/index.json"]}}},"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-live2d","props":{},"pkg":{"name":"valaxy-addon-live2d","global":true,"version":"0.3.0","packageManager":"pnpm@9.5.0","description":"","repository":{"url":"git+https://github.com/valaxyjs/valaxy-addon-live2d.git"},"keywords":["valaxy","addon","valaxy-addon","live2d"],"exports":{"./*":"./*"},"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"cd dist && npm publish --access public","build":"tsx scripts/build.ts"},"dependencies":{"pixi-live2d-display":"^0.5.0-beta","pixi.js":"^7.4.2","stats.js":"^1.0.0","url":"^0.11.4"},"devDependencies":{"@types/lodash-es":"^4.17.12","@types/stats.js":"^0.17.3","consola":"^3.2.3","tsx":"^4.16.2","vue-tsc":"^2.0.28"}},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-live2d/valaxy.config.ts"},"valaxy-addon-bangumi":{"name":"valaxy-addon-bangumi","enable":true,"options":{"api":"https://yi_xiao_jiu-bangumi.web.val.run","bilibiliUid":"1579790","bgmEnabled":false},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-bangumi","props":{},"pkg":{"name":"valaxy-addon-bangumi","type":"module","version":"0.2.2","description":"Bangumi addon for Valaxy","repository":{"type":"git","url":"https://github.com/YunYouJun/valaxy/tree/main/packages/valaxy-addon-bangumi"},"keywords":["valaxy","addon","bangumi"],"main":"index.ts","types":"index.d.ts","peerDependencies":{"valaxy":"latest"},"dependencies":{"bilibili-bangumi-component":"^0.3.1"}},"configFile":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-bangumi/valaxy.config.ts"},"valaxy-addon-vercount":{"name":"valaxy-addon-vercount","enable":true,"options":{},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-vercount","props":{},"pkg":{"name":"valaxy-addon-vercount","version":"0.0.6","description":"A Vercount API based counting plugin for Valaxy, serving as an alternative to Busuanzi counting","repository":"https://github.com/valaxyjs/valaxy-addon-vercount","keywords":["valaxy","addon","valaxy-addon","vercount","busuanzi"],"main":"index.ts","types":"index.d.ts","scripts":{"ci:publish":"npm publish --access public"},"dependencies":{"peerjs":"^1.5.4","uuid":"^10.0.0"},"devDependencies":{"@types/uuid":"^10.0.0"}}},"valaxy-addon-hitokoto":{"name":"valaxy-addon-hitokoto","enable":true,"options":{},"global":false,"root":"/home/runner/work/Breeze/Breeze/node_modules/valaxy-addon-hitokoto","props":{},"pkg":{"name":"valaxy-addon-hitokoto","version":"0.0.1","description":"Hitokoto Composition API for Valaxy","repository":"https://github.com/valaxyjs/valaxy-addon-hitokoto","keywords":["valaxy","addon","valaxy-addon","hitokoto"],"main":"index.ts","types":"index.d.ts"}}},"redirects":{"useVueRouter":true,"redirectRoutes":[]}},"modules":{"rss":{"enable":true,"fullText":false}},"features":{"katex":true},"vite":{"build":{"emptyOutDir":true,"rollupOptions":{"external":[],"preserveEntrySignatures":"allow-extension","output":{"assetFileNames":"assets/[name].[hash].[ext]","entryFileNames":"assets/[name].[hash].js"}}},"optimizeDeps":{"include":["@waline/client/component","@pixi/utils","@pixi/graphics","@pixi/settings","@pixi/app","@pixi/core","@pixi/extract","@pixi/ticker","interactjs","d3","lodash-es"]},"plugins":[{"name":"valaxy-theme-sakura","enforce":"pre"}]},"devtools":true,"vue":{"isCustomElement":[null,null]},"unocss":{"safelist":["https://img.mnorg.com/imgs/2025/06/16/684f7abb92859.png","i-fa-fort-awesome","i-ri-women-line","i-ri-genderless-line","i-fa-leaf","i-fa6-solid:bullhorn","i-fa-chevron-down","i-ri-translate","i-line-md-sunny-outline-to-moon-loop-transition","i-line-md-moon-alt-to-sunny-outline-loop-transition","i-fa-envira","i-fa-anchor"]},"addons":[{"name":"valaxy-addon-waline","enable":true,"options":{"serverURL":"https://waline.wrxinyue.org","pageview":true,"comment":true}},{"name":"valaxy-addon-meting","enable":true,"global":true,"props":{"id":"2489775340","server":"netease","type":"playlist"},"options":{"autoHidden":true,"animationIn":true,"lyricHidden":true}},{"name":"valaxy-addon-live2d","enable":true,"global":false,"options":{"enableLive2D":["Tia","Pio","XiaoYun"],"live2DCollection":{"Asuna":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_01/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_02/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_03/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_04/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_05/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_06/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_07/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_08/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_09/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_12/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_13/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_14/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_15/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_16/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_17/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_18/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_19/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_20/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_21/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_22/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_23/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_24/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_25/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_26/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_27/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_28/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_29/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_30/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_31/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_33/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_34/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_35/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_36/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_37/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_38/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_39/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_40/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_41/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_43/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_44/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_45/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/asuna/asuna_46/index.json"]},"Type95":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/95type/95type_3702/destroy/index.json"]},"HK416":{"models":["https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/destroy/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_3401/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/normal/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/HK416/HK416_805/destroy/index.json"]}}}},{"name":"valaxy-addon-bangumi","enable":true,"options":{"api":"https://yi_xiao_jiu-bangumi.web.val.run","bilibiliUid":"1579790","bgmEnabled":false}},{"name":"valaxy-addon-vercount","enable":true},{"name":"valaxy-addon-hitokoto","enable":true}],"fuse":{"extendKeys":["cover","date"]}}',$m='{"userRoot":"/home/runner/work/Breeze/Breeze"}';function Ma(r){return JSON.parse(r)}const Gm=Symbol("valaxy:config"),Hm=Vt(Ma(Um)),ix=Symbol("ValaxyData"),sx=Vt(Ma($m));Hm.value=Ma(Um);sx.value=Ma($m);function nx(){return et(()=>Hm.value)}function Ln(){const r=Hc(Gm);if(!r)throw new Error("[Valaxy] site config not properly injected in app");return r}function ox(){return Ln()}function Ve(){const r=Ln();return et(()=>r.value.siteConfig)}function ax(){const r=Ln();return et(()=>r.value.themeConfig)}function au(){const r=Ln();return et(()=>r.value.runtimeConfig)}function lx(){const r=Ve(),t=Oa(),{locale:e}=Yr(),i=et(()=>t.value[`title_${e.value}`]||t.value.title),s=et(()=>t.value.url||r.value.url),n=et(()=>t.value.excerpt||t.value.description||r.value.description);Zb({description:n,ogDescription:n,ogLocale:et(()=>e.value||t.value.lang||r.value.lang||"en"),ogLocaleAlternate:et(()=>r.value.languages.filter(o=>o!==e.value)),ogSiteName:et(()=>r.value.title),ogTitle:et(()=>t.value.title||r.value.title),ogImage:et(()=>t.value.ogImage||t.value.cover||r.value.favicon),ogType:"website",ogUrl:s}),ex([Qb({name:r.value.author.name,url:s.value,image:r.value.author.avatar,sameAs:r.value.social.map(o=>o.link)}),tx({name:i.value,datePublished:et(()=>t.value.date),dateModified:et(()=>t.value.updated)}),Jb()]),rx(),ux()}const hx="0.23.3",cx={url:"https://github.com/YunYouJun/valaxy"},Lh={version:hx,repository:cx};function ux(){var s;const{locale:r}=Yr(),t=Oa(),e=Ve(),i=et(()=>t.value[`title_${r.value}`]||t.value.title);Bn({title:i,titleTemplate:n=>t.value.titleTemplate||(n?`${n} - ${e.value.title}`:e.value.title),link:[{rel:"icon",href:e.value.favicon,type:(s=e.value.favicon)!=null&&s.endsWith("svg")?"image/svg+xml":"image/png"}],meta:[et(()=>({name:"description",content:t.value.description||e.value.description})),{name:"generator",content:`Valaxy ${Lh.version}`}],templateParams:{schemaOrg:{host:e.value.url}},script:[{id:"check-mac-os",innerHTML:"document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))",async:!0}]})}const zm=Ea("app",()=>{const r=Ve(),t=ax(),{isDark:e,toggleDark:i,toggleDarkWithTransition:s,themeColor:n}=Xx(t.value.valaxyDarkOptions),o=qx(),a=yt(!0),l=et(()=>r.value.languages.length>1);return{isMobile:o,isDark:e,showToggleLocale:l,themeColor:n,toggleDark:i,toggleDarkWithTransition:s,showLoading:a}}),jm=Ea("routerStore",()=>({router:Vc()})),lu=Ea("site",()=>{const t=jm().router,e=yt(1),i=et(()=>{const s=Qx().value;return e.value&&s,s});return t&&t.isReady().then(()=>{}),{postList:i}});function sD(r){return r.children}function dx(r,t=[]){return et(()=>{const e=K(r);t.length||(t=lu().postList);const i={name:"All",total:t.length,children:new Map([["Uncategorized",{name:"Uncategorized",total:0,children:new Map}]])},s=i.children.get("Uncategorized");if(t.forEach(n=>{if(n.categories)if(Array.isArray(n.categories)){const o=n.categories.length;let a=i,l=a;n.categories.forEach((u,d)=>{a.total+=1,a=a.children.get(u),a||(a={name:u,total:0,children:new Map},l.children.set(u,a)),d===o-1&&(a.children.set(n.path,n),a.total+=1),l=a})}else{const o=n.categories,a=i.children.get(o);a?(a.total+=1,a.children.set(n.path,n)):i.children.set(o,{name:o,total:1,children:new Map([[n.path,n]])})}else s.total+=1,s.children.set(n.path,n)}),s.total===0&&i.children.delete("Uncategorized"),e){let n=i;const o=e.split("/");for(const a of o){const l=n.children.get(a);if(l&&l.children)n=l;else return console.warn(`Do not have category: ${r}`),i}return n}else return i})}function Fn(r){return i0()?(s0(r),!0):!1}const El=new WeakMap,px=(...r)=>{var t;const e=r[0],i=(t=Ta())==null?void 0:t.proxy;if(i==null&&!Gc())throw new Error("injectLocal must be called in setup");return i&&El.has(i)&&e in El.get(i)?El.get(i)[e]:Hc(...r)},Pr=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Vm=r=>r!=null,fx=Object.prototype.toString,mx=r=>fx.call(r)==="[object Object]",Je=()=>{},Od=gx();function gx(){var r,t;return Pr&&((r=window==null?void 0:window.navigator)==null?void 0:r.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function hu(...r){if(r.length!==1)return n0(...r);const t=r[0];return typeof t=="function"?om(o0(()=>({get:t,set:Je}))):yt(t)}function cu(r,t){function e(...i){return new Promise((s,n)=>{Promise.resolve(r(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(s).catch(n)})}return e}const Wm=r=>r();function vx(r,t={}){let e,i,s=Je;const n=l=>{clearTimeout(l),s(),s=Je};let o;return l=>{const u=Ot(r),d=Ot(t.maxWait);return e&&n(e),u<=0||d!==void 0&&d<=0?(i&&(n(i),i=null),Promise.resolve(l())):new Promise((f,m)=>{s=t.rejectOnCancel?m:f,o=l,d&&!i&&(i=setTimeout(()=>{e&&n(e),i=null,f(o())},d)),e=setTimeout(()=>{i&&n(i),i=null,f(l())},u)})}}function yx(...r){let t=0,e,i=!0,s=Je,n,o,a,l,u;!$c(r[0])&&typeof r[0]=="object"?{delay:o,trailing:a=!0,leading:l=!0,rejectOnCancel:u=!1}=r[0]:[o,a=!0,l=!0,u=!1]=r;const d=()=>{e&&(clearTimeout(e),e=void 0,s(),s=Je)};return m=>{const v=Ot(o),y=Date.now()-t,b=()=>n=m();return d(),v<=0?(t=Date.now(),b()):(y>v&&(l||!i)?(t=Date.now(),b()):a&&(n=new Promise((w,E)=>{s=u?E:w,e=setTimeout(()=>{t=Date.now(),i=!0,w(b()),d()},Math.max(0,v-y))})),!l&&!e&&(e=setTimeout(()=>i=!0,v)),i=!1,n)}}function _x(r=Wm,t={}){const{initialState:e="active"}=t,i=hu(e==="active");function s(){i.value=!1}function n(){i.value=!0}const o=(...a)=>{i.value&&r(...a)};return{isActive:om(i),pause:s,resume:n,eventFilter:o}}function bx(r,t){var e;if(typeof r=="number")return r+t;const i=((e=r.match(/^-?\d+\.?\d*/))==null?void 0:e[0])||"",s=r.slice(i.length),n=Number.parseFloat(i)+t;return Number.isNaN(n)?r:n+s}function hn(r){return r.endsWith("rem")?Number.parseFloat(r)*16:Number.parseFloat(r)}function xx(r){return Object.entries(r)}function cn(r){return Array.isArray(r)?r:[r]}function Xm(r){return Ta()}function wx(r,t=200,e={}){return cu(vx(t,e),r)}function Tx(r,t=200,e=!1,i=!0,s=!1){return cu(yx(t,e,i,s),r)}function Ex(r,t,e={}){const{eventFilter:i=Wm,...s}=e;return qt(r,cu(i,t),s)}function Sx(r,t,e={}){const{eventFilter:i,initialState:s="active",...n}=e,{eventFilter:o,pause:a,resume:l,isActive:u}=_x(i,{initialState:s});return{stop:Ex(r,t,{...n,eventFilter:o}),pause:a,resume:l,isActive:u}}function Yi(r,t=!0,e){Xm()?Xr(r,e):t?r():$i(r)}function Ax(r,t){Xm()&&nm(r,t)}function Cx(r=!1,t={}){const{truthyValue:e=!0,falsyValue:i=!1}=t,s=$c(r),n=Vt(r);function o(a){if(arguments.length)return n.value=a,n.value;{const l=Ot(e);return n.value=n.value===l?Ot(i):l,n.value}}return s?o:[n,o]}function Px(r,t,e){return qt(r,t,{...e,immediate:!0})}function nD(r,t,e){return qt(r,t,{...e,once:!0})}const Me=Pr?window:void 0,Ix=Pr?window.document:void 0;function ze(r){var t;const e=Ot(r);return(t=e==null?void 0:e.$el)!=null?t:e}function fe(...r){const t=[],e=()=>{t.forEach(a=>a()),t.length=0},i=(a,l,u,d)=>(a.addEventListener(l,u,d),()=>a.removeEventListener(l,u,d)),s=et(()=>{const a=cn(Ot(r[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),n=Px(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(u=>ze(u)))!=null?l:[Me].filter(u=>u!=null),cn(Ot(s.value?r[1]:r[0])),cn(K(s.value?r[2]:r[1])),Ot(s.value?r[3]:r[2])]},([a,l,u,d])=>{if(e(),!(a!=null&&a.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const f=mx(d)?{...d}:d;t.push(...a.flatMap(m=>l.flatMap(v=>u.map(y=>i(m,v,y,f)))))},{flush:"post"}),o=()=>{n(),e()};return Fn(e),o}function Rx(){const r=Vt(!1),t=Ta();return t&&Xr(()=>{r.value=!0},t),r}function ka(r){const t=Rx();return et(()=>(t.value,!!r()))}function Ym(r,t,e={}){const{window:i=Me,...s}=e;let n;const o=ka(()=>i&&"MutationObserver"in i),a=()=>{n&&(n.disconnect(),n=void 0)},l=et(()=>{const m=Ot(r),v=cn(m).map(ze).filter(Vm);return new Set(v)}),u=qt(()=>l.value,m=>{a(),o.value&&m.size&&(n=new MutationObserver(t),m.forEach(v=>n.observe(v,s)))},{immediate:!0,flush:"post"}),d=()=>n==null?void 0:n.takeRecords(),f=()=>{u(),a()};return Fn(f),{isSupported:o,stop:f,takeRecords:d}}const Mx=Symbol("vueuse-ssr-width");function qm(){const r=Gc()?px(Mx,null):null;return typeof r=="number"?r:void 0}function Ae(r,t={}){const{window:e=Me,ssrWidth:i=qm()}=t,s=ka(()=>e&&"matchMedia"in e&&typeof e.matchMedia=="function"),n=Vt(typeof i=="number"),o=Vt(),a=Vt(!1),l=u=>{a.value=u.matches};return zc(()=>{if(n.value){n.value=!s.value;const u=Ot(r).split(",");a.value=u.some(d=>{const f=d.includes("not all"),m=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),v=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let y=!!(m||v);return m&&y&&(y=i>=hn(m[1])),v&&y&&(y=i<=hn(v[1])),f?!y:y});return}s.value&&(o.value=e.matchMedia(Ot(r)),a.value=o.value.matches)}),fe(o,"change",l,{passive:!0}),et(()=>a.value)}const kx={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};function oD(r,t={}){function e(v,y){let b=Ot(r[Ot(v)]);return y!=null&&(b=bx(b,y)),typeof b=="number"&&(b=`${b}px`),b}const{window:i=Me,strategy:s="min-width",ssrWidth:n=qm()}=t,o=typeof n=="number",a=o?Vt(!1):{value:!0};o&&Yi(()=>a.value=!!i);function l(v,y){return!a.value&&o?v==="min"?n>=hn(y):n<=hn(y):i?i.matchMedia(`(${v}-width: ${y})`).matches:!1}const u=v=>Ae(()=>`(min-width: ${e(v)})`,t),d=v=>Ae(()=>`(max-width: ${e(v)})`,t),f=Object.keys(r).reduce((v,y)=>(Object.defineProperty(v,y,{get:()=>s==="min-width"?u(y):d(y),enumerable:!0,configurable:!0}),v),{});function m(){const v=Object.keys(r).map(y=>[y,f[y],hn(e(y))]).sort((y,b)=>y[2]-b[2]);return et(()=>v.filter(([,y])=>y.value).map(([y])=>y))}return Object.assign(f,{greaterOrEqual:u,smallerOrEqual:d,greater(v){return Ae(()=>`(min-width: ${e(v,.1)})`,t)},smaller(v){return Ae(()=>`(max-width: ${e(v,-.1)})`,t)},between(v,y){return Ae(()=>`(min-width: ${e(v)}) and (max-width: ${e(y,-.1)})`,t)},isGreater(v){return l("min",e(v,.1))},isGreaterOrEqual(v){return l("min",e(v))},isSmaller(v){return l("max",e(v,-.1))},isSmallerOrEqual(v){return l("max",e(v))},isInBetween(v,y){return l("min",e(v))&&l("max",e(y,-.1))},current:m,active(){const v=m();return et(()=>v.value.length===0?"":v.value.at(s==="min-width"?-1:0))}})}const Bd=["hash","host","hostname","href","pathname","port","protocol","search"];function aD(r={}){const{window:t=Me}=r,e=Object.fromEntries(Bd.map(n=>[n,yt()]));for(const[n,o]of xx(e))qt(o,a=>{!(t!=null&&t.location)||t.location[n]===a||(t.location[n]=a)});const i=n=>{var o;const{state:a,length:l}=(t==null?void 0:t.history)||{},{origin:u}=(t==null?void 0:t.location)||{};for(const d of Bd)e[d].value=(o=t==null?void 0:t.location)==null?void 0:o[d];return Ph({trigger:n,state:a,length:l,origin:u,...e})},s=yt(i("load"));if(t){const n={passive:!0};fe(t,"popstate",()=>s.value=i("popstate"),n),fe(t,"hashchange",()=>s.value=i("hashchange"),n)}return s}const no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oo="__vueuse_ssr_handlers__",Dx=Ox();function Ox(){return oo in no||(no[oo]=no[oo]||{}),no[oo]}function Km(r,t){return Dx[r]||t}function Bx(r){return Ae("(prefers-color-scheme: dark)",r)}function Lx(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const Fx={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},Ld="vueuse-storage";function Da(r,t,e,i={}){var s;const{flush:n="pre",deep:o=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:u=!1,shallow:d,window:f=Me,eventFilter:m,onError:v=L=>{console.error(L)},initOnMounted:y}=i,b=(d?Vt:yt)(typeof t=="function"?t():t),w=et(()=>Ot(r));if(!e)try{e=Km("getDefaultStorage",()=>{var L;return(L=Me)==null?void 0:L.localStorage})()}catch(L){v(L)}if(!e)return b;const E=Ot(t),P=Lx(E),S=(s=i.serializer)!=null?s:Fx[P],{pause:M,resume:k}=Sx(b,()=>H(b.value),{flush:n,deep:o,eventFilter:m});qt(w,()=>G(),{flush:n});let F=!1;const C=L=>{y&&!F||G(L)},N=L=>{y&&!F||O(L)};f&&a&&(e instanceof Storage?fe(f,"storage",C,{passive:!0}):fe(f,Ld,N)),y?Yi(()=>{F=!0,G()}):G();function U(L,z){if(f){const J={key:w.value,oldValue:L,newValue:z,storageArea:e};f.dispatchEvent(e instanceof Storage?new StorageEvent("storage",J):new CustomEvent(Ld,{detail:J}))}}function H(L){try{const z=e.getItem(w.value);if(L==null)U(z,null),e.removeItem(w.value);else{const J=S.write(L);z!==J&&(e.setItem(w.value,J),U(z,J))}}catch(z){v(z)}}function Q(L){const z=L?L.newValue:e.getItem(w.value);if(z==null)return l&&E!=null&&e.setItem(w.value,S.write(E)),E;if(!L&&u){const J=S.read(z);return typeof u=="function"?u(J,E):P==="object"&&!Array.isArray(J)?{...E,...J}:J}else return typeof z!="string"?z:S.read(z)}function G(L){if(!(L&&L.storageArea!==e)){if(L&&L.key==null){b.value=E;return}if(!(L&&L.key!==w.value)){M();try{(L==null?void 0:L.newValue)!==S.write(b.value)&&(b.value=Q(L))}catch(z){v(z)}finally{L?$i(k):k()}}}}function O(L){G(L.detail)}return b}const Nx="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Ux(r={}){const{selector:t="html",attribute:e="class",initialValue:i="auto",window:s=Me,storage:n,storageKey:o="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:u,disableTransition:d=!0}=r,f={auto:"",light:"light",dark:"dark",...r.modes||{}},m=Bx({window:s}),v=et(()=>m.value?"dark":"light"),y=l||(o==null?hu(i):Da(o,i,n,{window:s,listenToStorageChanges:a})),b=et(()=>y.value==="auto"?v.value:y.value),w=Km("updateHTMLAttrs",(M,k,F)=>{const C=typeof M=="string"?s==null?void 0:s.document.querySelector(M):ze(M);if(!C)return;const N=new Set,U=new Set;let H=null;if(k==="class"){const G=F.split(/\s/g);Object.values(f).flatMap(O=>(O||"").split(/\s/g)).filter(Boolean).forEach(O=>{G.includes(O)?N.add(O):U.add(O)})}else H={key:k,value:F};if(N.size===0&&U.size===0&&H===null)return;let Q;d&&(Q=s.document.createElement("style"),Q.appendChild(document.createTextNode(Nx)),s.document.head.appendChild(Q));for(const G of N)C.classList.add(G);for(const G of U)C.classList.remove(G);H&&C.setAttribute(H.key,H.value),d&&(s.getComputedStyle(Q).opacity,document.head.removeChild(Q))});function E(M){var k;w(t,e,(k=f[M])!=null?k:M)}function P(M){r.onChanged?r.onChanged(M,E):E(M)}qt(b,P,{flush:"post",immediate:!0}),Yi(()=>P(b.value));const S=et({get(){return u?y.value:b.value},set(M){y.value=M}});return Object.assign(S,{store:y,system:v,state:b})}function $x(r,t,e={}){const{window:i=Me,initialValue:s,observe:n=!1}=e,o=Vt(s),a=et(()=>{var u;return ze(t)||((u=i==null?void 0:i.document)==null?void 0:u.documentElement)});function l(){var u;const d=Ot(r),f=Ot(a);if(f&&i&&d){const m=(u=i.getComputedStyle(f).getPropertyValue(d))==null?void 0:u.trim();o.value=m||o.value||s}}return n&&Ym(a,l,{attributeFilter:["style","class"],window:i}),qt([a,()=>Ot(r)],(u,d)=>{d[0]&&d[1]&&d[0].style.removeProperty(d[1]),l()},{immediate:!0}),qt([o,a],([u,d])=>{const f=Ot(r);d!=null&&d.style&&f&&(u==null?d.style.removeProperty(f):d.style.setProperty(f,u))},{immediate:!0}),o}function Gx(r={}){const{valueDark:t="dark",valueLight:e=""}=r,i=Ux({...r,onChanged:(o,a)=>{var l;r.onChanged?(l=r.onChanged)==null||l.call(r,o==="dark",a,o):a(o)},modes:{dark:t,light:e}}),s=et(()=>i.system.value);return et({get(){return i.value==="dark"},set(o){const a=o?"dark":"light";s.value===a?i.value="auto":i.value=a}})}function Hx(r,t,e={}){const{window:i=Me,...s}=e;let n;const o=ka(()=>i&&"ResizeObserver"in i),a=()=>{n&&(n.disconnect(),n=void 0)},l=et(()=>{const f=Ot(r);return Array.isArray(f)?f.map(m=>ze(m)):[ze(f)]}),u=qt(l,f=>{if(a(),o.value&&i){n=new ResizeObserver(t);for(const m of f)m&&n.observe(m,s)}},{immediate:!0,flush:"post"}),d=()=>{a(),u()};return Fn(d),{isSupported:o,stop:d}}function lD(r,t={}){const{reset:e=!0,windowResize:i=!0,windowScroll:s=!0,immediate:n=!0,updateTiming:o="sync"}=t,a=Vt(0),l=Vt(0),u=Vt(0),d=Vt(0),f=Vt(0),m=Vt(0),v=Vt(0),y=Vt(0);function b(){const E=ze(r);if(!E){e&&(a.value=0,l.value=0,u.value=0,d.value=0,f.value=0,m.value=0,v.value=0,y.value=0);return}const P=E.getBoundingClientRect();a.value=P.height,l.value=P.bottom,u.value=P.left,d.value=P.right,f.value=P.top,m.value=P.width,v.value=P.x,y.value=P.y}function w(){o==="sync"?b():o==="next-frame"&&requestAnimationFrame(()=>b())}return Hx(r,w),qt(()=>ze(r),E=>!E&&w()),Ym(r,w,{attributeFilter:["style","class"]}),s&&fe("scroll",w,{capture:!0,passive:!0}),i&&fe("resize",w,{passive:!0}),Yi(()=>{n&&w()}),{height:a,bottom:l,left:u,right:d,top:f,width:m,x:v,y,update:w}}function hD(r,t,e={}){const{root:i,rootMargin:s="0px",threshold:n=0,window:o=Me,immediate:a=!0}=e,l=ka(()=>o&&"IntersectionObserver"in o),u=et(()=>{const y=Ot(r);return cn(y).map(ze).filter(Vm)});let d=Je;const f=Vt(a),m=l.value?qt(()=>[u.value,ze(i),f.value],([y,b])=>{if(d(),!f.value||!y.length)return;const w=new IntersectionObserver(t,{root:ze(b),rootMargin:s,threshold:n});y.forEach(E=>E&&w.observe(E)),d=()=>{w.disconnect(),d=Je}},{immediate:a,flush:"post"}):Je,v=()=>{d(),m(),f.value=!1};return Fn(v),{isSupported:l,isActive:f,pause(){d(),f.value=!1},resume(){f.value=!0},stop:v}}function Sl(r){return typeof Window<"u"&&r instanceof Window?r.document.documentElement:typeof Document<"u"&&r instanceof Document?r.documentElement:r}const Fd=1;function zx(r,t={}){const{throttle:e=0,idle:i=200,onStop:s=Je,onScroll:n=Je,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:a={capture:!1,passive:!0},behavior:l="auto",window:u=Me,onError:d=C=>{console.error(C)}}=t,f=Vt(0),m=Vt(0),v=et({get(){return f.value},set(C){b(C,void 0)}}),y=et({get(){return m.value},set(C){b(void 0,C)}});function b(C,N){var U,H,Q,G;if(!u)return;const O=Ot(r);if(!O)return;(Q=O instanceof Document?u.document.body:O)==null||Q.scrollTo({top:(U=Ot(N))!=null?U:y.value,left:(H=Ot(C))!=null?H:v.value,behavior:Ot(l)});const L=((G=O==null?void 0:O.document)==null?void 0:G.documentElement)||(O==null?void 0:O.documentElement)||O;v!=null&&(f.value=L.scrollLeft),y!=null&&(m.value=L.scrollTop)}const w=Vt(!1),E=Ph({left:!0,right:!1,top:!0,bottom:!1}),P=Ph({left:!1,right:!1,top:!1,bottom:!1}),S=C=>{w.value&&(w.value=!1,P.left=!1,P.right=!1,P.top=!1,P.bottom=!1,s(C))},M=wx(S,e+i),k=C=>{var N;if(!u)return;const U=((N=C==null?void 0:C.document)==null?void 0:N.documentElement)||(C==null?void 0:C.documentElement)||ze(C),{display:H,flexDirection:Q,direction:G}=getComputedStyle(U),O=G==="rtl"?-1:1,L=U.scrollLeft;P.left=L<f.value,P.right=L>f.value;const z=Math.abs(L*O)<=(o.left||0),J=Math.abs(L*O)+U.clientWidth>=U.scrollWidth-(o.right||0)-Fd;H==="flex"&&Q==="row-reverse"?(E.left=J,E.right=z):(E.left=z,E.right=J),f.value=L;let Z=U.scrollTop;C===u.document&&!Z&&(Z=u.document.body.scrollTop),P.top=Z<m.value,P.bottom=Z>m.value;const ut=Math.abs(Z)<=(o.top||0),Tt=Math.abs(Z)+U.clientHeight>=U.scrollHeight-(o.bottom||0)-Fd;H==="flex"&&Q==="column-reverse"?(E.top=Tt,E.bottom=ut):(E.top=ut,E.bottom=Tt),m.value=Z},F=C=>{var N;if(!u)return;const U=(N=C.target.documentElement)!=null?N:C.target;k(U),w.value=!0,M(C),n(C)};return fe(r,"scroll",e?Tx(F,e,!0,!1):F,a),Yi(()=>{try{const C=Ot(r);if(!C)return;k(C)}catch(C){d(C)}}),fe(r,"scrollend",S,a),{x:v,y,isScrolling:w,arrivedState:E,directions:P,measure(){const C=Ot(r);u&&C&&k(C)}}}function Nd(r,t=Je,e={}){const{immediate:i=!0,manual:s=!1,type:n="text/javascript",async:o=!0,crossOrigin:a,referrerPolicy:l,noModule:u,defer:d,document:f=Ix,attrs:m={}}=e,v=Vt(null);let y=null;const b=P=>new Promise((S,M)=>{const k=U=>(v.value=U,S(U),U);if(!f){S(!1);return}let F=!1,C=f.querySelector(`script[src="${Ot(r)}"]`);C?C.hasAttribute("data-loaded")&&k(C):(C=f.createElement("script"),C.type=n,C.async=o,C.src=Ot(r),d&&(C.defer=d),a&&(C.crossOrigin=a),u&&(C.noModule=u),l&&(C.referrerPolicy=l),Object.entries(m).forEach(([U,H])=>C==null?void 0:C.setAttribute(U,H)),F=!0);const N={passive:!0};fe(C,"error",U=>M(U),N),fe(C,"abort",U=>M(U),N),fe(C,"load",()=>{C.setAttribute("data-loaded","true"),t(C),k(C)},N),F&&(C=f.head.appendChild(C)),P||k(C)}),w=(P=!0)=>(y||(y=b(P)),y),E=()=>{if(!f)return;y=null,v.value&&(v.value=null);const P=f.querySelector(`script[src="${Ot(r)}"]`);P&&f.head.removeChild(P)};return i&&!s&&Yi(w),s||Ax(E),{scriptTag:v,load:w,unload:E}}function Zm(r){const t=window.getComputedStyle(r);if(t.overflowX==="scroll"||t.overflowY==="scroll"||t.overflowX==="auto"&&r.clientWidth<r.scrollWidth||t.overflowY==="auto"&&r.clientHeight<r.scrollHeight)return!0;{const e=r.parentNode;return!e||e.tagName==="BODY"?!1:Zm(e)}}function jx(r){const t=r||window.event,e=t.target;return Zm(e)?!1:t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}const Al=new WeakMap;function Vx(r,t=!1){const e=Vt(t);let i=null,s="";qt(hu(r),a=>{const l=Sl(Ot(a));if(l){const u=l;if(Al.get(u)||Al.set(u,u.style.overflow),u.style.overflow!=="hidden"&&(s=u.style.overflow),u.style.overflow==="hidden")return e.value=!0;if(e.value)return u.style.overflow="hidden"}},{immediate:!0});const n=()=>{const a=Sl(Ot(r));!a||e.value||(Od&&(i=fe(a,"touchmove",l=>{jx(l)},{passive:!1})),a.style.overflow="hidden",e.value=!0)},o=()=>{const a=Sl(Ot(r));!a||!e.value||(Od&&(i==null||i()),a.style.overflow=s,Al.delete(a),e.value=!1)};return Fn(o),et({get(){return e.value},set(a){a?n():o()}})}function uu(r={}){const{window:t=Me,...e}=r;return zx(t,e)}function Wx(r={}){const{window:t=Me,initialWidth:e=Number.POSITIVE_INFINITY,initialHeight:i=Number.POSITIVE_INFINITY,listenOrientation:s=!0,includeScrollbar:n=!0,type:o="inner"}=r,a=Vt(e),l=Vt(i),u=()=>{if(t)if(o==="outer")a.value=t.outerWidth,l.value=t.outerHeight;else if(o==="visual"&&t.visualViewport){const{width:f,height:m,scale:v}=t.visualViewport;a.value=Math.round(f*v),l.value=Math.round(m*v)}else n?(a.value=t.innerWidth,l.value=t.innerHeight):(a.value=t.document.documentElement.clientWidth,l.value=t.document.documentElement.clientHeight)};u(),Yi(u);const d={passive:!0};if(fe("resize",u,d),t&&o==="visual"&&t.visualViewport&&fe(t.visualViewport,"resize",u,d),s){const f=Ae("(orientation: portrait)");qt(f,()=>u())}return{width:a,height:l}}function Oa(){const r=Xi();return et(()=>r.meta.frontmatter||{})}function cD(){const r=Ve(),t=Xi();return et(()=>((r.value.url.endsWith("/")?r.value.url.slice(0,-1):r.value.url)||Pr&&window.location.origin)+t.path)}function Xx(r={}){const t=Gx(r.useDarkOptions),e=Cx(t),i=et(()=>{var n,o;return t.value?((n=r.themeColor)==null?void 0:n.dark)||"#000":((o=r.themeColor)==null?void 0:o.light)||"#fff"});r.circleTransition&&pe(()=>Promise.resolve({}),__vite__mapDeps([0]));function s(n,o={}){if(!document.startViewTransition){e();return}const a=n.clientX,l=n.clientY,u=Math.hypot(Math.max(a,innerWidth-a),Math.max(l,innerHeight-l));document.startViewTransition(()=>{e()}).ready.then(()=>{const f=[`circle(0px at ${a}px ${l}px)`,`circle(${u}px at ${a}px ${l}px)`];document.documentElement.animate({clipPath:t.value?f.reverse():f},{duration:o.duration||300,easing:o.easing||"ease-in",pseudoElement:t.value?"::view-transition-old(root)":"::view-transition-new(root)"})})}return{isDark:t,themeColor:i,toggleDark:e,toggleDarkWithTransition:s}}function Yx(){const r=Ae("(max-width: 639px)"),t=Ae("(min-width: 640px)"),e=Ae("(min-width: 768px)"),i=Ae("(min-width: 1024px)"),s=Ae("(min-width: 1280px)"),n=Ae("(min-width: 1536px)");return{isXs:r,isSm:t,isMd:e,isLg:i,isXl:s,is2xl:n}}function Qm(r){const t=Xi();return et(()=>{var e;return(e=t.meta)==null?void 0:e.layout})}function qx(){return Ae("(max-width: 768px)")}function Kx(){const{availableLocales:r,locale:t}=Yr(),e=Da("valaxy-locale",t.value);return mi.locale(t.value==="zh-CN"?"zh-cn":"en"),{lang:e,toggleLocales:()=>{const s=r;t.value=s[(s.indexOf(t.value)+1)%s.length],e.value=t.value,mi.locale(t.value==="zh-CN"?"zh-cn":"en"),Pr&&document.documentElement.setAttribute("lang",t.value)}}}function Zx(){const t=jm().router;return et(()=>{const e=["/:..all","/:all(.*)*","/","/:path(.*)"];return t.getRoutes().filter(s=>s.name).filter(s=>s.meta).filter(s=>s.meta.frontmatter).filter(s=>s.path&&!e.includes(s.path)).map(s=>Object.assign({path:s.path,excerpt:s.meta.excerpt},s.meta.frontmatter||{}))})}function Qx(r={}){const t=Zx();return et(()=>{const e=t.value.filter(n=>{var o,a;return((o=n.path)==null?void 0:o.startsWith("/posts"))&&!((a=n.path)!=null&&a.endsWith(".html"))&&n.date&&(!r.type||n.type===r.type)&&(!n.hide||n.hide==="index")}),i=Dd(e.filter(n=>n.top)).sort((n,o)=>o.top-n.top),s=Dd(e.filter(n=>!n.top));return i.concat(s)})}function Jx(){const r=lu();return et(()=>{const t=new Map;return r.postList.forEach(e=>{if(e.tags){let i;typeof e.tags=="string"?i=[e.tags]:i=e.tags,i.forEach(s=>{if(t.has(s)){const n=t.get(s);t.set(s,{...n,count:n.count+1})}else t.set(s,{count:1})})}}),t})}function tw(r={offset:100}){if(!Pr)return{percentage:yt(0),show:yt(!1)};const{y:t}=uu(),e=et(()=>t.value/(document.body.scrollHeight-window.innerHeight)),i=et(()=>t.value>r.offset);return{percentage:e,show:i,backToTop:()=>{window.scrollTo({top:0,behavior:"smooth"})}}}const ew={};function rw(r,t){const e=je("RouterView");return W(),zt(e)}const iw=me(ew,[["render",rw]]),Ud={404:()=>pe(()=>import("./404.KtaBkSAz.js"),__vite__mapDeps([1,2,3,4,5,6,7,8])),default:iw,empty:()=>pe(()=>import("./empty.Crytpx3C.js"),__vite__mapDeps([9,3])),post:()=>pe(()=>import("./post.Crytpx3C.js"),__vite__mapDeps([10,3])),anime:()=>pe(()=>import("./anime.C5-1Z1rQ.js"),__vite__mapDeps([11,12,13,3,4,14,2,6,5,7,15])),archives:()=>pe(()=>import("./archives.BDEMG_zJ.js"),__vite__mapDeps([16,12,13,3,4,14,5,2,6,7,17])),categories:()=>pe(()=>import("./categories.CyB2MDbs.js"),__vite__mapDeps([18,12,13,3,4,14,19,20,5,21,22,2,6,7,23])),comment:()=>pe(()=>import("./comment.vc2YGwyo.js"),__vite__mapDeps([24,12,13,3,4,14,25,2,6,5,7,26])),home:()=>pe(()=>import("./home.Cwweg5zM.js"),__vite__mapDeps([27,3,4,13,19,20,5,21,22,2,25,6,7,28])),links:()=>pe(()=>import("./links.DuZ0GlyN.js"),__vite__mapDeps([29,12,13,3,4,14,2,6,5,7,30])),post:()=>pe(()=>import("./post.BnN41Qpt.js"),__vite__mapDeps([31,12,13,3,4,14,5,32,2,20,21,6,7,33])),search:()=>pe(()=>import("./search.0W0rihGp.js"),__vite__mapDeps([34,3,2,4,6,5,7,35])),tags:()=>pe(()=>import("./tags.Dj4RD0OV.js"),__vite__mapDeps([36,12,13,3,4,14,19,20,5,21,22,2,6,7,37]))};function sw(r){function t(e,i=!0){return e.map(s=>{var n,o,a,l,u,d;if(((n=s.children)==null?void 0:n.length)>0&&(s.children=t(s.children,!1)),i){if(!s.component&&((o=s.children)==null?void 0:o.find(m=>{var v;return(m.path===""||m.path==="/")&&((v=m.meta)==null?void 0:v.isLayout)})))return s;if(((a=s.meta)==null?void 0:a.layout)!==!1)return{path:s.path,component:Ud[((l=s.meta)==null?void 0:l.layout)||"default"],children:s.path==="/"?[s]:[{...s,path:""}],meta:{isLayout:!0}}}return(u=s.meta)!=null&&u.layout?{path:s.path,component:Ud[(d=s.meta)==null?void 0:d.layout],children:[{...s,path:""}],meta:{isLayout:!0}}:s})}return t(r)}async function Jm(r,t={}){const e=t.document||r.resolvedOptions.document;if(!e||!r.dirty)return;const i={shouldRender:!0,tags:[]};if(await r.hooks.callHook("dom:beforeRender",i),!!i.shouldRender)return r._domUpdatePromise||(r._domUpdatePromise=new Promise(async s=>{var v;const n=new Map,o=new Promise(y=>{r.resolveTags().then(b=>{y(b.map(w=>{const E=n.get(w._d)||0,P={tag:w,id:(E?`${w._d}:${E}`:w._d)||Rd(w),shouldRender:!0};return w._d&&ym(w._d)&&n.set(w._d,E+1),P}))})});let a=r._dom;if(!a){a={title:e.title,elMap:new Map().set("htmlAttrs",e.documentElement).set("bodyAttrs",e.body)};for(const y of["body","head"]){const b=(v=e[y])==null?void 0:v.children;for(const w of b){const E=w.tagName.toLowerCase();if(!Sd.has(E))continue;const P=_m({tag:E,props:{}},{innerHTML:w.innerHTML,...w.getAttributeNames().reduce((S,M)=>(S[M]=w.getAttribute(M),S),{})||{}});if(P.key=w.getAttribute("data-hid")||void 0,P._d=Mh(P)||Rd(P),a.elMap.has(P._d)){let S=1,M=P._d;for(;a.elMap.has(M);)M=`${P._d}:${S++}`;a.elMap.set(M,w)}else a.elMap.set(P._d,w)}}}a.pendingSideEffects={...a.sideEffects},a.sideEffects={};function l(y,b,w){const E=`${y}:${b}`;a.sideEffects[E]=w,delete a.pendingSideEffects[E]}function u({id:y,$el:b,tag:w}){const E=w.tag.endsWith("Attrs");a.elMap.set(y,b),E||(w.textContent&&w.textContent!==b.textContent&&(b.textContent=w.textContent),w.innerHTML&&w.innerHTML!==b.innerHTML&&(b.innerHTML=w.innerHTML),l(y,"el",()=>{b==null||b.remove(),a.elMap.delete(y)}));for(const P in w.props){if(!Object.prototype.hasOwnProperty.call(w.props,P))continue;const S=w.props[P];if(P.startsWith("on")&&typeof S=="function"){const k=b==null?void 0:b.dataset;if(k&&k[`${P}fired`]){const F=P.slice(0,-5);S.call(b,new Event(F.substring(2)))}b.getAttribute(`data-${P}`)!==""&&((w.tag==="bodyAttrs"?e.defaultView:b).addEventListener(P.substring(2),S.bind(b)),b.setAttribute(`data-${P}`,""));continue}const M=`attr:${P}`;if(P==="class"){if(!S)continue;for(const k of S)E&&l(y,`${M}:${k}`,()=>b.classList.remove(k)),!b.classList.contains(k)&&b.classList.add(k)}else if(P==="style"){if(!S)continue;for(const[k,F]of S)l(y,`${M}:${k}`,()=>{b.style.removeProperty(k)}),b.style.setProperty(k,F)}else S!==!1&&S!==null&&(b.getAttribute(P)!==S&&b.setAttribute(P,S===!0?"":String(S)),E&&l(y,M,()=>b.removeAttribute(P)))}}const d=[],f={bodyClose:void 0,bodyOpen:void 0,head:void 0},m=await o;for(const y of m){const{tag:b,shouldRender:w,id:E}=y;if(w){if(b.tag==="title"){e.title=b.textContent,l("title","",()=>e.title=a.title);continue}y.$el=y.$el||a.elMap.get(E),y.$el?u(y):Sd.has(b.tag)&&d.push(y)}}for(const y of d){const b=y.tag.tagPosition||"head";y.$el=e.createElement(y.tag.tag),u(y),f[b]=f[b]||e.createDocumentFragment(),f[b].appendChild(y.$el)}for(const y of m)await r.hooks.callHook("dom:renderTag",y,e,l);f.head&&e.head.appendChild(f.head),f.bodyOpen&&e.body.insertBefore(f.bodyOpen,e.body.firstChild),f.bodyClose&&e.body.appendChild(f.bodyClose);for(const y in a.pendingSideEffects)a.pendingSideEffects[y]();r._dom=a,await r.hooks.callHook("dom:rendered",{renders:m}),s()}).finally(()=>{r._domUpdatePromise=void 0,r.dirty=!1})),r._domUpdatePromise}function nw(r={}){var i,s,n;const t=((i=r.domOptions)==null?void 0:i.render)||Jm;r.document=r.document||(typeof window<"u"?document:void 0);const e=((n=(s=r.document)==null?void 0:s.head.querySelector('script[id="unhead:payload"]'))==null?void 0:n.innerHTML)||!1;return Xb({...r,plugins:[...r.plugins||[],{key:"client",hooks:{"entries:updated":t}}],init:[e?JSON.parse(e):!1,...r.init||[]]})}function ow(r,t){let e=0;return()=>{const i=++e;t(()=>{e===i&&r()})}}function aw(r={}){const t=nw({domOptions:{render:ow(()=>Jm(t),e=>setTimeout(e,0))},...r});return t.install=qb(t),t}function lw(r){return document.readyState==="loading"?new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>t(r))}):Promise.resolve(r)}const hw=It({setup(r,{slots:t}){const e=yt(!1);return Xr(()=>e.value=!0),()=>e.value?t.default&&t.default({}):t.placeholder&&t.placeholder({})}});function cw(r){try{return JSON.parse(r||"{}")}catch(t){return console.error("[SSG] On state deserialization -",t,r),{}}}function uw(r,t,e,i){const{transformState:s,registerComponents:n=!0,useHead:o=!0,rootContainer:a="#app"}={};async function l(u=!1,d){const f=am(r);let m;o&&f.use(m=aw());const v=f0({history:m0(t.base),...t}),{routes:y}=t;n&&f.component("ClientOnly",hw);const b=[],P={app:f,head:m,isClient:!0,router:v,routes:y,onSSRAppRendered:()=>{},triggerOnSSRAppRendered:()=>Promise.all(b.map(F=>F())),initialState:{},transformState:s,routePath:d};await lw(),P.initialState=(s==null?void 0:s(window.__INITIAL_STATE__||{}))||cw(window.__INITIAL_STATE__),await(e==null?void 0:e(P)),f.use(v);let S,M=!0;v.beforeEach((F,C,N)=>{(M||S&&S===F.path)&&(M=!1,S=F.path,F.meta.state=P.initialState),N()});const k=P.initialState;return{...P,initialState:k}}return(async()=>{const{app:u,router:d}=await l();await d.isReady(),u.mount(a,!0)})(),l}function du(r,t){r&&Object.entries(t).forEach(([e,i])=>{r[e]&&i()})}function dw(){const r=document.querySelector(".aplayer.aplayer-fixed .aplayer-body"),t=document.querySelector(".aplayer-body .aplayer-miniswitcher .aplayer-icon");let e=!0;function i(){e=!e}function s(){e&&(r.style.left="-66px")}function n(){r.style.left="0"}fe(r,"mouseenter",n),fe(r,"mouseleave",s),fe(t,"click",i)}function tg(r,t){const e=document.querySelector(".aplayer.aplayer-fixed.aplayer-narrow .aplayer-body");e&&(r===Fh.metingLoadBefore?e.style.display="initial":r===Fh.metingLoad&&(e.style.left=t))}function eg(r){tg(r,"0")}function pw(r){tg(r,"-66px")}var Fh=(r=>(r.metingInit="metingInit",r.metingLoadBefore="metingLoadBefore",r.metingLoad="metingLoad",r))(Fh||{});function fw({options:r}){du(r,{animationIn:()=>Xr(()=>pe(()=>Promise.resolve({}),__vite__mapDeps([38])))})}function mw({options:r}){du(r,{animationIn:()=>eg("metingLoadBefore")})}function gw({options:r}){du(r,{lyricHidden:()=>vw(),animationIn:()=>{eg("metingLoad")},autoHidden:()=>{dw(),pw("metingLoad")}})}function vw(){const r=new MutationObserver(t=>{const e=document.querySelector(".aplayer-lrc .aplayer-lrc-contents .aplayer-lrc-current"),i=document.querySelector(".aplayer-icon-lrc");function s(){e&&(e.style.display="none",e.textContent!=="Loading"&&(i.click(),e.style.display="",r==null||r.disconnect()))}t.forEach(n=>{s()})});r.observe(document.body,{childList:!0,subtree:!0})}function yw(r){let t=!1,e;Xr(()=>{e=new MutationObserver(i=>{function s(){if(t)return;document.querySelector(".aplayer.aplayer-fixed.aplayer-narrow .aplayer-body")&&(t=!0,setTimeout(()=>{mw(r),requestAnimationFrame(()=>{gw(r),e==null||e.disconnect(),e=null})},0))}i.forEach(n=>{s()})}),e.observe(document.body,{childList:!0,subtree:!0})}),nm(()=>{e==null||e.disconnect(),e=null})}function rg(){const r=au();return et(()=>r.value.addons["valaxy-addon-meting"])}function _w(){const r=Ve(),t=rg(),e=et(()=>r.value.cdn.prefix);Bn({link:[{rel:"stylesheet",href:`${e.value}aplayer/dist/APlayer.min.css`}]}),Nd(`${e.value}aplayer/dist/APlayer.min.js`,()=>{Nd(`${e.value}meting@2/dist/Meting.min.js`)}),fw(t.value),yw(t.value)}function bw(){const r=Xi(),t=rg(),e=Oa(),i=yt(!0);return qt(()=>r.path,()=>{var s,n;i.value=((s=e.value)==null?void 0:s.aplayer)??((n=t.value)==null?void 0:n.global)??!0},{immediate:!0}),i}const xw=It({__name:"App",props:{id:{default:"308168565"},server:{default:"netease"},type:{default:"playlist"}},setup(r){const t=r;_w();const e=bw();return(i,s)=>(W(),at(Ie,null,[At(" eslint-disable-next-line vue/component-name-in-template-casing "),bn(vt("meting-js",Hr(t,{fixed:!0}),null,16),[[Yo,K(e)]])],2112))}});class ww{constructor(t){it(this,"live2dTips");it(this,"messageArray",[]);it(this,"messageTimer",null);this.live2dTips=t}init(){this.setupEvents(),this.setupSeasonalTips(this.live2dTips.seasons),this.welcomeMessage(),this.activityBasedMessages(),this.setupAdditionalEvents(),this.showMessage(this.generateReferrerMessage(),7e3,10)}setupEvents(){this.setupEventHandlers(this.live2dTips.mouseover,"mouseover"),this.setupEventHandlers(this.live2dTips.click,"click")}setupEventHandlers(t,e){t.forEach(i=>{window.addEventListener(e,s=>{const n=s.target;if(n.matches(i.selector)){const o=this.randomSelection(i.text).replace("{text}",n.textContent||"");this.showMessage(o,4e3,8)}})})}setupSeasonalTips(t){const e=new Date;t.forEach(i=>{const[s,n]=i.date.split("-"),[o,a]=s.split("/").map(Number),[l,u]=n?n.split("/").map(Number):[o,a],d=e.getMonth()+1,f=e.getDate();if(o<=d&&d<=l&&a<=f&&f<=u){let m=this.randomSelection(i.text);m=m.replace("{year}",String(e.getFullYear())),this.showMessage(m,7e3,100),this.messageArray.push(m)}})}randomSelection(t){return Array.isArray(t)?t[Math.floor(Math.random()*t.length)]:t}welcomeMessage(){const t=new Date().getHours();let e;const i=this.live2dTips.time;for(let s=0;s<i.length;s++){const n=i[s].hour.split("-"),o=Number.parseInt(n[0]),a=Number.parseInt(n[1]);if(t>=o&&t<=a){const l=i[s].text;Array.isArray(l)?e=this.randomSelection(l):e=l;break}}setTimeout(()=>{this.showMessage(e,7e3,8)},3e3)}generateReferrerMessage(){var t,e;if(document.referrer!==""){const i=new URL(document.referrer),s=i.hostname.split(".")[1];if(location.hostname===i.hostname)return`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`;{const n=i.search.split("&");return s==="baidu"?`Hello！来自 百度搜索 的朋友<br>你是搜索 <span>${(t=n.find(o=>o.startsWith("wd=")))==null?void 0:t.split("=")[1]}</span> 找到的我吗？`:s==="so"?`Hello！来自 360搜索 的朋友<br>你是搜索 <span>${(e=n.find(o=>o.startsWith("q=")))==null?void 0:e.split("=")[1]}</span> 找到的我吗？`:s==="google"?`Hello！来自 谷歌搜索 的朋友<br>欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`:`Hello！来自 <span>${i.hostname}</span> 的朋友`}}else return`欢迎阅读<span>「${document.title.split(" - ")[0]}」</span>`}activityBasedMessages(){let t=!1,e=null;const i=this.live2dTips.message.default;window.addEventListener("mousemove",()=>t=!0),window.addEventListener("keydown",()=>t=!0),setInterval(()=>{t?(t=!1,e!==null&&(clearInterval(e),e=null)):e||(e=setInterval(()=>{this.showMessage(this.randomSelection(i),6e3,9)},2e4))},1e3)}setupAdditionalEvents(){window.addEventListener("copy",()=>{this.showMessage(this.live2dTips.message.copy,6e3,9)}),window.addEventListener("visibilitychange",()=>{document.hidden||this.showMessage(this.live2dTips.message.visibilitychange,6e3,9)})}showHitokoto(){fetch("https://v1.hitokoto.cn").then(t=>t.json()).then(t=>{const e=`这句一言是 <span>${t.creator}</span>投稿的。`;this.showMessage(t.hitokoto,6e3,9),setTimeout(()=>{this.showMessage(e,4e3,9)},6e3)})}showMessage(t,e=3e3,i){const s=document.getElementById("live2d-tips");if(!t){s.classList.remove("live2d-tips-active");return}const n=sessionStorage.getItem("live2d-text");Number(n)<=i&&(this.messageTimer&&(clearTimeout(this.messageTimer),this.messageTimer=null),sessionStorage.setItem("live2d-text",i.toString()),s.innerHTML=typeof t=="string"?t:this.randomSelection(t),s.classList.add("live2d-tips-active"),this.messageTimer=window.setTimeout(()=>{sessionStorage.removeItem("live2d-text"),s.classList.remove("live2d-tips-active")},e))}}function $d(r,t,e){let i="";{const s=new Date;s.setTime(s.getTime()+24*e*60*60*1e3),i=`; expires=${s.toUTCString()}`}document.cookie=`${encodeURIComponent(r)}=${encodeURIComponent(t)}${i}; path=/`}function Gd(r){const t=`${encodeURIComponent(r)}=`,e=document.cookie.split(";");for(let i of e)if(i=i.trim(),i.startsWith(t))return decodeURIComponent(i.substring(t.length));return null}async function Tw(r){try{const t=await fetch(r);if(!t.ok)throw new Error(`请求失败，状态码: ${t.status}`);return await t.json()}catch(t){return console.error(`请求或解析错误: ${t}`),null}}function ig(r){const t=/https:\/\/cdn\.jsdelivr\.net\/gh\/([\w-]+)\/([\w-]+)\/([\w\-/]+)\/index\.json/,e=r.match(t);if(e){const i=e[1],s=e[2],n=e[3];return`https://api.github.com/repos/${i}/${s}/contents/${n}/textures`}else throw new Error("URL格式不正确")}async function sg(r){const t=`live2d-cache-${r}`,e=`live2d-cacheTime-${r}`,i=24*60*60*1e3,s=localStorage.getItem(t),n=localStorage.getItem(e);if(s&&n&&Date.now()-Number.parseInt(n)<i)return JSON.parse(s);try{const o=await fetch(r);if(!o.ok)throw new Error(`Network request failed, status code: ${o.status}`);const a=await o.json();if(!Array.isArray(a))throw new TypeError("目录内容获取失败");const l=a.map(u=>u.name);return localStorage.setItem(t,JSON.stringify(l)),localStorage.setItem(e,Date.now().toString()),l}catch(o){throw console.error("获取文件名失败:",o),o}}const ng="modelKey",og="skinKey";async function ao(r){const t=localStorage.getItem(ng),e=localStorage.getItem(og),i=t||Object.keys(r)[0];let s=Number.parseInt(e||"0",10),n=r[i];if(!n){const a=Object.keys(r)[0];n=r[a],ps(Object.keys(r)[0],0),console.warn(`缓存中的人物Key值"${i}"不存在，已初始化为默认值`)}s>=n.models.length&&(s=0,console.warn("皮肤索引越界，已初始化皮肤索引。如果这是由于您删除了某些人物 models 导致的，请放心忽略此消息"));const o=typeof n.models=="string"?await Bo(n.models,s):n.models[s];return{currentCharacterKey:i,currentSkinIndex:s,availableModels:n,selectedModel:o}}function ps(r,t){r!==null&&localStorage.setItem(ng,r.toString()),t!==null&&localStorage.setItem(og,t.toString())}async function Bo(r,t){const e=ig(r);try{const i=await sg(e),s=await Tw(r);return s.url=r,s.textures[0]=`textures/${i[t]}`,ps(null,t),s}catch(i){console.error(i)}}const Ew={XiaoYun:{message:"来自云游君的小云 ~",models:["https://cdn.jsdelivr.net/npm/@yunyoujun/live2d@latest/小云.model3.json"]},Tia:{message:"来自 Potion Maker 的 Tia 酱 ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Tia/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Tia/textures"},Pio:{message:"来自 Potion Maker 的 Pio 酱 ~",models:"https://cdn.jsdelivr.net/gh/fghrsh/live2d_api/model/Potion-Maker/Pio/index.json",textures:"https://api.github.com/repos/fghrsh/live2d_api/contents/model/Potion-Maker/Pio/textures"},ShizukuTalk:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-48/index.json","https://registry.npmmirror.com/weblive2d/latest/files/model/ShizukuTalk/shizuku-pajama/index.json"]},BiliBili22:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/22/index.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.cba-normal.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.newyear.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.school.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.summer.normal.2.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.high.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.tomo-bukatsu.low.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.valley.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2017.vdays.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.lover.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.2018.spring.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.default.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.1.model.json","https://summerscar.me/live2dDemo/assets/22.2017.cba-normal/22.xmas.2.model.json"]},BiliBili33:{models:["https://registry.npmmirror.com/weblive2d/latest/files/model/bilibili-live/33/index.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2016.xmas.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.cba-normal.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.newyear.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.school.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.1.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.summer.normal.2.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.high.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.tomo-bukatsu.low.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.valley.json","https://summerscar.me/live2dDemo/assets/33.default/model.2017.vdays.json","https://summerscar.me/live2dDemo/assets/33.default/model.2018.lover.json","https://summerscar.me/live2dDemo/assets/33.defaultmodel.2018.spring.json"]}},Sw={mouseover:[{selector:"#live2d-canvas",text:["干嘛呢你，快把手拿开～～","鼠…鼠标放错地方了！","你要干嘛呀？","喵喵喵？","怕怕(ノ≧∇≦)ノ","非礼呀！救命！","这样的话，只能使用武力了！","我要生气了哦","不要动手动脚的！","真…真的是不知羞耻！","Hentai！"]},{selector:"#live2d-tool-hitokoto",text:["猜猜我要说些什么？","我从青蛙王子那里听到了不少人生经验。"]},{selector:"#live2d-tool-asteroids",text:["要不要来玩飞机大战？","这个按钮上写着「不要点击」。","怎么，你想来和我玩个游戏？","听说这样可以蹦迪！"]},{selector:"#live2d-tool-switch-model",text:["你是不是不爱人家了呀，呜呜呜～","要见见我的姐姐嘛？","想要看我妹妹嘛？","要切换看板娘吗？"]},{selector:"#live2d-tool-switch-texture",text:["喜欢换装 PLAY 吗？","这次要扮演什么呢？","变装！","让我们看看接下来会发生什么！"]},{selector:"#live2d-tool-photo",text:["你要给我拍照呀？一二三～茄子～","要不，我们来合影吧！","保持微笑就好了～"]},{selector:"#live2d-tool-info",text:["想要知道更多关于我的事么？","这里记录着我搬家的历史呢。","你想深入了解我什么呢？"]},{selector:"#live2d-tool-quit",text:["到了要说再见的时候了吗？","呜呜 QAQ 后会有期……","不要抛弃我呀……","我们，还能再见面吗……","哼，你会后悔的！"]},{selector:".menu-item-home a",text:["点击前往首页，想回到上一页可以使用浏览器的后退功能哦。","点它就可以回到首页啦！","回首页看看吧。"]},{selector:".menu-item-about a",text:["你想知道我家主人是谁吗？","这里有一些关于我家主人的秘密哦，要不要看看呢？","发现主人出没地点！"]},{selector:".menu-item-tags a",text:["点击就可以看文章的标签啦！","点击来查看所有标签哦。"]},{selector:".menu-item-categories a",text:["文章都分类好啦～","点击来查看文章分类哦。"]},{selector:".menu-item-archives a",text:["翻页比较麻烦吗，那就来看看文章归档吧。","文章目录都整理在这里啦！"]},{selector:".menu-item-friends a",text:["这是我的朋友们哦ヾ(◍°∇°◍)ﾉﾞ","要去大佬们的家看看吗？","要去拜访一下我的朋友们吗？"]},{selector:".menu-item-search a",text:["找不到想看的内容？搜索看看吧！","在找什么东西呢，需要帮忙吗？"]},{selector:".menu-item a",text:["快看看这里都有什么呢？"]},{selector:".site-author",text:["我家主人好看吗？","这是我家主人(*´∇｀*)"]},{selector:".site-state",text:["这是文章的统计信息～","要不要点进去看看？"]},{selector:".feed-link a",text:["这里可以使用 RSS 订阅呢！","利用 feed 订阅器，就能快速知道博客有没有更新了呢。"]},{selector:".cc-opacity, .post-copyright-author",text:["要记得规范转载哦。","所有文章均采用 CC BY-NC-SA 4.0 许可协议～","转载前要先注意下文章的版权协议呢。"]},{selector:".links-of-author",text:["这里是主人的常驻地址哦。","这里有主人的联系方式！"]},{selector:".followme",text:["手机扫一下就能继续看，很方便呢～","扫一扫，打开新世界的大门！"]},{selector:".fancybox img, img.medium-zoom-image",text:["点击图片可以放大呢！"]},{selector:".copy-btn",text:["代码可以直接点击复制哟。"]},{selector:".highlight .table-container, .gist",text:["GitHub！我是新手！","PHP 是最好的语言！"]},{selector:"a[href^='mailto']",text:["邮件我会及时回复的！","点击就可以发送邮件啦～"]},{selector:"a[href^='/tags/']",text:["要去看看 <span>{text}</span> 标签么？","点它可以查看此标签下的所有文章哟！"]},{selector:"a[href^='/categories/']",text:["要去看看 <span>{text}</span> 分类么？","点它可以查看此分类下的所有文章哟！"]},{selector:".post-title-link",text:["要看看 <span>{text}</span> 这篇文章吗？"]},{selector:"a[rel='contents']",text:["点击来阅读全文哦。"]},{selector:"a[itemprop='discussionUrl']",text:["要去看看评论吗？"]},{selector:".beian a",text:["我也是有户口的人哦。","我的主人可是遵纪守法的好主人。"]},{selector:".container a[href^='http'], .nav-link .nav-text",text:["要去看看 <span>{text}</span> 么？","去 <span>{text}</span> 逛逛吧。","到 <span>{text}</span> 看看吧。"]},{selector:".back-to-top",text:["点它就可以回到顶部啦！","又回到最初的起点～","要回到开始的地方么？"]},{selector:".reward-container",text:["我是不是棒棒哒～快给我点赞吧！","要打赏我嘛？好期待啊～","主人最近在吃土呢，很辛苦的样子，给他一些钱钱吧～"]},{selector:"#wechat",text:["这是我的微信二维码～"]},{selector:"#alipay",text:["这是我的支付宝哦！"]},{selector:"#bitcoin",text:["这是我的比特币账号！"]},{selector:"#needsharebutton-postbottom .btn",text:["好东西要让更多人知道才行哦。","觉得文章有帮助的话，可以分享给更多需要的朋友呢。"]},{selector:".need-share-button_weibo",text:["微博？来分享一波喵！"]},{selector:".need-share-button_wechat",text:["分享到微信吧！"]},{selector:".need-share-button_douban",text:["分享到豆瓣好像也不错！"]},{selector:".need-share-button_qqzone",text:["QQ 空间，一键转发，耶～"]},{selector:".need-share-button_twitter",text:["Twitter？好像是不存在的东西？"]},{selector:".need-share-button_facebook",text:["emmm…FB 好像也是不存在的东西？"]},{selector:".post-nav-item a[rel='next']",text:["来看看下一篇文章吧。","点它可以看下一篇文章哦！","要翻到下一篇文章吗？"]},{selector:".post-nav-item a[rel='prev']",text:["来看看上一篇文章吧。","点它可以看上一篇文章哦！","要翻到上一篇文章吗？"]},{selector:".extend.next",text:["去下一页看看吧。","点它可以前进哦！","要翻到下一页吗？"]},{selector:".extend.prev",text:["去上一页看看吧。","点它可以后退哦！","要翻到上一页吗？"]},{selector:"input.vnick",text:["该怎么称呼你呢？","留下你的尊姓大名！"]},{selector:".vmail",text:["留下你的邮箱，不然就是无头像人士了！","记得设置好 Gravatar 头像哦！","为了方便通知你最新消息，一定要留下邮箱！"]},{selector:".vlink",text:["快快告诉我你的家在哪里，好让我去参观参观！"]},{selector:".veditor",text:["想要去评论些什么吗？","要说点什么吗？","觉得博客不错？快来留言和主人交流吧！"]},{selector:".vcontrol a",text:["你会不会熟练使用 Markdown 呀？","使用 Markdown 让评论更美观吧～"]},{selector:".vemoji-btn",text:["要插入一个萌萌哒的表情吗？","要来一发表情吗？"]},{selector:".vpreview-btn",text:["要预览一下你的发言吗？","快看看你的评论有多少负熵！"]},{selector:".vsubmit",text:["评论没有审核，要对自己的发言负责哦～","要提交了吗，请耐心等待回复哦～"]},{selector:".vcontent",text:["哇，快看看这个精彩评论！","如果有疑问，请尽快留言哦～"]}],click:[{selector:"#live2d",text:["是…是不小心碰到了吧…","萝莉控是什么呀？","你看到我的小熊了吗？","再摸的话我可要报警了！⌇●﹏●⌇","110 吗，这里有个变态一直在摸我(ó﹏ò｡)","不要摸我了，我会告诉老婆来打你的！","干嘛动我呀！小心我咬你！","别摸我，有什么好摸的！"]},{selector:".veditor",text:["要吐槽些什么呢？","一定要认真填写喵～","有什么想说的吗？"]},{selector:".vsubmit",text:["输入验证码就可以提交评论啦～"]}],seasons:[{date:"01/01",text:"<span>元旦</span>了呢，新的一年又开始了，今年是{year}年～"},{date:"02/14",text:"又是一年<span>情人节</span>，{year}年找到对象了嘛～"},{date:"03/08",text:"今天是<span>国际妇女节</span>！"},{date:"03/12",text:"今天是<span>植树节</span>，要保护环境呀！"},{date:"04/01",text:"悄悄告诉你一个秘密～<span>今天是愚人节，不要被骗了哦～</span>"},{date:"05/01",text:"今天是<span>五一劳动节</span>，计划好假期去哪里了吗～"},{date:"06/01",text:"<span>儿童节</span>了呢，快活的时光总是短暂，要是永远长不大该多好啊…"},{date:"09/03",text:"<span>中国人民抗日战争胜利纪念日</span>，铭记历史、缅怀先烈、珍爱和平、开创未来。"},{date:"09/10",text:"<span>教师节</span>，在学校要给老师问声好呀～"},{date:"10/01",text:"<span>国庆节</span>到了，为祖国母亲庆生！"},{date:"11/05-11/12",text:"今年的<span>双十一</span>是和谁一起过的呢～"},{date:"12/20-12/31",text:"这几天是<span>圣诞节</span>，主人肯定又去剁手买买买了～"}],time:[{hour:"6-7",text:"早上好！一日之计在于晨，美好的一天就要开始了～"},{hour:"8-11",text:"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！"},{hour:"12-13",text:"中午了，工作了一个上午，现在是午餐时间！"},{hour:"14-17",text:"午后很容易犯困呢，今天的运动目标完成了吗？"},{hour:"18-19",text:"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红～"},{hour:"20-21",text:"晚上好，今天过得怎么样？"},{hour:"22-23",text:["已经这么晚了呀，早点休息吧，晚安～","深夜时要爱护眼睛呀！"]},{hour:"0-5",text:"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛？"}],message:{default:["好久不见，日子过得好快呢……","大坏蛋！你都多久没理人家了呀，嘤嘤嘤～","嗨～快来逗我玩吧！","拿小拳拳锤你胸口！","记得把小家加入收藏夹哦！"],console:"哈哈，你打开了控制台，是想要看看我的小秘密吗？",copy:"你都复制了些什么呀，转载要记得加上出处哦！",visibilitychange:"哇，你终于回来了～",clothes:["我还没有其他衣服呢！"]},tool:{camera:["照好了嘛，是不是很可爱呢？"],display:["愿你有一天能与重要的人重逢"]}};function Aw(r,t){const e={...r};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]?Array.isArray(e[i])&&Array.isArray(t[i])?e[i]=[...e[i],...t[i]]:e[i]=[e[i],t[i]]:e[i]=t[i]);return e}function Cw(r,t){return Array.isArray(r)?r.reduce((e,i)=>(i in t&&(e[i]=t[i]),e),{}):{}}function Pw(){const r=au();return et(()=>{const{options:t}=r.value.addons["valaxy-addon-live2d"],e=(t==null?void 0:t.enableLive2D)??"all",i={...Ew,...t==null?void 0:t.live2DCollection},s=e==="all"?i:Cw(e,i),n=Aw(Sw,(t==null?void 0:t.live2dTips)||{});return{widthLimit:250,safetyMargin:50,randomCharacter:!1,randomSkin:!1,skipHello:!1,hideOnScreenSizes:600,debugger:!1,...t,live2DCollection:s,enableLive2D:e,live2dTips:n}})}function Iw(){const r=Pw(),{randomCharacter:t,randomSkin:e,live2DCollection:i,live2dTips:s,hideOnScreenSizes:n}=r.value,o=yt(),a=yt(!1);let l=yt(!1);const u=new ww(s);async function d(){await pe(()=>import("./index.DEmQf-20.js"),__vite__mapDeps([39,3,2,4,6,5,7])),o.value=(await pe(async()=>{const{Live2DApp:k}=await import("./Live2DApp.DHI_2l36.js");return{Live2DApp:k}},__vite__mapDeps([40,3,2,4,6,5,7]))).Live2DApp,Gd("live2d")==="Show"&&setTimeout(()=>{M()},0),Gd("live2d")==="Hide"&&setTimeout(()=>{S()},0),u.init(),o.value.init(r.value,u),o.value.loadModel((await ao(i)).selectedModel)}async function f(k=t){var F;(F=o.value)==null||F.switchModel(k?await v():await y())}async function m(k=e){var F;(F=o.value)==null||F.switchModel(k?await b():await w()),u.showMessage("我的新衣服好看嘛？",4e3,10)}function v(){const k=Object.keys(i),F=k[Math.floor(Math.random()*k.length)];return ps(F,0),u.showMessage(i[F].message,4e3,10),i[F].models[0]}async function y(){const{currentCharacterKey:k}=await ao(i),F=Object.keys(i),C=F[(F.indexOf(k)+1)%F.length],N=i[C].models;return ps(C,0),u.showMessage(i[C].message,4e3,10),typeof N=="string"?await Bo(N,0):N[0]}async function b(){const{currentCharacterKey:k}=await ao(i),F=i[k],C=Math.floor(Math.random()*F.models.length);return ps(null,C),F.models.length===0&&u.showMessage(s.message.clothes,4e3,10),typeof F.models=="string"?await Bo(F.models,C):F.models[C]}async function w(){const{currentCharacterKey:k,currentSkinIndex:F}=await ao(i),C=i[k],N=U=>(F+1)%U;if(typeof C.models=="string"){const U=await sg(ig(C.models)),H=N(U.length);return Bo(C.models,H)}else{if(C.models.length===0)return u.showMessage(s.message.clothes,4e3,10),C.models[0];const U=N(C.models.length);return ps(null,U),C.models[U]}}function E(){var k;(k=o.value)==null||k.captureFrame()}function P(){const k=document.getElementById("live2d");a.value=k.style.bottom==="0px"||k.style.bottom==="",a.value?S():M()}function S(){a.value=!0;const k=document.getElementById("live2d");localStorage.setItem("live2d-display",Date.now().toString()),u.showMessage(s.tool.display,2e3,11),k.style.bottom="-100%",setTimeout(()=>{$d("live2d","Hide",7)},0)}function M(){a.value=!1;const k=document.getElementById("live2d");k.style.bottom="0px",setTimeout(()=>{localStorage.removeItem("live2d-display"),k.style.display="",$d("live2d","Show",7)},0)}if(Pr&&d(),n!==!1){const k=typeof n=="string"?n:`${n}px`;l=Ae(`(max-width: ${k})`)}return qt(l,k=>{k?S():M()}),{live2DApp:o,switchCharacter:f,switchSkin:m,getRandomCharacter:v,getSequentialCharacter:y,getRandomSkin:b,getSequentialSkin:w,captureFrame:E,toggleLive2DVisibility:P,isLive2DHide:a,live2dTipsHandler:u,isHidden:l}}function Rw(r=200){const t=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let e=null;function i(s){e||(e=s);const n=s-e,o=Math.min(n/r,1);t.forEach(a=>{a.style.padding=`${5*o}px 0`,a.style.maxHeight=`${60*o}px`}),o<1?requestAnimationFrame(i):t.forEach(a=>{a.style.transform=""})}requestAnimationFrame(i)}function Mw(r=200){const t=document.querySelectorAll(".live2d-tool:not(.hide-live2d)");let e=null;function i(s){e===null&&(e=s);const n=s-e,o=Math.min(n/r,1);t.forEach(a=>{o<1?(a.style.padding="5px 0",a.style.maxHeight="60px",a.style.transform=`translateX(${-40*o}px)`):(a.style.padding="0",a.style.maxHeight="0")}),o<1||n<r*2?requestAnimationFrame(i):e=null}requestAnimationFrame(i)}var qi=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(qi||{}),ag=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(ag||{}),Nh=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(Nh||{}),_t=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(_t||{}),_r=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(_r||{}),q=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(q||{}),vs=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(vs||{}),gt=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(gt||{}),nt=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(nt||{}),Fr=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(Fr||{}),di=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(di||{}),Ar=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(Ar||{}),Re=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Re||{}),vr=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(vr||{}),pu=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(pu||{}),$e=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))($e||{}),de=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(de||{}),he=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(he||{}),wr=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(wr||{});const kw={createCanvas:(r,t)=>{const e=document.createElement("canvas");return e.width=r,e.height=t,e},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,t)=>fetch(r,t),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")},ot={ADAPTER:kw,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Cl=/iPhone/i,Hd=/iPod/i,zd=/iPad/i,jd=/\biOS-universal(?:.+)Mac\b/i,Pl=/\bAndroid(?:.+)Mobile\b/i,Vd=/Android/i,es=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,lo=/Silk/i,Dr=/Windows Phone/i,Wd=/\bWindows(?:.+)ARM\b/i,Xd=/BlackBerry/i,Yd=/BB10/i,qd=/Opera Mini/i,Kd=/\b(CriOS|Chrome)(?:.+)Mobile/i,Zd=/Mobile(?:.+)Firefox\b/i,Qd=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function Dw(r){return function(t){return t.test(r)}}function Jd(r){var t={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?t.userAgent=r:r&&r.userAgent&&(t={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var e=t.userAgent,i=e.split("[FBAN");typeof i[1]<"u"&&(e=i[0]),i=e.split("Twitter"),typeof i[1]<"u"&&(e=i[0]);var s=Dw(e),n={apple:{phone:s(Cl)&&!s(Dr),ipod:s(Hd),tablet:!s(Cl)&&(s(zd)||Qd(t))&&!s(Dr),universal:s(jd),device:(s(Cl)||s(Hd)||s(zd)||s(jd)||Qd(t))&&!s(Dr)},amazon:{phone:s(es),tablet:!s(es)&&s(lo),device:s(es)||s(lo)},android:{phone:!s(Dr)&&s(es)||!s(Dr)&&s(Pl),tablet:!s(Dr)&&!s(es)&&!s(Pl)&&(s(lo)||s(Vd)),device:!s(Dr)&&(s(es)||s(lo)||s(Pl)||s(Vd))||s(/\bokhttp\b/i)},windows:{phone:s(Dr),tablet:s(Wd),device:s(Dr)||s(Wd)},other:{blackberry:s(Xd),blackberry10:s(Yd),opera:s(qd),firefox:s(Zd),chrome:s(Kd),device:s(Xd)||s(Yd)||s(qd)||s(Zd)||s(Kd)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}const Ow=Jd.default??Jd,Nr=Ow(globalThis.navigator);ot.RETINA_PREFIX=/@([0-9\.]+)x/;ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var lg={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(e=!1));function s(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function n(l,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new s(d,f||l,m),y=e?e+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],v]:l._events[y].push(v):(l._events[y]=v,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(e?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},a.prototype.listeners=function(u){var d=e?e+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,v=f.length,y=new Array(v);m<v;m++)y[m]=f[m].fn;return y},a.prototype.listenerCount=function(u){var d=e?e+u:u,f=this._events[d];return f?f.fn?1:f.length:0},a.prototype.emit=function(u,d,f,m,v,y){var b=e?e+u:u;if(!this._events[b])return!1;var w=this._events[b],E=arguments.length,P,S;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),E){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,f),!0;case 4:return w.fn.call(w.context,d,f,m),!0;case 5:return w.fn.call(w.context,d,f,m,v),!0;case 6:return w.fn.call(w.context,d,f,m,v,y),!0}for(S=1,P=new Array(E-1);S<E;S++)P[S-1]=arguments[S];w.fn.apply(w.context,P)}else{var M=w.length,k;for(S=0;S<M;S++)switch(w[S].once&&this.removeListener(u,w[S].fn,void 0,!0),E){case 1:w[S].fn.call(w[S].context);break;case 2:w[S].fn.call(w[S].context,d);break;case 3:w[S].fn.call(w[S].context,d,f);break;case 4:w[S].fn.call(w[S].context,d,f,m);break;default:if(!P)for(k=1,P=new Array(E-1);k<E;k++)P[k-1]=arguments[k];w[S].fn.apply(w[S].context,P)}}return!0},a.prototype.on=function(u,d,f){return n(this,u,d,f,!1)},a.prototype.once=function(u,d,f){return n(this,u,d,f,!0)},a.prototype.removeListener=function(u,d,f,m){var v=e?e+u:u;if(!this._events[v])return this;if(!d)return o(this,v),this;var y=this._events[v];if(y.fn)y.fn===d&&(!m||y.once)&&(!f||y.context===f)&&o(this,v);else{for(var b=0,w=[],E=y.length;b<E;b++)(y[b].fn!==d||m&&!y[b].once||f&&y[b].context!==f)&&w.push(y[b]);w.length?this._events[v]=w.length===1?w[0]:w:o(this,v)}return this},a.prototype.removeAllListeners=function(u){var d;return u?(d=e?e+u:u,this._events[d]&&o(this,d)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(lg);var Bw=lg.exports;const Nn=Xc(Bw);var fu={exports:{}};fu.exports=Ba;fu.exports.default=Ba;function Ba(r,t,e){e=e||2;var i=t&&t.length,s=i?t[0]*e:r.length,n=hg(r,0,s,e,!0),o=[];if(!n||n.next===n.prev)return o;var a,l,u,d,f,m,v;if(i&&(n=$w(r,t,n,e)),r.length>80*e){a=u=r[0],l=d=r[1];for(var y=e;y<s;y+=e)f=r[y],m=r[y+1],f<a&&(a=f),m<l&&(l=m),f>u&&(u=f),m>d&&(d=m);v=Math.max(u-a,d-l),v=v!==0?32767/v:0}return Tn(n,o,e,a,l,v,0),o}function hg(r,t,e,i,s){var n,o;if(s===Gh(r,t,e,i)>0)for(n=t;n<e;n+=i)o=tp(n,r[n],r[n+1],o);else for(n=e-i;n>=t;n-=i)o=tp(n,r[n],r[n+1],o);return o&&La(o,o.next)&&(Sn(o),o=o.next),o}function zi(r,t){if(!r)return r;t||(t=r);var e=r,i;do if(i=!1,!e.steiner&&(La(e,e.next)||ee(e.prev,e,e.next)===0)){if(Sn(e),e=t=e.prev,e===e.next)break;i=!0}else e=e.next;while(i||e!==t);return t}function Tn(r,t,e,i,s,n,o){if(r){!o&&n&&Vw(r,i,s,n);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,n?Fw(r,i,s,n):Lw(r)){t.push(l.i/e|0),t.push(r.i/e|0),t.push(u.i/e|0),Sn(r),r=u.next,a=u.next;continue}if(r=u,r===a){o?o===1?(r=Nw(zi(r),t,e),Tn(r,t,e,i,s,n,2)):o===2&&Uw(r,t,e,i,s,n):Tn(zi(r),t,e,i,s,n,1);break}}}}function Lw(r){var t=r.prev,e=r,i=r.next;if(ee(t,e,i)>=0)return!1;for(var s=t.x,n=e.x,o=i.x,a=t.y,l=e.y,u=i.y,d=s<n?s<o?s:o:n<o?n:o,f=a<l?a<u?a:u:l<u?l:u,m=s>n?s>o?s:o:n>o?n:o,v=a>l?a>u?a:u:l>u?l:u,y=i.next;y!==t;){if(y.x>=d&&y.x<=m&&y.y>=f&&y.y<=v&&fs(s,a,n,l,o,u,y.x,y.y)&&ee(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function Fw(r,t,e,i){var s=r.prev,n=r,o=r.next;if(ee(s,n,o)>=0)return!1;for(var a=s.x,l=n.x,u=o.x,d=s.y,f=n.y,m=o.y,v=a<l?a<u?a:u:l<u?l:u,y=d<f?d<m?d:m:f<m?f:m,b=a>l?a>u?a:u:l>u?l:u,w=d>f?d>m?d:m:f>m?f:m,E=Uh(v,y,t,e,i),P=Uh(b,w,t,e,i),S=r.prevZ,M=r.nextZ;S&&S.z>=E&&M&&M.z<=P;){if(S.x>=v&&S.x<=b&&S.y>=y&&S.y<=w&&S!==s&&S!==o&&fs(a,d,l,f,u,m,S.x,S.y)&&ee(S.prev,S,S.next)>=0||(S=S.prevZ,M.x>=v&&M.x<=b&&M.y>=y&&M.y<=w&&M!==s&&M!==o&&fs(a,d,l,f,u,m,M.x,M.y)&&ee(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;S&&S.z>=E;){if(S.x>=v&&S.x<=b&&S.y>=y&&S.y<=w&&S!==s&&S!==o&&fs(a,d,l,f,u,m,S.x,S.y)&&ee(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;M&&M.z<=P;){if(M.x>=v&&M.x<=b&&M.y>=y&&M.y<=w&&M!==s&&M!==o&&fs(a,d,l,f,u,m,M.x,M.y)&&ee(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function Nw(r,t,e){var i=r;do{var s=i.prev,n=i.next.next;!La(s,n)&&cg(s,i,i.next,n)&&En(s,n)&&En(n,s)&&(t.push(s.i/e|0),t.push(i.i/e|0),t.push(n.i/e|0),Sn(i),Sn(i.next),i=r=n),i=i.next}while(i!==r);return zi(i)}function Uw(r,t,e,i,s,n){var o=r;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Yw(o,a)){var l=ug(o,a);o=zi(o,o.next),l=zi(l,l.next),Tn(o,t,e,i,s,n,0),Tn(l,t,e,i,s,n,0);return}a=a.next}o=o.next}while(o!==r)}function $w(r,t,e,i){var s=[],n,o,a,l,u;for(n=0,o=t.length;n<o;n++)a=t[n]*i,l=n<o-1?t[n+1]*i:r.length,u=hg(r,a,l,i,!1),u===u.next&&(u.steiner=!0),s.push(Xw(u));for(s.sort(Gw),n=0;n<s.length;n++)e=Hw(s[n],e);return e}function Gw(r,t){return r.x-t.x}function Hw(r,t){var e=zw(r,t);if(!e)return t;var i=ug(e,r);return zi(i,i.next),zi(e,e.next)}function zw(r,t){var e=t,i=r.x,s=r.y,n=-1/0,o;do{if(s<=e.y&&s>=e.next.y&&e.next.y!==e.y){var a=e.x+(s-e.y)*(e.next.x-e.x)/(e.next.y-e.y);if(a<=i&&a>n&&(n=a,o=e.x<e.next.x?e:e.next,a===i))return o}e=e.next}while(e!==t);if(!o)return null;var l=o,u=o.x,d=o.y,f=1/0,m;e=o;do i>=e.x&&e.x>=u&&i!==e.x&&fs(s<d?i:n,s,u,d,s<d?n:i,s,e.x,e.y)&&(m=Math.abs(s-e.y)/(i-e.x),En(e,r)&&(m<f||m===f&&(e.x>o.x||e.x===o.x&&jw(o,e)))&&(o=e,f=m)),e=e.next;while(e!==l);return o}function jw(r,t){return ee(r.prev,r,t.prev)<0&&ee(t.next,r,r.next)<0}function Vw(r,t,e,i){var s=r;do s.z===0&&(s.z=Uh(s.x,s.y,t,e,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==r);s.prevZ.nextZ=null,s.prevZ=null,Ww(s)}function Ww(r){var t,e,i,s,n,o,a,l,u=1;do{for(e=r,r=null,n=null,o=0;e;){for(o++,i=e,a=0,t=0;t<u&&(a++,i=i.nextZ,!!i);t++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||e.z<=i.z)?(s=e,e=e.nextZ,a--):(s=i,i=i.nextZ,l--),n?n.nextZ=s:r=s,s.prevZ=n,n=s;e=i}n.nextZ=null,u*=2}while(o>1);return r}function Uh(r,t,e,i,s){return r=(r-e)*s|0,t=(t-i)*s|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1}function Xw(r){var t=r,e=r;do(t.x<e.x||t.x===e.x&&t.y<e.y)&&(e=t),t=t.next;while(t!==r);return e}function fs(r,t,e,i,s,n,o,a){return(s-o)*(t-a)>=(r-o)*(n-a)&&(r-o)*(i-a)>=(e-o)*(t-a)&&(e-o)*(n-a)>=(s-o)*(i-a)}function Yw(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!qw(r,t)&&(En(r,t)&&En(t,r)&&Kw(r,t)&&(ee(r.prev,r,t.prev)||ee(r,t.prev,t))||La(r,t)&&ee(r.prev,r,r.next)>0&&ee(t.prev,t,t.next)>0)}function ee(r,t,e){return(t.y-r.y)*(e.x-t.x)-(t.x-r.x)*(e.y-t.y)}function La(r,t){return r.x===t.x&&r.y===t.y}function cg(r,t,e,i){var s=co(ee(r,t,e)),n=co(ee(r,t,i)),o=co(ee(e,i,r)),a=co(ee(e,i,t));return!!(s!==n&&o!==a||s===0&&ho(r,e,t)||n===0&&ho(r,i,t)||o===0&&ho(e,r,i)||a===0&&ho(e,t,i))}function ho(r,t,e){return t.x<=Math.max(r.x,e.x)&&t.x>=Math.min(r.x,e.x)&&t.y<=Math.max(r.y,e.y)&&t.y>=Math.min(r.y,e.y)}function co(r){return r>0?1:r<0?-1:0}function qw(r,t){var e=r;do{if(e.i!==r.i&&e.next.i!==r.i&&e.i!==t.i&&e.next.i!==t.i&&cg(e,e.next,r,t))return!0;e=e.next}while(e!==r);return!1}function En(r,t){return ee(r.prev,r,r.next)<0?ee(r,t,r.next)>=0&&ee(r,r.prev,t)>=0:ee(r,t,r.prev)<0||ee(r,r.next,t)<0}function Kw(r,t){var e=r,i=!1,s=(r.x+t.x)/2,n=(r.y+t.y)/2;do e.y>n!=e.next.y>n&&e.next.y!==e.y&&s<(e.next.x-e.x)*(n-e.y)/(e.next.y-e.y)+e.x&&(i=!i),e=e.next;while(e!==r);return i}function ug(r,t){var e=new $h(r.i,r.x,r.y),i=new $h(t.i,t.x,t.y),s=r.next,n=t.prev;return r.next=t,t.prev=r,e.next=s,s.prev=e,i.next=e,e.prev=i,n.next=i,i.prev=n,i}function tp(r,t,e,i){var s=new $h(r,t,e);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Sn(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function $h(r,t,e){this.i=r,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Ba.deviation=function(r,t,e,i){var s=t&&t.length,n=s?t[0]*e:r.length,o=Math.abs(Gh(r,0,n,e));if(s)for(var a=0,l=t.length;a<l;a++){var u=t[a]*e,d=a<l-1?t[a+1]*e:r.length;o-=Math.abs(Gh(r,u,d,e))}var f=0;for(a=0;a<i.length;a+=3){var m=i[a]*e,v=i[a+1]*e,y=i[a+2]*e;f+=Math.abs((r[m]-r[y])*(r[v+1]-r[m+1])-(r[m]-r[v])*(r[y+1]-r[m+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function Gh(r,t,e,i){for(var s=0,n=t,o=e-i;n<e;n+=i)s+=(r[o]-r[n])*(r[n+1]+r[o+1]),o=n;return s}Ba.flatten=function(r){for(var t=r[0][0].length,e={vertices:[],holes:[],dimensions:t},i=0,s=0;s<r.length;s++){for(var n=0;n<r[s].length;n++)for(var o=0;o<t;o++)e.vertices.push(r[s][n][o]);s>0&&(i+=r[s-1].length,e.holes.push(i))}return e};var Zw=fu.exports;const Qw=Xc(Zw);var Zo={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Zo.exports;(function(r,t){(function(e){var i=t&&!t.nodeType&&t,s=r&&!r.nodeType&&r,n=typeof gs=="object"&&gs;(n.global===n||n.window===n||n.self===n)&&(e=n);var o,a=2147483647,l=36,u=1,d=26,f=38,m=700,v=72,y=128,b="-",w=/^xn--/,E=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=l-u,k=Math.floor,F=String.fromCharCode,C;function N(Y){throw new RangeError(S[Y])}function U(Y,tt){for(var Rt=Y.length,Ft=[];Rt--;)Ft[Rt]=tt(Y[Rt]);return Ft}function H(Y,tt){var Rt=Y.split("@"),Ft="";Rt.length>1&&(Ft=Rt[0]+"@",Y=Rt[1]),Y=Y.replace(P,".");var $t=Y.split("."),se=U($t,tt).join(".");return Ft+se}function Q(Y){for(var tt=[],Rt=0,Ft=Y.length,$t,se;Rt<Ft;)$t=Y.charCodeAt(Rt++),$t>=55296&&$t<=56319&&Rt<Ft?(se=Y.charCodeAt(Rt++),(se&64512)==56320?tt.push((($t&1023)<<10)+(se&1023)+65536):(tt.push($t),Rt--)):tt.push($t);return tt}function G(Y){return U(Y,function(tt){var Rt="";return tt>65535&&(tt-=65536,Rt+=F(tt>>>10&1023|55296),tt=56320|tt&1023),Rt+=F(tt),Rt}).join("")}function O(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:l}function L(Y,tt){return Y+22+75*(Y<26)-((tt!=0)<<5)}function z(Y,tt,Rt){var Ft=0;for(Y=Rt?k(Y/m):Y>>1,Y+=k(Y/tt);Y>M*d>>1;Ft+=l)Y=k(Y/M);return k(Ft+(M+1)*Y/(Y+f))}function J(Y){var tt=[],Rt=Y.length,Ft,$t=0,se=y,Kt=v,oe,ce,lt,le,Gt,Wt,Qt,Te,we;for(oe=Y.lastIndexOf(b),oe<0&&(oe=0),ce=0;ce<oe;++ce)Y.charCodeAt(ce)>=128&&N("not-basic"),tt.push(Y.charCodeAt(ce));for(lt=oe>0?oe+1:0;lt<Rt;){for(le=$t,Gt=1,Wt=l;lt>=Rt&&N("invalid-input"),Qt=O(Y.charCodeAt(lt++)),(Qt>=l||Qt>k((a-$t)/Gt))&&N("overflow"),$t+=Qt*Gt,Te=Wt<=Kt?u:Wt>=Kt+d?d:Wt-Kt,!(Qt<Te);Wt+=l)we=l-Te,Gt>k(a/we)&&N("overflow"),Gt*=we;Ft=tt.length+1,Kt=z($t-le,Ft,le==0),k($t/Ft)>a-se&&N("overflow"),se+=k($t/Ft),$t%=Ft,tt.splice($t++,0,se)}return G(tt)}function Z(Y){var tt,Rt,Ft,$t,se,Kt,oe,ce,lt,le,Gt,Wt=[],Qt,Te,we,De;for(Y=Q(Y),Qt=Y.length,tt=y,Rt=0,se=v,Kt=0;Kt<Qt;++Kt)Gt=Y[Kt],Gt<128&&Wt.push(F(Gt));for(Ft=$t=Wt.length,$t&&Wt.push(b);Ft<Qt;){for(oe=a,Kt=0;Kt<Qt;++Kt)Gt=Y[Kt],Gt>=tt&&Gt<oe&&(oe=Gt);for(Te=Ft+1,oe-tt>k((a-Rt)/Te)&&N("overflow"),Rt+=(oe-tt)*Te,tt=oe,Kt=0;Kt<Qt;++Kt)if(Gt=Y[Kt],Gt<tt&&++Rt>a&&N("overflow"),Gt==tt){for(ce=Rt,lt=l;le=lt<=se?u:lt>=se+d?d:lt-se,!(ce<le);lt+=l)De=ce-le,we=l-le,Wt.push(F(L(le+De%we,0))),ce=k(De/we);Wt.push(F(L(ce,0))),se=z(Rt,Te,Ft==$t),Rt=0,++Ft}++Rt,++tt}return Wt.join("")}function ut(Y){return H(Y,function(tt){return w.test(tt)?J(tt.slice(4).toLowerCase()):tt})}function Tt(Y){return H(Y,function(tt){return E.test(tt)?"xn--"+Z(tt):tt})}if(o={version:"1.4.1",ucs2:{decode:Q,encode:G},decode:J,encode:Z,toASCII:Tt,toUnicode:ut},i&&s)if(r.exports==i)s.exports=o;else for(C in o)o.hasOwnProperty(C)&&(i[C]=o[C]);else e.punycode=o})(gs)})(Zo,Zo.exports);var Jw=Zo.exports,ks=TypeError;const tT={},eT=Object.freeze(Object.defineProperty({__proto__:null,default:tT},Symbol.toStringTag,{value:"Module"})),rT=b0(eT);var mu=typeof Map=="function"&&Map.prototype,Il=Object.getOwnPropertyDescriptor&&mu?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Qo=mu&&Il&&typeof Il.get=="function"?Il.get:null,ep=mu&&Map.prototype.forEach,gu=typeof Set=="function"&&Set.prototype,Rl=Object.getOwnPropertyDescriptor&&gu?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Jo=gu&&Rl&&typeof Rl.get=="function"?Rl.get:null,rp=gu&&Set.prototype.forEach,iT=typeof WeakMap=="function"&&WeakMap.prototype,un=iT?WeakMap.prototype.has:null,sT=typeof WeakSet=="function"&&WeakSet.prototype,dn=sT?WeakSet.prototype.has:null,nT=typeof WeakRef=="function"&&WeakRef.prototype,ip=nT?WeakRef.prototype.deref:null,oT=Boolean.prototype.valueOf,aT=Object.prototype.toString,lT=Function.prototype.toString,hT=String.prototype.match,vu=String.prototype.slice,li=String.prototype.replace,cT=String.prototype.toUpperCase,sp=String.prototype.toLowerCase,dg=RegExp.prototype.test,np=Array.prototype.concat,yr=Array.prototype.join,uT=Array.prototype.slice,op=Math.floor,Hh=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ml=Object.getOwnPropertySymbols,zh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,As=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===As||!0)?Symbol.toStringTag:null,pg=Object.prototype.propertyIsEnumerable,ap=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function lp(r,t){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||dg.call(/e/,t))return t;var e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var i=r<0?-op(-r):op(r);if(i!==r){var s=String(i),n=vu.call(t,s.length+1);return li.call(s,e,"$&_")+"."+li.call(li.call(n,/([0-9]{3})/g,"$&_"),/_$/,"")}}return li.call(t,e,"$&_")}var jh=rT,hp=jh.custom,cp=gg(hp)?hp:null,fg={__proto__:null,double:'"',single:"'"},dT={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},Fa=function r(t,e,i,s){var n=e||{};if(Br(n,"quoteStyle")&&!Br(fg,n.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Br(n,"maxStringLength")&&(typeof n.maxStringLength=="number"?n.maxStringLength<0&&n.maxStringLength!==1/0:n.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Br(n,"customInspect")?n.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Br(n,"indent")&&n.indent!==null&&n.indent!=="	"&&!(parseInt(n.indent,10)===n.indent&&n.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Br(n,"numericSeparator")&&typeof n.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=n.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return yg(t,n);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return a?lp(t,l):l}if(typeof t=="bigint"){var u=String(t)+"n";return a?lp(t,u):u}var d=typeof n.depth>"u"?5:n.depth;if(typeof i>"u"&&(i=0),i>=d&&d>0&&typeof t=="object")return Vh(t)?"[Array]":"[Object]";var f=RT(n,i);if(typeof s>"u")s=[];else if(vg(s,t)>=0)return"[Circular]";function m(O,L,z){if(L&&(s=uT.call(s),s.push(L)),z){var J={depth:n.depth};return Br(n,"quoteStyle")&&(J.quoteStyle=n.quoteStyle),r(O,J,i+1,s)}return r(O,n,i+1,s)}if(typeof t=="function"&&!up(t)){var v=xT(t),y=uo(t,m);return"[Function"+(v?": "+v:" (anonymous)")+"]"+(y.length>0?" { "+yr.call(y,", ")+" }":"")}if(gg(t)){var b=As?li.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):zh.call(t);return typeof t=="object"&&!As?Ys(b):b}if(CT(t)){for(var w="<"+sp.call(String(t.nodeName)),E=t.attributes||[],P=0;P<E.length;P++)w+=" "+E[P].name+"="+mg(pT(E[P].value),"double",n);return w+=">",t.childNodes&&t.childNodes.length&&(w+="..."),w+="</"+sp.call(String(t.nodeName))+">",w}if(Vh(t)){if(t.length===0)return"[]";var S=uo(t,m);return f&&!IT(S)?"["+Wh(S,f)+"]":"[ "+yr.call(S,", ")+" ]"}if(mT(t)){var M=uo(t,m);return!("cause"in Error.prototype)&&"cause"in t&&!pg.call(t,"cause")?"{ ["+String(t)+"] "+yr.call(np.call("[cause]: "+m(t.cause),M),", ")+" }":M.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+yr.call(M,", ")+" }"}if(typeof t=="object"&&o){if(cp&&typeof t[cp]=="function"&&jh)return jh(t,{depth:d-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(wT(t)){var k=[];return ep&&ep.call(t,function(O,L){k.push(m(L,t,!0)+" => "+m(O,t))}),dp("Map",Qo.call(t),k,f)}if(ST(t)){var F=[];return rp&&rp.call(t,function(O){F.push(m(O,t))}),dp("Set",Jo.call(t),F,f)}if(TT(t))return kl("WeakMap");if(AT(t))return kl("WeakSet");if(ET(t))return kl("WeakRef");if(vT(t))return Ys(m(Number(t)));if(_T(t))return Ys(m(Hh.call(t)));if(yT(t))return Ys(oT.call(t));if(gT(t))return Ys(m(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof gs<"u"&&t===gs)return"{ [object globalThis] }";if(!fT(t)&&!up(t)){var C=uo(t,m),N=ap?ap(t)===Object.prototype:t instanceof Object||t.constructor===Object,U=t instanceof Object?"":"null prototype",H=!N&&pn&&Object(t)===t&&pn in t?vu.call(bi(t),8,-1):U?"Object":"",Q=N||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",G=Q+(H||U?"["+yr.call(np.call([],H||[],U||[]),": ")+"] ":"");return C.length===0?G+"{}":f?G+"{"+Wh(C,f)+"}":G+"{ "+yr.call(C,", ")+" }"}return String(t)};function mg(r,t,e){var i=e.quoteStyle||t,s=fg[i];return s+r+s}function pT(r){return li.call(String(r),/"/g,"&quot;")}function Ki(r){return!pn||!(typeof r=="object"&&(pn in r||typeof r[pn]<"u"))}function Vh(r){return bi(r)==="[object Array]"&&Ki(r)}function fT(r){return bi(r)==="[object Date]"&&Ki(r)}function up(r){return bi(r)==="[object RegExp]"&&Ki(r)}function mT(r){return bi(r)==="[object Error]"&&Ki(r)}function gT(r){return bi(r)==="[object String]"&&Ki(r)}function vT(r){return bi(r)==="[object Number]"&&Ki(r)}function yT(r){return bi(r)==="[object Boolean]"&&Ki(r)}function gg(r){if(As)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!zh)return!1;try{return zh.call(r),!0}catch{}return!1}function _T(r){if(!r||typeof r!="object"||!Hh)return!1;try{return Hh.call(r),!0}catch{}return!1}var bT=Object.prototype.hasOwnProperty||function(r){return r in this};function Br(r,t){return bT.call(r,t)}function bi(r){return aT.call(r)}function xT(r){if(r.name)return r.name;var t=hT.call(lT.call(r),/^function\s*([\w$]+)/);return t?t[1]:null}function vg(r,t){if(r.indexOf)return r.indexOf(t);for(var e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1}function wT(r){if(!Qo||!r||typeof r!="object")return!1;try{Qo.call(r);try{Jo.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function TT(r){if(!un||!r||typeof r!="object")return!1;try{un.call(r,un);try{dn.call(r,dn)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function ET(r){if(!ip||!r||typeof r!="object")return!1;try{return ip.call(r),!0}catch{}return!1}function ST(r){if(!Jo||!r||typeof r!="object")return!1;try{Jo.call(r);try{Qo.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function AT(r){if(!dn||!r||typeof r!="object")return!1;try{dn.call(r,dn);try{un.call(r,un)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function CT(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function yg(r,t){if(r.length>t.maxStringLength){var e=r.length-t.maxStringLength,i="... "+e+" more character"+(e>1?"s":"");return yg(vu.call(r,0,t.maxStringLength),t)+i}var s=dT[t.quoteStyle||"single"];s.lastIndex=0;var n=li.call(li.call(r,s,"\\$1"),/[\x00-\x1f]/g,PT);return mg(n,"single",t)}function PT(r){var t=r.charCodeAt(0),e={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return e?"\\"+e:"\\x"+(t<16?"0":"")+cT.call(t.toString(16))}function Ys(r){return"Object("+r+")"}function kl(r){return r+" { ? }"}function dp(r,t,e,i){var s=i?Wh(e,i):yr.call(e,", ");return r+" ("+t+") {"+s+"}"}function IT(r){for(var t=0;t<r.length;t++)if(vg(r[t],`
`)>=0)return!1;return!0}function RT(r,t){var e;if(r.indent==="	")e="	";else if(typeof r.indent=="number"&&r.indent>0)e=yr.call(Array(r.indent+1)," ");else return null;return{base:e,prev:yr.call(Array(t+1),e)}}function Wh(r,t){if(r.length===0)return"";var e=`
`+t.prev+t.base;return e+yr.call(r,","+e)+`
`+t.prev}function uo(r,t){var e=Vh(r),i=[];if(e){i.length=r.length;for(var s=0;s<r.length;s++)i[s]=Br(r,s)?t(r[s],r):""}var n=typeof Ml=="function"?Ml(r):[],o;if(As){o={};for(var a=0;a<n.length;a++)o["$"+n[a]]=n[a]}for(var l in r)Br(r,l)&&(e&&String(Number(l))===l&&l<r.length||As&&o["$"+l]instanceof Symbol||(dg.call(/[^\w$]/,l)?i.push(t(l,r)+": "+t(r[l],r)):i.push(l+": "+t(r[l],r))));if(typeof Ml=="function")for(var u=0;u<n.length;u++)pg.call(r,n[u])&&i.push("["+t(n[u])+"]: "+t(r[n[u]],r));return i}var MT=Fa,kT=ks,Na=function(r,t,e){for(var i=r,s;(s=i.next)!=null;i=s)if(s.key===t)return i.next=s.next,e||(s.next=r.next,r.next=s),s},DT=function(r,t){if(r){var e=Na(r,t);return e&&e.value}},OT=function(r,t,e){var i=Na(r,t);i?i.value=e:r.next={key:t,next:r.next,value:e}},BT=function(r,t){return r?!!Na(r,t):!1},LT=function(r,t){if(r)return Na(r,t,!0)},FT=function(){var t,e={assert:function(i){if(!e.has(i))throw new kT("Side channel does not contain "+MT(i))},delete:function(i){var s=t&&t.next,n=LT(t,i);return n&&s&&s===n&&(t=void 0),!!n},get:function(i){return DT(t,i)},has:function(i){return BT(t,i)},set:function(i,s){t||(t={next:void 0}),OT(t,i,s)}};return e},_g=Object,NT=Error,UT=EvalError,$T=RangeError,GT=ReferenceError,HT=SyntaxError,zT=URIError,jT=Math.abs,VT=Math.floor,WT=Math.max,XT=Math.min,YT=Math.pow,qT=Math.round,KT=Number.isNaN||function(t){return t!==t},ZT=KT,QT=function(t){return ZT(t)||t===0?t:t<0?-1:1},JT=Object.getOwnPropertyDescriptor,Lo=JT;if(Lo)try{Lo([],"length")}catch{Lo=null}var bg=Lo,Fo=Object.defineProperty||!1;if(Fo)try{Fo({},"a",{value:1})}catch{Fo=!1}var t1=Fo,Dl,pp;function e1(){return pp||(pp=1,Dl=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),i=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;t[e]=s;for(var n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,e);if(a.value!==s||a.enumerable!==!0)return!1}return!0}),Dl}var Ol,fp;function r1(){if(fp)return Ol;fp=1;var r=typeof Symbol<"u"&&Symbol,t=e1();return Ol=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Ol}var Bl,mp;function xg(){return mp||(mp=1,Bl=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Bl}var Ll,gp;function wg(){if(gp)return Ll;gp=1;var r=_g;return Ll=r.getPrototypeOf||null,Ll}var Fl,vp;function i1(){if(vp)return Fl;vp=1;var r="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,e=Math.max,i="[object Function]",s=function(l,u){for(var d=[],f=0;f<l.length;f+=1)d[f]=l[f];for(var m=0;m<u.length;m+=1)d[m+l.length]=u[m];return d},n=function(l,u){for(var d=[],f=u,m=0;f<l.length;f+=1,m+=1)d[m]=l[f];return d},o=function(a,l){for(var u="",d=0;d<a.length;d+=1)u+=a[d],d+1<a.length&&(u+=l);return u};return Fl=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==i)throw new TypeError(r+u);for(var d=n(arguments,1),f,m=function(){if(this instanceof f){var E=u.apply(this,s(d,arguments));return Object(E)===E?E:this}return u.apply(l,s(d,arguments))},v=e(0,u.length-d.length),y=[],b=0;b<v;b++)y[b]="$"+b;if(f=Function("binder","return function ("+o(y,",")+"){ return binder.apply(this,arguments); }")(m),u.prototype){var w=function(){};w.prototype=u.prototype,f.prototype=new w,w.prototype=null}return f},Fl}var Nl,yp;function Ua(){if(yp)return Nl;yp=1;var r=i1();return Nl=Function.prototype.bind||r,Nl}var Ul,_p;function yu(){return _p||(_p=1,Ul=Function.prototype.call),Ul}var $l,bp;function Tg(){return bp||(bp=1,$l=Function.prototype.apply),$l}var s1=typeof Reflect<"u"&&Reflect&&Reflect.apply,n1=Ua(),o1=Tg(),a1=yu(),l1=s1,h1=l1||n1.call(a1,o1),c1=Ua(),u1=ks,d1=yu(),p1=h1,Eg=function(t){if(t.length<1||typeof t[0]!="function")throw new u1("a function is required");return p1(c1,d1,t)},Gl,xp;function f1(){if(xp)return Gl;xp=1;var r=Eg,t=bg,e;try{e=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var i=!!e&&t&&t(Object.prototype,"__proto__"),s=Object,n=s.getPrototypeOf;return Gl=i&&typeof i.get=="function"?r([i.get]):typeof n=="function"?function(a){return n(a==null?a:s(a))}:!1,Gl}var Hl,wp;function m1(){if(wp)return Hl;wp=1;var r=xg(),t=wg(),e=f1();return Hl=r?function(s){return r(s)}:t?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return t(s)}:e?function(s){return e(s)}:null,Hl}var zl,Tp;function g1(){if(Tp)return zl;Tp=1;var r=Function.prototype.call,t=Object.prototype.hasOwnProperty,e=Ua();return zl=e.call(r,t),zl}var Mt,v1=_g,y1=NT,_1=UT,b1=$T,x1=GT,Cs=HT,ys=ks,w1=zT,T1=jT,E1=VT,S1=WT,A1=XT,C1=YT,P1=qT,I1=QT,Sg=Function,jl=function(r){try{return Sg('"use strict"; return ('+r+").constructor;")()}catch{}},An=bg,R1=t1,Vl=function(){throw new ys},M1=An?function(){try{return arguments.callee,Vl}catch{try{return An(arguments,"callee").get}catch{return Vl}}}():Vl,rs=r1()(),ge=m1(),k1=wg(),D1=xg(),Ag=Tg(),Un=yu(),os={},O1=typeof Uint8Array>"u"||!ge?Mt:ge(Uint8Array),Fi={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Mt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Mt:ArrayBuffer,"%ArrayIteratorPrototype%":rs&&ge?ge([][Symbol.iterator]()):Mt,"%AsyncFromSyncIteratorPrototype%":Mt,"%AsyncFunction%":os,"%AsyncGenerator%":os,"%AsyncGeneratorFunction%":os,"%AsyncIteratorPrototype%":os,"%Atomics%":typeof Atomics>"u"?Mt:Atomics,"%BigInt%":typeof BigInt>"u"?Mt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Mt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Mt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Mt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":y1,"%eval%":eval,"%EvalError%":_1,"%Float16Array%":typeof Float16Array>"u"?Mt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Mt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Mt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Mt:FinalizationRegistry,"%Function%":Sg,"%GeneratorFunction%":os,"%Int8Array%":typeof Int8Array>"u"?Mt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Mt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Mt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":rs&&ge?ge(ge([][Symbol.iterator]())):Mt,"%JSON%":typeof JSON=="object"?JSON:Mt,"%Map%":typeof Map>"u"?Mt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!rs||!ge?Mt:ge(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":v1,"%Object.getOwnPropertyDescriptor%":An,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Mt:Promise,"%Proxy%":typeof Proxy>"u"?Mt:Proxy,"%RangeError%":b1,"%ReferenceError%":x1,"%Reflect%":typeof Reflect>"u"?Mt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Mt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!rs||!ge?Mt:ge(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Mt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":rs&&ge?ge(""[Symbol.iterator]()):Mt,"%Symbol%":rs?Symbol:Mt,"%SyntaxError%":Cs,"%ThrowTypeError%":M1,"%TypedArray%":O1,"%TypeError%":ys,"%Uint8Array%":typeof Uint8Array>"u"?Mt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Mt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Mt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Mt:Uint32Array,"%URIError%":w1,"%WeakMap%":typeof WeakMap>"u"?Mt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Mt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Mt:WeakSet,"%Function.prototype.call%":Un,"%Function.prototype.apply%":Ag,"%Object.defineProperty%":R1,"%Object.getPrototypeOf%":k1,"%Math.abs%":T1,"%Math.floor%":E1,"%Math.max%":S1,"%Math.min%":A1,"%Math.pow%":C1,"%Math.round%":P1,"%Math.sign%":I1,"%Reflect.getPrototypeOf%":D1};if(ge)try{null.error}catch(r){var B1=ge(ge(r));Fi["%Error.prototype%"]=B1}var L1=function r(t){var e;if(t==="%AsyncFunction%")e=jl("async function () {}");else if(t==="%GeneratorFunction%")e=jl("function* () {}");else if(t==="%AsyncGeneratorFunction%")e=jl("async function* () {}");else if(t==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(e=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=r("%AsyncGenerator%");s&&ge&&(e=ge(s.prototype))}return Fi[t]=e,e},Ep={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},$n=Ua(),ta=g1(),F1=$n.call(Un,Array.prototype.concat),N1=$n.call(Ag,Array.prototype.splice),Sp=$n.call(Un,String.prototype.replace),ea=$n.call(Un,String.prototype.slice),U1=$n.call(Un,RegExp.prototype.exec),$1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,G1=/\\(\\)?/g,H1=function(t){var e=ea(t,0,1),i=ea(t,-1);if(e==="%"&&i!=="%")throw new Cs("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&e!=="%")throw new Cs("invalid intrinsic syntax, expected opening `%`");var s=[];return Sp(t,$1,function(n,o,a,l){s[s.length]=a?Sp(l,G1,"$1"):o||n}),s},z1=function(t,e){var i=t,s;if(ta(Ep,i)&&(s=Ep[i],i="%"+s[0]+"%"),ta(Fi,i)){var n=Fi[i];if(n===os&&(n=L1(i)),typeof n>"u"&&!e)throw new ys("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:s,name:i,value:n}}throw new Cs("intrinsic "+t+" does not exist!")},_u=function(t,e){if(typeof t!="string"||t.length===0)throw new ys("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new ys('"allowMissing" argument must be a boolean');if(U1(/^%?[^%]*%?$/,t)===null)throw new Cs("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=H1(t),s=i.length>0?i[0]:"",n=z1("%"+s+"%",e),o=n.name,a=n.value,l=!1,u=n.alias;u&&(s=u[0],N1(i,F1([0,1],u)));for(var d=1,f=!0;d<i.length;d+=1){var m=i[d],v=ea(m,0,1),y=ea(m,-1);if((v==='"'||v==="'"||v==="`"||y==='"'||y==="'"||y==="`")&&v!==y)throw new Cs("property names with quotes must have matching quotes");if((m==="constructor"||!f)&&(l=!0),s+="."+m,o="%"+s+"%",ta(Fi,o))a=Fi[o];else if(a!=null){if(!(m in a)){if(!e)throw new ys("base intrinsic for "+t+" exists, but the property is not available.");return}if(An&&d+1>=i.length){var b=An(a,m);f=!!b,f&&"get"in b&&!("originalValue"in b.get)?a=b.get:a=a[m]}else f=ta(a,m),a=a[m];f&&!l&&(Fi[o]=a)}}return a},Cg=_u,Pg=Eg,j1=Pg([Cg("%String.prototype.indexOf%")]),Ig=function(t,e){var i=Cg(t,!!e);return typeof i=="function"&&j1(t,".prototype.")>-1?Pg([i]):i},V1=_u,Gn=Ig,W1=Fa,X1=ks,Ap=V1("%Map%",!0),Y1=Gn("Map.prototype.get",!0),q1=Gn("Map.prototype.set",!0),K1=Gn("Map.prototype.has",!0),Z1=Gn("Map.prototype.delete",!0),Q1=Gn("Map.prototype.size",!0),Rg=!!Ap&&function(){var t,e={assert:function(i){if(!e.has(i))throw new X1("Side channel does not contain "+W1(i))},delete:function(i){if(t){var s=Z1(t,i);return Q1(t)===0&&(t=void 0),s}return!1},get:function(i){if(t)return Y1(t,i)},has:function(i){return t?K1(t,i):!1},set:function(i,s){t||(t=new Ap),q1(t,i,s)}};return e},J1=_u,$a=Ig,tE=Fa,po=Rg,eE=ks,is=J1("%WeakMap%",!0),rE=$a("WeakMap.prototype.get",!0),iE=$a("WeakMap.prototype.set",!0),sE=$a("WeakMap.prototype.has",!0),nE=$a("WeakMap.prototype.delete",!0),oE=is?function(){var t,e,i={assert:function(s){if(!i.has(s))throw new eE("Side channel does not contain "+tE(s))},delete:function(s){if(is&&s&&(typeof s=="object"||typeof s=="function")){if(t)return nE(t,s)}else if(po&&e)return e.delete(s);return!1},get:function(s){return is&&s&&(typeof s=="object"||typeof s=="function")&&t?rE(t,s):e&&e.get(s)},has:function(s){return is&&s&&(typeof s=="object"||typeof s=="function")&&t?sE(t,s):!!e&&e.has(s)},set:function(s,n){is&&s&&(typeof s=="object"||typeof s=="function")?(t||(t=new is),iE(t,s,n)):po&&(e||(e=po()),e.set(s,n))}};return i}:po,aE=ks,lE=Fa,hE=FT,cE=Rg,uE=oE,dE=uE||cE||hE,pE=function(){var t,e={assert:function(i){if(!e.has(i))throw new aE("Side channel does not contain "+lE(i))},delete:function(i){return!!t&&t.delete(i)},get:function(i){return t&&t.get(i)},has:function(i){return!!t&&t.has(i)},set:function(i,s){t||(t=dE()),t.set(i,s)}};return e},fE=String.prototype.replace,mE=/%20/g,Wl={RFC1738:"RFC1738",RFC3986:"RFC3986"},bu={default:Wl.RFC3986,formatters:{RFC1738:function(r){return fE.call(r,mE,"+")},RFC3986:function(r){return String(r)}},RFC1738:Wl.RFC1738,RFC3986:Wl.RFC3986},gE=bu,Xl=Object.prototype.hasOwnProperty,Bi=Array.isArray,cr=function(){for(var r=[],t=0;t<256;++t)r.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return r}(),vE=function(t){for(;t.length>1;){var e=t.pop(),i=e.obj[e.prop];if(Bi(i)){for(var s=[],n=0;n<i.length;++n)typeof i[n]<"u"&&s.push(i[n]);e.obj[e.prop]=s}}},Mg=function(t,e){for(var i=e&&e.plainObjects?{__proto__:null}:{},s=0;s<t.length;++s)typeof t[s]<"u"&&(i[s]=t[s]);return i},yE=function r(t,e,i){if(!e)return t;if(typeof e!="object"&&typeof e!="function"){if(Bi(t))t.push(e);else if(t&&typeof t=="object")(i&&(i.plainObjects||i.allowPrototypes)||!Xl.call(Object.prototype,e))&&(t[e]=!0);else return[t,e];return t}if(!t||typeof t!="object")return[t].concat(e);var s=t;return Bi(t)&&!Bi(e)&&(s=Mg(t,i)),Bi(t)&&Bi(e)?(e.forEach(function(n,o){if(Xl.call(t,o)){var a=t[o];a&&typeof a=="object"&&n&&typeof n=="object"?t[o]=r(a,n,i):t.push(n)}else t[o]=n}),t):Object.keys(e).reduce(function(n,o){var a=e[o];return Xl.call(n,o)?n[o]=r(n[o],a,i):n[o]=a,n},s)},_E=function(t,e){return Object.keys(e).reduce(function(i,s){return i[s]=e[s],i},t)},bE=function(r,t,e){var i=r.replace(/\+/g," ");if(e==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Yl=1024,xE=function(t,e,i,s,n){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),i==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(v){return"%26%23"+parseInt(v.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;l+=Yl){for(var u=o.length>=Yl?o.slice(l,l+Yl):o,d=[],f=0;f<u.length;++f){var m=u.charCodeAt(f);if(m===45||m===46||m===95||m===126||m>=48&&m<=57||m>=65&&m<=90||m>=97&&m<=122||n===gE.RFC1738&&(m===40||m===41)){d[d.length]=u.charAt(f);continue}if(m<128){d[d.length]=cr[m];continue}if(m<2048){d[d.length]=cr[192|m>>6]+cr[128|m&63];continue}if(m<55296||m>=57344){d[d.length]=cr[224|m>>12]+cr[128|m>>6&63]+cr[128|m&63];continue}f+=1,m=65536+((m&1023)<<10|u.charCodeAt(f)&1023),d[d.length]=cr[240|m>>18]+cr[128|m>>12&63]+cr[128|m>>6&63]+cr[128|m&63]}a+=d.join("")}return a},wE=function(t){for(var e=[{obj:{o:t},prop:"o"}],i=[],s=0;s<e.length;++s)for(var n=e[s],o=n.obj[n.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],d=o[u];typeof d=="object"&&d!==null&&i.indexOf(d)===-1&&(e.push({obj:o,prop:u}),i.push(d))}return vE(e),t},TE=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},EE=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},SE=function(t,e){return[].concat(t,e)},AE=function(t,e){if(Bi(t)){for(var i=[],s=0;s<t.length;s+=1)i.push(e(t[s]));return i}return e(t)},kg={arrayToObject:Mg,assign:_E,combine:SE,compact:wE,decode:bE,encode:xE,isBuffer:EE,isRegExp:TE,maybeMap:AE,merge:yE},Dg=pE,No=kg,fn=bu,CE=Object.prototype.hasOwnProperty,Og={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},gr=Array.isArray,PE=Array.prototype.push,Bg=function(r,t){PE.apply(r,gr(t)?t:[t])},IE=Date.prototype.toISOString,Cp=fn.default,ue={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:No.encode,encodeValuesOnly:!1,filter:void 0,format:Cp,formatter:fn.formatters[Cp],indices:!1,serializeDate:function(t){return IE.call(t)},skipNulls:!1,strictNullHandling:!1},RE=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},ql={},ME=function r(t,e,i,s,n,o,a,l,u,d,f,m,v,y,b,w,E,P){for(var S=t,M=P,k=0,F=!1;(M=M.get(ql))!==void 0&&!F;){var C=M.get(t);if(k+=1,typeof C<"u"){if(C===k)throw new RangeError("Cyclic object value");F=!0}typeof M.get(ql)>"u"&&(k=0)}if(typeof d=="function"?S=d(e,S):S instanceof Date?S=v(S):i==="comma"&&gr(S)&&(S=No.maybeMap(S,function(Y){return Y instanceof Date?v(Y):Y})),S===null){if(o)return u&&!w?u(e,ue.encoder,E,"key",y):e;S=""}if(RE(S)||No.isBuffer(S)){if(u){var N=w?e:u(e,ue.encoder,E,"key",y);return[b(N)+"="+b(u(S,ue.encoder,E,"value",y))]}return[b(e)+"="+b(String(S))]}var U=[];if(typeof S>"u")return U;var H;if(i==="comma"&&gr(S))w&&u&&(S=No.maybeMap(S,u)),H=[{value:S.length>0?S.join(",")||null:void 0}];else if(gr(d))H=d;else{var Q=Object.keys(S);H=f?Q.sort(f):Q}var G=l?String(e).replace(/\./g,"%2E"):String(e),O=s&&gr(S)&&S.length===1?G+"[]":G;if(n&&gr(S)&&S.length===0)return O+"[]";for(var L=0;L<H.length;++L){var z=H[L],J=typeof z=="object"&&z&&typeof z.value<"u"?z.value:S[z];if(!(a&&J===null)){var Z=m&&l?String(z).replace(/\./g,"%2E"):String(z),ut=gr(S)?typeof i=="function"?i(O,Z):O:O+(m?"."+Z:"["+Z+"]");P.set(t,k);var Tt=Dg();Tt.set(ql,P),Bg(U,r(J,ut,i,s,n,o,a,l,i==="comma"&&w&&gr(S)?null:u,d,f,m,v,y,b,w,E,Tt))}}return U},kE=function(t){if(!t)return ue;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var e=t.charset||ue.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=fn.default;if(typeof t.format<"u"){if(!CE.call(fn.formatters,t.format))throw new TypeError("Unknown format option provided.");i=t.format}var s=fn.formatters[i],n=ue.filter;(typeof t.filter=="function"||gr(t.filter))&&(n=t.filter);var o;if(t.arrayFormat in Og?o=t.arrayFormat:"indices"in t?o=t.indices?"indices":"repeat":o=ue.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:ue.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:ue.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ue.allowEmptyArrays,arrayFormat:o,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ue.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?ue.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:ue.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:ue.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:ue.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:ue.encodeValuesOnly,filter:n,format:i,formatter:s,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:ue.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:ue.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ue.strictNullHandling}},DE=function(r,t){var e=r,i=kE(t),s,n;typeof i.filter=="function"?(n=i.filter,e=n("",e)):gr(i.filter)&&(n=i.filter,s=n);var o=[];if(typeof e!="object"||e===null)return"";var a=Og[i.arrayFormat],l=a==="comma"&&i.commaRoundTrip;s||(s=Object.keys(e)),i.sort&&s.sort(i.sort);for(var u=Dg(),d=0;d<s.length;++d){var f=s[d],m=e[f];i.skipNulls&&m===null||Bg(o,ME(m,f,a,l,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var v=o.join(i.delimiter),y=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?y+="utf8=%26%2310003%3B&":y+="utf8=%E2%9C%93&"),v.length>0?y+v:""},ji=kg,Xh=Object.prototype.hasOwnProperty,Pp=Array.isArray,ne={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ji.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},OE=function(r){return r.replace(/&#(\d+);/g,function(t,e){return String.fromCharCode(parseInt(e,10))})},Lg=function(r,t,e){if(r&&typeof r=="string"&&t.comma&&r.indexOf(",")>-1)return r.split(",");if(t.throwOnLimitExceeded&&e>=t.arrayLimit)throw new RangeError("Array limit exceeded. Only "+t.arrayLimit+" element"+(t.arrayLimit===1?"":"s")+" allowed in an array.");return r},BE="utf8=%26%2310003%3B",LE="utf8=%E2%9C%93",FE=function(t,e){var i={__proto__:null},s=e.ignoreQueryPrefix?t.replace(/^\?/,""):t;s=s.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var n=e.parameterLimit===1/0?void 0:e.parameterLimit,o=s.split(e.delimiter,e.throwOnLimitExceeded?n+1:n);if(e.throwOnLimitExceeded&&o.length>n)throw new RangeError("Parameter limit exceeded. Only "+n+" parameter"+(n===1?"":"s")+" allowed.");var a=-1,l,u=e.charset;if(e.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===LE?u="utf-8":o[l]===BE&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var d=o[l],f=d.indexOf("]="),m=f===-1?d.indexOf("="):f+1,v,y;m===-1?(v=e.decoder(d,ne.decoder,u,"key"),y=e.strictNullHandling?null:""):(v=e.decoder(d.slice(0,m),ne.decoder,u,"key"),y=ji.maybeMap(Lg(d.slice(m+1),e,Pp(i[v])?i[v].length:0),function(w){return e.decoder(w,ne.decoder,u,"value")})),y&&e.interpretNumericEntities&&u==="iso-8859-1"&&(y=OE(String(y))),d.indexOf("[]=")>-1&&(y=Pp(y)?[y]:y);var b=Xh.call(i,v);b&&e.duplicates==="combine"?i[v]=ji.combine(i[v],y):(!b||e.duplicates==="last")&&(i[v]=y)}return i},NE=function(r,t,e,i){var s=0;if(r.length>0&&r[r.length-1]==="[]"){var n=r.slice(0,-1).join("");s=Array.isArray(t)&&t[n]?t[n].length:0}for(var o=i?t:Lg(t,e,s),a=r.length-1;a>=0;--a){var l,u=r[a];if(u==="[]"&&e.parseArrays)l=e.allowEmptyArrays&&(o===""||e.strictNullHandling&&o===null)?[]:ji.combine([],o);else{l=e.plainObjects?{__proto__:null}:{};var d=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,f=e.decodeDotInKeys?d.replace(/%2E/g,"."):d,m=parseInt(f,10);!e.parseArrays&&f===""?l={0:o}:!isNaN(m)&&u!==f&&String(m)===f&&m>=0&&e.parseArrays&&m<=e.arrayLimit?(l=[],l[m]=o):f!=="__proto__"&&(l[f]=o)}o=l}return o},UE=function(t,e,i,s){if(t){var n=i.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=i.depth>0&&o.exec(n),u=l?n.slice(0,l.index):n,d=[];if(u){if(!i.plainObjects&&Xh.call(Object.prototype,u)&&!i.allowPrototypes)return;d.push(u)}for(var f=0;i.depth>0&&(l=a.exec(n))!==null&&f<i.depth;){if(f+=1,!i.plainObjects&&Xh.call(Object.prototype,l[1].slice(1,-1))&&!i.allowPrototypes)return;d.push(l[1])}if(l){if(i.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+i.depth+" and strictDepth is true");d.push("["+n.slice(l.index)+"]")}return NE(d,e,i,s)}},$E=function(t){if(!t)return ne;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof t.throwOnLimitExceeded<"u"&&typeof t.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var e=typeof t.charset>"u"?ne.charset:t.charset,i=typeof t.duplicates>"u"?ne.duplicates:t.duplicates;if(i!=="combine"&&i!=="first"&&i!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var s=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:ne.allowDots:!!t.allowDots;return{allowDots:s,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:ne.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:ne.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:ne.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:ne.arrayLimit,charset:e,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:ne.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:ne.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:ne.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:ne.decoder,delimiter:typeof t.delimiter=="string"||ji.isRegExp(t.delimiter)?t.delimiter:ne.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:ne.depth,duplicates:i,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:ne.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:ne.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:ne.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:ne.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:ne.strictNullHandling,throwOnLimitExceeded:typeof t.throwOnLimitExceeded=="boolean"?t.throwOnLimitExceeded:!1}},GE=function(r,t){var e=$E(t);if(r===""||r===null||typeof r>"u")return e.plainObjects?{__proto__:null}:{};for(var i=typeof r=="string"?FE(r,e):r,s=e.plainObjects?{__proto__:null}:{},n=Object.keys(i),o=0;o<n.length;++o){var a=n[o],l=UE(a,i[a],e,typeof r=="string");s=ji.merge(s,l,e)}return e.allowSparse===!0?s:ji.compact(s)},HE=DE,zE=GE,jE=bu,VE={formats:jE,parse:zE,stringify:HE},WE=Jw;function tr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var XE=/^([a-z0-9.+-]+:)/i,YE=/:[0-9]*$/,qE=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,KE=["<",">",'"',"`"," ","\r",`
`,"	"],ZE=["{","}","|","\\","^","`"].concat(KE),Yh=["'"].concat(ZE),Ip=["%","/","?",";","#"].concat(Yh),Rp=["/","?","#"],QE=255,Mp=/^[+a-z0-9A-Z_-]{0,63}$/,JE=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tS={javascript:!0,"javascript:":!0},qh={javascript:!0,"javascript:":!0},_s={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Kh=VE;function Ga(r,t,e){if(r&&typeof r=="object"&&r instanceof tr)return r;var i=new tr;return i.parse(r,t,e),i}tr.prototype.parse=function(r,t,e){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),s=i!==-1&&i<r.indexOf("#")?"?":"#",n=r.split(s),o=/\\/g;n[0]=n[0].replace(o,"/"),r=n.join(s);var a=r;if(a=a.trim(),!e&&r.split("#").length===1){var l=qE.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Kh.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=XE.exec(a);if(u){u=u[0];var d=u.toLowerCase();this.protocol=d,a=a.substr(u.length)}if(e||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var f=a.substr(0,2)==="//";f&&!(u&&qh[u])&&(a=a.substr(2),this.slashes=!0)}if(!qh[u]&&(f||u&&!_s[u])){for(var m=-1,v=0;v<Rp.length;v++){var y=a.indexOf(Rp[v]);y!==-1&&(m===-1||y<m)&&(m=y)}var b,w;m===-1?w=a.lastIndexOf("@"):w=a.lastIndexOf("@",m),w!==-1&&(b=a.slice(0,w),a=a.slice(w+1),this.auth=decodeURIComponent(b)),m=-1;for(var v=0;v<Ip.length;v++){var y=a.indexOf(Ip[v]);y!==-1&&(m===-1||y<m)&&(m=y)}m===-1&&(m=a.length),this.host=a.slice(0,m),a=a.slice(m),this.parseHost(),this.hostname=this.hostname||"";var E=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!E)for(var P=this.hostname.split(/\./),v=0,S=P.length;v<S;v++){var M=P[v];if(M&&!M.match(Mp)){for(var k="",F=0,C=M.length;F<C;F++)M.charCodeAt(F)>127?k+="x":k+=M[F];if(!k.match(Mp)){var N=P.slice(0,v),U=P.slice(v+1),H=M.match(JE);H&&(N.push(H[1]),U.unshift(H[2])),U.length&&(a="/"+U.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>QE?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=WE.toASCII(this.hostname));var Q=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+Q,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!tS[d])for(var v=0,S=Yh.length;v<S;v++){var O=Yh[v];if(a.indexOf(O)!==-1){var L=encodeURIComponent(O);L===O&&(L=escape(O)),a=a.split(O).join(L)}}var z=a.indexOf("#");z!==-1&&(this.hash=a.substr(z),a=a.slice(0,z));var J=a.indexOf("?");if(J!==-1?(this.search=a.substr(J),this.query=a.substr(J+1),t&&(this.query=Kh.parse(this.query)),a=a.slice(0,J)):t&&(this.search="",this.query={}),a&&(this.pathname=a),_s[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Q=this.pathname||"",Z=this.search||"";this.path=Q+Z}return this.href=this.format(),this};function eS(r){return typeof r=="string"&&(r=Ga(r)),r instanceof tr?r.format():tr.prototype.format.call(r)}tr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var t=this.protocol||"",e=this.pathname||"",i=this.hash||"",s=!1,n="";this.host?s=r+this.host:this.hostname&&(s=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(n=Kh.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||n&&"?"+n||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||_s[t])&&s!==!1?(s="//"+(s||""),e&&e.charAt(0)!=="/"&&(e="/"+e)):s||(s=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),e=e.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+s+e+o+i};function rS(r,t){return Ga(r,!1,!0).resolve(t)}tr.prototype.resolve=function(r){return this.resolveObject(Ga(r,!1,!0)).format()};tr.prototype.resolveObject=function(r){if(typeof r=="string"){var t=new tr;t.parse(r,!1,!0),r=t}for(var e=new tr,i=Object.keys(this),s=0;s<i.length;s++){var n=i[s];e[n]=this[n]}if(e.hash=r.hash,r.href==="")return e.href=e.format(),e;if(r.slashes&&!r.protocol){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(e[l]=r[l])}return _s[e.protocol]&&e.hostname&&!e.pathname&&(e.pathname="/",e.path=e.pathname),e.href=e.format(),e}if(r.protocol&&r.protocol!==e.protocol){if(!_s[r.protocol]){for(var u=Object.keys(r),d=0;d<u.length;d++){var f=u[d];e[f]=r[f]}return e.href=e.format(),e}if(e.protocol=r.protocol,!r.host&&!qh[r.protocol]){for(var S=(r.pathname||"").split("/");S.length&&!(r.host=S.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),S[0]!==""&&S.unshift(""),S.length<2&&S.unshift(""),e.pathname=S.join("/")}else e.pathname=r.pathname;if(e.search=r.search,e.query=r.query,e.host=r.host||"",e.auth=r.auth,e.hostname=r.hostname||r.host,e.port=r.port,e.pathname||e.search){var m=e.pathname||"",v=e.search||"";e.path=m+v}return e.slashes=e.slashes||r.slashes,e.href=e.format(),e}var y=e.pathname&&e.pathname.charAt(0)==="/",b=r.host||r.pathname&&r.pathname.charAt(0)==="/",w=b||y||e.host&&r.pathname,E=w,P=e.pathname&&e.pathname.split("/")||[],S=r.pathname&&r.pathname.split("/")||[],M=e.protocol&&!_s[e.protocol];if(M&&(e.hostname="",e.port=null,e.host&&(P[0]===""?P[0]=e.host:P.unshift(e.host)),e.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(S[0]===""?S[0]=r.host:S.unshift(r.host)),r.host=null),w=w&&(S[0]===""||P[0]==="")),b)e.host=r.host||r.host===""?r.host:e.host,e.hostname=r.hostname||r.hostname===""?r.hostname:e.hostname,e.search=r.search,e.query=r.query,P=S;else if(S.length)P||(P=[]),P.pop(),P=P.concat(S),e.search=r.search,e.query=r.query;else if(r.search!=null){if(M){e.host=P.shift(),e.hostname=e.host;var k=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;k&&(e.auth=k.shift(),e.hostname=k.shift(),e.host=e.hostname)}return e.search=r.search,e.query=r.query,(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!P.length)return e.pathname=null,e.search?e.path="/"+e.search:e.path=null,e.href=e.format(),e;for(var F=P.slice(-1)[0],C=(e.host||r.host||P.length>1)&&(F==="."||F==="..")||F==="",N=0,U=P.length;U>=0;U--)F=P[U],F==="."?P.splice(U,1):F===".."?(P.splice(U,1),N++):N&&(P.splice(U,1),N--);if(!w&&!E)for(;N--;N)P.unshift("..");w&&P[0]!==""&&(!P[0]||P[0].charAt(0)!=="/")&&P.unshift(""),C&&P.join("/").substr(-1)!=="/"&&P.push("");var H=P[0]===""||P[0]&&P[0].charAt(0)==="/";if(M){e.hostname=H?"":P.length?P.shift():"",e.host=e.hostname;var k=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;k&&(e.auth=k.shift(),e.hostname=k.shift(),e.host=e.hostname)}return w=w||e.host&&P.length,w&&!H&&P.unshift(""),P.length>0?e.pathname=P.join("/"):(e.pathname=null,e.path=null),(e.pathname!==null||e.search!==null)&&(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=r.auth||e.auth,e.slashes=e.slashes||r.slashes,e.href=e.format(),e};tr.prototype.parseHost=function(){var r=this.host,t=YE.exec(r);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),r=r.substr(0,r.length-t.length)),r&&(this.hostname=r)};var uD=Ga,dD=rS,pD=eS;const kp={};function kt(r,t,e=3){if(kp[t])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`):(i=i.split(`
`).splice(e).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${r}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${r}`),console.warn(i))),kp[t]=!0}function Xe(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function qs(r){return r.split("?")[0].split("#")[0]}function iS(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function sS(r,t,e){return r.replace(new RegExp(iS(t),"g"),e)}function nS(r,t){let e="",i=0,s=-1,n=0,o=-1;for(let a=0;a<=r.length;++a){if(a<r.length)o=r.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(s===a-1||n===1))if(s!==a-1&&n===2){if(e.length<2||i!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){const l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",i=0):(e=e.slice(0,l),i=e.length-1-e.lastIndexOf("/")),s=a,n=0;continue}}else if(e.length===2||e.length===1){e="",i=0,s=a,n=0;continue}}}else e.length>0?e+=`/${r.slice(s+1,a)}`:e=r.slice(s+1,a),i=a-s-1;s=a,n=0}else o===46&&n!==-1?++n:n=-1}return e}const ye={toPosix(r){return sS(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Xe(r),r=this.toPosix(r);const t=/^file:\/\/\//.exec(r);if(t)return t[0];const e=/^[^/:]+:\/{0,2}/.exec(r);return e?e[0]:""},toAbsolute(r,t,e){if(Xe(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;const i=qs(this.toPosix(t??ot.ADAPTER.getBaseUrl())),s=qs(this.toPosix(e??this.rootname(i)));return r=this.toPosix(r),r.startsWith("/")?ye.join(s,r.slice(1)):this.isAbsolute(r)?r:this.join(i,r)},normalize(r){if(Xe(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let t="";const e=r.startsWith("/");this.hasProtocol(r)&&(t=this.rootname(r),r=r.slice(t.length));const i=r.endsWith("/");return r=nS(r),r.length>0&&i&&(r+="/"),e?`/${r}`:t+r},isAbsolute(r){return Xe(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let t;for(let e=0;e<r.length;++e){const i=r[e];if(Xe(i),i.length>0)if(t===void 0)t=i;else{const s=r[e-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?t+=`/../${i}`:t+=`/${i}`}}return t===void 0?".":this.normalize(t)},dirname(r){if(Xe(r),r.length===0)return".";r=this.toPosix(r);let t=r.charCodeAt(0);const e=t===47;let i=-1,s=!0;const n=this.getProtocol(r),o=r;r=r.slice(n.length);for(let a=r.length-1;a>=1;--a)if(t=r.charCodeAt(a),t===47){if(!s){i=a;break}}else s=!1;return i===-1?e?"/":this.isUrl(o)?n+r:n:e&&i===1?"//":n+r.slice(0,i)},rootname(r){Xe(r),r=this.toPosix(r);let t="";if(r.startsWith("/")?t="/":t=this.getProtocol(r),this.isUrl(r)){const e=r.indexOf("/",t.length);e!==-1?t=r.slice(0,e):t=r,t.endsWith("/")||(t+="/")}return t},basename(r,t){Xe(r),t&&Xe(t),r=qs(this.toPosix(r));let e=0,i=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=r.length){if(t.length===r.length&&t===r)return"";let o=t.length-1,a=-1;for(n=r.length-1;n>=0;--n){const l=r.charCodeAt(n);if(l===47){if(!s){e=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(i=n):(o=-1,i=a))}return e===i?i=a:i===-1&&(i=r.length),r.slice(e,i)}for(n=r.length-1;n>=0;--n)if(r.charCodeAt(n)===47){if(!s){e=n+1;break}}else i===-1&&(s=!1,i=n+1);return i===-1?"":r.slice(e,i)},extname(r){Xe(r),r=qs(this.toPosix(r));let t=-1,e=0,i=-1,s=!0,n=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===47){if(!s){e=o+1;break}continue}i===-1&&(s=!1,i=o+1),a===46?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||i===-1||n===0||n===1&&t===i-1&&t===e+1?"":r.slice(t,i)},parse(r){Xe(r);const t={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return t;r=qs(this.toPosix(r));let e=r.charCodeAt(0);const i=this.isAbsolute(r);let s;t.root=this.rootname(r),i||this.hasProtocol(r)?s=1:s=0;let n=-1,o=0,a=-1,l=!0,u=r.length-1,d=0;for(;u>=s;--u){if(e=r.charCodeAt(u),e===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),e===46?n===-1?n=u:d!==1&&(d=1):n!==-1&&(d=-1)}return n===-1||a===-1||d===0||d===1&&n===a-1&&n===o+1?a!==-1&&(o===0&&i?t.base=t.name=r.slice(1,a):t.base=t.name=r.slice(o,a)):(o===0&&i?(t.name=r.slice(1,n),t.base=r.slice(1,a)):(t.name=r.slice(o,n),t.base=r.slice(o,a)),t.ext=r.slice(n,a)),t.dir=this.dirname(r),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let Kl;async function oS(){return Kl??(Kl=(async()=>{var n;const r=document.createElement("canvas").getContext("webgl");if(!r)return Re.UNPACK;const t=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!t)return Re.UNPACK;const e=r.createTexture();r.bindTexture(r.TEXTURE_2D,e);const i=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,i),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,e,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t);const s=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,s),r.deleteFramebuffer(i),r.deleteTexture(e),(n=r.getExtension("WEBGL_lose_context"))==null||n.loseContext(),s[0]<=s[3]?Re.PMA:Re.UNPACK})()),Kl}let Zl;function aS(){return typeof Zl>"u"&&(Zl=function(){var t;const r={stencil:!0,failIfMajorPerformanceCaveat:ot.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ot.ADAPTER.getWebGLRenderingContext())return!1;const e=ot.ADAPTER.createCanvas();let i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);const s=!!((t=i==null?void 0:i.getContextAttributes())!=null&&t.stencil);if(i){const n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,s}catch{return!1}}()),Zl}var lS={grad:.9,turn:360,rad:360/(2*Math.PI)},Or=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},ve=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=Math.pow(10,t)),Math.round(e*r)/e+0},Ge=function(r,t,e){return t===void 0&&(t=0),e===void 0&&(e=1),r>e?e:r>t?r:t},Fg=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},Dp=function(r){return{r:Ge(r.r,0,255),g:Ge(r.g,0,255),b:Ge(r.b,0,255),a:Ge(r.a)}},Ql=function(r){return{r:ve(r.r),g:ve(r.g),b:ve(r.b),a:ve(r.a,3)}},hS=/^#([0-9a-f]{3,8})$/i,fo=function(r){var t=r.toString(16);return t.length<2?"0"+t:t},Ng=function(r){var t=r.r,e=r.g,i=r.b,s=r.a,n=Math.max(t,e,i),o=n-Math.min(t,e,i),a=o?n===t?(e-i)/o:n===e?2+(i-t)/o:4+(t-e)/o:0;return{h:60*(a<0?a+6:a),s:n?o/n*100:0,v:n/255*100,a:s}},Ug=function(r){var t=r.h,e=r.s,i=r.v,s=r.a;t=t/360*6,e/=100,i/=100;var n=Math.floor(t),o=i*(1-e),a=i*(1-(t-n)*e),l=i*(1-(1-t+n)*e),u=n%6;return{r:255*[i,a,o,o,l,i][u],g:255*[l,i,i,a,o,o][u],b:255*[o,o,l,i,i,a][u],a:s}},Op=function(r){return{h:Fg(r.h),s:Ge(r.s,0,100),l:Ge(r.l,0,100),a:Ge(r.a)}},Bp=function(r){return{h:ve(r.h),s:ve(r.s),l:ve(r.l),a:ve(r.a,3)}},Lp=function(r){return Ug((e=(t=r).s,{h:t.h,s:(e*=((i=t.l)<50?i:100-i)/100)>0?2*e/(i+e)*100:0,v:i+e,a:t.a}));var t,e,i},mn=function(r){return{h:(t=Ng(r)).h,s:(s=(200-(e=t.s))*(i=t.v)/100)>0&&s<200?e*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:t.a};var t,e,i,s},cS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uS=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pS=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Zh={string:[[function(r){var t=hS.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?ve(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?ve(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var t=dS.exec(r)||pS.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:Dp({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(r){var t=cS.exec(r)||uS.exec(r);if(!t)return null;var e,i,s=Op({h:(e=t[1],i=t[2],i===void 0&&(i="deg"),Number(e)*(lS[i]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return Lp(s)},"hsl"]],object:[[function(r){var t=r.r,e=r.g,i=r.b,s=r.a,n=s===void 0?1:s;return Or(t)&&Or(e)&&Or(i)?Dp({r:Number(t),g:Number(e),b:Number(i),a:Number(n)}):null},"rgb"],[function(r){var t=r.h,e=r.s,i=r.l,s=r.a,n=s===void 0?1:s;if(!Or(t)||!Or(e)||!Or(i))return null;var o=Op({h:Number(t),s:Number(e),l:Number(i),a:Number(n)});return Lp(o)},"hsl"],[function(r){var t=r.h,e=r.s,i=r.v,s=r.a,n=s===void 0?1:s;if(!Or(t)||!Or(e)||!Or(i))return null;var o=function(a){return{h:Fg(a.h),s:Ge(a.s,0,100),v:Ge(a.v,0,100),a:Ge(a.a)}}({h:Number(t),s:Number(e),v:Number(i),a:Number(n)});return Ug(o)},"hsv"]]},Fp=function(r,t){for(var e=0;e<t.length;e++){var i=t[e][0](r);if(i)return[i,t[e][1]]}return[null,void 0]},fS=function(r){return typeof r=="string"?Fp(r.trim(),Zh.string):typeof r=="object"&&r!==null?Fp(r,Zh.object):[null,void 0]},Jl=function(r,t){var e=mn(r);return{h:e.h,s:Ge(e.s+100*t,0,100),l:e.l,a:e.a}},th=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},Np=function(r,t){var e=mn(r);return{h:e.h,s:e.s,l:Ge(e.l+100*t,0,100),a:e.a}},Qh=function(){function r(t){this.parsed=fS(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return ve(th(this.rgba),2)},r.prototype.isDark=function(){return th(this.rgba)<.5},r.prototype.isLight=function(){return th(this.rgba)>=.5},r.prototype.toHex=function(){return t=Ql(this.rgba),e=t.r,i=t.g,s=t.b,o=(n=t.a)<1?fo(ve(255*n)):"","#"+fo(e)+fo(i)+fo(s)+o;var t,e,i,s,n,o},r.prototype.toRgb=function(){return Ql(this.rgba)},r.prototype.toRgbString=function(){return t=Ql(this.rgba),e=t.r,i=t.g,s=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+s+", "+n+")":"rgb("+e+", "+i+", "+s+")";var t,e,i,s,n},r.prototype.toHsl=function(){return Bp(mn(this.rgba))},r.prototype.toHslString=function(){return t=Bp(mn(this.rgba)),e=t.h,i=t.s,s=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+s+"%, "+n+")":"hsl("+e+", "+i+"%, "+s+"%)";var t,e,i,s,n},r.prototype.toHsv=function(){return t=Ng(this.rgba),{h:ve(t.h),s:ve(t.s),v:ve(t.v),a:ve(t.a,3)};var t},r.prototype.invert=function(){return ur({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},r.prototype.saturate=function(t){return t===void 0&&(t=.1),ur(Jl(this.rgba,t))},r.prototype.desaturate=function(t){return t===void 0&&(t=.1),ur(Jl(this.rgba,-t))},r.prototype.grayscale=function(){return ur(Jl(this.rgba,-1))},r.prototype.lighten=function(t){return t===void 0&&(t=.1),ur(Np(this.rgba,t))},r.prototype.darken=function(t){return t===void 0&&(t=.1),ur(Np(this.rgba,-t))},r.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},r.prototype.alpha=function(t){return typeof t=="number"?ur({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):ve(this.rgba.a,3);var e},r.prototype.hue=function(t){var e=mn(this.rgba);return typeof t=="number"?ur({h:t,s:e.s,l:e.l,a:e.a}):ve(e.h)},r.prototype.isEqual=function(t){return this.toHex()===ur(t).toHex()},r}(),ur=function(r){return r instanceof Qh?r:new Qh(r)},Up=[],mS=function(r){r.forEach(function(t){Up.indexOf(t)<0&&(t(Qh,Zh),Up.push(t))})};function gS(r,t){var e={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in e)i[e[s]]=s;var n={};r.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=i[this.toHex()];if(u)return u;if(o!=null&&o.closest){var d=this.toRgb(),f=1/0,m="black";if(!n.length)for(var v in e)n[v]=new r(e[v]).toRgb();for(var y in e){var b=(a=d,l=n[y],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));b<f&&(f=b,m=y)}return m}},t.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":e[a];return l?new r(l).toRgb():null},"name"])}mS([gS]);const as=class Uo{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof Uo)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if(i==="number"||i==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((s,n)=>s===e[n]);if(t!==null&&e!==null){const s=Object.keys(t),n=Object.keys(e);return s.length!==n.length?!1:s.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,i,s]=this._components;return{r:t,g:e,b:i,a:s}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,s]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(i*255),t[2]=Math.round(s*255),t}toRgbArray(t){t=t??[];const[e,i,s]=this._components;return t[0]=e,t[1]=i,t[2]=s,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,i,s,n]=Uo.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,n=this._int&255;return e&&(i=i*t+.5|0,s=s*t+.5|0,n=n*t+.5|0),(t*255<<24)+(i<<16)+(s<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,i,s]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(s*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,i,s,n]=this._components;return t[0]=e,t[1]=i,t[2]=s,t[3]=n,t}normalize(t){let e,i,s,n;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const o=t;e=(o>>16&255)/255,i=(o>>8&255)/255,s=(o&255)/255,n=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,i,s,n=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,i,s,n=255]=t,e/=255,i/=255,s/=255,n/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const a=Uo.HEX_PATTERN.exec(t);a&&(t=`#${a[2]}`)}const o=ur(t);o.isValid()&&({r:e,g:i,b:s,a:n}=o.rgba,e/=255,i/=255,s/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=i,this._components[2]=s,this._components[3]=n,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(t*255<<16)+(e*255<<8)+(i*255|0)}_clamp(t,e=0,i=1){return typeof t=="number"?Math.min(Math.max(t,e),i):(t.forEach((s,n)=>{t[n]=Math.min(Math.max(s,e),i)}),t)}};as.shared=new as,as.temp=new as,as.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Xt=as;function vS(r){return kt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Xt.shared.setValue(r).toHex()}function yS(r){return kt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Xt.shared.setValue(r).toNumber()}function _S(){const r=[],t=[];for(let i=0;i<32;i++)r[i]=i,t[i]=i;r[_t.NORMAL_NPM]=_t.NORMAL,r[_t.ADD_NPM]=_t.ADD,r[_t.SCREEN_NPM]=_t.SCREEN,t[_t.NORMAL]=_t.NORMAL_NPM,t[_t.ADD]=_t.ADD_NPM,t[_t.SCREEN]=_t.SCREEN_NPM;const e=[];return e.push(t),e.push(r),e}const $g=_S();function Gg(r,t){return $g[t?1:0][r]}function bS(r,t=null){const e=r*6;if(t=t||new Uint16Array(e),t.length!==e)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${e}`);for(let i=0,s=0;i<e;i+=6,s+=4)t[i+0]=s+0,t[i+1]=s+1,t[i+2]=s+2,t[i+3]=s+0,t[i+4]=s+2,t[i+5]=s+3;return t}function Hg(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}function ra(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function $p(r){return!(r&r-1)&&!!r}function Gp(r){let t=(r>65535?1:0)<<4;r>>>=t;let e=(r>255?1:0)<<3;return r>>>=e,t|=e,e=(r>15?1:0)<<2,r>>>=e,t|=e,e=(r>3?1:0)<<1,r>>>=e,t|=e,t|r>>1}function bs(r,t,e){const i=r.length;let s;if(t>=i||e===0)return;e=t+e>i?i-t:e;const n=i-e;for(s=t;s<n;++s)r[s]=r[s+e];r.length=n}function hi(r){return r===0?0:r<0?-1:1}let xS=0;function Vi(){return++xS}const Jh=class{constructor(r,t,e,i){this.left=r,this.top=t,this.right=e,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Jh.EMPTY=new Jh(0,0,0,0);let Hp=Jh;const zp={},dr=Object.create(null),Jr=Object.create(null);class wS{constructor(t,e,i){this._canvas=ot.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||ot.RESOLUTION,this.resize(t,e)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,e){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(e*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function jp(r,t,e){for(let i=0,s=4*e*t;i<t;++i,s+=4)if(r[s+3]!==0)return!1;return!0}function Vp(r,t,e,i,s){const n=4*t;for(let o=i,a=i*n+4*e;o<=s;++o,a+=n)if(r[a+3]!==0)return!1;return!0}function TS(r){const{width:t,height:e}=r,i=r.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,t,e).data;let n=0,o=0,a=t-1,l=e-1;for(;o<e&&jp(s,t,o);)++o;if(o===e)return Hp.EMPTY;for(;jp(s,t,l);)--l;for(;Vp(s,t,n,o,l);)++n;for(;Vp(s,t,a,o,l);)--a;return++a,++l,new Hp(n,o,a,l)}function ES(r){const t=TS(r),{width:e,height:i}=t;let s=null;if(!t.isEmpty()){const n=r.getContext("2d");if(n===null)throw new TypeError("Failed to get canvas 2D context");s=n.getImageData(t.left,t.top,e,i)}return{width:e,height:i,data:s}}function SS(r,t=globalThis.location){if(r.startsWith("data:"))return"";t=t||globalThis.location;const e=new URL(r,document.baseURI);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol?"anonymous":""}function Vr(r,t=1){var i;const e=(i=ot.RETINA_PREFIX)==null?void 0:i.exec(r);return e?parseFloat(e[1]):t}var rt=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(rt||{});const tc=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r={...typeof r.extension!="object"?{type:r.extension}:r.extension,ref:r}}if(typeof r=="object")r={...r};else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},Wp=(r,t)=>tc(r).priority??t,pt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(tc).forEach(t=>{t.type.forEach(e=>{var i,s;return(s=(i=this._removeHandlers)[e])==null?void 0:s.call(i,t)})}),this},add(...r){return r.map(tc).forEach(t=>{t.type.forEach(e=>{var n,o;const i=this._addHandlers,s=this._queue;i[e]?(n=i[e])==null||n.call(i,t):(s[e]=s[e]||[],(o=s[e])==null||o.push(t))})}),this},handle(r,t,e){var o;const i=this._addHandlers,s=this._removeHandlers;if(i[r]||s[r])throw new Error(`Extension type ${r} already has a handler`);i[r]=t,s[r]=e;const n=this._queue;return n[r]&&((o=n[r])==null||o.forEach(a=>t(a)),delete n[r]),this},handleByMap(r,t){return this.handle(r,e=>{e.name&&(t[e.name]=e.ref)},e=>{e.name&&delete t[e.name]})},handleByList(r,t,e=-1){return this.handle(r,i=>{t.includes(i.ref)||(t.push(i.ref),t.sort((s,n)=>Wp(n,e)-Wp(s,e)))},i=>{const s=t.indexOf(i.ref);s!==-1&&t.splice(s,1)})}};class ec{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const AS=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function CS(r){let t="";for(let e=0;e<r;++e)e>0&&(t+=`
else `),e<r-1&&(t+=`if(test == ${e}.0){}`);return t}function PS(r,t){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const e=t.createShader(t.FRAGMENT_SHADER);for(;;){const i=AS.replace(/%forloop%/gi,CS(r));if(t.shaderSource(e,i),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))r=r/2|0;else break}return r}const eh=0,rh=1,ih=2,sh=3,nh=4,oh=5;class Ir{constructor(){this.data=0,this.blendMode=_t.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<eh)}set blend(t){!!(this.data&1<<eh)!==t&&(this.data^=1<<eh)}get offsets(){return!!(this.data&1<<rh)}set offsets(t){!!(this.data&1<<rh)!==t&&(this.data^=1<<rh)}get culling(){return!!(this.data&1<<ih)}set culling(t){!!(this.data&1<<ih)!==t&&(this.data^=1<<ih)}get depthTest(){return!!(this.data&1<<sh)}set depthTest(t){!!(this.data&1<<sh)!==t&&(this.data^=1<<sh)}get depthMask(){return!!(this.data&1<<oh)}set depthMask(t){!!(this.data&1<<oh)!==t&&(this.data^=1<<oh)}get clockwiseFrontFace(){return!!(this.data&1<<nh)}set clockwiseFrontFace(t){!!(this.data&1<<nh)!==t&&(this.data^=1<<nh)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==_t.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new Ir;return t.depthTest=!1,t.blend=!0,t}}Ir.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const rc=[];function zg(r,t){if(!r)return null;let e="";if(typeof r=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);i&&(e=i[1].toLowerCase())}for(let i=rc.length-1;i>=0;--i){const s=rc[i];if(s.test&&s.test(r,e))return new s(r,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class er{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,e,i,s,n,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:d}=this;this._aliasCount++;for(let f=0,m=d.length;f<m;f++)d[f][u](t,e,i,s,n,o,a,l);return d===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return e!==-1&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(er.prototype,{dispatch:{value:er.prototype.emit},run:{value:er.prototype.emit}});class Cn{constructor(t=0,e=0){this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new er("setRealSize"),this.onUpdate=new er("update"),this.onError=new er("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,e){(t!==this._width||e!==this._height)&&(this._width=t,this._height=e,this.onResize.emit(t,e))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,e,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,e){return!1}}class Ha extends Cn{constructor(t,e){const{width:i,height:s}=e||{};if(!i||!s)throw new Error("BufferResource width or height invalid");super(i,s),this.data=t,this.unpackAlignment=e.unpackAlignment??4}upload(t,e,i){const s=t.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Re.UNPACK);const n=e.realWidth,o=e.realHeight;return i.width===n&&i.height===o?s.texSubImage2D(e.target,0,0,0,n,o,e.format,i.type,this.data):(i.width=n,i.height=o,s.texImage2D(e.target,0,i.internalFormat,n,o,0,e.format,i.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const IS={scaleMode:Fr.NEAREST,alphaMode:Re.NPM},ic=class ls extends Nn{constructor(t=null,e=null){super(),e=Object.assign({},ls.defaultOptions,e);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:o,width:a,height:l,wrapMode:u,format:d,type:f,target:m,resolution:v,resourceOptions:y}=e;t&&!(t instanceof Cn)&&(t=zg(t,y),t.internal=!0),this.resolution=v||ot.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=u,this._scaleMode=o,this.format=d,this.type=f,this.target=m,this.alphaMode=i,this.uid=Vi(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let i;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this}setSize(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)}setRealSize(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=$p(this.realWidth)&&$p(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Jr[this.cacheId],delete dr[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),ls.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,i=ot.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Vi()}`}n=t._pixiId}let o=Jr[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return o||(o=new ls(t,e),o.cacheId=n,ls.addToCache(o,n)),o}static fromBuffer(t,e,i,s){t=t||new Float32Array(e*i*4);const n=new Ha(t,{width:e,height:i,...s==null?void 0:s.resourceOptions});let o,a;return t instanceof Float32Array?(o=q.RGBA,a=gt.FLOAT):t instanceof Int32Array?(o=q.RGBA_INTEGER,a=gt.INT):t instanceof Uint32Array?(o=q.RGBA_INTEGER,a=gt.UNSIGNED_INT):t instanceof Int16Array?(o=q.RGBA_INTEGER,a=gt.SHORT):t instanceof Uint16Array?(o=q.RGBA_INTEGER,a=gt.UNSIGNED_SHORT):t instanceof Int8Array?(o=q.RGBA,a=gt.BYTE):(o=q.RGBA,a=gt.UNSIGNED_BYTE),n.internal=!0,new ls(n,Object.assign({},IS,{type:a,format:o},s))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Jr[e]&&Jr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Jr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Jr[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete Jr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Jr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};ic.defaultOptions={mipmap:Ar.POW2,anisotropicLevel:0,scaleMode:Fr.LINEAR,wrapMode:di.CLAMP,alphaMode:Re.UNPACK,target:vs.TEXTURE_2D,format:q.RGBA,type:gt.UNSIGNED_BYTE},ic._globalBatch=0;let Et=ic;class sc{constructor(){this.texArray=null,this.blend=0,this.type=_r.TRIANGLES,this.start=0,this.size=0,this.data=null}}let RS=0;class ae{constructor(t,e=!0,i=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=RS++,this.disposeRunner=new er("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?wr.ELEMENT_ARRAY_BUFFER:wr.ARRAY_BUFFER}get index(){return this.type===wr.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ae(t)}}class ia{constructor(t,e=0,i=!1,s=gt.FLOAT,n,o,a,l=1){this.buffer=t,this.size=e,this.normalized=i,this.type=s,this.stride=n,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,e,i,s,n){return new ia(t,e,i,s,n)}}const MS={Float32Array,Uint32Array,Int32Array,Uint8Array};function kS(r,t){let e=0,i=0;const s={};for(let l=0;l<r.length;l++)i+=t[l],e+=r[l].length;const n=new ArrayBuffer(e*4);let o=null,a=0;for(let l=0;l<r.length;l++){const u=t[l],d=r[l],f=Hg(d);s[f]||(s[f]=new MS[f](n)),o=s[f];for(let m=0;m<d.length;m++){const v=(m/u|0)*i+a,y=m%u;o[v+y]=d[m]}a+=u}return new Float32Array(n)}const Xp={5126:4,5123:2,5121:1};let DS=0;const OS={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class vi{constructor(t=[],e={}){this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=DS++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new er("disposeGeometry"),this.refCount=0}addAttribute(t,e,i=0,s=!1,n,o,a,l=!1){if(!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof ae||(e instanceof Array&&(e=new Float32Array(e)),e=new ae(e));const u=t.split("|");if(u.length>1){for(let f=0;f<u.length;f++)this.addAttribute(u[f],e,i,s,n);return this}let d=this.buffers.indexOf(e);return d===-1&&(this.buffers.push(e),d=this.buffers.length-1),this.attributes[t]=new ia(d,i,s,n,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ae||(t instanceof Array&&(t=new Uint16Array(t)),t=new ae(t)),t.type=wr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],e=[],i=new ae;let s;for(s in this.attributes){const n=this.attributes[s],o=this.buffers[n.buffer];t.push(o.data),e.push(n.size*Xp[n.type]/4),n.buffer=0}for(i.data=kS(t,e),s=0;s<this.buffers.length;s++)this.buffers[s]!==this.indexBuffer&&this.buffers[s].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new vi;for(let e=0;e<this.buffers.length;e++)t.buffers[e]=new ae(this.buffers[e].data.slice(0));for(const e in this.attributes){const i=this.attributes[e];t.attributes[e]=new ia(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=wr.ELEMENT_ARRAY_BUFFER),t}static merge(t){const e=new vi,i=[],s=[],n=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)s[l]=s[l]||0,s[l]+=o.buffers[l].data.length,n[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new OS[Hg(o.buffers[a].data)](s[a]),e.buffers[a]=new ae(i[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,n[l]),n[l]+=o.buffers[l].data.length}if(e.attributes=o.attributes,o.indexBuffer){e.indexBuffer=e.buffers[o.buffers.indexOf(o.indexBuffer)],e.indexBuffer.type=wr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,d=0;for(let f=0;f<o.buffers.length;f++)if(o.buffers[f]!==o.indexBuffer){d=f;break}for(const f in o.attributes){const m=o.attributes[f];(m.buffer|0)===d&&(l+=m.size*Xp[m.type]/4)}for(let f=0;f<t.length;f++){const m=t[f].indexBuffer.data;for(let v=0;v<m.length;v++)e.indexBuffer.data[v+u]+=a;a+=t[f].buffers[d].data.length/l,u+=m.length}}return e}}class jg extends vi{constructor(t=!1){super(),this._buffer=new ae(null,t,!1),this._indexBuffer=new ae(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,gt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,gt.FLOAT).addAttribute("aColor",this._buffer,4,!0,gt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,gt.FLOAT).addIndex(this._indexBuffer)}}const sa=Math.PI*2,BS=180/Math.PI,LS=Math.PI/180;var be=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(be||{});class Lt{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new Lt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}}Lt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const mo=[new Lt,new Lt,new Lt,new Lt];class Ct{constructor(t=0,e=0,i=0,s=0){this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(s),this.type=be.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ct(0,0,0,0)}clone(){return new Ct(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}intersects(t,e){if(!e){const N=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=N)return!1;const U=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>U}const i=this.left,s=this.right,n=this.top,o=this.bottom;if(s<=i||o<=n)return!1;const a=mo[0].set(t.left,t.top),l=mo[1].set(t.left,t.bottom),u=mo[2].set(t.right,t.top),d=mo[3].set(t.right,t.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const f=Math.sign(e.a*e.d-e.b*e.c);if(f===0||(e.apply(a,a),e.apply(l,l),e.apply(u,u),e.apply(d,d),Math.max(a.x,l.x,u.x,d.x)<=i||Math.min(a.x,l.x,u.x,d.x)>=s||Math.max(a.y,l.y,u.y,d.y)<=n||Math.min(a.y,l.y,u.y,d.y)>=o))return!1;const m=f*(l.y-a.y),v=f*(a.x-l.x),y=m*i+v*n,b=m*s+v*n,w=m*i+v*o,E=m*s+v*o;if(Math.max(y,b,w,E)<=m*a.x+v*a.y||Math.min(y,b,w,E)>=m*d.x+v*d.y)return!1;const P=f*(a.y-u.y),S=f*(u.x-a.x),M=P*i+S*n,k=P*s+S*n,F=P*i+S*o,C=P*s+S*o;return!(Math.max(M,k,F,C)<=P*a.x+S*a.y||Math.min(M,k,F,C)>=P*d.x+S*d.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=t*2,this.height+=e*2,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),s=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=s,this.height=Math.max(n-s,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,s=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=s-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),s=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=s,this.height=n-s,this}}Ct.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class za{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.radius=i,this.type=be.CIRC}clone(){return new za(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-t,n=this.y-e;return s*=s,n*=n,s+n<=i}getBounds(){return new Ct(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}za.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class ja{constructor(t=0,e=0,i=0,s=0){this.x=t,this.y=e,this.width=i,this.height=s,this.type=be.ELIP}clone(){return new ja(this.x,this.y,this.width,this.height)}contains(t,e){if(this.width<=0||this.height<=0)return!1;let i=(t-this.x)/this.width,s=(e-this.y)/this.height;return i*=i,s*=s,i+s<=1}getBounds(){return new Ct(this.x-this.width,this.y-this.height,this.width,this.height)}}ja.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Ni{constructor(...t){let e=Array.isArray(t[0])?t[0]:t;if(typeof e[0]!="number"){const i=[];for(let s=0,n=e.length;s<n;s++)i.push(e[s].x,e[s].y);e=i}this.points=e,this.type=be.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),e=new Ni(t);return e.closeStroke=this.closeStroke,e}contains(t,e){let i=!1;const s=this.points.length/2;for(let n=0,o=s-1;n<s;o=n++){const a=this.points[n*2],l=this.points[n*2+1],u=this.points[o*2],d=this.points[o*2+1];l>e!=d>e&&t<(u-a)*((e-l)/(d-l))+a&&(i=!i)}return i}}Ni.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,t)=>`${r}, ${t}`,"")}]`};class Va{constructor(t=0,e=0,i=0,s=0,n=20){this.x=t,this.y=e,this.width=i,this.height=s,this.radius=n,this.type=be.RREC}clone(){return new Va(this.x,this.y,this.width,this.height,this.radius)}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let s=t-(this.x+i),n=e-(this.y+i);const o=i*i;if(s*s+n*n<=o||(s=t-(this.x+this.width-i),s*s+n*n<=o)||(n=e-(this.y+this.height-i),s*s+n*n<=o)||(s=t-(this.x+i),s*s+n*n<=o))return!0}return!1}}Va.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Yt{constructor(t=1,e=0,i=0,s=1,n=0,o=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,s,n,o){return this.a=t,this.b=e,this.c=i,this.d=s,this.tx=n,this.ty=o,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new Lt;const i=t.x,s=t.y;return e.x=this.a*i+this.c*s+this.tx,e.y=this.b*i+this.d*s+this.ty,e}applyInverse(t,e){e=e||new Lt;const i=1/(this.a*this.d+this.c*-this.b),s=t.x,n=t.y;return e.x=this.d*i*s+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*s+(-this.ty*this.a+this.tx*this.b)*i,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),s=this.a,n=this.c,o=this.tx;return this.a=s*e-this.b*i,this.b=s*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this}append(t){const e=this.a,i=this.b,s=this.c,n=this.d;return this.a=t.a*e+t.b*s,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*s,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*s+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}setTransform(t,e,i,s,n,o,a,l,u){return this.a=Math.cos(a+u)*n,this.b=Math.sin(a+u)*n,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(i*this.a+s*this.c),this.ty=e-(i*this.b+s*this.d),this}prepend(t){const e=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const i=this.a,s=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=s*t.a+this.d*t.c,this.d=s*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,s=this.c,n=this.d,o=t.pivot,a=-Math.atan2(-s,n),l=Math.atan2(i,e),u=Math.abs(a+l);return u<1e-5||Math.abs(sa-u)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(s*s+n*n),t.position.x=this.tx+(o.x*e+o.y*s),t.position.y=this.ty+(o.x*i+o.y*n),t}invert(){const t=this.a,e=this.b,i=this.c,s=this.d,n=this.tx,o=t*s-e*i;return this.a=s/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-s*n)/o,this.ty=-(t*this.ty-e*n)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new Yt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new Yt}static get TEMP_MATRIX(){return new Yt}}Yt.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Pi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ii=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ri=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Mi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],nc=[],Vg=[],go=Math.sign;function FS(){for(let r=0;r<16;r++){const t=[];nc.push(t);for(let e=0;e<16;e++){const i=go(Pi[r]*Pi[e]+Ri[r]*Ii[e]),s=go(Ii[r]*Pi[e]+Mi[r]*Ii[e]),n=go(Pi[r]*Ri[e]+Ri[r]*Mi[e]),o=go(Ii[r]*Ri[e]+Mi[r]*Mi[e]);for(let a=0;a<16;a++)if(Pi[a]===i&&Ii[a]===s&&Ri[a]===n&&Mi[a]===o){t.push(a);break}}}for(let r=0;r<16;r++){const t=new Yt;t.set(Pi[r],Ii[r],Ri[r],Mi[r],0,0),Vg.push(t)}}FS();const Jt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Pi[r],uY:r=>Ii[r],vX:r=>Ri[r],vY:r=>Mi[r],inv:r=>r&8?r&15:-r&7,add:(r,t)=>nc[r][t],sub:(r,t)=>nc[r][Jt.inv(t)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,t)=>Math.abs(r)*2<=Math.abs(t)?t>=0?Jt.S:Jt.N:Math.abs(t)*2<=Math.abs(r)?r>0?Jt.E:Jt.W:t>0?r>0?Jt.SE:Jt.SW:r>0?Jt.NE:Jt.NW,matrixAppendRotationInv:(r,t,e=0,i=0)=>{const s=Vg[Jt.inv(t)];s.tx=e,s.ty=i,r.append(s)}};class Ur{constructor(t,e,i=0,s=0){this._x=i,this._y=s,this.cb=t,this.scope=e}clone(t=this.cb,e=this.scope){return new Ur(t,e,this._x,this._y)}set(t=0,e=t){return(this._x!==t||this._y!==e)&&(this._x=t,this._y=e,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}Ur.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const oc=class{constructor(){this.worldTransform=new Yt,this.localTransform=new Yt,this.position=new Ur(this.onChange,this,0,0),this.scale=new Ur(this.onChange,this,1,1),this.pivot=new Ur(this.onChange,this,0,0),this.skew=new Ur(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){const e=r.worldTransform,i=this.worldTransform;i.a=t.a*e.a+t.b*e.c,i.b=t.a*e.b+t.b*e.d,i.c=t.c*e.a+t.d*e.c,i.d=t.c*e.b+t.d*e.d,i.tx=t.tx*e.a+t.ty*e.c+e.tx,i.ty=t.tx*e.b+t.ty*e.d+e.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};oc.IDENTITY=new oc;let xu=oc;xu.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var NS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,US=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Yp(r,t,e){const i=r.createShader(t);return r.shaderSource(i,e),r.compileShader(i),i}function ah(r){const t=new Array(r);for(let e=0;e<t.length;e++)t[e]=!1;return t}function Wg(r,t){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ah(2*t);case"bvec3":return ah(3*t);case"bvec4":return ah(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const xs=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,t)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(t==null||t.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,t)=>r.type==="mat3"&&r.size===1&&!r.isArray&&t.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,t)=>r.type==="vec2"&&r.size===1&&!r.isArray&&t.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,t)=>r.type==="vec4"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,t)=>r.type==="vec3"&&r.size===1&&!r.isArray&&t.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}],$S={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function HS(r,t){var i;const e=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const s in r.uniforms){const n=t[s];if(!n){((i=r.uniforms[s])==null?void 0:i.group)===!0&&(r.uniforms[s].ubo?e.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                    `):e.push(`
                        renderer.shader.syncUniformGroup(uv.${s}, syncData);
                    `));continue}const o=r.uniforms[s];let a=!1;for(let l=0;l<xs.length;l++)if(xs[l].test(n,o)){e.push(xs[l].code(s,o)),a=!0;break}if(!a){const l=(n.size===1&&!n.isArray?$S:GS)[n.type].replace("location",`ud["${s}"].location`);e.push(`
            cu = ud["${s}"];
            cv = cu.value;
            v = uv["${s}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",e.join(`
`))}const Xg={};let ss=Xg;function zS(){if(ss===Xg||ss!=null&&ss.isContextLost()){const r=ot.ADAPTER.createCanvas();let t;ot.PREFER_ENV>=qi.WEBGL2&&(t=r.getContext("webgl2",{})),t||(t=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),ss=t}return ss}let vo;function jS(){if(!vo){vo=$e.MEDIUM;const r=zS();if(r&&r.getShaderPrecisionFormat){const t=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);t&&(vo=t.precision?$e.HIGH:$e.MEDIUM)}}return vo}function qp(r,t){const e=r.getShaderSource(t).split(`
`).map((u,d)=>`${d}: ${u}`),i=r.getShaderInfoLog(t),s=i.split(`
`),n={},o=s.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!n[u]?(n[u]=!0,!0):!1),a=[""];o.forEach(u=>{e[u-1]=`%c${e[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=e.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function VS(r,t,e,i){r.getProgramParameter(t,r.LINK_STATUS)||(r.getShaderParameter(e,r.COMPILE_STATUS)||qp(r,e),r.getShaderParameter(i,r.COMPILE_STATUS)||qp(r,i),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(t)))}const WS={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Yg(r){return WS[r]}let yo=null;const Kp={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function qg(r,t){if(!yo){const e=Object.keys(Kp);yo={};for(let i=0;i<e.length;++i){const s=e[i];yo[r[s]]=Kp[s]}}return yo[t]}function Zp(r,t,e){if(r.substring(0,9)!=="precision"){let i=t;return t===$e.HIGH&&e!==$e.HIGH&&(i=$e.MEDIUM),`precision ${i} float;
${r}`}else if(e!==$e.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}let Ks;function XS(){if(typeof Ks=="boolean")return Ks;try{Ks=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ks=!1}return Ks}let YS=0;const _o={},ac=class hs{constructor(t,e,i="pixi-shader",s={}){this.extra={},this.id=YS++,this.vertexSrc=t||hs.defaultVertexSrc,this.fragmentSrc=e||hs.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),_o[i]?(_o[i]++,i+=`-${_o[i]}`):_o[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Zp(this.vertexSrc,hs.defaultVertexPrecision,$e.HIGH),this.fragmentSrc=Zp(this.fragmentSrc,hs.defaultFragmentPrecision,jS())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return US}static get defaultFragmentSrc(){return NS}static from(t,e,i){const s=t+e;let n=zp[s];return n||(zp[s]=n=new hs(t,e,i)),n}};ac.defaultVertexPrecision=$e.HIGH,ac.defaultFragmentPrecision=Nr.apple.device?$e.HIGH:$e.MEDIUM;let $r=ac,qS=0;class rr{constructor(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=qS++,this.static=!!e,this.ubo=!!i,t instanceof ae?(this.buffer=t,this.buffer.type=wr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ae(new Float32Array(1)),this.buffer.type=wr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,e,i){if(!this.ubo)this.uniforms[t]=new rr(e,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,e,i){return new rr(t,e,i)}static uboFrom(t,e){return new rr(t,e??!0,!0)}}class Tr{constructor(t,e){this.uniformBindCount=0,this.program=t,e?e instanceof rr?this.uniformGroup=e:this.uniformGroup=new rr(e):this.uniformGroup=new rr({}),this.disposeRunner=new er("disposeShader")}checkUniformExists(t,e){if(e.uniforms[t])return!0;for(const i in e.uniforms){const s=e.uniforms[i];if(s.group===!0&&this.checkUniformExists(t,s))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,e,i){const s=$r.from(t,e);return new Tr(s,i)}}class KS{constructor(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},!e.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!e.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const i=new Int32Array(t);for(let n=0;n<t;n++)i[n]=n;this.defaultGroupCache[t]=rr.from({uSamplers:i},!0);let s=this.fragTemplate;s=s.replace(/%count%/gi,`${t}`),s=s.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new $r(this.vertexSrc,s)}const e={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yt,default:this.defaultGroupCache[t]};return new Tr(this.programCache[t],e)}generateSampleSrc(t){let e="";e+=`
`,e+=`
`;for(let i=0;i<t;i++)i>0&&(e+=`
else `),i<t-1&&(e+=`if(vTextureId < ${i}.5)`),e+=`
{`,e+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,e+=`
}`;return e+=`
`,e+=`
`,e}}class lc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function ZS(){return!Nr.apple.device}function QS(r){let t=!0;const e=ot.ADAPTER.getNavigator();if(Nr.tablet||Nr.phone){if(Nr.apple.device){const i=e.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(t=!1)}if(Nr.android.device){const i=e.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?r:4}class Wa{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var JS=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,tA=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const tn=class qe extends Wa{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=jg,this.vertexSize=6,this.state=Ir.for2d(),this.size=qe.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??QS(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??ZS(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return kt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return tA}static get defaultFragmentTemplate(){return JS}setShaderGenerator({vertex:t=qe.defaultVertexSrc,fragment:e=qe.defaultFragmentTemplate}={}){this.shaderGenerator=new KS(t,e)}contextChange(){const t=this.renderer.gl;ot.PREFER_ENV===qi.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),qe.defaultMaxTextures),this.maxTextures=PS(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=qe,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;t.length<i;)t.push(new sc);for(;e.length<s;)e.push(new lc);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,i=qe._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Et._globalBatch,l=0,u=i[0],d=0;s.copyBoundTextures(n,e);for(let f=0;f<this._bufferSize;++f){const m=t[f];t[f]=null,m._batchEnabled!==a&&(u.count>=e&&(s.boundArray(u,n,a,e),this.buildDrawCalls(u,d,f),d=f,u=i[++l],++a),m._batchEnabled=a,m.touched=o,u.elements[u.count++]=m)}u.count>0&&(s.boundArray(u,n,a,e),this.buildDrawCalls(u,d,this._bufferSize),++l,++a);for(let f=0;f<n.length;f++)n[f]=null;Et._globalBatch=a}buildDrawCalls(t,e,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:o,vertexSize:a}=this,l=qe._drawCallPool;let u=this._dcIndex,d=this._aIndex,f=this._iIndex,m=l[u];m.start=this._iIndex,m.texArray=t;for(let v=e;v<i;++v){const y=s[v],b=y._texture.baseTexture,w=$g[b.alphaMode?1:0][y.blendMode];s[v]=null,e<v&&m.blend!==w&&(m.size=f-m.start,e=v,m=l[++u],m.texArray=t,m.start=f),this.packInterleavedGeometry(y,n,o,d,f),d+=y.vertexData.length/2*a,f+=y.indices.length,m.blend=w}e<i&&(m.size=f-m.start,++u),this._dcIndex=u,this._aIndex=d,this._iIndex=f}bindAndClearTexArray(t){const e=this.renderer.texture;for(let i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:i}=this;qe.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:i}=this.renderer,s=qe._drawCallPool;let n=null;for(let o=0;o<t;o++){const{texArray:a,type:l,size:u,start:d,blend:f}=s[o];n!==a&&(n=a,this.bindAndClearTexArray(a)),this.state.blendMode=f,i.set(this.state),e.drawElements(l,u,e.UNSIGNED_SHORT,d*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),qe.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=ra(Math.ceil(t/8)),i=Gp(e),s=e*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new ec(s*this.vertexSize*4)),n}getIndexBuffer(t){const e=ra(Math.ceil(t/12)),i=Gp(e),s=e*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(t,e,i,s,n){const{uint32View:o,float32View:a}=e,l=s/this.vertexSize,u=t.uvs,d=t.indices,f=t.vertexData,m=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),y=Xt.shared.setValue(t._tintRGB).toPremultiplied(v,t._texture.baseTexture.alphaMode>0);for(let b=0;b<f.length;b+=2)a[s++]=f[b],a[s++]=f[b+1],a[s++]=u[b],a[s++]=u[b+1],o[s++]=y,a[s++]=m;for(let b=0;b<d.length;b++)i[n++]=l+d[b]}};tn.defaultBatchSize=4096,tn.extension={name:"batch",type:rt.RendererPlugin},tn._drawCallPool=[],tn._textureArrayPool=[];let ki=tn;pt.add(ki);var eA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,rA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const hc=class en extends Tr{constructor(t,e,i){const s=$r.from(t||en.defaultVertexSrc,e||en.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=en.defaultResolution,this.multisample=en.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Ir}apply(t,e,i,s,n){t.applyFilter(this,e,i,s)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return rA}static get defaultFragmentSrc(){return eA}};hc.defaultResolution=1,hc.defaultMultisample=he.NONE;let Ce=hc;class na{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Xt(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:e,background:i,backgroundAlpha:s}=t,n=i??e;n!==void 0&&(this.color=n),this.alpha=s}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}na.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},na.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"background"};pt.add(na);class Kg{constructor(t){this.renderer=t,this.emptyRenderer=new Wa(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,e){const{boundTextures:i}=this.renderer.texture;for(let s=e-1;s>=0;--s)t[s]=i[s]||null,t[s]&&(t[s]._batchLocation=s)}boundArray(t,e,i,s){const{elements:n,ids:o,count:a}=t;let l=0;for(let u=0;u<a;u++){const d=n[u],f=d._batchLocation;if(f>=0&&f<s&&e[f]===d){o[u]=f;continue}for(;l<s;){const m=e[l];if(m&&m._batchEnabled===i&&m._batchLocation===l){l++;continue}o[u]=l,d._batchLocation=l,e[l]=d;break}}}destroy(){this.renderer=null}}Kg.extension={type:rt.RendererSystem,name:"batch"};pt.add(Kg);let Qp=0;class oa{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Qp++}init(t){if(t.context)this.initFromContext(t.context);else{const e=this.renderer.background.alpha<1,i=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:e,premultipliedAlpha:i,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Qp++,this.renderer.runners.contextChange.emit(t);const e=this.renderer.view;e.addEventListener!==void 0&&(e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const e=this.createContext(this.renderer.view,t);this.initFromContext(e)}createContext(t,e){let i;if(ot.PREFER_ENV>=qi.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const e=t.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const s=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=s,s||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}oa.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},oa.extension={type:rt.RendererSystem,name:"context"};pt.add(oa);class cc{constructor(t,e){if(this.width=Math.round(t),this.height=Math.round(e),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new er("disposeFramebuffer"),this.multisample=he.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,e){return this.colorTextures[t]=e||new Et(null,{scaleMode:Fr.NEAREST,resolution:1,mipmap:Ar.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new Et(null,{scaleMode:Fr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Ar.OFF,format:q.DEPTH_COMPONENT,type:gt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,e){if(t=Math.round(t),e=Math.round(e),!t||!e)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&e===this.height)){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const s=this.colorTextures[i],n=s.resolution;s.setSize(t/n,e/n)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Zg extends Et{constructor(t={}){if(typeof t=="number"){const e=arguments[0],i=arguments[1],s=arguments[2],n=arguments[3];t={width:e,height:i,scaleMode:s,resolution:n}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=he.NONE),super(null,t),this.mipmap=Ar.OFF,this.valid=!0,this._clear=new Xt([0,0,0,0]),this.framebuffer=new cc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Wr extends Cn{constructor(t){const e=t,i=e.naturalWidth||e.videoWidth||e.displayWidth||e.width,s=e.naturalHeight||e.videoHeight||e.displayHeight||e.height;super(i,s),this.source=t,this.noSubImage=!1}static crossOrigin(t,e,i){i===void 0&&!e.startsWith("data:")?t.crossOrigin=SS(e):i!==!1&&(t.crossOrigin=typeof i=="string"?i:"anonymous")}upload(t,e,i,s){const n=t.gl,o=e.realWidth,a=e.realHeight;if(s=s||this.source,typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement){if(!s.complete||s.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement&&s.readyState<=1)return!1;return n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===Re.UNPACK),!this.noSubImage&&e.target===n.TEXTURE_2D&&i.width===o&&i.height===a?n.texSubImage2D(n.TEXTURE_2D,0,0,0,e.format,i.type,s):(i.width=o,i.height=a,n.texImage2D(e.target,0,i.internalFormat,e.format,i.type,s)),!0}update(){if(this.destroyed)return;const t=this.source,e=t.naturalWidth||t.videoWidth||t.width,i=t.naturalHeight||t.videoHeight||t.height;this.resize(e,i),super.update()}dispose(){this.source=null}}class Qg extends Wr{constructor(t,e){if(e=e||{},typeof t=="string"){const i=new Image;Wr.crossOrigin(i,t,e.crossorigin),i.src=t,t=i}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(e.createBitmap??ot.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.bitmap=null,this._load=null,e.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((e,i)=>{const s=this.source;this.url=s.src;const n=()=>{this.destroyed||(s.onload=null,s.onerror=null,this.update(),this._load=null,this.createBitmap?e(this.process()):e(this))};s.complete&&s.src?n():(s.onload=n,s.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const e=globalThis.createImageBitmap,i=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:i?"cors":"no-cors"}).then(s=>s.blob()).then(s=>e(s,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Re.UNPACK?"premultiply":"none"})).then(s=>this.destroyed?Promise.reject():(this.bitmap=s,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,e,i){if(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,e,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,e,i,this.bitmap),!this.preserveBitmap){let s=!0;const n=e._glTextures;for(const o in n){const a=n[o];if(a!==i&&a.dirtyId!==e.dirtyId){s=!1;break}}s&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class wu{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,e,i){const s=e.width,n=e.height;if(i){const o=t.width/2/s,a=t.height/2/n,l=t.x/s+o,u=t.y/n+a;i=Jt.add(i,Jt.NW),this.x0=l+o*Jt.uX(i),this.y0=u+a*Jt.uY(i),i=Jt.add(i,2),this.x1=l+o*Jt.uX(i),this.y1=u+a*Jt.uY(i),i=Jt.add(i,2),this.x2=l+o*Jt.uX(i),this.y2=u+a*Jt.uY(i),i=Jt.add(i,2),this.x3=l+o*Jt.uX(i),this.y3=u+a*Jt.uY(i)}else this.x0=t.x/s,this.y0=t.y/n,this.x1=(t.x+t.width)/s,this.y1=t.y/n,this.x2=(t.x+t.width)/s,this.y2=(t.y+t.height)/n,this.x3=t.x/s,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}wu.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const Jp=new wu;function bo(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}class dt extends Nn{constructor(t,e,i,s,n,o,a){if(super(),this.noFrame=!1,e||(this.noFrame=!0,e=new Ct(0,0,1,1)),t instanceof dt&&(t=t.baseTexture),this.baseTexture=t,this._frame=e,this.trim=s,this.valid=!1,this.destroyed=!1,this._uvs=Jp,this.uvMatrix=null,this.orig=i||e,this._rotate=Number(n||0),n===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Lt(o.x,o.y):new Lt(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=e:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:e}=this.baseTexture;e!=null&&e.url&&dr[e.url]&&dt.removeFromCache(e.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,dt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var s;const t=this._frame.clone(),e=this._frame===this.orig?t:this.orig.clone(),i=new dt(this.baseTexture,!this.noFrame&&t,e,(s=this.trim)==null?void 0:s.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}updateUvs(){this._uvs===Jp&&(this._uvs=new wu),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,e={},i=ot.STRICT_TEXTURE_CACHE){const s=typeof t=="string";let n=null;if(s)n=t;else if(t instanceof Et){if(!t.cacheId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${Vi()}`,Et.addToCache(t,t.cacheId)}n=t.cacheId}else{if(!t._pixiId){const a=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${Vi()}`}n=t._pixiId}let o=dr[n];if(s&&i&&!o)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return!o&&!(t instanceof Et)?(e.resolution||(e.resolution=Vr(t)),o=new dt(new Et(t,e)),o.baseTexture.cacheId=n,Et.addToCache(o.baseTexture,n),dt.addToCache(o,n)):!o&&t instanceof Et&&(o=new dt(t),dt.addToCache(o,n)),o}static fromURL(t,e){const i=Object.assign({autoLoad:!1},e==null?void 0:e.resourceOptions),s=dt.from(t,Object.assign({resourceOptions:i},e),!1),n=s.baseTexture.resource;return s.baseTexture.valid?Promise.resolve(s):n.load().then(()=>Promise.resolve(s))}static fromBuffer(t,e,i,s){return new dt(Et.fromBuffer(t,e,i,s))}static fromLoader(t,e,i,s){const n=new Et(t,Object.assign({scaleMode:Et.defaultOptions.scaleMode,resolution:Vr(e)},s)),{resource:o}=n;o instanceof Qg&&(o.url=e);const a=new dt(n);return i||(i=e),Et.addToCache(a.baseTexture,i),dt.addToCache(a,i),i!==e&&(Et.addToCache(a.baseTexture,e),dt.addToCache(a,e)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),dr[e]&&dr[e]!==t&&console.warn(`Texture added to the cache with an id [${e}] that already had an entry`),dr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=dr[t];if(e){const i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete dr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)dr[t.textureCacheIds[e]]===t&&delete dr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:e,y:i,width:s,height:n}=t,o=e+s>this.baseTexture.width,a=i+n>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${e} + ${s} = ${e+s} > ${this.baseTexture.width}`,d=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${d}`)}this.valid=s&&n&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return dt._EMPTY||(dt._EMPTY=new dt(new Et),bo(dt._EMPTY),bo(dt._EMPTY.baseTexture)),dt._EMPTY}static get WHITE(){if(!dt._WHITE){const t=ot.ADAPTER.createCanvas(16,16),e=t.getContext("2d");t.width=16,t.height=16,e.fillStyle="white",e.fillRect(0,0,16,16),dt._WHITE=new dt(Et.from(t)),bo(dt._WHITE),bo(dt._WHITE.baseTexture)}return dt._WHITE}}class Zi extends dt{constructor(t,e){super(t,e),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,e,i=!0){const s=this.baseTexture.resolution,n=Math.round(t*s)/s,o=Math.round(e*s)/s;this.valid=n>0&&o>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(n,o),this.updateUvs()}setResolution(t){const{baseTexture:e}=this;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))}static create(t){return new Zi(new Zg(t))}}class Jg{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,e,i=he.NONE){const s=new Zg(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new Zi(s)}getOptimalTexture(t,e,i=1,s=he.NONE){let n;t=Math.max(Math.ceil(t*i-1e-6),1),e=Math.max(Math.ceil(e*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||e!==this._pixelsHeight?(t=ra(t),e=ra(e),n=((t&65535)<<16|e&65535)>>>0,s>1&&(n+=s*4294967296)):n=s>1?-s:-1,this.texturePool[n]||(this.texturePool[n]=[]);let o=this.texturePool[n].pop();return o||(o=this.createTexture(t,e,s)),o.filterPoolKey=n,o.setResolution(i),o}getFilterTexture(t,e,i){const s=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||he.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){const e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const e in this.texturePool){const i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const e in this.texturePool){if(!(Number(e)<0))continue;const i=this.texturePool[e];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Jg.SCREEN_KEY=-1;class iA extends vi{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class tv extends vi{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ae(this.vertices),this.uvBuffer=new ae(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,e){let i=0,s=0;return this.uvs[0]=i,this.uvs[1]=s,this.uvs[2]=i+e.width/t.width,this.uvs[3]=s,this.uvs[4]=i+e.width/t.width,this.uvs[5]=s+e.height/t.height,this.uvs[6]=i,this.uvs[7]=s+e.height/t.height,i=e.x,s=e.y,this.vertices[0]=i,this.vertices[1]=s,this.vertices[2]=i+e.width,this.vertices[3]=s,this.vertices[4]=i+e.width,this.vertices[5]=s+e.height,this.vertices[6]=i,this.vertices[7]=s+e.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class sA{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=he.NONE,this.sourceFrame=new Ct,this.destinationFrame=new Ct,this.bindingSourceFrame=new Ct,this.bindingDestinationFrame=new Ct,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const xo=[new Lt,new Lt,new Lt,new Lt],lh=new Yt;class ev{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Jg,this.statePool=[],this.quad=new iA,this.quadUv=new tv,this.tempRect=new Ct,this.activeState={},this.globalUniforms=new rr({outputFrame:new Ct,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,e){const i=this.renderer,s=this.defaultFilterStack,n=this.statePool.pop()||new sA,o=i.renderTexture;let a,l;if(o.current){const w=o.current;a=w.resolution,l=w.multisample}else a=i.resolution,l=i.multisample;let u=e[0].resolution||a,d=e[0].multisample??l,f=e[0].padding,m=e[0].autoFit,v=e[0].legacy??!0;for(let w=1;w<e.length;w++){const E=e[w];u=Math.min(u,E.resolution||a),d=Math.min(d,E.multisample??l),f=this.useMaxPadding?Math.max(f,E.padding):f+E.padding,m=m&&E.autoFit,v=v||(E.legacy??!0)}s.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),s.push(n),n.resolution=u,n.multisample=d,n.legacy=v,n.target=t,n.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),n.sourceFrame.pad(f);const y=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(lh.copyFrom(i.projection.transform).invert(),y),m?(n.sourceFrame.fit(y),(n.sourceFrame.width<=0||n.sourceFrame.height<=0)&&(n.sourceFrame.width=0,n.sourceFrame.height=0)):n.sourceFrame.intersects(y)||(n.sourceFrame.width=0,n.sourceFrame.height=0),this.roundFrame(n.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,u,d),n.filters=e,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;const b=this.tempRect;b.x=0,b.y=0,b.width=n.sourceFrame.width,b.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(o.sourceFrame),n.bindingDestinationFrame.copyFrom(o.destinationFrame),n.transform=i.projection.transform,i.projection.transform=null,o.bind(n.renderTexture,n.sourceFrame,b),i.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;const s=this.globalUniforms.uniforms;s.outputFrame=e.sourceFrame,s.resolution=e.resolution;const n=s.inputSize,o=s.inputPixel,a=s.inputClamp;if(n[0]=e.destinationFrame.width,n[1]=e.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],o[0]=Math.round(n[0]*e.resolution),o[1]=Math.round(n[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*n[2]-.5*o[2],a[3]=e.sourceFrame.height*n[3]-.5*o[3],e.legacy){const u=s.filterArea;u[0]=e.destinationFrame.width,u[1]=e.destinationFrame.height,u[2]=e.sourceFrame.x,u[3]=e.sourceFrame.y,s.filterClamp=s.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,e.renderTexture,l.renderTexture,vr.BLEND,e),this.returnFilterTexture(e.renderTexture);else{let u=e.renderTexture,d=this.getOptimalFilterTexture(u.width,u.height,e.resolution);d.filterFrame=u.filterFrame;let f=0;for(f=0;f<i.length-1;++f){f===1&&e.multisample>1&&(d=this.getOptimalFilterTexture(u.width,u.height,e.resolution),d.filterFrame=u.filterFrame),i[f].apply(this,u,d,vr.CLEAR,e);const m=u;u=d,d=m}i[f].apply(this,u,l.renderTexture,vr.BLEND,e),f>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(d)}e.clear(),this.statePool.push(e)}bindAndClear(t,e=vr.CLEAR){const{renderTexture:i,state:s}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t==null?void 0:t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,i.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const n=s.stateId&1||this.forceClear;(e===vr.CLEAR||e===vr.BLIT&&n)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,e,i,s){const n=this.renderer;n.state.set(t.state),this.bindAndClear(i,s),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(_r.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(_r.TRIANGLE_STRIP))}calculateSpriteMatrix(t,e){const{sourceFrame:i,destinationFrame:s}=this.activeState,{orig:n}=e._texture,o=t.set(s.width,0,0,s.height,i.x,i.y),a=e.worldTransform.copyTo(Yt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/n.width,1/n.height),o.translate(e.anchor.x,e.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,e,i=1,s=he.NONE){return this.texturePool.getOptimalTexture(t,e,i,s)}getFilterTexture(t,e,i){if(typeof t=="number"){const n=t;t=e,e=n}t=t||this.activeState.renderTexture;const s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||he.NONE);return s.filterFrame=t.filterFrame,s}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,e){const i=xo[0],s=xo[1],n=xo[2],o=xo[3];i.set(e.left,e.top),s.set(e.left,e.bottom),n.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(i,i),t.apply(s,s),t.apply(n,n),t.apply(o,o);const a=Math.min(i.x,s.x,n.x,o.x),l=Math.min(i.y,s.y,n.y,o.y),u=Math.max(i.x,s.x,n.x,o.x),d=Math.max(i.y,s.y,n.y,o.y);e.x=a,e.y=l,e.width=u-a,e.height=d-l}roundFrame(t,e,i,s,n){if(!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)){if(n){const{a:o,b:a,c:l,d:u}=n;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}n=n?lh.copyFrom(n):lh.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)}}}ev.extension={type:rt.RendererSystem,name:"filter"};pt.add(ev);class nA{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=he.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const oA=new Ct;class rv{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new cc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ct,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;ot.PREFER_ENV===qi.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=s=>e.drawBuffersWEBGL(s):(this.hasMRT=!1,t.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,e,i=0){const{gl:s}=this;if(t){const n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){const o=e.width>>i,a=e.height>>i,l=o/e.width;this.setViewport(e.x*l,e.y*l,o,a)}else{const o=t.width>>i,a=t.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,s.bindFramebuffer(s.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,e,i,s){const n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),s=Math.round(s),(n.width!==i||n.height!==s||n.x!==t||n.y!==e)&&(n.x=t,n.y=e,n.width=i,n.height=s,this.gl.viewport(t,e,i,s))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,e,i,s,n=Nh.COLOR|Nh.DEPTH){const{gl:o}=this;o.clearColor(t,e,i,s),o.clear(n)}initFramebuffer(t){const{gl:e}=this,i=new nA(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i}resizeFramebuffer(t){const{gl:e}=this,i=t.glFramebuffers[this.CONTEXT_UID];if(i.stencil){e.bindRenderbuffer(e.RENDERBUFFER,i.stencil);let o;this.renderer.context.webGLVersion===1?o=e.DEPTH_STENCIL:t.depth&&t.stencil?o=e.DEPTH24_STENCIL8:t.depth?o=e.DEPTH_COMPONENT24:o=e.STENCIL_INDEX8,i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,o,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,o,t.width,t.height)}const s=t.colorTextures;let n=s.length;e.drawBuffers||(n=Math.min(n,1));for(let o=0;o<n;o++){const a=s[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,e){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures;let o=n.length;i.drawBuffers||(o=Math.min(o,1)),s.multisample>1&&this.canMultisampleFramebuffer(t)?s.msaaBuffer=s.msaaBuffer||i.createRenderbuffer():s.msaaBuffer&&(i.deleteRenderbuffer(s.msaaBuffer),s.msaaBuffer=null,s.blitFramebuffer&&(s.blitFramebuffer.dispose(),s.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=n[l],d=u.parentTextureArray||u;this.renderer.texture.bind(d,0),l===0&&s.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,d._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,s.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,d._glTextures[this.CONTEXT_UID].texture,e),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const l=t.depthTexture;this.renderer.texture.bind(l,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,e)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){s.stencil=s.stencil||i.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH_STENCIL):t.depth&&t.stencil?(l=i.DEPTH_STENCIL_ATTACHMENT,u=i.DEPTH24_STENCIL8):t.depth?(l=i.DEPTH_ATTACHMENT,u=i.DEPTH_COMPONENT24):(l=i.STENCIL_ATTACHMENT,u=i.STENCIL_INDEX8),i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,u,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,u,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,l,i.RENDERBUFFER,s.stencil)}else s.stencil&&(i.deleteRenderbuffer(s.stencil),s.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:e}=this;let i=he.NONE;if(t<=1||e===null)return i;for(let s=0;s<e.length;s++)if(e[s]<=t){i=e[s];break}return i===1&&(i=he.NONE),i}blit(t,e,i){const{current:s,renderer:n,gl:o,CONTEXT_UID:a}=this;if(n.context.webGLVersion!==2||!s)return;const l=s.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const d=s.colorTextures[0];if(!d)return;l.blitFramebuffer||(l.blitFramebuffer=new cc(s.width,s.height),l.blitFramebuffer.addColorTexture(0,d)),t=l.blitFramebuffer,t.colorTextures[0]!==d&&(t.colorTextures[0]=d,t.dirtyId++,t.dirtyFormat++),(t.width!==s.width||t.height!==s.height)&&(t.width=s.width,t.height=s.height,t.dirtyId++,t.dirtySize++)}e||(e=oA,e.width=s.width,e.height=s.height),i||(i=e);const u=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(e.left,e.top,e.right,e.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,e){const i=t.glFramebuffers[this.CONTEXT_UID],s=this.gl;if(!i)return;delete t.glFramebuffers[this.CONTEXT_UID];const n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(s.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&s.deleteRenderbuffer(i.msaaBuffer),i.stencil&&s.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&this.disposeFramebuffer(i.blitFramebuffer,e)}disposeAll(t){const e=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)}forceStencil(){const t=this.current;if(!t)return;const e=t.glFramebuffers[this.CONTEXT_UID];if(!e||e.stencil&&t.stencil)return;t.stencil=!0;const i=t.width,s=t.height,n=this.gl,o=e.stencil=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH_STENCIL):t.depth?(a=n.DEPTH_STENCIL_ATTACHMENT,l=n.DEPTH24_STENCIL8):(a=n.STENCIL_ATTACHMENT,l=n.STENCIL_INDEX8),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,l,i,s):n.renderbufferStorage(n.RENDERBUFFER,l,i,s),n.framebufferRenderbuffer(n.FRAMEBUFFER,a,n.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ct}destroy(){this.renderer=null}}rv.extension={type:rt.RendererSystem,name:"framebuffer"};pt.add(rv);const hh={5126:4,5123:2,5121:1};class iv{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,e.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;ot.PREFER_ENV===qi.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=()=>i.createVertexArrayOES(),t.bindVertexArray=s=>i.bindVertexArrayOES(s),t.deleteVertexArray=s=>i.deleteVertexArrayOES(s)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(e.webGLVersion!==2){const i=t.getExtension("ANGLE_instanced_arrays");i?(t.vertexAttribDivisor=(s,n)=>i.vertexAttribDivisorANGLE(s,n),t.drawElementsInstanced=(s,n,o,a,l)=>i.drawElementsInstancedANGLE(s,n,o,a,l),t.drawArraysInstanced=(s,n,o,a)=>i.drawArraysInstancedANGLE(s,n,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=e.webGLVersion===2||!!e.extensions.uint32ElementIndex}bind(t,e){e=e||this.renderer.shader.shader;const{gl:i}=this;let s=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;s||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=s={},n=!0);const o=s[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this.renderer.buffer;for(let i=0;i<t.buffers.length;i++){const s=t.buffers[i];e.update(s)}}checkCompatibility(t,e){const i=t.attributes,s=e.attributeData;for(const n in s)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(t,e){const i=t.attributes,s=e.attributeData,n=["g",t.id];for(const o in i)s[o]&&n.push(o,s[o].location);return n.join("-")}initGeometryVao(t,e,i=!0){const s=this.gl,n=this.CONTEXT_UID,o=this.renderer.buffer,a=e.program;a.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,a);const l=this.getSignature(t,a),u=t.glVertexArrayObjects[this.CONTEXT_UID];let d=u[l];if(d)return u[a.id]=d,d;const f=t.buffers,m=t.attributes,v={},y={};for(const b in f)v[b]=0,y[b]=0;for(const b in m)!m[b].size&&a.attributeData[b]?m[b].size=a.attributeData[b].size:m[b].size||console.warn(`PIXI Geometry attribute '${b}' size cannot be determined (likely the bound shader does not have the attribute)`),v[m[b].buffer]+=m[b].size*hh[m[b].type];for(const b in m){const w=m[b],E=w.size;w.stride===void 0&&(v[w.buffer]===E*hh[w.type]?w.stride=0:w.stride=v[w.buffer]),w.start===void 0&&(w.start=y[w.buffer],y[w.buffer]+=E*hh[w.type])}d=s.createVertexArray(),s.bindVertexArray(d);for(let b=0;b<f.length;b++){const w=f[b];o.bind(w),i&&w._glBuffers[n].refCount++}return this.activateVao(t,a),u[a.id]=d,u[l]=d,s.bindVertexArray(null),o.unbind(wr.ARRAY_BUFFER),d}disposeGeometry(t,e){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const i=t.glVertexArrayObjects[this.CONTEXT_UID],s=this.gl,n=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<n.length;l++){const u=n[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!e&&o.dispose(n[l],e))}if(!e){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),s.deleteVertexArray(u)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const e=Object.keys(this.managedGeometries);for(let i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)}activateVao(t,e){const i=this.gl,s=this.CONTEXT_UID,n=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);let l=null;for(const u in a){const d=a[u],f=o[d.buffer],m=f._glBuffers[s];if(e.attributeData[u]){l!==m&&(n.bind(f),l=m);const v=e.attributeData[u].location;if(i.enableVertexAttribArray(v),i.vertexAttribPointer(v,d.size,d.type||i.FLOAT,d.normalized,d.stride,d.start),d.instance)if(this.hasInstance)i.vertexAttribDivisor(v,d.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,e,i,s){const{gl:n}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?n.drawElementsInstanced(t,e||o.indexBuffer.data.length,l,(i||0)*a,s||1):n.drawElements(t,e||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?n.drawArraysInstanced(t,i,e||o.getSize(),s||1):n.drawArrays(t,i,e||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}iv.extension={type:rt.RendererSystem,name:"geometry"};pt.add(iv);const tf=new Yt;class sv{constructor(t,e){this._texture=t,this.mapCoord=new Yt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof e>"u"?.5:e,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,e){e===void 0&&(e=t);const i=this.mapCoord;for(let s=0;s<t.length;s+=2){const n=t[s],o=t[s+1];e[s]=n*i.a+o*i.c+i.tx,e[s+1]=n*i.b+o*i.d+i.ty}return e}update(t){const e=this._texture;if(!e||!e.valid||!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;const i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const s=e.orig,n=e.trim;n&&(tf.set(s.width/n.width,0,0,s.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(tf));const o=e.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+l+u)/o.width,a[1]=(e._frame.y+l+u)/o.height,a[2]=(e._frame.x+e._frame.width-l+u)/o.width,a[3]=(e._frame.y+e._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&e.rotate===0,!0}}var aA=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,lA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class hA extends Ce{constructor(t,e,i){let s=null;typeof t!="string"&&e===void 0&&i===void 0&&(s=t,t=void 0,e=void 0,i=void 0),super(t||lA,e||aA,i),this.maskSprite=s,this.maskMatrix=new Yt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,e,i,s){const n=this._maskSprite,o=n._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new sv(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,s))}}class cA{constructor(t=null){this.type=de.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ce.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=de.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class nv{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,e){let i=e;if(!i.isMaskData){const n=this.maskDataPool.pop()||new cA;n.pooled=!0,n.maskObject=e,i=n}const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i._colorMask=s?s._colorMask:15,i.autoDetect&&this.detect(i),i._target=t,i.type!==de.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case de.SCISSOR:this.renderer.scissor.push(i);break;case de.STENCIL:this.renderer.stencil.push(i);break;case de.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case de.COLOR:this.pushColorMask(i);break}i.type===de.SPRITE&&this.maskStack.push(i)}pop(t){const e=this.maskStack.pop();if(!(!e||e._target!==t)){if(e.enabled)switch(e.type){case de.SCISSOR:this.renderer.scissor.pop(e);break;case de.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case de.SPRITE:this.popSpriteMask(e);break;case de.COLOR:this.popColorMask(e);break}if(e.reset(),e.pooled&&this.maskDataPool.push(e),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===de.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(t){const e=t.maskObject;e?e.isSprite?t.type=de.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=de.SCISSOR:t.type=de.STENCIL:t.type=de.COLOR}pushSpriteMask(t){const{maskObject:e}=t,i=t._target;let s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex],s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new hA])),s[0].resolution=t.resolution,s[0].multisample=t.multisample,s[0].maskSprite=e;const n=i.filterArea;i.filterArea=e.getBounds(!0),this.renderer.filter.push(i,s),i.filterArea=n,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const e=t._colorMask,i=t._colorMask=e&t.colorMask;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(t){const e=t._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}nv.extension={type:rt.RendererSystem,name:"mask"};pt.add(nv);class ov{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:e}=this.renderer,i=this.getStackLength();this.maskStack=t;const s=this.getStackLength();s!==i&&(s===0?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const ef=new Yt,rf=[],av=class $o extends ov{constructor(t){super(t),this.glConst=ot.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:i}=t,{renderer:s}=this,n=s.renderTexture,o=i.getBounds(!0,rf.pop()??new Ct);this.roundFrameToPixels(o,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),e&&o.fit(e),t._scissorRectLocal=o}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:i,c:s,d:n}=t;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||$o.isMatrixRotated(e.worldTransform)||$o.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const i=t._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(t,e,i,s,n){$o.isMatrixRotated(n)||(n=n?ef.copyFrom(n):ef.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,t),t.fit(s),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&rf.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};av.extension={type:rt.RendererSystem,name:"scissor"};let uA=av;pt.add(uA);class lv extends ov{constructor(t){super(t),this.glConst=ot.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const e=t.maskObject,{gl:i}=this.renderer,s=t._stencilCounter;s===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++;const n=t._colorMask;n!==0&&(t._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,s,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,n!==0&&(t._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}pop(t){const e=this.renderer.gl;if(this.getStackLength()===0)e.disable(e.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,s=i?i._colorMask:15;s!==0&&(i._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,s!==0&&(i._colorMask=s,e.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}lv.extension={type:rt.RendererSystem,name:"stencil"};pt.add(lv);class hv{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return kt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const e in t)this.plugins[e]=new t[e](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}hv.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_plugin"};pt.add(hv);class cv{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Yt,this.transform=null}update(t,e,i,s){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,s),this.transform&&this.projectionMatrix.append(this.transform);const n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(t,e,i,s){const n=this.projectionMatrix,o=s?-1:1;n.identity(),n.a=1/e.width*2,n.d=o*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-o-e.y*n.d}setTransform(t){}destroy(){this.renderer=null}}cv.extension={type:rt.RendererSystem,name:"projection"};pt.add(cv);const dA=new xu,sf=new Ct;class uv{constructor(t){this.renderer=t,this._tempMatrix=new Yt}generateTexture(t,e){const{region:i,...s}=e||{},n=(i==null?void 0:i.copyTo(sf))||t.getLocalBounds(sf,!0),o=s.resolution||this.renderer.resolution;n.width=Math.max(n.width,1/o),n.height=Math.max(n.height,1/o),s.width=n.width,s.height=n.height,s.resolution=o,s.multisample??(s.multisample=this.renderer.multisample);const a=Zi.create(s);this._tempMatrix.tx=-n.x,this._tempMatrix.ty=-n.y;const l=t.transform;return t.transform=dA,this.renderer.render(t,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=l,a}destroy(){}}uv.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"textureGenerator"};pt.add(uv);const Si=new Ct,Zs=new Ct;class dv{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ct,this.destinationFrame=new Ct,this.viewportFrame=new Ct}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,e,i){const s=this.renderer;this.current=t;let n,o,a;t?(n=t.baseTexture,a=n.resolution,e||(Si.width=t.frame.width,Si.height=t.frame.height,e=Si),i||(Zs.x=t.frame.x,Zs.y=t.frame.y,Zs.width=e.width,Zs.height=e.height,i=Zs),o=n.framebuffer):(a=s.resolution,e||(Si.width=s._view.screen.width,Si.height=s._view.screen.height,e=Si),i||(i=Si,i.width=e.width,i.height=e.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,t||(l.y=s.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,e,a,!o),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)}clear(t,e){const i=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,s=Xt.shared.setValue(t||i);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&s.premultiply(s.alpha);const n=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=n.width!==o.width||n.height!==o.height;if(a){let{x:l,y:u,width:d,height:f}=this.viewportFrame;l=Math.round(l),u=Math.round(u),d=Math.round(d),f=Math.round(f),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,d,f)}this.renderer.framebuffer.clear(s.red,s.green,s.blue,s.alpha,e),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}dv.extension={type:rt.RendererSystem,name:"renderTexture"};pt.add(dv);class pA{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function fA(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const n=t.getActiveAttrib(r,s);if(n.name.startsWith("gl_"))continue;const o=qg(t,n.type),a={type:o,name:n.name,size:Yg(o),location:t.getAttribLocation(r,n.name)};e[n.name]=a}return e}function mA(r,t){const e={},i=t.getProgramParameter(r,t.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const n=t.getActiveUniform(r,s),o=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=qg(t,n.type);e[o]={name:o,index:s,type:l,size:n.size,isArray:a,value:Wg(l,n.size)}}return e}function gA(r,t){var a;const e=Yp(r,r.VERTEX_SHADER,t.vertexSrc),i=Yp(r,r.FRAGMENT_SHADER,t.fragmentSrc),s=r.createProgram();r.attachShader(s,e),r.attachShader(s,i);const n=(a=t.extra)==null?void 0:a.transformFeedbackVaryings;if(n&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(s,n.names,n.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||VS(r,s,e,i),t.attributeData=fA(s,r),t.uniformData=mA(s,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const l=Object.keys(t.attributeData);l.sort((u,d)=>u>d?1:-1);for(let u=0;u<l.length;u++)t.attributeData[l[u]].location=u,r.bindAttribLocation(s,u,l[u]);r.linkProgram(s)}r.deleteShader(e),r.deleteShader(i);const o={};for(const l in t.uniformData){const u=t.uniformData[l];o[l]={location:r.getUniformLocation(s,l),value:Wg(u.type,u.size)}}return new pA(s,o)}function vA(r,t,e,i,s){e.buffer.update(s)}const yA={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},pv={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function _A(r){const t=r.map(n=>({data:n,offset:0,dataLen:0,dirty:0}));let e=0,i=0,s=0;for(let n=0;n<t.length;n++){const o=t[n];if(e=pv[o.data.type],o.data.size>1&&(e=Math.max(e,16)*o.data.size),o.dataLen=e,i%e!==0&&i<16){const a=i%e%16;i+=a,s+=a}i+e>16?(s=Math.ceil(s/16)*16,o.offset=s,s+=e,i=e):(o.offset=s,i+=e,s+=e)}return s=Math.ceil(s/16)*16,{uboElements:t,size:s}}function bA(r,t){const e=[];for(const i in r)t[i]&&e.push(t[i]);return e.sort((i,s)=>i.index-s.index),e}function xA(r,t){if(!r.autoManage)return{size:0,syncFunc:vA};const e=bA(r.uniforms,t),{uboElements:i,size:s}=_A(e),n=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=r.uniforms[a.data.name],u=a.data.name;let d=!1;for(let f=0;f<xs.length;f++){const m=xs[f];if(m.codeUbo&&m.test(a.data,l)){n.push(`offset = ${a.offset/4};`,xs[f].codeUbo(a.data.name,l)),d=!0;break}}if(!d)if(a.data.size>1){const f=Yg(a.data.type),m=Math.max(pv[a.data.type]/16,1),v=f/m,y=(4-v%4)%4;n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*m}; i++)
                {
                    for(var j = 0; j < ${v}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${y};
                }

                `)}else{const f=yA[a.data.type];n.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${f};
                `)}}return n.push(`
       renderer.buffer.update(buffer);
    `),{size:s,syncFunc:new Function("ud","uv","renderer","syncData","buffer",n.join(`
`))}}let wA=0;const wo={textureCount:0,uboCount:0};class fv{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=wA++}systemCheck(){if(!XS())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const i=t.program,s=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(s.program)),e||(wo.textureCount=0,wo.uboCount=0,this.syncUniformGroup(t.uniformGroup,wo)),s}setUniforms(t){const e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)}syncUniformGroup(t,e){const i=this.getGlProgram();(!t.static||t.dirtyId!==i.uniformDirtyGroups[t.id])&&(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))}syncUniforms(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)}createSyncGroups(t){const e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=HS(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,e){const i=this.getGlProgram();if(!t.static||t.dirtyId!==0||!i.uniformGroups[t.id]){t.dirtyId=0;const s=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),s(i.uniformData,t.uniforms,this.renderer,wo,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])}createSyncBufferGroup(t,e,i){const{gl:s}=this.renderer;this.renderer.buffer.bind(t.buffer);const n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,s.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=xA(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return e.uniformGroups[t.id]=a.syncFunc,e.uniformGroups[t.id]}getSignature(t,e,i){const s=t.uniforms,n=[`${i}-`];for(const o in s)n.push(o),e[o]&&n.push(e[o].type);return n.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const e=this.gl,i=t.program,s=gA(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=s,s}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}fv.extension={type:rt.RendererSystem,name:"shader"};pt.add(fv);class aa{constructor(t){this.renderer=t}run(t){const{renderer:e}=this;e.runners.init.emit(e.options),t.hello&&console.log(`PixiJS 7.4.3 - ${e.rendererLogId} - https://pixijs.com`),e.resize(e.screen.width,e.screen.height)}destroy(){}}aa.defaultOptions={hello:!1},aa.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"startup"};pt.add(aa);function TA(r,t=[]){return t[_t.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.ADD]=[r.ONE,r.ONE],t[_t.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.NONE]=[0,0],t[_t.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],t[_t.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],t[_t.SRC_IN]=[r.DST_ALPHA,r.ZERO],t[_t.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],t[_t.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[_t.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],t[_t.DST_IN]=[r.ZERO,r.SRC_ALPHA],t[_t.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],t[_t.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],t[_t.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],t[_t.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],t}const EA=0,SA=1,AA=2,CA=3,PA=4,IA=5,mv=class uc{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=_t.NONE,this._blendEq=!1,this.map=[],this.map[EA]=this.setBlend,this.map[SA]=this.setOffset,this.map[AA]=this.setCullFace,this.map[CA]=this.setDepthTest,this.map[PA]=this.setFrontFace,this.map[IA]=this.setDepthMask,this.checks=[],this.defaultState=new Ir,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=TA(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)e&1&&this.map[i].call(this,!!(t.data&1<<i)),e=e>>1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(uc.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(uc.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],i=this.gl;e.length===2?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const i=this.checks.indexOf(t);e&&i===-1?this.checks.push(t):!e&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};mv.extension={type:rt.RendererSystem,name:"state"};let RA=mv;pt.add(RA);class MA extends Nn{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const e=(t.priority??[]).filter(s=>t.systems[s]),i=[...e,...Object.keys(t.systems).filter(s=>!e.includes(s))];for(const s of i)this.addSystem(t.systems[s],s)}addRunners(...t){t.forEach(e=>{this.runners[e]=new er(e)})}addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const s in this.runners)this.runners[s].add(i);return this}emitWithCustomOptions(t,e){const i=Object.keys(this._systemsHash);t.items.forEach(s=>{const n=i.find(o=>this._systemsHash[o]===s);s[t.name](e[n])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const rn=class Go{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Go.defaultMaxIdle,this.checkCountMax=Go.defaultCheckCountMax,this.mode=Go.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==pu.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let i=!1;for(let s=0;s<e.length;s++){const n=e[s];n.resource&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<e.length;n++)e[n]!==null&&(e[s++]=e[n]);e.length=s}}unload(t){const e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(let s=t.children.length-1;s>=0;s--)this.unload(t.children[s])}destroy(){this.renderer=null}};rn.defaultMode=pu.AUTO,rn.defaultMaxIdle=60*60,rn.defaultCheckCountMax=60*10,rn.extension={type:rt.RendererSystem,name:"textureGC"};let Di=rn;pt.add(Di);class ch{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=gt.UNSIGNED_BYTE,this.internalFormat=q.RGBA,this.samplerType=0}}function kA(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[r.RGB]:nt.FLOAT,[r.RGBA]:nt.FLOAT,[r.ALPHA]:nt.FLOAT,[r.LUMINANCE]:nt.FLOAT,[r.LUMINANCE_ALPHA]:nt.FLOAT,[r.R8]:nt.FLOAT,[r.R8_SNORM]:nt.FLOAT,[r.RG8]:nt.FLOAT,[r.RG8_SNORM]:nt.FLOAT,[r.RGB8]:nt.FLOAT,[r.RGB8_SNORM]:nt.FLOAT,[r.RGB565]:nt.FLOAT,[r.RGBA4]:nt.FLOAT,[r.RGB5_A1]:nt.FLOAT,[r.RGBA8]:nt.FLOAT,[r.RGBA8_SNORM]:nt.FLOAT,[r.RGB10_A2]:nt.FLOAT,[r.RGB10_A2UI]:nt.FLOAT,[r.SRGB8]:nt.FLOAT,[r.SRGB8_ALPHA8]:nt.FLOAT,[r.R16F]:nt.FLOAT,[r.RG16F]:nt.FLOAT,[r.RGB16F]:nt.FLOAT,[r.RGBA16F]:nt.FLOAT,[r.R32F]:nt.FLOAT,[r.RG32F]:nt.FLOAT,[r.RGB32F]:nt.FLOAT,[r.RGBA32F]:nt.FLOAT,[r.R11F_G11F_B10F]:nt.FLOAT,[r.RGB9_E5]:nt.FLOAT,[r.R8I]:nt.INT,[r.R8UI]:nt.UINT,[r.R16I]:nt.INT,[r.R16UI]:nt.UINT,[r.R32I]:nt.INT,[r.R32UI]:nt.UINT,[r.RG8I]:nt.INT,[r.RG8UI]:nt.UINT,[r.RG16I]:nt.INT,[r.RG16UI]:nt.UINT,[r.RG32I]:nt.INT,[r.RG32UI]:nt.UINT,[r.RGB8I]:nt.INT,[r.RGB8UI]:nt.UINT,[r.RGB16I]:nt.INT,[r.RGB16UI]:nt.UINT,[r.RGB32I]:nt.INT,[r.RGB32UI]:nt.UINT,[r.RGBA8I]:nt.INT,[r.RGBA8UI]:nt.UINT,[r.RGBA16I]:nt.INT,[r.RGBA16UI]:nt.UINT,[r.RGBA32I]:nt.INT,[r.RGBA32UI]:nt.UINT,[r.DEPTH_COMPONENT16]:nt.FLOAT,[r.DEPTH_COMPONENT24]:nt.FLOAT,[r.DEPTH_COMPONENT32F]:nt.FLOAT,[r.DEPTH_STENCIL]:nt.FLOAT,[r.DEPTH24_STENCIL8]:nt.FLOAT,[r.DEPTH32F_STENCIL8]:nt.FLOAT}:t={[r.RGB]:nt.FLOAT,[r.RGBA]:nt.FLOAT,[r.ALPHA]:nt.FLOAT,[r.LUMINANCE]:nt.FLOAT,[r.LUMINANCE_ALPHA]:nt.FLOAT,[r.DEPTH_STENCIL]:nt.FLOAT},t}function DA(r){let t;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?t={[gt.UNSIGNED_BYTE]:{[q.RGBA]:r.RGBA8,[q.RGB]:r.RGB8,[q.RG]:r.RG8,[q.RED]:r.R8,[q.RGBA_INTEGER]:r.RGBA8UI,[q.RGB_INTEGER]:r.RGB8UI,[q.RG_INTEGER]:r.RG8UI,[q.RED_INTEGER]:r.R8UI,[q.ALPHA]:r.ALPHA,[q.LUMINANCE]:r.LUMINANCE,[q.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[gt.BYTE]:{[q.RGBA]:r.RGBA8_SNORM,[q.RGB]:r.RGB8_SNORM,[q.RG]:r.RG8_SNORM,[q.RED]:r.R8_SNORM,[q.RGBA_INTEGER]:r.RGBA8I,[q.RGB_INTEGER]:r.RGB8I,[q.RG_INTEGER]:r.RG8I,[q.RED_INTEGER]:r.R8I},[gt.UNSIGNED_SHORT]:{[q.RGBA_INTEGER]:r.RGBA16UI,[q.RGB_INTEGER]:r.RGB16UI,[q.RG_INTEGER]:r.RG16UI,[q.RED_INTEGER]:r.R16UI,[q.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[gt.SHORT]:{[q.RGBA_INTEGER]:r.RGBA16I,[q.RGB_INTEGER]:r.RGB16I,[q.RG_INTEGER]:r.RG16I,[q.RED_INTEGER]:r.R16I},[gt.UNSIGNED_INT]:{[q.RGBA_INTEGER]:r.RGBA32UI,[q.RGB_INTEGER]:r.RGB32UI,[q.RG_INTEGER]:r.RG32UI,[q.RED_INTEGER]:r.R32UI,[q.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[gt.INT]:{[q.RGBA_INTEGER]:r.RGBA32I,[q.RGB_INTEGER]:r.RGB32I,[q.RG_INTEGER]:r.RG32I,[q.RED_INTEGER]:r.R32I},[gt.FLOAT]:{[q.RGBA]:r.RGBA32F,[q.RGB]:r.RGB32F,[q.RG]:r.RG32F,[q.RED]:r.R32F,[q.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[gt.HALF_FLOAT]:{[q.RGBA]:r.RGBA16F,[q.RGB]:r.RGB16F,[q.RG]:r.RG16F,[q.RED]:r.R16F},[gt.UNSIGNED_SHORT_5_6_5]:{[q.RGB]:r.RGB565},[gt.UNSIGNED_SHORT_4_4_4_4]:{[q.RGBA]:r.RGBA4},[gt.UNSIGNED_SHORT_5_5_5_1]:{[q.RGBA]:r.RGB5_A1},[gt.UNSIGNED_INT_2_10_10_10_REV]:{[q.RGBA]:r.RGB10_A2,[q.RGBA_INTEGER]:r.RGB10_A2UI},[gt.UNSIGNED_INT_10F_11F_11F_REV]:{[q.RGB]:r.R11F_G11F_B10F},[gt.UNSIGNED_INT_5_9_9_9_REV]:{[q.RGB]:r.RGB9_E5},[gt.UNSIGNED_INT_24_8]:{[q.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[gt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[q.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:t={[gt.UNSIGNED_BYTE]:{[q.RGBA]:r.RGBA,[q.RGB]:r.RGB,[q.ALPHA]:r.ALPHA,[q.LUMINANCE]:r.LUMINANCE,[q.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[gt.UNSIGNED_SHORT_5_6_5]:{[q.RGB]:r.RGB},[gt.UNSIGNED_SHORT_4_4_4_4]:{[q.RGBA]:r.RGBA},[gt.UNSIGNED_SHORT_5_5_5_1]:{[q.RGBA]:r.RGBA}},t}class gv{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Et,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=DA(t),this.samplerTypes=kA(t);const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(let s=0;s<e;s++)this.boundTextures[s]=null;this.emptyTextures={};const i=new ch(t.createTexture());t.bindTexture(t.TEXTURE_2D,i.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=i,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new ch(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let s=0;s<6;s++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let s=0;s<this.boundTextures.length;s++)this.bind(null,s)}bind(t,e=0){const{gl:i}=this;if(t=t==null?void 0:t.castToBaseTexture(),(t==null?void 0:t.valid)&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const s=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,s.texture)),s.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)):s.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:e,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let s=0;s<i.length;s++)i[s]===this.unknownTexture&&this.bind(null,s)}for(let s=0;s<i.length;s++)i[s]===t&&(this.currentLocation!==s&&(e.activeTexture(e.TEXTURE0+s),this.currentLocation=s),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[s]=null)}ensureSamplerType(t){const{boundTextures:e,hasIntegerTextures:i,CONTEXT_UID:s}=this;if(i)for(let n=t-1;n>=0;--n){const o=e[n];o&&o._glTextures[s].samplerType!==nt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const e=new ch(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e}initTextureType(t,e){var i;e.internalFormat=((i=this.internalFormats[t.type])==null?void 0:i[t.format])??t.format,e.samplerType=this.samplerTypes[e.internalFormat]??nt.FLOAT,this.webGLVersion===2&&t.type===gt.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type}updateTexture(t){var s;const e=t._glTextures[this.CONTEXT_UID];if(!e)return;const i=this.renderer;if(this.initTextureType(t,e),(s=t.resource)==null?void 0:s.upload(i,t,e))e.samplerType!==nt.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,o=t.realHeight,a=i.gl;(e.width!==n||e.height!==o||e.dirtyId<0)&&(e.width=n,e.height=o,a.texImage2D(t.target,0,e.internalFormat,n,o,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}destroyTexture(t,e){const{gl:i}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){const s=this.managedTextures.indexOf(t);s!==-1&&bs(this.managedTextures,s,1)}}updateTextureStyle(t){var i;const e=t._glTextures[this.CONTEXT_UID];e&&((t.mipmap===Ar.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?e.mipmap=!1:e.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?e.wrapMode=di.CLAMP:e.wrapMode=t.wrapMode,(i=t.resource)!=null&&i.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)}setStyle(t,e){const i=this.gl;if(e.mipmap&&t.mipmap!==Ar.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Fr.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const s=this.renderer.context.extensions.anisotropicFiltering;if(s&&t.anisotropicLevel>0&&t.scaleMode===Fr.LINEAR){const n=Math.min(t.anisotropicLevel,i.getParameter(s.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,s.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===Fr.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===Fr.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}gv.extension={type:rt.RendererSystem,name:"texture"};pt.add(gv);class vv{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glTransformFeedbacks[i]||this.createGLTransformFeedback(t);e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,e){const{gl:i,renderer:s}=this;e&&s.shader.bind(e),i.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:e,renderer:i,CONTEXT_UID:s}=this,n=e.createTransformFeedback();t._glTransformFeedbacks[s]=n,e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,n);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(i.buffer.update(a),a._glBuffers[s].refCount++,e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[s].buffer||null))}return e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),n}disposeTransformFeedback(t,e){const i=t._glTransformFeedbacks[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this);const n=this.renderer.buffer;if(n)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!e&&n.dispose(a,e))}i&&(e||s.deleteTransformFeedback(i),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}vv.extension={type:rt.RendererSystem,name:"transformFeedback"};pt.add(vv);class la{constructor(t){this.renderer=t}init(t){this.screen=new Ct(0,0,t.width,t.height),this.element=t.view||ot.ADAPTER.createCanvas(),this.resolution=t.resolution||ot.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,e){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(e*this.resolution);const i=this.element.width/this.resolution,s=this.element.height/this.resolution;this.screen.width=i,this.screen.height=s,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${s}px`),this.renderer.emit("resize",i,s),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var e;t&&((e=this.element.parentNode)==null||e.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}la.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},la.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_view"};pt.add(la);ot.PREFER_ENV=qi.WEBGL2;ot.STRICT_TEXTURE_CACHE=!1;ot.RENDER_OPTIONS={...oa.defaultOptions,...na.defaultOptions,...la.defaultOptions,...aa.defaultOptions};Object.defineProperties(ot,{WRAP_MODE:{get(){return Et.defaultOptions.wrapMode},set(r){kt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Et.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return Et.defaultOptions.scaleMode},set(r){kt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Et.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return Et.defaultOptions.mipmap},set(r){kt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Et.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return Et.defaultOptions.anisotropicLevel},set(r){kt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Et.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return kt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ce.defaultResolution},set(r){Ce.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return kt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ce.defaultMultisample},set(r){Ce.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return ki.defaultMaxTextures},set(r){kt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ki.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return ki.defaultBatchSize},set(r){kt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ki.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return ki.canUploadSameBuffer},set(r){kt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ki.canUploadSameBuffer=r}},GC_MODE:{get(){return Di.defaultMode},set(r){kt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Di.defaultMode=r}},GC_MAX_IDLE:{get(){return Di.defaultMaxIdle},set(r){kt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Di.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return Di.defaultCheckCountMax},set(r){kt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Di.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return $r.defaultVertexPrecision},set(r){kt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),$r.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return $r.defaultFragmentPrecision},set(r){kt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),$r.defaultFragmentPrecision=r}}});var Wi=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Wi||{});class uh{constructor(t,e=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=s}match(t,e=null){return this.fn===t&&this.context===e}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const yv=class Le{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new uh(null,null,1/0),this.deltaMS=1/Le.targetFPMS,this.elapsedMS=1/Le.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=Wi.NORMAL){return this._addListener(new uh(t,e,i))}addOnce(t,e,i=Wi.NORMAL){return this._addListener(new uh(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(!e)t.connect(i);else{for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i.match(t,e)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const n=t-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=t-n%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*Le.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,Le.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!Le._shared){const t=Le._shared=new Le;t.autoStart=!0,t._protected=!0}return Le._shared}static get system(){if(!Le._system){const t=Le._system=new Le;t.autoStart=!0,t._protected=!0}return Le._system}};yv.targetFPMS=.06;let Fe=yv;Object.defineProperties(ot,{TARGET_FPMS:{get(){return Fe.targetFPMS},set(r){kt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Fe.targetFPMS=r}}});class _v{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Wi.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?Fe.shared:new Fe,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}_v.extension=rt.Application;pt.add(_v);const bv=[];pt.handleByList(rt.Renderer,bv);function OA(r){for(const t of bv)if(t.test(r))return new t(r);throw new Error("Unable to auto-detect a suitable renderer.")}var BA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,LA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const FA=BA,xv=LA;class wv{constructor(t){this.renderer=t}contextChange(t){let e;if(this.renderer.context.webGLVersion===1){const i=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,i)}else{const i=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),e=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,i)}e>=he.HIGH?this.multisample=he.HIGH:e>=he.MEDIUM?this.multisample=he.MEDIUM:e>=he.LOW?this.multisample=he.LOW:this.multisample=he.NONE}destroy(){}}wv.extension={type:rt.RendererSystem,name:"_multisample"};pt.add(wv);class NA{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Tv{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,s.buffer)}unbind(t){const{gl:e}=this;e.bindBuffer(t,null)}bindBufferBase(t,e){const{gl:i,CONTEXT_UID:s}=this;if(this.boundBufferBases[e]!==t){const n=t._glBuffers[s]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}}bindBufferRange(t,e,i){const{gl:s,CONTEXT_UID:n}=this;i=i||0;const o=t._glBuffers[n]||this.createGLBuffer(t);s.bindBufferRange(s.UNIFORM_BUFFER,e||0,o.buffer,i*256,256)}update(t){const{gl:e,CONTEXT_UID:i}=this,s=t._glBuffers[i]||this.createGLBuffer(t);if(t._updateID!==s.updateID)if(s.updateID=t._updateID,e.bindBuffer(t.type,s.buffer),s.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{const n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;s.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}}dispose(t,e){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const i=t._glBuffers[this.CONTEXT_UID],s=this.gl;t.disposeRunner.remove(this),i&&(e||s.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const e=Object.keys(this.managedBuffers);for(let i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)}createGLBuffer(t){const{CONTEXT_UID:e,gl:i}=this;return t._glBuffers[e]=new NA(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]}}Tv.extension={type:rt.RendererSystem,name:"buffer"};pt.add(Tv);class Ev{constructor(t){this.renderer=t}render(t,e){const i=this.renderer;let s,n,o,a;if(e&&(s=e.renderTexture,n=e.clear,o=e.transform,a=e.skipUpdateTransform),this.renderingToScreen=!s,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(s||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}i.renderTexture.bind(s),i.batch.currentRenderer.start(),(n??i.background.clearBeforeRender)&&i.renderTexture.clear(),t.render(i),i.batch.currentRenderer.flush(),s&&(e.blit&&i.framebuffer.blit(),s.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Ev.extension={type:rt.RendererSystem,name:"objectRenderer"};pt.add(Ev);const Ho=class dc extends MA{constructor(t){super(),this.type=ag.WEBGL,t=Object.assign({},ot.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new rr({projectionMatrix:new Yt},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:dc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(kt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=dc.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:aS()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return kt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return kt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return kt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return kt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){kt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return kt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){kt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return kt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};Ho.extension={type:rt.Renderer,priority:1},Ho.__plugins={},Ho.__systems={};let Tu=Ho;pt.handleByMap(rt.RendererPlugin,Tu.__plugins);pt.handleByMap(rt.RendererSystem,Tu.__systems);pt.add(Tu);class Sv extends Cn{constructor(t,e){const{width:i,height:s}=e||{};super(i,s),this.items=[],this.itemDirtyIds=[];for(let n=0;n<t;n++){const o=new Et;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,e){for(let i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof Cn?this.addResourceAt(t[i],i):this.addResourceAt(zg(t[i],e),i))}dispose(){for(let t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,e){if(!this.items[e])throw new Error(`Index ${e} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=t,this.items[e].on("update",t.update,t)}unbind(t){super.unbind(t);for(let e=0;e<this.length;e++)this.items[e].parentTextureArray=null,this.items[e].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(e=>e.resource).filter(e=>e).map(e=>e.load());return this._load=Promise.all(t).then(()=>{const{realWidth:e,realHeight:i}=this.items[0];return this.resize(e,i),this.update(),Promise.resolve(this)}),this._load}}class UA extends Sv{constructor(t,e){const{width:i,height:s}=e||{};let n,o;Array.isArray(t)?(n=t,o=t.length):o=t,super(o,{width:i,height:s}),n&&this.initFromArray(n,e)}addBaseTextureAt(t,e){if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=vs.TEXTURE_2D_ARRAY}upload(t,e,i){const{length:s,itemDirtyIds:n,items:o}=this,{gl:a}=t;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,s,0,e.format,i.type,null);for(let l=0;l<s;l++){const u=o[l];n[l]<u.dirtyId&&(n[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,i.type,u.resource.source))}return!0}}class $A extends Wr{constructor(t){super(t)}static test(t){const{OffscreenCanvas:e}=globalThis;return e&&t instanceof e?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Av=class sn extends Sv{constructor(t,e){const{width:i,height:s,autoLoad:n,linkBaseTexture:o}=e||{};if(t&&t.length!==sn.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:i,height:s});for(let a=0;a<sn.SIDES;a++)this.items[a].target=vs.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,t&&this.initFromArray(t,e),n!==!1&&this.load()}bind(t){super.bind(t),t.target=vs.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=vs.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,i){const s=this.itemDirtyIds;for(let n=0;n<sn.SIDES;n++){const o=this.items[n];(s[n]<o.dirtyId||i.dirtyId<e.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(t,o,i),s[n]=o.dirtyId):s[n]<-1&&(t.gl.texImage2D(o.target,0,i.internalFormat,e.realWidth,e.realHeight,0,e.format,i.type,null),s[n]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===sn.SIDES}};Av.SIDES=6;let GA=Av;class ms extends Wr{constructor(t,e){e=e||{};let i,s,n;typeof t=="string"?(i=ms.EMPTY,s=t,n=!0):(i=t,s=null,n=!1),super(i),this.url=s,this.crossOrigin=e.crossOrigin??!0,this.alphaMode=typeof e.alphaMode=="number"?e.alphaMode:null,this.ownsImageBitmap=e.ownsImageBitmap??n,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,e)=>{if(this.url===null){t(this);return}try{const i=await ot.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const s=await i.blob();if(this.destroyed)return;const n=await createImageBitmap(s,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Re.UNPACK?"premultiply":"none"});if(this.destroyed){n.close();return}this.source=n,this.update(),t(this)}catch(i){if(this.destroyed)return;e(i),this.onError.emit(i)}}),this._load)}upload(t,e,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(e.alphaMode=this.alphaMode),super.upload(t,e,i)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return ms._EMPTY=ms._EMPTY??ot.ADAPTER.createCanvas(0,0),ms._EMPTY}}const pc=class zo extends Wr{constructor(t,e){e=e||{},super(ot.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},zo.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Wr.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,i=t.height;if(!e||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=e*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*e,n=this._overrideHeight||this._overrideWidth/e*i),s=Math.round(s),n=Math.round(n);const o=this.source;o.width=s,o.height=n,o._pixiId=`canvas_${Vi()}`,o.getContext("2d").drawImage(t,0,0,e,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(t){const e=zo.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&zo.SVG_XML.test(t)}};pc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,pc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let fc=pc;class HA extends Wr{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const mc=class gc extends Wr{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const i=document.createElement("video");e.autoLoad!==!1&&i.setAttribute("preload","auto"),e.playsinline!==!1&&(i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","")),e.muted===!0&&(i.setAttribute("muted",""),i.muted=!0),e.loop===!0&&i.setAttribute("loop",""),e.autoPlay!==!1&&i.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const s=t[0].src||t[0];Wr.crossOrigin(i,s,e.crossorigin);for(let n=0;n<t.length;++n){const o=document.createElement("source");let{src:a,mime:l}=t[n];if(a=a||t[n],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const u=a.split("?").shift().toLowerCase(),d=u.slice(u.lastIndexOf(".")+1);l=l||gc.MIME_TYPES[d]||`video/${d}`}o.src=a,l&&(o.type=l),i.appendChild(o)}t=i}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const e=Fe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((e,i)=>{this.valid?e(this):(this._resolve=e,this._reject=i,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!e&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Fe.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Fe.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Fe.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||gc.TYPES.includes(e)}};mc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],mc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Cv=mc;rc.push(ms,Qg,$A,Cv,HA,fc,Ha,GA,UA);class ha{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ct.EMPTY:(t=t||new Ct(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,e){const{a:i,b:s,c:n,d:o,tx:a,ty:l}=t,u=i*e.x+n*e.y+a,d=s*e.x+o*e.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,d),this.maxY=Math.max(this.maxY,d)}addQuad(t){let e=this.minX,i=this.minY,s=this.maxX,n=this.maxY,o=t[0],a=t[1];e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[2],a=t[3],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[4],a=t[5],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,o=t[6],a=t[7],e=o<e?o:e,i=a<i?a:i,s=o>s?o:s,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=s,this.maxY=n}addFrame(t,e,i,s,n){this.addFrameMatrix(t.worldTransform,e,i,s,n)}addFrameMatrix(t,e,i,s,n){const o=t.a,a=t.b,l=t.c,u=t.d,d=t.tx,f=t.ty;let m=this.minX,v=this.minY,y=this.maxX,b=this.maxY,w=o*e+l*i+d,E=a*e+u*i+f;m=w<m?w:m,v=E<v?E:v,y=w>y?w:y,b=E>b?E:b,w=o*s+l*i+d,E=a*s+u*i+f,m=w<m?w:m,v=E<v?E:v,y=w>y?w:y,b=E>b?E:b,w=o*e+l*n+d,E=a*e+u*n+f,m=w<m?w:m,v=E<v?E:v,y=w>y?w:y,b=E>b?E:b,w=o*s+l*n+d,E=a*s+u*n+f,m=w<m?w:m,v=E<v?E:v,y=w>y?w:y,b=E>b?E:b,this.minX=m,this.minY=v,this.maxX=y,this.maxY=b}addVertexData(t,e,i){let s=this.minX,n=this.minY,o=this.maxX,a=this.maxY;for(let l=e;l<i;l+=2){const u=t[l],d=t[l+1];s=u<s?u:s,n=d<n?d:n,o=u>o?u:o,a=d>a?d:a}this.minX=s,this.minY=n,this.maxX=o,this.maxY=a}addVertices(t,e,i,s){this.addVerticesMatrix(t.worldTransform,e,i,s)}addVerticesMatrix(t,e,i,s,n=0,o=n){const a=t.a,l=t.b,u=t.c,d=t.d,f=t.tx,m=t.ty;let v=this.minX,y=this.minY,b=this.maxX,w=this.maxY;for(let E=i;E<s;E+=2){const P=e[E],S=e[E+1],M=a*P+u*S+f,k=d*S+l*P+m;v=Math.min(v,M-n),b=Math.max(b,M+n),y=Math.min(y,k-o),w=Math.max(w,k+o)}this.minX=v,this.minY=y,this.maxX=b,this.maxY=w}addBounds(t){const e=this.minX,i=this.minY,s=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>s?t.maxX:s,this.maxY=t.maxY>n?t.maxY:n}addBoundsMask(t,e){const i=t.minX>e.minX?t.minX:e.minX,s=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&s<=o){const a=this.minX,l=this.minY,u=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=o>d?o:d}}addBoundsMatrix(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,e){const i=t.minX>e.x?t.minX:e.x,s=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&s<=o){const a=this.minX,l=this.minY,u=this.maxX,d=this.maxY;this.minX=i<a?i:a,this.minY=s<l?s:l,this.maxX=n>u?n:u,this.maxY=o>d?o:d}}pad(t=0,e=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)}addFramePad(t,e,i,s,n,o){t-=n,e-=o,i+=n,s+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>s?this.maxY:s}}class ie extends Nn{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new xu,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ha,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const e=Object.keys(t);for(let i=0;i<e.length;++i){const s=e[i];Object.defineProperty(ie.prototype,s,Object.getOwnPropertyDescriptor(t,s))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new Ct),e=this._boundsRect),this._bounds.getRectangle(e)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ct),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ha);const e=this.transform,i=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(i==null?void 0:i.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const s=this._bounds,n=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=s,this._bounds.updateID+=this._boundsID-n,o}toGlobal(t,e,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)}toLocal(t,e,i,s){return e&&(t=e.toGlobal(t,i,s)),s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,e=0,i=1,s=1,n=0,o=0,a=0,l=0,u=0){return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=s||1,this.rotation=n,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new zA),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*BS}set angle(t){this.transform.rotation=t*LS}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount--,e._maskRefCount===0&&(e.renderable=!0,e.isMask=!1))}if(this._mask=t,this._mask){const e=this._mask.isMaskData?this._mask.maskObject:this._mask;e&&(e._maskRefCount===0&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}}}}class zA extends ie{constructor(){super(...arguments),this.sortDirty=null}}ie.prototype.displayObjectUpdateTransform=ie.prototype.updateTransform;const jA=new Yt;function VA(r,t){return r.zIndex===t.zIndex?r._lastSortedIndex-t._lastSortedIndex:r.zIndex-t.zIndex}const Pv=class vc extends ie{constructor(){super(),this.children=[],this.sortableChildren=vc.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),s=this.getChildIndex(e);this.children[i]=e,this.children[s]=t,this.onChildrenChange(i<s?i:s)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(t);bs(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],i=this.children.indexOf(e);if(i===-1)return null;e.parent=null,e.transform._parentID=-1,bs(this.children,i,1),this._boundsID++,this.onChildrenChange(i),e.emit("removed",this),this.emit("childRemoved",e,this,i)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,bs(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const i=t,s=e,n=s-i;let o;if(n>0&&n<=s){o=this.children.splice(i,n);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,i=this.children.length;e<i;++e){const s=this.children[e];s._lastSortedIndex=e,!t&&s.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(VA),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const i=this.children[t];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const i=super.getLocalBounds(t);if(!e)for(let s=0,n=this.children.length;s<n;++s){const o=this.children[s];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==vc.prototype._render&&(i=this.getBounds(!0));const n=t.projection.transform;if(n&&(s?(s=jA.copyFrom(s),s.prepend(n)):s=n),i&&e.intersects(i,s))this._render(t);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(t),l.cullable=u}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,s=this.children.length;i<s;++i)this.children[i].render(t)}}renderAdvanced(t){var n,o,a;const e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<e.length;l++)e[l].enabled&&this._enabledFilters.push(e[l])}const s=e&&((n=this._enabledFilters)==null?void 0:n.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==de.NONE));if(s&&t.batch.flush(),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let l=0,u=this.children.length;l<u;++l)this.children[l].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),e&&((a=this._enabledFilters)!=null&&a.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,i=this.removeChildren(0,this.children.length);if(e)for(let s=0;s<i.length;++s)i[s].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};Pv.defaultSortableChildren=!1;let or=Pv;or.prototype.containerUpdateTransform=or.prototype.updateTransform;Object.defineProperties(ot,{SORTABLE_CHILDREN:{get(){return or.defaultSortableChildren},set(r){kt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),or.defaultSortableChildren=r}}});const Qs=new Lt,WA=new Uint16Array([0,1,2,0,2,3]);class Ds extends or{constructor(t){super(),this._anchor=new Ur(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Xt(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=_t.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||dt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=WA,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ot.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=hi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=hi(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const e=this.transform.worldTransform,i=e.a,s=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,u=this.vertexData,d=t.trim,f=t.orig,m=this._anchor;let v=0,y=0,b=0,w=0;if(d?(y=d.x-m._x*f.width,v=y+d.width,w=d.y-m._y*f.height,b=w+d.height):(y=-m._x*f.width,v=y+f.width,w=-m._y*f.height,b=w+f.height),u[0]=i*y+n*w+a,u[1]=o*w+s*y+l,u[2]=i*v+n*w+a,u[3]=o*w+s*v+l,u[4]=i*v+n*b+a,u[5]=o*b+s*v+l,u[6]=i*y+n*b+a,u[7]=o*b+s*y+l,this._roundPixels){const E=ot.RESOLUTION;for(let P=0;P<u.length;++P)u[P]=Math.round(u[P]*E)/E}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,e=this.vertexTrimmedData,i=t.orig,s=this._anchor,n=this.transform.worldTransform,o=n.a,a=n.b,l=n.c,u=n.d,d=n.tx,f=n.ty,m=-s._x*i.width,v=m+i.width,y=-s._y*i.height,b=y+i.height;if(e[0]=o*m+l*y+d,e[1]=u*y+a*m+f,e[2]=o*v+l*y+d,e[3]=u*y+a*v+f,e[4]=o*v+l*b+d,e[5]=u*b+a*v+f,e[6]=o*m+l*b+d,e[7]=u*b+a*m+f,this._roundPixels){const w=ot.RESOLUTION;for(let E=0;E<e.length;++E)e[E]=Math.round(e[E]*w)/w}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new ha),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ct),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Qs);const e=this._texture.orig.width,i=this._texture.orig.height,s=-e*this.anchor.x;let n=0;return Qs.x>=s&&Qs.x<s+e&&(n=-i*this.anchor.y,Qs.y>=n&&Qs.y<n+i)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const e=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!e)}this._texture=null}static from(t,e){const i=t instanceof dt?t:dt.from(t,e);return new Ds(i)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const e=hi(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const e=hi(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||dt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Iv=new Yt;ie.prototype._cacheAsBitmap=!1;ie.prototype._cacheData=null;ie.prototype._cacheAsBitmapResolution=null;ie.prototype._cacheAsBitmapMultisample=null;class XA{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ie.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let t;r?(this._cacheData||(this._cacheData=new XA),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});ie.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};ie.prototype._initCachedDisplayObject=function(r){var m,v;if((m=this._cacheData)!=null&&m.sprite)return;const t=this.alpha;this.alpha=1,r.batch.flush();const e=this.getLocalBounds(new Ct,!0);if((v=this.filters)!=null&&v.length){const y=this.filters[0].padding;e.pad(y)}const i=this.cacheAsBitmapResolution||r.resolution;e.ceil(i),e.width=Math.max(e.width,1/i),e.height=Math.max(e.height,1/i);const s=r.renderTexture.current,n=r.renderTexture.sourceFrame.clone(),o=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=Zi.create({width:e.width,height:e.height,resolution:i,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${Vi()}`;this._cacheData.textureCacheId=u,Et.addToCache(l.baseTexture,u),dt.addToCache(l,u);const d=this.transform.localTransform.copyTo(Iv).invert().translate(-e.x,-e.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:d,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(s,n,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const f=new Ds(l);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-(e.x/e.width),f.anchor.y=-(e.y/e.height),f.alpha=t,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=f.containsPoint.bind(f)};ie.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};ie.prototype._initCachedDisplayObjectCanvas=function(r){var d;if((d=this._cacheData)!=null&&d.sprite)return;const t=this.getLocalBounds(new Ct,!0),e=this.alpha;this.alpha=1;const i=r.canvasContext.activeContext,s=r._projTransform,n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);const o=Zi.create({width:t.width,height:t.height,resolution:n}),a=`cacheAsBitmap_${Vi()}`;this._cacheData.textureCacheId=a,Et.addToCache(o.baseTexture,a),dt.addToCache(o,a);const l=Iv;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=i,r._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const u=new Ds(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=e,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};ie.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ie.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ie.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Et.removeFromCache(this._cacheData.textureCacheId),dt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ie.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};ie.prototype.name=null;or.prototype.getChildByName=function(r,t){for(let e=0,i=this.children.length;e<i;e++)if(this.children[e].name===r)return this.children[e];if(t)for(let e=0,i=this.children.length;e<i;e++){const s=this.children[e];if(!s.getChildByName)continue;const n=s.getChildByName(r,!0);if(n)return n}return null};ie.prototype.getGlobalPosition=function(r=new Lt,t=!1){return this.parent?this.parent.toGlobal(this.position,r,t):(r.x=this.position.x,r.y=this.position.y),r};var YA=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class qA extends Ce{constructor(t=1){super(FA,YA,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const KA={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ZA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function QA(r){const t=KA[r],e=t.length;let i=ZA,s="";const n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<r;a++){let l=n.replace("%index%",a.toString());o=a,a>=e&&(o=r-a-1),l=l.replace("%value%",t[o].toString()),s+=l,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}const JA=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function tC(r,t){const e=Math.ceil(r/2);let i=JA,s="",n;t?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<r;o++){let a=n.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(e-1)}.0`),s+=a,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",r.toString()),i}class yc extends Ce{constructor(t,e=8,i=4,s=Ce.defaultResolution,n=5){const o=tC(n,t),a=QA(n);super(o,a),this.horizontal=t,this.resolution=s,this._quality=0,this.quality=i,this.blur=e}apply(t,e,i,s){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,e,i,s);else{const n=t.getFilterTexture(),o=t.renderer;let a=e,l=n;this.state.blend=!1,t.applyFilter(this,a,l,vr.CLEAR);for(let u=1;u<this.passes-1;u++){t.bindAndClear(a,vr.BLIT),this.uniforms.uSampler=l;const d=l;l=a,a=d,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,i,s),t.returnFilterTexture(n)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class eC extends Ce{constructor(t=8,e=4,i=Ce.defaultResolution,s=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new yc(!0,t,e,i,s),this.blurYFilter=new yc(!1,t,e,i,s),this.resolution=i,this.quality=e,this.blur=t,this.repeatEdgePixels=!1}apply(t,e,i,s){const n=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(n&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,e,a,vr.CLEAR),this.blurYFilter.apply(t,a,i,s),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,e,i,s):this.blurXFilter.apply(t,e,i,s)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var rC=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class _c extends Ce{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(xv,rC,t),this.alpha=1}_loadMatrix(t,e=!1){let i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t}_colorMatrix(t){const e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e}brightness(t,e){const i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}tint(t,e){const[i,s,n]=Xt.shared.setValue(t).toArray(),o=[i,0,0,0,0,0,s,0,0,0,0,0,n,0,0,0,0,0,1,0];this._loadMatrix(o,e)}greyscale(t,e){const i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)}blackAndWhite(t){const e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)}hue(t,e){t=(t||0)/180*Math.PI;const i=Math.cos(t),s=Math.sin(t),n=Math.sqrt,o=1/3,a=n(o),l=i+(1-i)*o,u=o*(1-i)-a*s,d=o*(1-i)+a*s,f=o*(1-i)+a*s,m=i+o*(1-i),v=o*(1-i)-a*s,y=o*(1-i)-a*s,b=o*(1-i)+a*s,w=i+o*(1-i),E=[l,u,d,0,0,f,m,v,0,0,y,b,w,0,0,0,0,0,1,0];this._loadMatrix(E,e)}contrast(t,e){const i=(t||0)+1,s=-.5*(i-1),n=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(n,e)}saturate(t=0,e){const i=t*2/3+1,s=(i-1)*-.5,n=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)}desaturate(){this.saturate(-1)}negative(t){const e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)}sepia(t){const e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)}technicolor(t){const e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)}polaroid(t){const e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)}toBGR(t){const e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)}kodachrome(t){const e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)}browni(t){const e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)}vintage(t){const e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)}colorTone(t,e,i,s,n){t=t||.2,e=e||.15,i=i||16770432,s=s||3375104;const o=Xt.shared,[a,l,u]=o.setValue(i).toArray(),[d,f,m]=o.setValue(s).toArray(),v=[.3,.59,.11,0,0,a,l,u,t,0,d,f,m,e,0,a-d,l-f,u-m,0,0];this._loadMatrix(v,n)}night(t,e){t=t||.1;const i=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(i,e)}predator(t,e){const i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)}lsd(t){const e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}_c.prototype.grayscale=_c.prototype.greyscale;var iC=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,sC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class nC extends Ce{constructor(t,e){const i=new Yt;t.renderable=!1,super(sC,iC,{mapSampler:t._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=i,e==null&&(e=20),this.scale=new Lt(e,e)}apply(t,e,i,s){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const n=this.maskSprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),a=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=n.a/o,this.uniforms.rotation[1]=n.b/o,this.uniforms.rotation[2]=n.c/a,this.uniforms.rotation[3]=n.d/a),t.applyFilter(this,e,i,s)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var oC=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,aC=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class lC extends Ce{constructor(){super(aC,oC)}}var hC=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class cC extends Ce{constructor(t=.5,e=Math.random()){super(xv,hC,{uNoise:0,uSeed:0}),this.noise=t,this.seed=e}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const nf={AlphaFilter:qA,BlurFilter:eC,BlurFilterPass:yc,ColorMatrixFilter:_c,DisplacementFilter:nC,FXAAFilter:lC,NoiseFilter:cC};Object.entries(nf).forEach(([r,t])=>{Object.defineProperty(nf,r,{get(){return kt("7.1.0",`filters.${r} has moved to ${r}`),t}})});class uC{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(Fe.system.add(this.tickerUpdate,this,Wi.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Fe.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const ai=new uC;class Hn{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Hn.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Lt,this.page=new Lt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,e,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,e,i,s,n){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class ca extends Hn{constructor(){super(...arguments),this.client=new Lt,this.movement=new Lt,this.offset=new Lt,this.global=new Lt,this.screen=new Lt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,e,i,s,n,o,a,l,u,d,f,m,v,y,b){throw new Error("Method not implemented.")}}class Ke extends ca{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ws extends ca{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ws.DOM_DELTA_PIXEL=0,ws.DOM_DELTA_LINE=1,ws.DOM_DELTA_PAGE=2;const dC=2048,pC=new Lt,dh=new Lt;class fC{constructor(t){this.dispatch=new Nn,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,e){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:e,priority:0}),this.mappingTable[t].sort((i,s)=>i.priority-s.priority)}dispatchEvent(t,e){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,e),this.dispatch.emit(e||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const e=this.mappingTable[t.type];if(e)for(let i=0,s=e.length;i<s;i++)e[i].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,e){ai.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,pC.set(t,e),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(t,e){if(!t.target)return;const i=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let s=0,n=i.length-1;s<n;s++)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,e),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(t.currentTarget=i[s],this.notifyTarget(t,e),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,e,i=this._allInteractiveElements){if(i.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const s=Array.isArray(e)?e:[e];for(let n=i.length-1;n>=0;n--)s.forEach(o=>{t.currentTarget=i[n],this.notifyTarget(t,o)})}propagationPath(t){const e=[t];for(let i=0;i<dC&&t!==this.rootTarget;i++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");e.push(t.parent),t=t.parent}return e.reverse(),e}hitTestMoveRecursive(t,e,i,s,n,o=!1){let a=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(ai.pauseUpdate=!1),t.interactiveChildren&&t.children){const d=t.children;for(let f=d.length-1;f>=0;f--){const m=d[f],v=this.hitTestMoveRecursive(m,this._isInteractive(e)?e:m.eventMode,i,s,n,o||n(t,i));if(v){if(v.length>0&&!v[v.length-1].parent)continue;const y=t.isInteractive();(v.length>0||y)&&(y&&this._allInteractiveElements.push(t),v.push(t)),this._hitElements.length===0&&(this._hitElements=v),a=!0}}}const l=this._isInteractive(e),u=t.isInteractive();return l&&u&&this._allInteractiveElements.push(t),o||this._hitElements.length>0?null:a?this._hitElements:l&&!n(t,i)&&s(t,i)?u?[t]:[]:null}hitTestRecursive(t,e,i,s,n){if(this._interactivePrune(t)||n(t,i))return null;if((t.eventMode==="dynamic"||e==="dynamic")&&(ai.pauseUpdate=!1),t.interactiveChildren&&t.children){const l=t.children;for(let u=l.length-1;u>=0;u--){const d=l[u],f=this.hitTestRecursive(d,this._isInteractive(e)?e:d.eventMode,i,s,n);if(f){if(f.length>0&&!f[f.length-1].parent)continue;const m=t.isInteractive();return(f.length>0||m)&&f.push(t),f}}}const o=this._isInteractive(e),a=t.isInteractive();return o&&s(t,i)?a?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,e){var i;if(t.hitArea&&(t.worldTransform.applyInverse(e,dh),!t.hitArea.contains(dh.x,dh.y)))return!0;if(t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!((i=s.containsPoint)!=null&&i.call(s,e)))return!0}return!1}hitTestFn(t,e){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(e):!1}notifyTarget(t,e){var n,o;e=e??t.type;const i=`on${e}`;(o=(n=t.currentTarget)[i])==null||o.call(n,t);const s=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${e}capture`:e;this.notifyListeners(t,s),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,e)}mapPointerDown(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.createPointerEvent(t);if(this.dispatchEvent(e,"pointerdown"),e.pointerType==="touch")this.dispatchEvent(e,"touchstart");else if(e.pointerType==="mouse"||e.pointerType==="pen"){const s=e.button===2;this.dispatchEvent(e,s?"rightdown":"mousedown")}const i=this.trackingData(t.pointerId);i.pressTargetsByButton[t.button]=e.composedPath(),this.freeEvent(e)}mapPointerMove(t){var l,u;if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const e=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.overTargets);if(((l=s.overTargets)==null?void 0:l.length)>0&&n!==e.target){const d=t.type==="mousemove"?"mouseout":"pointerout",f=this.createPointerEvent(t,d,n);if(this.dispatchEvent(f,"pointerout"),i&&this.dispatchEvent(f,"mouseout"),!e.composedPath().includes(n)){const m=this.createPointerEvent(t,"pointerleave",n);for(m.eventPhase=m.AT_TARGET;m.target&&!e.composedPath().includes(m.target);)m.currentTarget=m.target,this.notifyTarget(m),i&&this.notifyTarget(m,"mouseleave"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(f)}if(n!==e.target){const d=t.type==="mousemove"?"mouseover":"pointerover",f=this.clonePointerEvent(e,d);this.dispatchEvent(f,"pointerover"),i&&this.dispatchEvent(f,"mouseover");let m=n==null?void 0:n.parent;for(;m&&m!==this.rootTarget.parent&&m!==e.target;)m=m.parent;if(!m||m===this.rootTarget.parent){const v=this.clonePointerEvent(e,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==n&&v.target!==this.rootTarget.parent;)v.currentTarget=v.target,this.notifyTarget(v),i&&this.notifyTarget(v,"mouseenter"),v.target=v.target.parent;this.freeEvent(v)}this.freeEvent(f)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(e,"pointermove"),a&&o.push("globalpointermove"),e.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(e,"touchmove"),a&&o.push("globaltouchmove")),i&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(e,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=e.target)==null?void 0:u.cursor),o.length>0&&this.all(e,o),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=e.composedPath(),this.freeEvent(e)}mapPointerOver(t){var o;if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.createPointerEvent(t),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const n=this.clonePointerEvent(i,"pointerenter");for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),s&&this.notifyTarget(n,"mouseenter"),n.target=n.target.parent;e.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(n)}mapPointerOut(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId);if(e.overTargets){const i=t.pointerType==="mouse"||t.pointerType==="pen",s=this.findMountedTarget(e.overTargets),n=this.createPointerEvent(t,"pointerout",s);this.dispatchEvent(n),i&&this.dispatchEvent(n,"mouseout");const o=this.createPointerEvent(t,"pointerleave",s);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;e.overTargets=null,this.freeEvent(n),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=performance.now(),i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const s=this.trackingData(t.pointerId),n=this.findMountedTarget(s.pressTargetsByButton[t.button]);let o=n;if(n&&!i.composedPath().includes(n)){let a=n;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete s.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,s.clicksByButton[t.button]||(s.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:e});const l=s.clicksByButton[t.button];if(l.target===a.target&&e-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=e,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(t){if(!(t instanceof Ke)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const e=this.trackingData(t.pointerId),i=this.findMountedTarget(e.pressTargetsByButton[t.button]),s=this.createPointerEvent(t);if(i){let n=i;for(;n;)s.currentTarget=n,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),n=n.parent;delete e.pressTargetsByButton[t.button]}this.freeEvent(s)}mapWheel(t){if(!(t instanceof ws)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const e=this.createWheelEvent(t);this.dispatchEvent(e),this.freeEvent(e)}findMountedTarget(t){if(!t)return null;let e=t[0];for(let i=1;i<t.length&&t[i].parent===e;i++)e=t[i];return e}createPointerEvent(t,e,i){const s=this.allocateEvent(Ke);return this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.nativeEvent=t.nativeEvent,s.originalEvent=t,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof e=="string"&&(s.type=e),s}createWheelEvent(t){const e=this.allocateEvent(ws);return this.copyWheelData(t,e),this.copyMouseData(t,e),this.copyData(t,e),e.nativeEvent=t.nativeEvent,e.originalEvent=t,e.target=this.hitTest(e.global.x,e.global.y),e}clonePointerEvent(t,e){const i=this.allocateEvent(Ke);return i.nativeEvent=t.nativeEvent,i.originalEvent=t.originalEvent,this.copyPointerData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.target=t.target,i.path=t.composedPath().slice(),i.type=e??i.type,i}copyWheelData(t,e){e.deltaMode=t.deltaMode,e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ}copyPointerData(t,e){t instanceof Ke&&e instanceof Ke&&(e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist)}copyMouseData(t,e){t instanceof ca&&e instanceof ca&&(e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.copyFrom(t.client),e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.copyFrom(t.movement),e.screen.copyFrom(t.screen),e.shiftKey=t.shiftKey,e.global.copyFrom(t.global))}copyData(t,e){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.detail=t.detail,e.view=t.view,e.which=t.which,e.layer.copyFrom(t.layer),e.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const e=this.eventPool.get(t).pop()||new t(this);return e.eventPhase=e.NONE,e.currentTarget=null,e.path=null,e.target=null,e}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const e=t.constructor;this.eventPool.has(e)||this.eventPool.set(e,[]),this.eventPool.get(e).push(t)}notifyListeners(t,e){const i=t.currentTarget._events[e];if(i&&t.currentTarget.isInteractive())if("fn"in i)i.once&&t.currentTarget.removeListener(e,i.fn,void 0,!0),i.fn.call(i.context,t);else for(let s=0,n=i.length;s<n&&!t.propagationImmediatelyStopped;s++)i[s].once&&t.currentTarget.removeListener(e,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,t)}}const mC=1,gC={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},bc=class xc{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new fC(null),ai.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ke(null),this.rootWheelEvent=new ws(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...xc.defaultEventFeatures},{set:(e,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),e[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:i}=this.renderer;this.setTargetElement(e),this.resolution=i,xc._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.domElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.domElement.style,i);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let i=0,s=e.length;i<s;i++){const n=e[i],o=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ai.pointerMoved();const e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const i=e!==this.domElement?"outside":"",s=this.normalizeToPointerData(t);for(let n=0,o=s.length;n<o;n++){const a=this.bootstrapEvent(this.rootPointerEvent,s[n]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const e=this.normalizeToPointerData(t);for(let i=0,s=e.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,e[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,ai.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;ai.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;ai.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},n=1/this.resolution;t.x=(e-s.left)*(this.domElement.width/s.width)*n,t.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let i=0,s=t.changedTouches.length;i<s;i++){const n=t.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=t.type,e.push(n)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const i=t;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=mC),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,e.push(i)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=gC[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};bc.extension={name:"events",type:[rt.RendererSystem,rt.CanvasRendererSystem]},bc.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let wc=bc;pt.add(wc);function of(r){return r==="dynamic"||r==="static"}const vC={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??of(wc.defaultEventMode)},set interactive(r){kt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??wc.defaultEventMode},set eventMode(r){this._internalInteractive=of(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof e=="object"?e.signal:void 0,n=typeof e=="object"?e.once===!0:!1,o=typeof t=="function"?void 0:t;r=i?`${r}capture`:r;const a=typeof t=="function"?t:t.handleEvent,l=this;s&&s.addEventListener("abort",()=>{l.off(r,a,o)}),n?l.once(r,a,o):l.on(r,a,o)},removeEventListener(r,t,e){const i=typeof e=="boolean"&&e||typeof e=="object"&&e.capture,s=typeof t=="function"?void 0:t;r=i?`${r}capture`:r,t=typeof t=="function"?t:t.handleEvent,this.off(r,t,s)},dispatchEvent(r){if(!(r instanceof Hn))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};ie.mixin(vC);const yC={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ie.mixin(yC);const _C=9,To=100,bC=0,xC=0,af=2,lf=1,wC=-1e3,TC=-1e3,EC=2;class Rv{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Nr.tablet||Nr.phone)&&this.createTouchHook();const e=document.createElement("div");e.style.width=`${To}px`,e.style.height=`${To}px`,e.style.position="absolute",e.style.top=`${bC}px`,e.style.left=`${xC}px`,e.style.zIndex=af.toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${lf}px`,t.style.height=`${lf}px`,t.style.position="absolute",t.style.top=`${wC}px`,t.style.left=`${TC}px`,t.style.zIndex=EC.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const e=t.children;if(e)for(let i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}update(){const t=performance.now();if(Nr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:e,y:i,width:s,height:n}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=s/o*l,d=n/a*l;let f=this.div;f.style.left=`${e}px`,f.style.top=`${i}px`,f.style.width=`${o}px`,f.style.height=`${a}px`;for(let m=0;m<this.children.length;m++){const v=this.children[m];if(v.renderId!==this.renderId)v._accessibleActive=!1,bs(this.children,m,1),this.div.removeChild(v._accessibleDiv),this.pool.push(v._accessibleDiv),v._accessibleDiv=null,m--;else{f=v._accessibleDiv;let y=v.hitArea;const b=v.worldTransform;v.hitArea?(f.style.left=`${(b.tx+y.x*b.a)*u}px`,f.style.top=`${(b.ty+y.y*b.d)*d}px`,f.style.width=`${y.width*b.a*u}px`,f.style.height=`${y.height*b.d*d}px`):(y=v.getBounds(),this.capHitArea(y),f.style.left=`${y.x*u}px`,f.style.top=`${y.y*d}px`,f.style.width=`${y.width*u}px`,f.style.height=`${y.height*d}px`,f.title!==v.accessibleTitle&&v.accessibleTitle!==null&&(f.title=v.accessibleTitle),f.getAttribute("aria-label")!==v.accessibleHint&&v.accessibleHint!==null&&f.setAttribute("aria-label",v.accessibleHint)),(v.accessibleTitle!==f.title||v.tabIndex!==f.tabIndex)&&(f.title=v.accessibleTitle,f.tabIndex=v.tabIndex,this.debug&&this.updateDebugHTML(f))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:e,height:i}=this.renderer;t.x+t.width>e&&(t.width=e-t.x),t.y+t.height>i&&(t.height=i-t.y)}addChild(t){let e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=`${To}px`,e.style.height=`${To}px`,e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=af.toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?e.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(e.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,e){const{displayObject:i}=t.target,s=this.renderer.events.rootBoundary,n=Object.assign(new Hn(s),{target:i});s.rootTarget=this.renderer.lastObjectRendered,e.forEach(o=>s.dispatchEvent(n,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===_C&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Rv.extension={name:"accessibility",type:[rt.RendererPlugin,rt.CanvasRendererPlugin]};pt.add(Rv);const Mv=class Tc{constructor(t){this.stage=new or,t=Object.assign({forceCanvas:!1},t),this.renderer=OA(t),Tc._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){var t;return(t=this.renderer)==null?void 0:t.view}get screen(){var t;return(t=this.renderer)==null?void 0:t.screen}destroy(t,e){const i=Tc._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Mv._plugins=[];let SC=Mv;pt.handleByList(rt.Application,SC._plugins);class kv{static init(t){Object.defineProperty(this,"resizeTo",{set(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let e,i;if(this._resizeTo===globalThis.window)e=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:n}=this._resizeTo;e=s,i=n}this.renderer.resize(e,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}kv.extension=rt.Application;pt.add(kv);const hf={loader:rt.LoadParser,resolver:rt.ResolveParser,cache:rt.CacheParser,detection:rt.DetectionParser};pt.handle(rt.Asset,r=>{const t=r.ref;Object.entries(hf).filter(([e])=>!!t[e]).forEach(([e,i])=>pt.add(Object.assign(t[e],{extension:t[e].extension??i})))},r=>{const t=r.ref;Object.keys(hf).filter(e=>!!t[e]).forEach(e=>pt.remove(t[e]))});class AC{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(e=>{this._assetList.push(e)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Os(r,t){if(Array.isArray(t)){for(const e of t)if(r.startsWith(`data:${e}`))return!0;return!1}return r.startsWith(`data:${t}`)}function xi(r,t){const e=r.split("?")[0],i=ye.extname(e).toLowerCase();return Array.isArray(t)?t.includes(i):i===t}const Ze=(r,t,e=!1)=>(Array.isArray(r)||(r=[r]),t?r.map(i=>typeof i=="string"||e?t(i):i):r),Ec=(r,t)=>{const e=t.split("?")[1];return e&&(r+=`?${e}`),r};function Dv(r,t,e,i,s){const n=t[e];for(let o=0;o<n.length;o++){const a=n[o];e<t.length-1?Dv(r.replace(i[e],a),t,e+1,i,s):s.push(r.replace(i[e],a))}}function CC(r){const t=/\{(.*?)\}/g,e=r.match(t),i=[];if(e){const s=[];e.forEach(n=>{const o=n.substring(1,n.length-1).split(",");s.push(o)}),Dv(r,s,0,e,i)}else i.push(r);return i}const ua=r=>!Array.isArray(r);class PC{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=Ze(t);let s;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(e)){s=l.getCacheableAssets(i,e);break}}s||(s={},i.forEach(a=>{s[a]=e}));const n=Object.keys(s),o={cacheKeys:n,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),n.forEach(a=>{const l=s?s[a]:e;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,s[a])}),e instanceof dt){const a=e;i.forEach(l=>{a.baseTexture!==dt.EMPTY.baseTexture&&Et.addToCache(a.baseTexture,l),dt.addToCache(a,l)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const e=this._cacheMap.get(t);e.cacheKeys.forEach(i=>{this._cache.delete(i)}),e.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const Li=new PC;class IC{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{var o,a;let s=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||console.warn(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,t,e,this))){n=u;break}}if(!n)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await n.load(t,e,this),i.parser=n;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,s,e,this))&&(s=await u.parse(s,e,this)||s,i.parser=u)}return s})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const s={},n=ua(t),o=Ze(t,u=>({alias:[u],src:u})),a=o.length,l=o.map(async u=>{const d=ye.toAbsolute(u.src);if(!s[u.src])try{this.promiseCache[d]||(this.promiseCache[d]=this._getLoadPromiseAndParser(d,u)),s[u.src]=await this.promiseCache[d].promise,e&&e(++i/a)}catch(f){throw delete this.promiseCache[d],delete s[u.src],new Error(`[Loader.load] Failed to load ${d}.
${f}`)}});return await Promise.all(l),n?s[o[0].src]:s}async unload(t){const e=Ze(t,i=>({alias:[i],src:i})).map(async i=>{var o,a;const s=ye.toAbsolute(i.src),n=this.promiseCache[s];if(n){const l=await n.promise;delete this.promiseCache[s],(a=(o=n.parser)==null?void 0:o.unload)==null||a.call(o,l,i,this)}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(t[e.name]&&console.warn(`[Assets] loadParser name conflict "${e.name}"`),{...t,[e.name]:e}),{})}}var lr=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(lr||{});const RC=".json",MC="application/json",kC={extension:{type:rt.LoadParser,priority:lr.Low},name:"loadJson",test(r){return Os(r,MC)||xi(r,RC)},async load(r){return await(await ot.ADAPTER.fetch(r)).json()}};pt.add(kC);const DC=".txt",OC="text/plain",BC={name:"loadTxt",extension:{type:rt.LoadParser,priority:lr.Low},test(r){return Os(r,OC)||xi(r,DC)},async load(r){return await(await ot.ADAPTER.fetch(r)).text()}};pt.add(BC);const LC=["normal","bold","100","200","300","400","500","600","700","800","900"],FC=[".ttf",".otf",".woff",".woff2"],NC=["font/ttf","font/otf","font/woff","font/woff2"],UC=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function $C(r){const t=ye.extname(r),e=ye.basename(r,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(n=>n.charAt(0).toUpperCase()+n.slice(1));let i=e.length>0;for(const n of e)if(!n.match(UC)){i=!1;break}let s=e.join(" ");return i||(s=`"${s.replace(/[\\"]/g,"\\$&")}"`),s}const GC=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function HC(r){return GC.test(r)?r:encodeURI(r)}const zC={extension:{type:rt.LoadParser,priority:lr.Low},name:"loadWebFont",test(r){return Os(r,NC)||xi(r,FC)},async load(r,t){var i,s,n;const e=ot.ADAPTER.getFontFaceSet();if(e){const o=[],a=((i=t.data)==null?void 0:i.family)??$C(r),l=((n=(s=t.data)==null?void 0:s.weights)==null?void 0:n.filter(d=>LC.includes(d)))??["normal"],u=t.data??{};for(let d=0;d<l.length;d++){const f=l[d],m=new FontFace(a,`url(${HC(r)})`,{...u,weight:f});await m.load(),e.add(m),o.push(m)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(r){(Array.isArray(r)?r:[r]).forEach(t=>ot.ADAPTER.getFontFaceSet().delete(t))}};pt.add(zC);const jC=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let Ts=null,Sc=class{constructor(){Ts||(Ts=URL.createObjectURL(new Blob([jC],{type:"application/javascript"}))),this.worker=new Worker(Ts)}};Sc.revokeObjectURL=function(){Ts&&(URL.revokeObjectURL(Ts),Ts=null)};const VC=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Es=null;class Ov{constructor(){Es||(Es=URL.createObjectURL(new Blob([VC],{type:"application/javascript"}))),this.worker=new Worker(Es)}}Ov.revokeObjectURL=function(){Es&&(URL.revokeObjectURL(Es),Es=null)};let cf=0,ph;class WC{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new Sc;e.addEventListener("message",i=>{e.terminate(),Sc.revokeObjectURL(),t(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){ph===void 0&&(ph=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<ph&&(this._createdWorkers++,t=new Ov().worker,t.addEventListener("message",e=>{this.complete(e.data),this.returnWorker(e.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((s,n)=>{this.queue.push({id:t,arguments:e,resolve:s,reject:n})});return this.next(),i}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const e=this.queue.pop(),i=e.id;this.resolveHash[cf]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:cf++,id:i})}}const uf=new WC;function zn(r,t,e){r.resource.internal=!0;const i=new dt(r),s=()=>{delete t.promiseCache[e],Li.has(e)&&Li.remove(e)};return i.baseTexture.once("destroyed",()=>{e in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),s())}),i.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const XC=[".jpeg",".jpg",".png",".webp",".avif"],YC=["image/jpeg","image/png","image/webp","image/avif"];async function qC(r){const t=await ot.ADAPTER.fetch(r);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${t.status} ${t.statusText}`);const e=await t.blob();return await createImageBitmap(e)}const Xa={name:"loadTextures",extension:{type:rt.LoadParser,priority:lr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return Os(r,YC)||xi(r,XC)},async load(r,t,e){var a;const i=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let s;i?this.config.preferWorkers&&await uf.isImageBitmapSupported()?s=await uf.loadImageBitmap(r):s=await qC(r):s=await new Promise((l,u)=>{const d=new Image;d.crossOrigin=this.config.crossOrigin,d.src=r,d.complete?l(d):(d.onload=()=>l(d),d.onerror=f=>u(f))});const n={...t.data};n.resolution??(n.resolution=Vr(r)),i&&((a=n.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(n.resourceOptions={...n.resourceOptions},n.resourceOptions.ownsImageBitmap=!0);const o=new Et(s,n);return o.resource.src=r,zn(o,e,r)},unload(r){r.destroy(!0)}};pt.add(Xa);const KC=".svg",ZC="image/svg+xml",QC={extension:{type:rt.LoadParser,priority:lr.High},name:"loadSVG",test(r){return Os(r,ZC)||xi(r,KC)},async testParse(r){return fc.test(r)},async parse(r,t,e){var n;const i=new fc(r,(n=t==null?void 0:t.data)==null?void 0:n.resourceOptions);await i.load();const s=new Et(i,{resolution:Vr(r),...t==null?void 0:t.data});return s.resource.src=t.src,zn(s,e,t.src)},async load(r,t){return(await ot.ADAPTER.fetch(r)).text()},unload:Xa.unload};pt.add(QC);const JC=[".mp4",".m4v",".webm",".ogv"],tP=["video/mp4","video/webm","video/ogg"],eP={name:"loadVideo",extension:{type:rt.LoadParser,priority:lr.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return Os(r,tP)||xi(r,JC)},async load(r,t,e){var o;let i;const s=await(await ot.ADAPTER.fetch(r)).blob(),n=URL.createObjectURL(s);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new Cv(n,a);await l.load();const u=new Et(l,{alphaMode:await oS(),resolution:Vr(r),...t==null?void 0:t.data});u.resource.src=r,i=zn(u,e,r),i.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(n)})}catch(a){throw URL.revokeObjectURL(n),a}return i},unload(r){r.destroy(!0)}};pt.add(eP);class rP{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(e=>{this._preferredOrder.push(e),e.priority||(e.priority=Object.keys(e.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`).join("&")}}getAlias(t){const{alias:e,name:i,src:s,srcs:n}=t;return Ze(e||i||s||n,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(e=>{this.addBundle(e.name,e.assets)})}addBundle(t,e){const i=[];Array.isArray(e)?e.forEach(s=>{const n=s.src??s.srcs,o=s.alias??s.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(t,o);i.push(l),a=[o,l]}else{const l=o.map(u=>this._createBundleAssetId(t,u));i.push(...l),a=[...o,...l]}this.add({...s,alias:a,src:n})}):Object.keys(e).forEach(s=>{const n=[s,this._createBundleAssetId(t,s)];if(typeof e[s]=="string")this.add({alias:n,src:e[s]});else if(Array.isArray(e[s]))this.add({alias:n,src:e[s]});else{const o=e[s],a=o.src??o.srcs;this.add({...o,alias:n,src:Array.isArray(a)?a:[a]})}i.push(...n)}),this._bundles[t]=i}add(t,e,i,s,n){const o=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(kt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:t,src:e,data:i,format:s,loadParser:n})):Array.isArray(t)?o.push(...t):o.push(t);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},Ze(o).forEach(l=>{const{src:u,srcs:d}=l;let{data:f,format:m,loadParser:v}=l;const y=Ze(u||d).map(E=>typeof E=="string"?CC(E):Array.isArray(E)?E:[E]),b=this.getAlias(l);Array.isArray(b)?b.forEach(a):a(b);const w=[];y.forEach(E=>{E.forEach(P=>{let S={};if(typeof P!="object"){S.src=P;for(let M=0;M<this._parsers.length;M++){const k=this._parsers[M];if(k.test(P)){S=k.parse(P);break}}}else f=P.data??f,m=P.format??m,v=P.loadParser??v,S={...S,...P};if(!b)throw new Error(`[Resolver] alias is undefined for this asset: ${S.src}`);S=this.buildResolvedAsset(S,{aliases:b,data:f,format:m,loadParser:v}),w.push(S)})}),b.forEach(E=>{this._assetMap[E]=w})})}resolveBundle(t){const e=ua(t);t=Ze(t);const i={};return t.forEach(s=>{const n=this._bundles[s];if(n){const o=this.resolve(n),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(s,l)]=u}i[s]=a}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if(typeof t!="string"){const i={};for(const s in e)i[s]=e[s].src;return i}return e.src}resolve(t){const e=ua(t);t=Ze(t);const i={};return t.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let n=this._assetMap[s];const o=n[0],a=this._getPreferredOrder(n);a==null||a.priority.forEach(l=>{a.params[l].forEach(u=>{const d=n.filter(f=>f[l]?f[l]===u:!1);d.length&&(n=d)})}),this._resolverHash[s]=n[0]??o}else this._resolverHash[s]=this.buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[0],s=this._preferredOrder.find(n=>n.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const e=/\?/.test(t)?"&":"?";return`${t}${e}${this._defaultSearchParams}`}buildResolvedAsset(t,e){const{aliases:i,data:s,loadParser:n,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=ye.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...s||{},...t.data},t.loadParser=n??t.loadParser,t.format=o??t.format??ye.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class iP{constructor(){this._detections=[],this._initialized=!1,this.resolver=new rP,this.loader=new IC,this.cache=Li,this._backgroundLoader=new AC(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var n,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const e=((n=t.texturePreference)==null?void 0:n.resolution)??1,i=typeof e=="number"?[e]:e,s=await this._detectFormats({preferredFormats:(o=t.texturePreference)==null?void 0:o.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t,e,i,s,n){this.resolver.add(t,e,i,s,n)}async load(t,e){this._initialized||await this.init();const i=ua(t),s=Ze(t).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),n=this.resolver.resolve(s),o=await this._mapLoadToResolve(n,e);return i?o[s[0]]:o}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;typeof t=="string"&&(i=!0,t=[t]);const s=this.resolver.resolveBundle(t),n={},o=Object.keys(s);let a=0,l=0;const u=()=>{e==null||e(++a/l)},d=o.map(f=>{const m=s[f];return l+=Object.keys(m).length,this._mapLoadToResolve(m,u).then(v=>{n[f]=v})});return await Promise.all(d),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Li.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=Li.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=Object.values(t),s=Object.keys(t);this._backgroundLoader.active=!1;const n=await this.loader.load(i,e);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=n[a.src],d=[a.src];a.alias&&d.push(...a.alias),o[s[l]]=u,Li.set(d,u)}),o}async unload(t){this._initialized||await this.init();const e=Ze(t).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=Ze(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(s=>this._unloadFromResolved(e[s]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(i=>{Li.remove(i.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((i,s)=>e.indexOf(i)===s),e}get detections(){return this._detections}get preferWorkers(){return Xa.config.preferWorkers}set preferWorkers(t){kt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(i=>i in t).forEach(i=>{e.config[i]=t[i]})})}}const Eo=new iP;pt.handleByList(rt.LoadParser,Eo.loader.parsers).handleByList(rt.ResolveParser,Eo.resolver.parsers).handleByList(rt.CacheParser,Eo.cache.parsers).handleByList(rt.DetectionParser,Eo.detections);const sP={extension:rt.CacheParser,test:r=>Array.isArray(r)&&r.every(t=>t instanceof dt),getCacheableAssets:(r,t)=>{const e={};return r.forEach(i=>{t.forEach((s,n)=>{e[i+(n===0?"":n+1)]=s})}),e}};pt.add(sP);async function Bv(r){if("Image"in globalThis)return new Promise(t=>{const e=new Image;e.onload=()=>{t(!0)},e.onerror=()=>{t(!1)},e.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(r)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const nP={extension:{type:rt.DetectionParser,priority:1},test:async()=>Bv("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async r=>[...r,"avif"],remove:async r=>r.filter(t=>t!=="avif")};pt.add(nP);const oP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Bv("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async r=>[...r,"webp"],remove:async r=>r.filter(t=>t!=="webp")};pt.add(oP);const df=["png","jpg","jpeg"],aP={extension:{type:rt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async r=>[...r,...df],remove:async r=>r.filter(t=>!df.includes(t))};pt.add(aP);const lP="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Eu(r){return lP?!1:document.createElement("video").canPlayType(r)!==""}const hP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Eu("video/webm"),add:async r=>[...r,"webm"],remove:async r=>r.filter(t=>t!=="webm")};pt.add(hP);const cP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Eu("video/mp4"),add:async r=>[...r,"mp4","m4v"],remove:async r=>r.filter(t=>t!=="mp4"&&t!=="m4v")};pt.add(cP);const uP={extension:{type:rt.DetectionParser,priority:0},test:async()=>Eu("video/ogg"),add:async r=>[...r,"ogv"],remove:async r=>r.filter(t=>t!=="ogv")};pt.add(uP);const dP={extension:rt.ResolveParser,test:Xa.test,parse:r=>{var t;return{resolution:parseFloat(((t=ot.RETINA_PREFIX.exec(r))==null?void 0:t[1])??"1"),format:ye.extname(r).slice(1),src:r}}};pt.add(dP);var _e=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(_e||{});const da={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let pr,cs;function pf(){cs={bptc:pr.getExtension("EXT_texture_compression_bptc"),astc:pr.getExtension("WEBGL_compressed_texture_astc"),etc:pr.getExtension("WEBGL_compressed_texture_etc"),s3tc:pr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:pr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:pr.getExtension("WEBGL_compressed_texture_pvrtc")||pr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:pr.getExtension("WEBGL_compressed_texture_etc1"),atc:pr.getExtension("WEBGL_compressed_texture_atc")}}const pP={extension:{type:rt.DetectionParser,priority:2},test:async()=>{const r=ot.ADAPTER.createCanvas().getContext("webgl");return r?(pr=r,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async r=>{cs||pf();const t=[];for(const e in cs)cs[e]&&t.push(e);return[...t,...r]},remove:async r=>(cs||pf(),r.filter(t=>!(t in cs)))};pt.add(pP);class fP extends Ha{constructor(t,e={width:1,height:1,autoLoad:!0}){let i,s;typeof t=="string"?(i=t,s=new Uint8Array):(i=null,s=t),super(s,e),this.origin=i,this.buffer=s?new ec(s):null,this._load=null,this.loaded=!1,this.origin!==null&&e.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new ec(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Ui extends fP{constructor(t,e){super(t,e),this.format=e.format,this.levels=e.levels||1,this._width=e.width,this._height=e.height,this._extension=Ui._formatToExtension(this.format),(e.levelBuffers||this.buffer)&&(this._levelBuffers=e.levelBuffers||Ui._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,e,i){const s=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;s.pixelStorei(s.UNPACK_ALIGNMENT,4);for(let n=0,o=this.levels;n<o;n++){const{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:d}=this._levelBuffers[n];s.compressedTexImage2D(s.TEXTURE_2D,a,this.format,l,u,0,d)}return!0}onBlobLoaded(){this._levelBuffers=Ui._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,e,i,s,n,o,a){const l=new Array(i);let u=t.byteOffset,d=o,f=a,m=d+s-1&~(s-1),v=f+n-1&~(n-1),y=m*v*da[e];for(let b=0;b<i;b++)l[b]={levelID:b,levelWidth:i>1?d:m,levelHeight:i>1?f:v,levelBuffer:new Uint8Array(t.buffer,u,y)},u+=y,d=d>>1||1,f=f>>1||1,m=d+s-1&~(s-1),v=f+n-1&~(n-1),y=m*v*da[e];return l}}const fh=4,So=124,mP=32,ff=20,gP=542327876,Ao={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},vP={FOURCC:2},Co={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},yP=1,_P=2,bP=4,xP=64,wP=512,TP=131072,EP=827611204,SP=861165636,AP=894720068,CP=808540228,PP=4,IP={[EP]:_e.COMPRESSED_RGBA_S3TC_DXT1_EXT,[SP]:_e.COMPRESSED_RGBA_S3TC_DXT3_EXT,[AP]:_e.COMPRESSED_RGBA_S3TC_DXT5_EXT},RP={70:_e.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:_e.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:_e.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:_e.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:_e.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:_e.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:_e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:_e.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:_e.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:_e.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:_e.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function MP(r){const t=new Uint32Array(r);if(t[0]!==gP)throw new Error("Invalid DDS file magic word");const e=new Uint32Array(r,0,So/Uint32Array.BYTES_PER_ELEMENT),i=e[Ao.HEIGHT],s=e[Ao.WIDTH],n=e[Ao.MIPMAP_COUNT],o=new Uint32Array(r,Ao.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,mP/Uint32Array.BYTES_PER_ELEMENT),a=o[yP];if(a&bP){const l=o[vP.FOURCC];if(l!==CP){const P=IP[l],S=fh+So,M=new Uint8Array(r,S);return[new Ui(M,{format:P,width:s,height:i,levels:n})]}const u=fh+So,d=new Uint32Array(t.buffer,u,ff/Uint32Array.BYTES_PER_ELEMENT),f=d[Co.DXGI_FORMAT],m=d[Co.RESOURCE_DIMENSION],v=d[Co.MISC_FLAG],y=d[Co.ARRAY_SIZE],b=RP[f];if(b===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${f}`);if(v===PP)throw new Error("DDSParser does not support cubemap textures");if(m===6)throw new Error("DDSParser does not supported 3D texture data");const w=new Array,E=fh+So+ff;if(y===1)w.push(new Uint8Array(r,E));else{const P=da[b];let S=0,M=s,k=i;for(let C=0;C<n;C++){const N=Math.max(1,M+3&-4),U=Math.max(1,k+3&-4),H=N*U*P;S+=H,M=M>>>1,k=k>>>1}let F=E;for(let C=0;C<y;C++)w.push(new Uint8Array(r,F,S)),F+=S}return w.map(P=>new Ui(P,{format:b,width:s,height:i,levels:n}))}throw a&xP?new Error("DDSParser does not support uncompressed texture data."):a&wP?new Error("DDSParser does not supported YUV uncompressed texture data."):a&TP?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&_P?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const mf=[171,75,84,88,32,49,49,187,13,10,26,10],kP=67305985,Ye={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ac=64,gf={[gt.UNSIGNED_BYTE]:1,[gt.UNSIGNED_SHORT]:2,[gt.INT]:4,[gt.UNSIGNED_INT]:4,[gt.FLOAT]:4,[gt.HALF_FLOAT]:8},DP={[q.RGBA]:4,[q.RGB]:3,[q.RG]:2,[q.RED]:1,[q.LUMINANCE]:1,[q.LUMINANCE_ALPHA]:2,[q.ALPHA]:1},OP={[gt.UNSIGNED_SHORT_4_4_4_4]:2,[gt.UNSIGNED_SHORT_5_5_5_1]:2,[gt.UNSIGNED_SHORT_5_6_5]:2};function BP(r,t,e=!1){const i=new DataView(t);if(!LP(r,i))return null;const s=i.getUint32(Ye.ENDIANNESS,!0)===kP,n=i.getUint32(Ye.GL_TYPE,s),o=i.getUint32(Ye.GL_FORMAT,s),a=i.getUint32(Ye.GL_INTERNAL_FORMAT,s),l=i.getUint32(Ye.PIXEL_WIDTH,s),u=i.getUint32(Ye.PIXEL_HEIGHT,s)||1,d=i.getUint32(Ye.PIXEL_DEPTH,s)||1,f=i.getUint32(Ye.NUMBER_OF_ARRAY_ELEMENTS,s)||1,m=i.getUint32(Ye.NUMBER_OF_FACES,s),v=i.getUint32(Ye.NUMBER_OF_MIPMAP_LEVELS,s),y=i.getUint32(Ye.BYTES_OF_KEY_VALUE_DATA,s);if(u===0||d!==1)throw new Error("Only 2D textures are supported");if(m!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");const b=4,w=4,E=l+3&-4,P=u+3&-4,S=new Array(f);let M=l*u;n===0&&(M=E*P);let k;if(n!==0?gf[n]?k=gf[n]*DP[o]:k=OP[n]:k=da[a],k===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const F=e?NP(i,y,s):null;let C=M*k,N=l,U=u,H=E,Q=P,G=Ac+y;for(let O=0;O<v;O++){const L=i.getUint32(G,s);let z=G+4;for(let J=0;J<f;J++){let Z=S[J];Z||(Z=S[J]=new Array(v)),Z[O]={levelID:O,levelWidth:v>1||n!==0?N:H,levelHeight:v>1||n!==0?U:Q,levelBuffer:new Uint8Array(t,z,C)},z+=C}G+=L+4,G=G%4!==0?G+4-G%4:G,N=N>>1||1,U=U>>1||1,H=N+b-1&-4,Q=U+w-1&-4,C=H*Q*k}return n!==0?{uncompressed:S.map(O=>{let L=O[0].levelBuffer,z=!1;return n===gt.FLOAT?L=new Float32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4):n===gt.UNSIGNED_INT?(z=!0,L=new Uint32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)):n===gt.INT&&(z=!0,L=new Int32Array(O[0].levelBuffer.buffer,O[0].levelBuffer.byteOffset,O[0].levelBuffer.byteLength/4)),{resource:new Ha(L,{width:O[0].levelWidth,height:O[0].levelHeight}),type:n,format:z?FP(o):o}}),kvData:F}:{compressed:S.map(O=>new Ui(null,{format:a,width:l,height:u,levels:v,levelBuffers:O})),kvData:F}}function LP(r,t){for(let e=0;e<mf.length;e++)if(t.getUint8(e)!==mf[e])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function FP(r){switch(r){case q.RGBA:return q.RGBA_INTEGER;case q.RGB:return q.RGB_INTEGER;case q.RG:return q.RG_INTEGER;case q.RED:return q.RED_INTEGER;default:return r}}function NP(r,t,e){const i=new Map;let s=0;for(;s<t;){const n=r.getUint32(Ac+s,e),o=Ac+s+4,a=3-(n+3)%4;if(n===0||n>t-s){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<n&&r.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(r.buffer,o,l)),d=new DataView(r.buffer,o+l+1,n-l-1);i.set(u,d),s+=4+n+a}return i}const UP={extension:{type:rt.LoadParser,priority:lr.High},name:"loadDDS",test(r){return xi(r,".dds")},async load(r,t,e){const i=await(await ot.ADAPTER.fetch(r)).arrayBuffer(),s=MP(i).map(n=>{const o=new Et(n,{mipmap:Ar.OFF,alphaMode:Re.NO_PREMULTIPLIED_ALPHA,resolution:Vr(r),...t.data});return zn(o,e,r)});return s.length===1?s[0]:s},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};pt.add(UP);const $P={extension:{type:rt.LoadParser,priority:lr.High},name:"loadKTX",test(r){return xi(r,".ktx")},async load(r,t,e){const i=await(await ot.ADAPTER.fetch(r)).arrayBuffer(),{compressed:s,uncompressed:n,kvData:o}=BP(r,i),a=s??n,l={mipmap:Ar.OFF,alphaMode:Re.NO_PREMULTIPLIED_ALPHA,resolution:Vr(r),...t.data},u=a.map(d=>{a===n&&Object.assign(l,{type:d.type,format:d.format});const f=d.resource??d,m=new Et(f,l);return m.ktxKeyValueData=o,zn(m,e,r)});return u.length===1?u[0]:u},unload(r){Array.isArray(r)?r.forEach(t=>t.destroy(!0)):r.destroy(!0)}};pt.add($P);const GP=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],HP={extension:rt.ResolveParser,test:r=>{const t=ye.extname(r).slice(1);return["basis","ktx","dds"].includes(t)},parse:r=>{var i,s;const t=r.split("."),e=t.pop();if(["ktx","dds"].includes(e)){const n=t.pop();if(GP.includes(n))return{resolution:parseFloat(((i=ot.RETINA_PREFIX.exec(r))==null?void 0:i[1])??"1"),format:n,src:r}}return{resolution:parseFloat(((s=ot.RETINA_PREFIX.exec(r))==null?void 0:s[1])??"1"),format:e,src:r}}};pt.add(HP);const Po=new Ct,zP=4,Lv=class nn{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){var e;const t=(e=this.renderer)==null?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,e,i,s){const n=new Image;return n.src=await this.base64(t,e,i,s),n}async base64(t,e,i,s){const n=this.canvas(t,s);if(n.toBlob!==void 0)return new Promise((o,a)=>{n.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(l)},e,i)});if(n.toDataURL!==void 0)return n.toDataURL(e,i);if(n.convertToBlob!==void 0){const o=await n.convertToBlob({type:e,quality:i});return new Promise((a,l)=>{const u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);o&&nn._flipY(i,s,n),a&&nn._unpremultiplyAlpha(i);const l=new wS(s,n,1),u=new ImageData(new Uint8ClampedArray(i.buffer),s,n);return l.context.putImageData(u,0,0),l.canvas}pixels(t,e){const{pixels:i,width:s,height:n,flipY:o,premultipliedAlpha:a}=this._rawPixels(t,e);return o&&nn._flipY(i,s,n),a&&nn._unpremultiplyAlpha(i),i}_rawPixels(t,e){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,o=!1,a,l=!1;t&&(t instanceof Zi?a=t:(a=i.generateTexture(t,{region:e,resolution:i.resolution,multisample:i.multisample}),l=!0,e&&(Po.width=e.width,Po.height=e.height,e=Po)));const u=i.gl;if(a){if(s=a.baseTexture.resolution,e=e??a.frame,n=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===q.RGBA,!l){i.renderTexture.bind(a);const v=a.framebuffer.glFramebuffers[i.CONTEXT_UID];v.blitFramebuffer&&i.framebuffer.bind(v.blitFramebuffer)}}else s=i.resolution,e||(e=Po,e.width=i.width/s,e.height=i.height/s),n=!0,o=this._rendererPremultipliedAlpha,i.renderTexture.bind();const d=Math.max(Math.round(e.width*s),1),f=Math.max(Math.round(e.height*s),1),m=new Uint8Array(zP*d*f);return u.readPixels(Math.round(e.x*s),Math.round(e.y*s),d,f,u.RGBA,u.UNSIGNED_BYTE,m),l&&(a==null||a.destroy(!0)),{pixels:m,width:d,height:f,flipY:n,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(t,e,i){const s=e<<2,n=i>>1,o=new Uint8Array(s);for(let a=0;a<n;a++){const l=a*s,u=(i-a-1)*s;o.set(t.subarray(l,l+s)),t.copyWithin(l,u,u+s),t.set(o,u)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let i=0;i<e;i+=4){const s=t[i+3];if(s!==0){const n=255.001/s;t[i]=t[i]*n+.5,t[i+1]=t[i+1]*n+.5,t[i+2]=t[i+2]*n+.5}}}};Lv.extension={name:"extract",type:rt.RendererSystem};let jP=Lv;pt.add(jP);const pa={build(r){const t=r.points;let e,i,s,n,o,a;if(r.type===be.CIRC){const y=r.shape;e=y.x,i=y.y,o=a=y.radius,s=n=0}else if(r.type===be.ELIP){const y=r.shape;e=y.x,i=y.y,o=y.width,a=y.height,s=n=0}else{const y=r.shape,b=y.width/2,w=y.height/2;e=y.x+b,i=y.y+w,o=a=Math.max(0,Math.min(y.radius,Math.min(b,w))),s=b-o,n=w-a}if(!(o>=0&&a>=0&&s>=0&&n>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(s?4:0)+(n?4:0);if(t.length=u,u===0)return;if(l===0){t.length=8,t[0]=t[6]=e+s,t[1]=t[3]=i+n,t[2]=t[4]=e-s,t[5]=t[7]=i-n;return}let d=0,f=l*4+(s?2:0)+2,m=f,v=u;{const y=s+o,b=n,w=e+y,E=e-y,P=i+b;if(t[d++]=w,t[d++]=P,t[--f]=P,t[--f]=E,n){const S=i-b;t[m++]=E,t[m++]=S,t[--v]=S,t[--v]=w}}for(let y=1;y<l;y++){const b=Math.PI/2*(y/l),w=s+Math.cos(b)*o,E=n+Math.sin(b)*a,P=e+w,S=e-w,M=i+E,k=i-E;t[d++]=P,t[d++]=M,t[--f]=M,t[--f]=S,t[m++]=S,t[m++]=k,t[--v]=k,t[--v]=P}{const y=s,b=n+a,w=e+y,E=e-y,P=i+b,S=i-b;t[d++]=w,t[d++]=P,t[--v]=S,t[--v]=w,s&&(t[d++]=E,t[d++]=P,t[--v]=S,t[--v]=E)}},triangulate(r,t){const e=r.points,i=t.points,s=t.indices;if(e.length===0)return;let n=i.length/2;const o=n;let a,l;if(r.type!==be.RREC){const d=r.shape;a=d.x,l=d.y}else{const d=r.shape;a=d.x+d.width/2,l=d.y+d.height/2}const u=r.matrix;i.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),n++,i.push(e[0],e[1]);for(let d=2;d<e.length;d+=2)i.push(e[d],e[d+1]),s.push(n++,o,n);s.push(o+1,o,n)}};function vf(r,t=!1){const e=r.length;if(e<6)return;let i=0;for(let s=0,n=r[e-2],o=r[e-1];s<e;s+=2){const a=r[s],l=r[s+1];i+=(a-n)*(l+o),n=a,o=l}if(!t&&i>0||t&&i<=0){const s=e/2;for(let n=s+s%2;n<e;n+=2){const o=e-n-2,a=e-n-1,l=n,u=n+1;[r[o],r[l]]=[r[l],r[o]],[r[a],r[u]]=[r[u],r[a]]}}}const Fv={build(r){r.points=r.shape.points.slice()},triangulate(r,t){let e=r.points;const i=r.holes,s=t.points,n=t.indices;if(e.length>=6){vf(e,!1);const o=[];for(let u=0;u<i.length;u++){const d=i[u];vf(d.points,!0),o.push(e.length/2),e=e.concat(d.points)}const a=Qw(e,o,2);if(!a)return;const l=s.length/2;for(let u=0;u<a.length;u+=3)n.push(a[u]+l),n.push(a[u+1]+l),n.push(a[u+2]+l);for(let u=0;u<e.length;u++)s.push(e[u])}}},VP={build(r){const t=r.shape,e=t.x,i=t.y,s=t.width,n=t.height,o=r.points;o.length=0,s>=0&&n>=0&&o.push(e,i,e+s,i,e+s,i+n,e,i+n)},triangulate(r,t){const e=r.points,i=t.points;if(e.length===0)return;const s=i.length/2;i.push(e[0],e[1],e[2],e[3],e[6],e[7],e[4],e[5]),t.indices.push(s,s+1,s+2,s+1,s+2,s+3)}},WP={build(r){pa.build(r)},triangulate(r,t){pa.triangulate(r,t)}};var Ue=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(Ue||{}),ci=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(ci||{});const Ps={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,t=20){if(!this.adaptive||!r||isNaN(r))return t;let e=Math.ceil(r/this.maxLength);return e<this.minSegments?e=this.minSegments:e>this.maxSegments&&(e=this.maxSegments),e}};class yf{static curveTo(t,e,i,s,n,o){const a=o[o.length-2],l=o[o.length-1]-e,u=a-t,d=s-e,f=i-t,m=Math.abs(l*f-u*d);if(m<1e-8||n===0)return(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e),null;const v=l*l+u*u,y=d*d+f*f,b=l*d+u*f,w=n*Math.sqrt(v)/m,E=n*Math.sqrt(y)/m,P=w*b/v,S=E*b/y,M=w*f+E*u,k=w*d+E*l,F=u*(E+P),C=l*(E+P),N=f*(w+S),U=d*(w+S),H=Math.atan2(C-k,F-M),Q=Math.atan2(U-k,N-M);return{cx:M+t,cy:k+e,radius:n,startAngle:H,endAngle:Q,anticlockwise:u*d>f*l}}static arc(t,e,i,s,n,o,a,l,u){const d=a-o,f=Ps._segmentsCount(Math.abs(d)*n,Math.ceil(Math.abs(d)/sa)*40),m=d/(f*2),v=m*2,y=Math.cos(m),b=Math.sin(m),w=f-1,E=w%1/w;for(let P=0;P<=w;++P){const S=P+E*P,M=m+o+v*S,k=Math.cos(M),F=-Math.sin(M);u.push((y*k+b*F)*n+i,(y*-F+b*k)*n+s)}}}class XP{constructor(){this.reset()}begin(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i}end(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Su{static curveLength(t,e,i,s,n,o,a,l){let u=0,d=0,f=0,m=0,v=0,y=0,b=0,w=0,E=0,P=0,S=0,M=t,k=e;for(let F=1;F<=10;++F)d=F/10,f=d*d,m=f*d,v=1-d,y=v*v,b=y*v,w=b*t+3*y*d*i+3*v*f*n+m*a,E=b*e+3*y*d*s+3*v*f*o+m*l,P=M-w,S=k-E,M=w,k=E,u+=Math.sqrt(P*P+S*S);return u}static curveTo(t,e,i,s,n,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const d=Ps._segmentsCount(Su.curveLength(l,u,t,e,i,s,n,o));let f=0,m=0,v=0,y=0,b=0;a.push(l,u);for(let w=1,E=0;w<=d;++w)E=w/d,f=1-E,m=f*f,v=m*f,y=E*E,b=y*E,a.push(v*l+3*m*E*t+3*f*y*i+b*n,v*u+3*m*E*e+3*f*y*s+b*o)}}function _f(r,t,e,i,s,n,o,a){const l=r-e*s,u=t-i*s,d=r+e*n,f=t+i*n;let m,v;o?(m=i,v=-e):(m=-i,v=e);const y=l+m,b=u+v,w=d+m,E=f+v;return a.push(y,b,w,E),2}function Ai(r,t,e,i,s,n,o,a){const l=e-r,u=i-t;let d=Math.atan2(l,u),f=Math.atan2(s-r,n-t);a&&d<f?d+=Math.PI*2:!a&&d>f&&(f+=Math.PI*2);let m=d;const v=f-d,y=Math.abs(v),b=Math.sqrt(l*l+u*u),w=(15*y*Math.sqrt(b)/Math.PI>>0)+1,E=v/w;if(m+=E,a){o.push(r,t,e,i);for(let P=1,S=m;P<w;P++,S+=E)o.push(r,t,r+Math.sin(S)*b,t+Math.cos(S)*b);o.push(r,t,s,n)}else{o.push(e,i,r,t);for(let P=1,S=m;P<w;P++,S+=E)o.push(r+Math.sin(S)*b,t+Math.cos(S)*b,r,t);o.push(s,n,r,t)}return w*2}function YP(r,t){const e=r.shape;let i=r.points||e.points.slice();const s=t.closePointEps;if(i.length===0)return;const n=r.lineStyle,o=new Lt(i[0],i[1]),a=new Lt(i[i.length-2],i[i.length-1]),l=e.type!==be.POLY||e.closeStroke,u=Math.abs(o.x-a.x)<s&&Math.abs(o.y-a.y)<s;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const Z=(o.x+a.x)*.5,ut=(a.y+o.y)*.5;i.unshift(Z,ut),i.push(Z,ut)}const d=t.points,f=i.length/2;let m=i.length;const v=d.length/2,y=n.width/2,b=y*y,w=n.miterLimit*n.miterLimit;let E=i[0],P=i[1],S=i[2],M=i[3],k=0,F=0,C=-(P-M),N=E-S,U=0,H=0,Q=Math.sqrt(C*C+N*N);C/=Q,N/=Q,C*=y,N*=y;const G=n.alignment,O=(1-G)*2,L=G*2;l||(n.cap===ci.ROUND?m+=Ai(E-C*(O-L)*.5,P-N*(O-L)*.5,E-C*O,P-N*O,E+C*L,P+N*L,d,!0)+2:n.cap===ci.SQUARE&&(m+=_f(E,P,C,N,O,L,!0,d))),d.push(E-C*O,P-N*O,E+C*L,P+N*L);for(let Z=1;Z<f-1;++Z){E=i[(Z-1)*2],P=i[(Z-1)*2+1],S=i[Z*2],M=i[Z*2+1],k=i[(Z+1)*2],F=i[(Z+1)*2+1],C=-(P-M),N=E-S,Q=Math.sqrt(C*C+N*N),C/=Q,N/=Q,C*=y,N*=y,U=-(M-F),H=S-k,Q=Math.sqrt(U*U+H*H),U/=Q,H/=Q,U*=y,H*=y;const ut=S-E,Tt=P-M,Y=S-k,tt=F-M,Rt=ut*Y+Tt*tt,Ft=Tt*Y-tt*ut,$t=Ft<0;if(Math.abs(Ft)<.001*Math.abs(Rt)){d.push(S-C*O,M-N*O,S+C*L,M+N*L),Rt>=0&&(n.join===Ue.ROUND?m+=Ai(S,M,S-C*O,M-N*O,S-U*O,M-H*O,d,!1)+4:m+=2,d.push(S-U*L,M-H*L,S+U*O,M+H*O));continue}const se=(-C+E)*(-N+M)-(-C+S)*(-N+P),Kt=(-U+k)*(-H+M)-(-U+S)*(-H+F),oe=(ut*Kt-Y*se)/Ft,ce=(tt*se-Tt*Kt)/Ft,lt=(oe-S)*(oe-S)+(ce-M)*(ce-M),le=S+(oe-S)*O,Gt=M+(ce-M)*O,Wt=S-(oe-S)*L,Qt=M-(ce-M)*L,Te=Math.min(ut*ut+Tt*Tt,Y*Y+tt*tt),we=$t?O:L,De=Te+we*we*b,jn=lt<=De;let hr=n.join;if(hr===Ue.MITER&&lt/b>w&&(hr=Ue.BEVEL),jn)switch(hr){case Ue.MITER:{d.push(le,Gt,Wt,Qt);break}case Ue.BEVEL:{$t?d.push(le,Gt,S+C*L,M+N*L,le,Gt,S+U*L,M+H*L):d.push(S-C*O,M-N*O,Wt,Qt,S-U*O,M-H*O,Wt,Qt),m+=2;break}case Ue.ROUND:{$t?(d.push(le,Gt,S+C*L,M+N*L),m+=Ai(S,M,S+C*L,M+N*L,S+U*L,M+H*L,d,!0)+4,d.push(le,Gt,S+U*L,M+H*L)):(d.push(S-C*O,M-N*O,Wt,Qt),m+=Ai(S,M,S-C*O,M-N*O,S-U*O,M-H*O,d,!1)+4,d.push(S-U*O,M-H*O,Wt,Qt));break}}else{switch(d.push(S-C*O,M-N*O,S+C*L,M+N*L),hr){case Ue.MITER:{$t?d.push(Wt,Qt,Wt,Qt):d.push(le,Gt,le,Gt),m+=2;break}case Ue.ROUND:{$t?m+=Ai(S,M,S+C*L,M+N*L,S+U*L,M+H*L,d,!0)+2:m+=Ai(S,M,S-C*O,M-N*O,S-U*O,M-H*O,d,!1)+2;break}}d.push(S-U*O,M-H*O,S+U*L,M+H*L),m+=2}}E=i[(f-2)*2],P=i[(f-2)*2+1],S=i[(f-1)*2],M=i[(f-1)*2+1],C=-(P-M),N=E-S,Q=Math.sqrt(C*C+N*N),C/=Q,N/=Q,C*=y,N*=y,d.push(S-C*O,M-N*O,S+C*L,M+N*L),l||(n.cap===ci.ROUND?m+=Ai(S-C*(O-L)*.5,M-N*(O-L)*.5,S-C*O,M-N*O,S+C*L,M+N*L,d,!1)+2:n.cap===ci.SQUARE&&(m+=_f(S,M,C,N,O,L,!1,d)));const z=t.indices,J=Ps.epsilon*Ps.epsilon;for(let Z=v;Z<m+v-2;++Z)E=d[Z*2],P=d[Z*2+1],S=d[(Z+1)*2],M=d[(Z+1)*2+1],k=d[(Z+2)*2],F=d[(Z+2)*2+1],!(Math.abs(E*(M-F)+S*(F-P)+k*(P-M))<J)&&z.push(Z,Z+1,Z+2)}function qP(r,t){let e=0;const i=r.shape,s=r.points||i.points,n=i.type!==be.POLY||i.closeStroke;if(s.length===0)return;const o=t.points,a=t.indices,l=s.length/2,u=o.length/2;let d=u;for(o.push(s[0],s[1]),e=1;e<l;e++)o.push(s[e*2],s[e*2+1]),a.push(d,d+1),d++;n&&a.push(d,u)}function bf(r,t){r.lineStyle.native?qP(r,t):YP(r,t)}class Au{static curveLength(t,e,i,s,n,o){const a=t-2*i+n,l=e-2*s+o,u=2*i-2*t,d=2*s-2*e,f=4*(a*a+l*l),m=4*(a*u+l*d),v=u*u+d*d,y=2*Math.sqrt(f+m+v),b=Math.sqrt(f),w=2*f*b,E=2*Math.sqrt(v),P=m/b;return(w*y+b*m*(y-E)+(4*v*f-m*m)*Math.log((2*b+P+y)/(P+E)))/(4*w)}static curveTo(t,e,i,s,n){const o=n[n.length-2],a=n[n.length-1],l=Ps._segmentsCount(Au.curveLength(o,a,t,e,i,s));let u=0,d=0;for(let f=1;f<=l;++f){const m=f/l;u=o+(t-o)*m,d=a+(e-a)*m,n.push(u+(t+(i-t)*m-u)*m,d+(e+(s-e)*m-d)*m)}}}const mh={[be.POLY]:Fv,[be.CIRC]:pa,[be.ELIP]:pa,[be.RECT]:VP,[be.RREC]:WP},xf=[],Io=[];class fa{constructor(t,e=null,i=null,s=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=s,this.type=t.type}clone(){return new fa(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ns=new Lt,Nv=class Uv extends jg{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ha,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Io.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),xf.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,i=null,s=null){const n=new fa(t,e,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const i=new fa(t,null,null,e),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let i=0;i<e.length;++i){const s=e[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(t,ns):ns.copyFrom(t),s.shape.contains(ns.x,ns.y))){let n=!1;if(s.holes){for(let o=0;o<s.holes.length;o++)if(s.holes[o].shape.contains(ns.x,ns.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let l=this.shapeIndex;l<e.length;l++){this.shapeIndex++;const u=e[l],d=u.fillStyle,f=u.lineStyle;mh[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(d.visible||f.visible)&&this.processHoles(u.holes);for(let m=0;m<2;m++){const v=m===0?d:f;if(!v.visible)continue;const y=v.texture.baseTexture,b=this.indices.length,w=this.points.length/2;y.wrapMode=di.REPEAT,m===0?this.processFill(u):this.processLine(u);const E=this.points.length/2-w;E!==0&&(i&&!this._compareStyles(s,v)&&(i.end(b,w),i=null),i||(i=xf.pop()||new XP,i.begin(v,b,w),this.batches.push(i),s=v),this.addUvs(this.points,t,v.texture,w,E,v.matrix))}}const n=this.indices.length,o=this.points.length/2;if(i&&i.end(n,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const i=this.graphicsData[t],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,i=t.length;e<i;e++){const s=t[e];for(let n=0;n<s.size;n++){const o=s.start+n;this.indicesUint16[o]=this.indicesUint16[o]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Uv.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++Et._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),Io.push(this.drawCalls[f]);this.drawCalls.length=0;const e=this.colors,i=this.textureIds;let s=Io.pop();s||(s=new sc,s.texArray=new lc),s.texArray.count=0,s.start=0,s.size=0,s.type=_r.TRIANGLES;let n=0,o=null,a=0,l=!1,u=_r.TRIANGLES,d=0;this.drawCalls.push(s);for(let f=0;f<this.batches.length;f++){const m=this.batches[f],v=8,y=m.style,b=y.texture.baseTexture;l!==!!y.native&&(l=!!y.native,u=l?_r.LINES:_r.TRIANGLES,o=null,n=v,t++),o!==b&&(o=b,b._batchEnabled!==t&&(n===v&&(t++,n=0,s.size>0&&(s=Io.pop(),s||(s=new sc,s.texArray=new lc),this.drawCalls.push(s)),s.start=d,s.size=0,s.texArray.count=0,s.type=u),b.touched=1,b._batchEnabled=t,b._batchLocation=n,b.wrapMode=di.REPEAT,s.texArray.elements[s.texArray.count++]=b,n++)),s.size+=m.size,d+=m.size,a=b._batchLocation,this.addColors(e,y.color,y.alpha,m.attribSize,m.attribStart),this.addTextureIds(i,a,m.attribSize,m.attribStart)}Et._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(t.length*3*4),o=new Float32Array(n),a=new Uint32Array(n);let l=0;for(let u=0;u<t.length/2;u++)o[l++]=t[u*2],o[l++]=t[u*2+1],o[l++]=e[u*2],o[l++]=e[u*2+1],a[l++]=i[u],o[l++]=s[u];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Fv.triangulate(t,this):mh[t.type].triangulate(t,this)}processLine(t){bf(t,this);for(let e=0;e<t.holes.length;e++)bf(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const i=t[e];mh[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let i=0;i<t.length/2;i++){const s=t[i*2],n=t[i*2+1];t[i*2]=e.a*s+e.c*n+e.tx,t[i*2+1]=e.b*s+e.d*n+e.ty}}addColors(t,e,i,s,n=0){const o=Xt.shared.setValue(e).toLittleEndianNumber(),a=Xt.shared.setValue(o).toPremultiplied(i);t.length=Math.max(t.length,n+s);for(let l=0;l<s;l++)t[n+l]=a}addTextureIds(t,e,i,s=0){t.length=Math.max(t.length,s+i);for(let n=0;n<i;n++)t[s+n]=e}addUvs(t,e,i,s,n,o=null){let a=0;const l=e.length,u=i.frame;for(;a<n;){let f=t[(s+a)*2],m=t[(s+a)*2+1];if(o){const v=o.a*f+o.c*m+o.tx;m=o.b*f+o.d*m+o.ty,f=v}a++,e.push(f/u.width,m/u.height)}const d=i.baseTexture;(u.width<d.width||u.height<d.height)&&this.adjustUvs(e,i,l,n)}adjustUvs(t,e,i,s){const n=e.baseTexture,o=1e-6,a=i+s*2,l=e.frame,u=l.width/n.width,d=l.height/n.height;let f=l.x/l.width,m=l.y/l.height,v=Math.floor(t[i]+o),y=Math.floor(t[i+1]+o);for(let b=i+2;b<a;b+=2)v=Math.min(v,Math.floor(t[b]+o)),y=Math.min(y,Math.floor(t[b+1]+o));f-=v,m-=y;for(let b=i;b<a;b+=2)t[b]=(t[b]+f)*u,t[b+1]=(t[b+1]+m)*d}};Nv.BATCHABLE_SIZE=100;let KP=Nv;class Ya{constructor(){this.color=16777215,this.alpha=1,this.texture=dt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Ya;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=dt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Cu extends Ya{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ci.BUTT,this.join=Ue.MITER,this.miterLimit=10}clone(){const t=new Cu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=ci.BUTT,this.join=Ue.MITER,this.miterLimit=10}}const gh={},Cc=class jo extends or{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ya,this._lineStyle=new Cu,this._matrix=null,this._holeMode=!1,this.state=Ir.for2d(),this._geometry=t||new KP,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Xt(16777215),this.blendMode=_t.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new jo(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,i,s=.5,n=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:i,alignment:s,native:n}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:dt.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:ci.BUTT,join:Ue.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.width>0&&t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:i},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Ni,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Ni,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==t||n!==e)&&i.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Au.curveTo(t,e,i,s,n),this}bezierCurveTo(t,e,i,s,n,o){return this._initCurve(),Su.curveTo(t,e,i,s,n,o,this.currentPath.points),this}arcTo(t,e,i,s,n){this._initCurve(t,e);const o=this.currentPath.points,a=yf.curveTo(t,e,i,s,n,o);if(a){const{cx:l,cy:u,radius:d,startAngle:f,endAngle:m,anticlockwise:v}=a;this.arc(l,u,d,f,m,v)}return this}arc(t,e,i,s,n,o=!1){if(s===n)return this;if(!o&&n<=s?n+=sa:o&&s<=n&&(s+=sa),n-s===0)return this;const a=t+Math.cos(s)*i,l=e+Math.sin(s)*i,u=this._geometry.closePointEps;let d=this.currentPath?this.currentPath.points:null;if(d){const f=Math.abs(d[d.length-2]-a),m=Math.abs(d[d.length-1]-l);f<u&&m<u||d.push(a,l)}else this.moveTo(a,l),d=this.currentPath.points;return yf.arc(a,l,t,e,i,s,n,o,d),this}beginFill(t=0,e){return this.beginTextureFill({texture:dt.WHITE,color:t,alpha:e})}normalizeColor(t){const e=Xt.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:dt.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const i=t.alpha>0;return i?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:i},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,i,s){return this.drawShape(new Ct(t,e,i,s))}drawRoundedRect(t,e,i,s,n){return this.drawShape(new Va(t,e,i,s,n))}drawCircle(t,e,i){return this.drawShape(new za(t,e,i))}drawEllipse(t,e,i,s){return this.drawShape(new ja(t,e,i,s))}drawPolygon(...t){let e,i=!0;const s=t[0];s.points?(i=s.closeStroke,e=s.points):Array.isArray(t[0])?e=t[0]:e=t;const n=new Ni(e);return n.closeStroke=i,this.drawShape(n),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===be.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(let s=0;s<i;s++){const n=t.batches[s],o=n.style.color,a=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),l=new Float32Array(t.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),u=new Uint16Array(t.indicesUint16.buffer,n.start*2,n.size),d={vertexData:a,blendMode:e,indices:u,uvs:l,_batchRGB:Xt.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=d}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,i=this.batches.length;e<i;e++){const s=this.batches[e];s.worldAlpha=this.worldAlpha*s.alpha,t.plugins[this.pluginName].render(s)}}}_renderDirect(t){const e=this._resolveDirectShader(t),i=this._geometry,s=this.worldAlpha,n=e.uniforms,o=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Xt.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,i.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:i,type:s,size:n,start:o}=e,a=i.count;for(let l=0;l<a;l++)t.texture.bind(i.elements[l],l);t.geometry.draw(s,n,o)}_resolveDirectShader(t){let e=this.shader;const i=this.pluginName;if(!e){if(!gh[i]){const{maxTextures:s}=t.plugins[i],n=new Int32Array(s);for(let l=0;l<s;l++)n[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Yt,default:rr.from({uSamplers:n},!0)},a=t.plugins[i]._shader.program;gh[i]=new Tr(a,o)}e=gh[i]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:i,maxX:s,maxY:n}=t.bounds;this._bounds.addFrame(this.transform,e,i,s,n)}containsPoint(t){return this.worldTransform.applyInverse(t,jo._TEMP_POINT),this._geometry.containsPoint(jo._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=Xt.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,i=e.a,s=e.b,n=e.c,o=e.d,a=e.tx,l=e.ty,u=this._geometry.points,d=this.vertexData;let f=0;for(let m=0;m<u.length;m+=2){const v=u[m],y=u[m+1];d[f++]=i*v+n*y+a,d[f++]=o*y+s*v+l}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Cc.curves=Ps,Cc._TEMP_POINT=new Lt;let $v=Cc;class ZP{constructor(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const e=this.uvBuffer.data;(!this.data||this.data.length!==e.length)&&(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}}const vh=new Lt,wf=new Ni,Gv=class Hv extends or{constructor(t,e,i,s=_r.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=i||Ir.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ot.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===_r.TRIANGLES&&e.length<Hv.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[s]),t.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));const s=this.transform.worldTransform,n=s.a,o=s.b,a=s.c,l=s.d,u=s.tx,d=s.ty,f=this.vertexData;for(let m=0;m<f.length/2;m++){const v=e[m*2],y=e[m*2+1];f[m*2]=n*v+a*y+u,f[m*2+1]=o*v+l*y+d}if(this._roundPixels){const m=ot.RESOLUTION;for(let v=0;v<f.length;++v)f[v]=Math.round(f[v]*m)/m}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new ZP(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,vh);const e=this.geometry.getBuffer("aVertexPosition").data,i=wf.points,s=this.geometry.getIndex().data,n=s.length,o=this.drawMode===4?3:1;for(let a=0;a+2<n;a+=o){const l=s[a]*2,u=s[a+1]*2,d=s[a+2]*2;if(i[0]=e[l],i[1]=e[l+1],i[2]=e[u],i[3]=e[u+1],i[4]=e[d],i[5]=e[d+1],wf.contains(vh.x,vh.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Gv.BATCHABLE_SIZE=100;let Tf=Gv;class QP extends vi{constructor(t,e,i){super();const s=new ae(t),n=new ae(e,!0),o=new ae(i,!0,!0);this.addAttribute("aVertexPosition",s,2,!1,gt.FLOAT).addAttribute("aTextureCoord",n,2,!1,gt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var JP=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,tI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Ef extends Tr{constructor(t,e){const i={uSampler:t,alpha:1,uTextureMatrix:Yt.IDENTITY,uColor:new Float32Array([1,1,1,1])};e=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},e),e.uniforms&&Object.assign(i,e.uniforms),super(e.program||$r.from(tI,JP),i),this._colorDirty=!1,this.uvMatrix=new sv(t),this.batchable=e.program===void 0,this.pluginName=e.pluginName,this._tintColor=new Xt(e.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=e.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;Xt.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Sf{constructor(t,e,i){this.geometry=new vi,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let s=0;s<t.length;++s){let n=t[s];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||gt.FLOAT,offset:n.offset},e[s]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let e=0;this.indexBuffer=new ae(bS(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=e,e+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new ae(this.dynamicData,!1,!1);let s=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=s,s+=a.size,this.staticStride+=a.size}const n=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(n),this.staticDataUint32=new Uint32Array(n),this.staticBuffer=new ae(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===gt.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===gt.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,e,i){for(let s=0;s<this.dynamicProperties.length;s++){const n=this.dynamicProperties[s];n.uploadFunction(t,e,i,n.type===gt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,e,i){for(let s=0;s<this.staticProperties.length;s++){const n=this.staticProperties[s];n.uploadFunction(t,e,i,n.type===gt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var eI=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,rI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class zv extends Wa{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new Yt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:gt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Tr.from(rI,eI,{}),this.state=Ir.for2d()}render(t){const e=t.children,i=t._maxSize,s=t._batchSize,n=this.renderer;let o=e.length;if(o===0)return;o>i&&!t.autoResize&&(o=i);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=e[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=Gg(t.blendMode,u),n.state.set(this.state);const d=n.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Xt.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let m=!1;for(let v=0,y=0;v<o;v+=s,y+=1){let b=o-v;b>s&&(b=s),y>=a.length&&a.push(this._generateOneMoreBuffer(t));const w=a[y];w.uploadDynamic(e,v,b);const E=t._bufferUpdateIDs[y]||0;m=m||w._updateID<E,m&&(w._updateID=t._updateID,w.uploadStatic(e,v,b)),n.geometry.bind(w.geometry),d.drawElements(d.TRIANGLES,b*6,d.UNSIGNED_SHORT,0)}}generateBuffers(t){const e=[],i=t._maxSize,s=t._batchSize,n=t._properties;for(let o=0;o<i;o+=s)e.push(new Sf(this.properties,n,s));return e}_generateOneMoreBuffer(t){const e=t._batchSize,i=t._properties;return new Sf(this.properties,i,e)}uploadVertices(t,e,i,s,n,o){let a=0,l=0,u=0,d=0;for(let f=0;f<i;++f){const m=t[e+f],v=m._texture,y=m.scale.x,b=m.scale.y,w=v.trim,E=v.orig;w?(l=w.x-m.anchor.x*E.width,a=l+w.width,d=w.y-m.anchor.y*E.height,u=d+w.height):(a=E.width*(1-m.anchor.x),l=E.width*-m.anchor.x,u=E.height*(1-m.anchor.y),d=E.height*-m.anchor.y),s[o]=l*y,s[o+1]=d*b,s[o+n]=a*y,s[o+n+1]=d*b,s[o+n*2]=a*y,s[o+n*2+1]=u*b,s[o+n*3]=l*y,s[o+n*3+1]=u*b,o+=n*4}}uploadPosition(t,e,i,s,n,o){for(let a=0;a<i;a++){const l=t[e+a].position;s[o]=l.x,s[o+1]=l.y,s[o+n]=l.x,s[o+n+1]=l.y,s[o+n*2]=l.x,s[o+n*2+1]=l.y,s[o+n*3]=l.x,s[o+n*3+1]=l.y,o+=n*4}}uploadRotation(t,e,i,s,n,o){for(let a=0;a<i;a++){const l=t[e+a].rotation;s[o]=l,s[o+n]=l,s[o+n*2]=l,s[o+n*3]=l,o+=n*4}}uploadUvs(t,e,i,s,n,o){for(let a=0;a<i;++a){const l=t[e+a]._texture._uvs;l?(s[o]=l.x0,s[o+1]=l.y0,s[o+n]=l.x1,s[o+n+1]=l.y1,s[o+n*2]=l.x2,s[o+n*2+1]=l.y2,s[o+n*3]=l.x3,s[o+n*3+1]=l.y3,o+=n*4):(s[o]=0,s[o+1]=0,s[o+n]=0,s[o+n+1]=0,s[o+n*2]=0,s[o+n*2+1]=0,s[o+n*3]=0,s[o+n*3+1]=0,o+=n*4)}}uploadTint(t,e,i,s,n,o){for(let a=0;a<i;++a){const l=t[e+a],u=Xt.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);s[o]=u,s[o+n]=u,s[o+n*2]=u,s[o+n*3]=u,o+=n*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}zv.extension={name:"particle",type:rt.RendererPlugin};pt.add(zv);var qa=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(qa||{});const Ro={willReadFrequently:!0},fr=class ft{static get experimentalLetterSpacingSupported(){let t=ft._experimentalLetterSpacingSupported;if(t!==void 0){const e=ot.ADAPTER.getCanvasRenderingContext2D().prototype;t=ft._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,i,s,n,o,a,l,u){this.text=t,this.style=e,this.width=i,this.height=s,this.lines=n,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(t,e,i,s=ft._canvas){i=i??e.wordWrap;const n=e.toFontString(),o=ft.measureFont(n);o.fontSize===0&&(o.fontSize=e.fontSize,o.ascent=e.fontSize);const a=s.getContext("2d",Ro);a.font=n;const l=(i?ft.wordWrap(t,e,s):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let d=0;for(let y=0;y<l.length;y++){const b=ft._measureText(l[y],e.letterSpacing,a);u[y]=b,d=Math.max(d,b)}let f=d+e.strokeThickness;e.dropShadow&&(f+=e.dropShadowDistance);const m=e.lineHeight||o.fontSize+e.strokeThickness;let v=Math.max(m,o.fontSize+e.strokeThickness*2)+e.leading+(l.length-1)*(m+e.leading);return e.dropShadow&&(v+=e.dropShadowDistance),new ft(t,e,f,v,l,u,m+e.leading,d,o)}static _measureText(t,e,i){let s=!1;ft.experimentalLetterSpacingSupported&&(ft.experimentalLetterSpacing?(i.letterSpacing=`${e}px`,i.textLetterSpacing=`${e}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(t).width;return n>0&&(s?n-=e:n+=(ft.graphemeSegmenter(t).length-1)*e),n}static wordWrap(t,e,i=ft._canvas){const s=i.getContext("2d",Ro);let n=0,o="",a="";const l=Object.create(null),{letterSpacing:u,whiteSpace:d}=e,f=ft.collapseSpaces(d),m=ft.collapseNewlines(d);let v=!f;const y=e.wordWrapWidth+u,b=ft.tokenize(t);for(let w=0;w<b.length;w++){let E=b[w];if(ft.isNewline(E)){if(!m){a+=ft.addLine(o),v=!f,o="",n=0;continue}E=" "}if(f){const S=ft.isBreakingSpace(E),M=ft.isBreakingSpace(o[o.length-1]);if(S&&M)continue}const P=ft.getFromCache(E,u,l,s);if(P>y)if(o!==""&&(a+=ft.addLine(o),o="",n=0),ft.canBreakWords(E,e.breakWords)){const S=ft.wordWrapSplit(E);for(let M=0;M<S.length;M++){let k=S[M],F=k,C=1;for(;S[M+C];){const U=S[M+C];if(!ft.canBreakChars(F,U,E,M,e.breakWords))k+=U;else break;F=U,C++}M+=C-1;const N=ft.getFromCache(k,u,l,s);N+n>y&&(a+=ft.addLine(o),v=!1,o="",n=0),o+=k,n+=N}}else{o.length>0&&(a+=ft.addLine(o),o="",n=0);const S=w===b.length-1;a+=ft.addLine(E,!S),v=!1,o="",n=0}else P+n>y&&(v=!1,a+=ft.addLine(o),o="",n=0),(o.length>0||!ft.isBreakingSpace(E)||v)&&(o+=E,n+=P)}return a+=ft.addLine(o,!1),a}static addLine(t,e=!0){return t=ft.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,i,s){let n=i[t];return typeof n!="number"&&(n=ft._measureText(t,e,s)+e,i[t]=n),n}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const i=t[e];if(!ft.isBreakingSpace(i))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:ft._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:ft._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let i="";if(typeof t!="string")return e;for(let s=0;s<t.length;s++){const n=t[s],o=t[s+1];if(ft.isBreakingSpace(n,o)||ft.isNewline(n)){i!==""&&(e.push(i),i=""),e.push(n);continue}i+=n}return i!==""&&e.push(i),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,s,n){return!0}static wordWrapSplit(t){return ft.graphemeSegmenter(t)}static measureFont(t){if(ft._fonts[t])return ft._fonts[t];const e={ascent:0,descent:0,fontSize:0},i=ft._canvas,s=ft._context;s.font=t;const n=ft.METRICS_STRING+ft.BASELINE_SYMBOL,o=Math.ceil(s.measureText(n).width);let a=Math.ceil(s.measureText(ft.BASELINE_SYMBOL).width);const l=Math.ceil(ft.HEIGHT_MULTIPLIER*a);if(a=a*ft.BASELINE_MULTIPLIER|0,o===0||l===0)return ft._fonts[t]=e,e;i.width=o,i.height=l,s.fillStyle="#f00",s.fillRect(0,0,o,l),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,a);const u=s.getImageData(0,0,o,l).data,d=u.length,f=o*4;let m=0,v=0,y=!1;for(m=0;m<a;++m){for(let b=0;b<f;b+=4)if(u[v+b]!==255){y=!0;break}if(!y)v+=f;else break}for(e.ascent=a-m,v=d-f,y=!1,m=l;m>a;--m){for(let b=0;b<f;b+=4)if(u[v+b]!==255){y=!0;break}if(!y)v-=f;else break}return e.descent=m-a,e.fontSize=e.ascent+e.descent,ft._fonts[t]=e,e}static clearMetrics(t=""){t?delete ft._fonts[t]:ft._fonts={}}static get _canvas(){var t;if(!ft.__canvas){let e;try{const i=new OffscreenCanvas(0,0);if((t=i.getContext("2d",Ro))!=null&&t.measureText)return ft.__canvas=i,i;e=ot.ADAPTER.createCanvas()}catch{e=ot.ADAPTER.createCanvas()}e.width=e.height=10,ft.__canvas=e}return ft.__canvas}static get _context(){return ft.__context||(ft.__context=ft._canvas.getContext("2d",Ro)),ft.__context}};fr.METRICS_STRING="|ÉqÅ",fr.BASELINE_SYMBOL="M",fr.BASELINE_MULTIPLIER=1.4,fr.HEIGHT_MULTIPLIER=2,fr.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const r=new Intl.Segmenter;return t=>[...r.segment(t)].map(e=>e.segment)}return r=>[...r]})(),fr.experimentalLetterSpacing=!1,fr._fonts={},fr._newlines=[10,13],fr._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let oi=fr;const iI=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],jv=class on{constructor(t){this.styleID=0,this.reset(),_h(this,t,t)}clone(){const t={};return _h(t,this,on.defaultStyle),new on(t)}reset(){_h(this,on.defaultStyle,on.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=yh(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=yh(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){sI(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=yh(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let i=e.length-1;i>=0;i--){let s=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!iI.includes(s)&&(s=`"${s}"`),e[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};jv.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:qa.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let yi=jv;function yh(r){const t=Xt.shared,e=i=>{const s=t.setValue(i);return s.alpha===1?s.toHex():s.toRgbaString()};return Array.isArray(r)?r.map(e):e(r)}function sI(r,t){if(!Array.isArray(r)||!Array.isArray(t)||r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(r[e]!==t[e])return!1;return!0}function _h(r,t,e){for(const i in e)Array.isArray(t[i])?r[i]=t[i].slice():r[i]=t[i]}const nI={texture:!0,children:!1,baseTexture:!0},Vv=class Pc extends Ds{constructor(t,e,i){let s=!1;i||(i=ot.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=dt.from(i);n.orig=new Ct,n.trim=new Ct,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Pc.defaultResolution??ot.RESOLUTION,this._autoResolution=Pc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return oi.experimentalLetterSpacing}static set experimentalLetterSpacing(t){kt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),oi.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const i=this.context,s=oi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,o=s.height,a=s.lines,l=s.lineHeight,u=s.lineWidths,d=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+e.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;let m,v;const y=e.dropShadow?2:1;for(let b=0;b<y;++b){const w=e.dropShadow&&b===0,E=w?Math.ceil(Math.max(1,o)+e.padding*2):0,P=E*this._resolution;if(w){i.fillStyle="black",i.strokeStyle="black";const M=e.dropShadowColor,k=e.dropShadowBlur*this._resolution,F=e.dropShadowDistance*this._resolution;i.shadowColor=Xt.shared.setValue(M).setAlpha(e.dropShadowAlpha).toRgbaString(),i.shadowBlur=k,i.shadowOffsetX=Math.cos(e.dropShadowAngle)*F,i.shadowOffsetY=Math.sin(e.dropShadowAngle)*F+P}else i.fillStyle=this._generateFillStyle(e,a,s),i.strokeStyle=e.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let S=(l-f.fontSize)/2;l-f.fontSize<0&&(S=0);for(let M=0;M<a.length;M++)m=e.strokeThickness/2,v=e.strokeThickness/2+M*l+f.ascent+S,e.align==="right"?m+=d-u[M]:e.align==="center"&&(m+=(d-u[M])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[M],m+e.padding,v+e.padding-E,!0),e.fill&&this.drawLetterSpacing(a[M],m+e.padding,v+e.padding-E)}this.updateTexture()}drawLetterSpacing(t,e,i,s=!1){const n=this._style.letterSpacing;let o=!1;if(oi.experimentalLetterSpacingSupported&&(oi.experimentalLetterSpacing?(this.context.letterSpacing=`${n}px`,this.context.textLetterSpacing=`${n}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),n===0||o){s?this.context.strokeText(t,e,i):this.context.fillText(t,e,i);return}let a=e;const l=oi.graphemeSegmenter(t);let u=this.context.measureText(t).width,d=0;for(let f=0;f<l.length;++f){const m=l[f];s?this.context.strokeText(m,a,i):this.context.fillText(m,a,i);let v="";for(let y=f+1;y<l.length;++y)v+=l[y];d=this.context.measureText(v).width,a+=u-d+n,u=d}}updateTexture(){const t=this.canvas;if(this._style.trim){const o=ES(t);o.data&&(t.width=o.width,t.height=o.height,this.context.putImageData(o.data,0,0))}const e=this._texture,i=this._style,s=i.trim?0:i.padding,n=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-s,e.trim.y=-s,e.orig.width=e._frame.width-s*2,e.orig.height=e._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,i){const s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const o=t.dropShadow?t.dropShadowDistance:0,a=t.padding||0,l=this.canvas.width/this._resolution-o-a*2,u=this.canvas.height/this._resolution-o-a*2,d=s.slice(),f=t.fillGradientStops.slice();if(!f.length){const m=d.length+1;for(let v=1;v<m;++v)f.push(v/m)}if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),t.fillGradientType===qa.LINEAR_VERTICAL){n=this.context.createLinearGradient(l/2,a,l/2,u+a);const m=i.fontProperties.fontSize+t.strokeThickness;for(let v=0;v<e.length;v++){const y=i.lineHeight*(v-1)+m,b=i.lineHeight*v;let w=b;v>0&&y>b&&(w=(b+y)/2);const E=b+m,P=i.lineHeight*(v+1);let S=E;v+1<e.length&&P<E&&(S=(E+P)/2);const M=(S-w)/u;for(let k=0;k<d.length;k++){let F=0;typeof f[k]=="number"?F=f[k]:F=k/d.length;let C=Math.min(1,Math.max(0,w/u+F*M));C=Number(C.toFixed(5)),n.addColorStop(C,d[k])}}}else{n=this.context.createLinearGradient(a,u/2,l+a,u/2);const m=d.length+1;let v=1;for(let y=0;y<d.length;y++){let b;typeof f[y]=="number"?b=f[y]:b=v/m,n.addColorStop(b,d[y]),v++}}return n}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},nI,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=hi(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=hi(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof yi?this._style=t:this._style=new yi(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Vv.defaultAutoResolution=!0;let Wv=Vv;class oI{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function aI(r,t){var i;let e=!1;if((i=r==null?void 0:r._textures)!=null&&i.length){for(let s=0;s<r._textures.length;s++)if(r._textures[s]instanceof dt){const n=r._textures[s].baseTexture;t.includes(n)||(t.push(n),e=!0)}}return e}function lI(r,t){if(r.baseTexture instanceof Et){const e=r.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function hI(r,t){if(r._texture&&r._texture instanceof dt){const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function cI(r,t){return t instanceof Wv?(t.updateText(!0),!0):!1}function uI(r,t){if(t instanceof yi){const e=t.toFontString();return oi.measureFont(e),!0}return!1}function dI(r,t){if(r instanceof Wv){t.includes(r.style)||t.push(r.style),t.includes(r)||t.push(r);const e=r._texture.baseTexture;return t.includes(e)||t.push(e),!0}return!1}function pI(r,t){return r instanceof yi?(t.includes(r)||t.push(r),!0):!1}const Xv=class Yv{constructor(t){this.limiter=new oI(Yv.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(dI),this.registerFindHook(pI),this.registerFindHook(aI),this.registerFindHook(lI),this.registerFindHook(hI),this.registerUploadHook(cI),this.registerUploadHook(uI)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Fe.system.addOnce(this.tick,this,Wi.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Fe.system.addOnce(this.tick,this,Wi.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,i=t.length;e<i;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof or)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Fe.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Xv.uploadsPerFrame=4;let Ic=Xv;Object.defineProperties(ot,{UPLOADS_PER_FRAME:{get(){return Ic.uploadsPerFrame},set(r){kt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ic.uploadsPerFrame=r}}});function qv(r,t){return t instanceof Et?(t._glTextures[r.CONTEXT_UID]||r.texture.bind(t),!0):!1}function fI(r,t){if(!(t instanceof $v))return!1;const{geometry:e}=t;t.finishPoly(),e.updateBatches();const{batches:i}=e;for(let s=0;s<i.length;s++){const{texture:n}=i[s].style;n&&qv(r,n.baseTexture)}return e.batchable||r.geometry.bind(e,t._resolveDirectShader(r)),!0}function mI(r,t){return r instanceof $v?(t.push(r),!0):!1}class Kv extends Ic{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(mI),this.registerUploadHook(qv),this.registerUploadHook(fI)}}Kv.extension={name:"prepare",type:rt.RendererSystem};pt.add(Kv);var gI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,vI=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,yI=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Af=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,_I=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Mo=new Yt;class Zv extends Wa{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new tv,this.state=Ir.for2d()}contextChange(){const t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=Tr.from(Af,_I,e),this.shader=t.context.webGLVersion>1?Tr.from(vI,gI,e):Tr.from(Af,yI,e)}render(t){const e=this.renderer,i=this.quad;let s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y);const n=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;s=i.uvs,s[0]=s[6]=-n,s[1]=s[3]=-o,s[2]=s[4]=1-n,s[5]=s[7]=1-o,i.invalidate();const a=t._texture,l=a.baseTexture,u=l.alphaMode>0,d=t.tileTransform.localTransform,f=t.uvMatrix;let m=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;m&&(l._glTextures[e.CONTEXT_UID]?m=l.wrapMode!==di.CLAMP:l.wrapMode===di.CLAMP&&(l.wrapMode=di.REPEAT));const v=m?this.simpleShader:this.shader,y=a.width,b=a.height,w=t._width,E=t._height;Mo.set(d.a*y/w,d.b*y/E,d.c*b/w,d.d*b/E,d.tx/w,d.ty/E),Mo.invert(),m?Mo.prepend(f.mapCoord):(v.uniforms.uMapCoord=f.mapCoord.toArray(!0),v.uniforms.uClampFrame=f.uClampFrame,v.uniforms.uClampOffset=f.uClampOffset),v.uniforms.uTransform=Mo.toArray(!0),v.uniforms.uColor=Xt.shared.setValue(t.tint).premultiply(t.worldAlpha,u).toArray(v.uniforms.uColor),v.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),v.uniforms.uSampler=a,e.shader.bind(v),e.geometry.bind(i),this.state.blendMode=Gg(t.blendMode,u),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Zv.extension={name:"tilingSprite",type:rt.RendererPlugin};pt.add(Zv);const Qv=class an{constructor(t,e,i){this.linkedSheets=[],(t instanceof Et||t instanceof dt)&&(t={texture:t,data:e,resolutionFilename:i});const{texture:s,data:n,resolutionFilename:o=null,cachePrefix:a=""}=t;this.cachePrefix=a,this._texture=s instanceof dt?s:null,this.baseTexture=s instanceof Et?s:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let i=Vr(t,null);return i===null&&(i=typeof e=="number"?e:parseFloat(e??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=an.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const i=an.BATCH_SIZE;for(;e-t<i&&e<this._frameKeys.length;){const s=this._frameKeys[e],n=this._frames[s],o=n.frame;if(o){let a=null,l=null;const u=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,d=new Ct(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);n.rotated?a=new Ct(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ct(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new Ct(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[s]=new dt(this.baseTexture,a,d,l,n.rotated?2:0,n.anchor,n.borders),dt.addToCache(this.textures[s],this.cachePrefix+s.toString())}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const s=t[e][i];this.animations[e].push(this.textures[s])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*an.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*an.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};Qv.BATCH_SIZE=1e3;let Cf=Qv;const bI=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Jv(r,t,e){const i={};if(r.forEach(s=>{i[s]=t}),Object.keys(t.textures).forEach(s=>{i[`${t.cachePrefix}${s}`]=t.textures[s]}),!e){const s=ye.dirname(r[0]);t.linkedSheets.forEach((n,o)=>{Object.assign(i,Jv([`${s}/${t.data.meta.related_multi_packs[o]}`],n,!0))})}return i}const xI={extension:rt.Asset,cache:{test:r=>r instanceof Cf,getCacheableAssets:(r,t)=>Jv(r,t,!1)},resolver:{test:r=>{const t=r.split("?")[0].split("."),e=t.pop(),i=t.pop();return e==="json"&&bI.includes(i)},parse:r=>{var e;const t=r.split(".");return{resolution:parseFloat(((e=ot.RETINA_PREFIX.exec(r))==null?void 0:e[1])??"1"),format:t[t.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:rt.LoadParser,priority:lr.Normal},async testParse(r,t){return ye.extname(t.src).toLowerCase()===".json"&&!!r.frames},async parse(r,t,e){var d,f;const{texture:i,imageFilename:s,cachePrefix:n}=(t==null?void 0:t.data)??{};let o=ye.dirname(t.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(i&&i.baseTexture)a=i;else{const m=Ec(o+(s??r.meta.image),t.src);a=(await e.load([m]))[m]}const l=new Cf({texture:a.baseTexture,data:r,resolutionFilename:t.src,cachePrefix:n});await l.parse();const u=(d=r==null?void 0:r.meta)==null?void 0:d.related_multi_packs;if(Array.isArray(u)){const m=[];for(const y of u){if(typeof y!="string")continue;let b=o+y;(f=t.data)!=null&&f.ignoreMultiPack||(b=Ec(b,t.src),m.push(e.load({src:b,data:{ignoreMultiPack:!0}})))}const v=await Promise.all(m);l.linkedSheets=v,v.forEach(y=>{y.linkedSheets=[l].concat(l.linkedSheets.filter(b=>b!==y))})}return l},unload(r){r.destroy(!0)}}};pt.add(xI);class ma{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Vo{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const n in e){const o=e[n].match(/^[a-z]+/gm)[0],a=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const d=a[u].split("="),f=d[0],m=d[1].replace(/"/gm,""),v=parseFloat(m),y=isNaN(v)?m:v;l[f]=y}i[o].push(l)}const s=new ma;return i.info.forEach(n=>s.info.push({face:n.face,size:parseInt(n.size,10)})),i.common.forEach(n=>s.common.push({lineHeight:parseInt(n.lineHeight,10)})),i.page.forEach(n=>s.page.push({id:parseInt(n.id,10),file:n.file})),i.char.forEach(n=>s.char.push({id:parseInt(n.id,10),page:parseInt(n.page,10),x:parseInt(n.x,10),y:parseInt(n.y,10),width:parseInt(n.width,10),height:parseInt(n.height,10),xoffset:parseInt(n.xoffset,10),yoffset:parseInt(n.yoffset,10),xadvance:parseInt(n.xadvance,10)})),i.kerning.forEach(n=>s.kerning.push({first:parseInt(n.first,10),second:parseInt(n.second,10),amount:parseInt(n.amount,10)})),i.distanceField.forEach(n=>s.distanceField.push({distanceRange:parseInt(n.distanceRange,10),fieldType:n.fieldType})),s}}class Rc{static test(t){const e=t;return typeof t!="string"&&"getElementsByTagName"in t&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const e=new ma,i=t.getElementsByTagName("info"),s=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)e.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<s.length;u++)e.common.push({lineHeight:parseInt(s[u].getAttribute("lineHeight"),10)});for(let u=0;u<n.length;u++)e.page.push({id:parseInt(n[u].getAttribute("id"),10)||0,file:n[u].getAttribute("file")});for(let u=0;u<o.length;u++){const d=o[u];e.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)e.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)e.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return e}}class Mc{static test(t){return typeof t=="string"&&t.includes("<font>")?Rc.test(ot.ADAPTER.parseXML(t)):!1}static parse(t){return Rc.parse(ot.ADAPTER.parseXML(t))}}const bh=[Vo,Rc,Mc];function wI(r){for(let t=0;t<bh.length;t++)if(bh[t].test(r))return bh[t];return null}function TI(r,t,e,i,s,n){const o=e.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=e.dropShadow?e.dropShadowDistance:0,u=e.padding||0,d=r.width/i-l-u*2,f=r.height/i-l-u*2,m=o.slice(),v=e.fillGradientStops.slice();if(!v.length){const y=m.length+1;for(let b=1;b<y;++b)v.push(b/y)}if(m.unshift(o[0]),v.unshift(0),m.push(o[o.length-1]),v.push(1),e.fillGradientType===qa.LINEAR_VERTICAL){a=t.createLinearGradient(d/2,u,d/2,f+u);let y=0;const b=(n.fontProperties.fontSize+e.strokeThickness)/f;for(let w=0;w<s.length;w++){const E=n.lineHeight*w;for(let P=0;P<m.length;P++){let S=0;typeof v[P]=="number"?S=v[P]:S=P/m.length;const M=E/f+S*b;let k=Math.max(y,M);k=Math.min(k,1),a.addColorStop(k,m[P]),y=k}}}else{a=t.createLinearGradient(u,f/2,d+u,f/2);const y=m.length+1;let b=1;for(let w=0;w<m.length;w++){let E;typeof v[w]=="number"?E=v[w]:E=b/y,a.addColorStop(E,m[w]),b++}}return a}function EI(r,t,e,i,s,n,o){const a=e.text,l=e.fontProperties;t.translate(i,s),t.scale(n,n);const u=o.strokeThickness/2,d=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=TI(r,t,o,n,[a],e),t.strokeStyle=o.stroke,o.dropShadow){const f=o.dropShadowColor,m=o.dropShadowBlur*n,v=o.dropShadowDistance*n;t.shadowColor=Xt.shared.setValue(f).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=m,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*v,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*v}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,u,d+e.lineHeight-l.descent),o.fill&&t.fillText(a,u,d+e.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Wo(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function ty(r){return Array.from?Array.from(r):r.split("")}function SI(r){typeof r=="string"&&(r=[r]);const t=[];for(let e=0,i=r.length;e<i;e++){const s=r[e];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);const n=s[0].charCodeAt(0),o=s[1].charCodeAt(0);if(o<n)throw new Error("[BitmapFont]: Invalid character range.");for(let a=n,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...ty(s))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const ei=class mr{constructor(t,e,i){var d;const[s]=t.info,[n]=t.common,[o]=t.page,[a]=t.distanceField,l=Vr(o.file),u={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/l,this.chars={},this.pageTextures=u;for(let f=0;f<t.page.length;f++){const{id:m,file:v}=t.page[f];u[m]=e instanceof Array?e[f]:e[v],a!=null&&a.fieldType&&a.fieldType!=="none"&&(u[m].baseTexture.alphaMode=Re.NO_PREMULTIPLIED_ALPHA,u[m].baseTexture.mipmap=Ar.OFF)}for(let f=0;f<t.char.length;f++){const{id:m,page:v}=t.char[f];let{x:y,y:b,width:w,height:E,xoffset:P,yoffset:S,xadvance:M}=t.char[f];y/=l,b/=l,w/=l,E/=l,P/=l,S/=l,M/=l;const k=new Ct(y+u[v].frame.x/l,b+u[v].frame.y/l,w,E);this.chars[m]={xOffset:P,yOffset:S,xAdvance:M,kerning:{},texture:new dt(u[v].baseTexture,k),page:v}}for(let f=0;f<t.kerning.length;f++){let{first:m,second:v,amount:y}=t.kerning[f];m/=l,v/=l,y/=l,this.chars[v]&&(this.chars[v].kerning[m]=y)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((d=a==null?void 0:a.fieldType)==null?void 0:d.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,i){let s;if(t instanceof ma)s=t;else{const o=wI(t);if(!o)throw new Error("Unrecognized data format for font.");s=o.parse(t)}e instanceof dt&&(e=[e]);const n=new mr(s,e,i);return mr.available[n.font]=n,n}static uninstall(t){const e=mr.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete mr.available[t]}static from(t,e,i){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:o,textureWidth:a,textureHeight:l,...u}=Object.assign({},mr.defaultOptions,i),d=SI(s),f=e instanceof yi?e:new yi(e),m=a,v=new ma;v.info[0]={face:f.fontFamily,size:f.fontSize},v.common[0]={lineHeight:f.fontSize};let y=0,b=0,w,E,P,S=0;const M=[];for(let F=0;F<d.length;F++){w||(w=ot.ADAPTER.createCanvas(),w.width=a,w.height=l,E=w.getContext("2d"),P=new Et(w,{resolution:o,...u}),M.push(new dt(P)),v.page.push({id:M.length-1,file:""}));const C=d[F],N=oi.measureText(C,f,!1,w),U=N.width,H=Math.ceil(N.height),Q=Math.ceil((f.fontStyle==="italic"?2:1)*U);if(b>=l-H*o){if(b===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${C}')`);--F,w=null,E=null,P=null,b=0,y=0,S=0;continue}if(S=Math.max(H+N.fontProperties.descent,S),Q*o+y>=m){if(y===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${C}')`);--F,b+=S*o,b=Math.ceil(b),y=0,S=0;continue}EI(w,E,N,y,b,o,f);const G=Wo(N.text);v.char.push({id:G,page:M.length-1,x:y/o,y:b/o,width:Q,height:H,xoffset:0,yoffset:0,xadvance:U-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0)}),y+=(Q+2*n)*o,y=Math.ceil(y)}if(!(i!=null&&i.skipKerning))for(let F=0,C=d.length;F<C;F++){const N=d[F];for(let U=0;U<C;U++){const H=d[U],Q=E.measureText(N).width,G=E.measureText(H).width,O=E.measureText(N+H).width-(Q+G);O&&v.kerning.push({first:Wo(N),second:Wo(H),amount:O})}}const k=new mr(v,M,!0);return mr.available[t]!==void 0&&mr.uninstall(t),mr.available[t]=k,k}};ei.ALPHA=[["a","z"],["A","Z"]," "],ei.NUMERIC=[["0","9"]],ei.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ei.ASCII=[[" ","~"]],ei.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ei.ALPHANUMERIC},ei.available={};let ri=ei;var AI=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,CI=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Pf=[],If=[],Rf=[],PI=class ey extends or{constructor(t,e={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},ey.styleDefaults,e);if(!ri.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Xt(s),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=t,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ur(()=>{this.dirty=!0},this,0,0),this._roundPixels=ot.ROUND_PIXELS,this.dirty=!0,this._resolution=ot.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var Q;const t=ri.available[this._fontName],e=this.fontSize,i=e/t.size,s=new Lt,n=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=ty(l),d=this._maxWidth*t.size/e,f=t.distanceFieldType==="none"?Pf:If;let m=null,v=0,y=0,b=0,w=-1,E=0,P=0,S=0,M=0;for(let G=0;G<u.length;G++){const O=u[G],L=Wo(O);if(/(?:\s)/.test(O)&&(w=G,E=v,M++),O==="\r"||O===`
`){o.push(v),a.push(-1),y=Math.max(y,v),++b,++P,s.x=0,s.y+=t.lineHeight,m=null,M=0;continue}const z=t.chars[L];if(!z)continue;m&&z.kerning[m]&&(s.x+=z.kerning[m]);const J=Rf.pop()||{texture:dt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Lt};J.texture=z.texture,J.line=b,J.charCode=L,J.position.x=Math.round(s.x+z.xOffset+this._letterSpacing/2),J.position.y=Math.round(s.y+z.yOffset),J.prevSpaces=M,n.push(J),v=J.position.x+Math.max(z.xAdvance-z.xOffset,z.texture.orig.width),s.x+=z.xAdvance+this._letterSpacing,S=Math.max(S,z.yOffset+z.texture.height),m=L,w!==-1&&d>0&&s.x>d&&(++P,bs(n,1+w-P,1+G-w),G=w,w=-1,o.push(E),a.push(n.length>0?n[n.length-1].prevSpaces:0),y=Math.max(y,E),b++,s.x=0,s.y+=t.lineHeight,m=null,M=0)}const k=u[u.length-1];k!=="\r"&&k!==`
`&&(/(?:\s)/.test(k)&&(v=E),o.push(v),y=Math.max(y,v),a.push(-1));const F=[];for(let G=0;G<=b;G++){let O=0;this._align==="right"?O=y-o[G]:this._align==="center"?O=(y-o[G])/2:this._align==="justify"&&(O=a[G]<0?0:(y-o[G])/a[G]),F.push(O)}const C=n.length,N={},U=[],H=this._activePagesMeshData;f.push(...H);for(let G=0;G<C;G++){const O=n[G].texture,L=O.baseTexture.uid;if(!N[L]){let z=f.pop();if(!z){const Z=new QP;let ut,Tt;t.distanceFieldType==="none"?(ut=new Ef(dt.EMPTY),Tt=_t.NORMAL):(ut=new Ef(dt.EMPTY,{program:$r.from(CI,AI),uniforms:{uFWidth:0}}),Tt=_t.NORMAL_NPM);const Y=new Tf(Z,ut);Y.blendMode=Tt,z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Y,vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;const{_textureCache:J}=this;J[L]=J[L]||new dt(O.baseTexture),z.mesh.texture=J[L],z.mesh.tint=this._tintColor.value,U.push(z),N[L]=z}N[L].total++}for(let G=0;G<H.length;G++)U.includes(H[G])||this.removeChild(H[G].mesh);for(let G=0;G<U.length;G++)U[G].mesh.parent!==this&&this.addChild(U[G].mesh);this._activePagesMeshData=U;for(const G in N){const O=N[G],L=O.total;if(!(((Q=O.indices)==null?void 0:Q.length)>6*L)||O.vertices.length<Tf.BATCHABLE_SIZE*2)O.vertices=new Float32Array(4*2*L),O.uvs=new Float32Array(4*2*L),O.indices=new Uint16Array(6*L);else{const z=O.total,J=O.vertices;for(let Z=z*4*2;Z<J.length;Z++)J[Z]=0}O.mesh.size=6*L}for(let G=0;G<C;G++){const O=n[G];let L=O.position.x+F[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(L=Math.round(L));const z=L*i,J=O.position.y*i,Z=O.texture,ut=N[Z.baseTexture.uid],Tt=Z.frame,Y=Z._uvs,tt=ut.index++;ut.indices[tt*6+0]=0+tt*4,ut.indices[tt*6+1]=1+tt*4,ut.indices[tt*6+2]=2+tt*4,ut.indices[tt*6+3]=0+tt*4,ut.indices[tt*6+4]=2+tt*4,ut.indices[tt*6+5]=3+tt*4,ut.vertices[tt*8+0]=z,ut.vertices[tt*8+1]=J,ut.vertices[tt*8+2]=z+Tt.width*i,ut.vertices[tt*8+3]=J,ut.vertices[tt*8+4]=z+Tt.width*i,ut.vertices[tt*8+5]=J+Tt.height*i,ut.vertices[tt*8+6]=z,ut.vertices[tt*8+7]=J+Tt.height*i,ut.uvs[tt*8+0]=Y.x0,ut.uvs[tt*8+1]=Y.y0,ut.uvs[tt*8+2]=Y.x1,ut.uvs[tt*8+3]=Y.y1,ut.uvs[tt*8+4]=Y.x2,ut.uvs[tt*8+5]=Y.y2,ut.uvs[tt*8+6]=Y.x3,ut.uvs[tt*8+7]=Y.y3}this._textWidth=y*i,this._textHeight=(s.y+t.lineHeight)*i;for(const G in N){const O=N[G];if(this.anchor.x!==0||this.anchor.y!==0){let Z=0;const ut=this._textWidth*this.anchor.x,Tt=this._textHeight*this.anchor.y;for(let Y=0;Y<O.total;Y++)O.vertices[Z++]-=ut,O.vertices[Z++]-=Tt,O.vertices[Z++]-=ut,O.vertices[Z++]-=Tt,O.vertices[Z++]-=ut,O.vertices[Z++]-=Tt,O.vertices[Z++]-=ut,O.vertices[Z++]-=Tt}this._maxLineHeight=S*i;const L=O.mesh.geometry.getBuffer("aVertexPosition"),z=O.mesh.geometry.getBuffer("aTextureCoord"),J=O.mesh.geometry.getIndex();L.data=O.vertices,z.data=O.uvs,J.data=O.indices,L.update(),z.update(),J.update()}for(let G=0;G<n.length;G++)Rf.push(n[G]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:i,size:s}=ri.available[this._fontName];if(i!=="none"){const{a:n,b:o,c:a,d:l}=this.worldTransform,u=Math.sqrt(n*n+o*o),d=Math.sqrt(a*a+l*l),f=(Math.abs(u)+Math.abs(d))/2,m=this.fontSize/s,v=t._view.resolution;for(const y of this._activePagesMeshData)y.mesh.shader.uniforms.uFWidth=f*e*m*v}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=ri.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ri.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??ri.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=ri.available[this._fontName].distanceFieldType==="none"?Pf:If;i.push(...this._activePagesMeshData);for(const s of this._activePagesMeshData)this.removeChild(s.mesh);this._activePagesMeshData=[],i.filter(s=>e[s.mesh.texture.baseTexture.uid]).forEach(s=>{s.mesh.texture=dt.EMPTY});for(const s in e)e[s].destroy(),delete e[s];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};PI.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const II=[".xml",".fnt"],RI={extension:{type:rt.LoadParser,priority:lr.Normal},name:"loadBitmapFont",test(r){return II.includes(ye.extname(r).toLowerCase())},async testParse(r){return Vo.test(r)||Mc.test(r)},async parse(r,t,e){const i=Vo.test(r)?Vo.parse(r):Mc.parse(r),{src:s}=t,{page:n}=i,o=[];for(let u=0;u<n.length;++u){const d=n[u].file;let f=ye.join(ye.dirname(s),d);f=Ec(f,s),o.push(f)}const a=await e.load(o),l=o.map(u=>a[u]);return ri.install(i,l,!0)},async load(r,t){return(await ot.ADAPTER.fetch(r)).text()},unload(r){r.destroy()}};pt.add(RI);const kc=class us extends yi{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new us(Object.keys(us.defaultOptions).reduce((e,i)=>({...e,[i]:t[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete us.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:i}=us;if(i[t]){const s=i[t];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ot.ADAPTER.fetch(t).then(s=>s.blob()).then(async s=>new Promise((n,o)=>{const a=URL.createObjectURL(s),l=new FileReader;l.onload=()=>n([a,l.result]),l.onerror=o,l.readAsDataURL(s)})).then(async([s,n])=>{const o=Object.assign({family:ye.basename(t,ye.extname(t)),weight:"normal",style:"normal",display:"auto",src:s,dataSrc:n,refs:1,originalUrl:t,fontFace:null},e);i[t]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(i=>!this._overrides.includes(i));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(i=>this._overrides.includes(i));e.length>0&&(this._overrides=this._overrides.filter(i=>!e.includes(i)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style};
                font-display: ${e.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=yS(t)),typeof t=="number"?vS(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${n} ${t}`}reset(){Object.assign(this,us.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=ot.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};kc.availableFonts={},kc.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let xh=kc;const ko=class ds extends Ds{constructor(t="",e={}){super(dt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const i=new Image,s=dt.from(i,{scaleMode:ot.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new Ct,s.trim=new Ct,this.texture=s;const n="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(n,"svg"),l=document.createElementNS(n,"foreignObject"),u=document.createElementNS(o,"div"),d=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=ds.defaultMaxWidth,this.maxHeight=ds.defaultMaxHeight,this._domElement=u,this._styleElement=d,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(d),this._foreignObject.appendChild(u),this._image=i,this._loadImage=new Image,this._autoResolution=ds.defaultAutoResolution,this._resolution=ds.defaultResolution??ot.RESOLUTION,this.text=t,this.style=e}measureText(t){var d,f;const{text:e,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=n;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:(d=this._style)==null?void 0:d.toCSS(s)}),this._styleElement.textContent=(f=this._style)==null?void 0:f.toGlobalCSS()),{width:l+i.padding*2,height:u+i.padding*2}}async updateText(t=!0){const{style:e,_image:i,_loadImage:s}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:n,height:o}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{s.onload=async()=>{if(a<this._updateID){l();return}await e.onBeforeDraw(),i.src=s.src,s.onload=null,s.src="",this.updateTexture(),l()};const u=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:i,resolution:s}=this,{padding:n}=t,{baseTexture:o}=e;e.trim.width=e._frame.width=i.width/s,e.trim.height=e._frame.height=i.height/s,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),o.setRealSize(i.width,i.height,s),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var i,s,n,o,a;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},ds.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((i=this._style)==null||i.cleanFonts()),this._style=e,(s=this._svgRoot)==null||s.remove(),this._svgRoot=e,(n=this._domElement)==null||n.remove(),this._domElement=e,(o=this._foreignObject)==null||o.remove(),this._foreignObject=e,(a=this._styleElement)==null||a.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=hi(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=hi(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof xh?(this.ownsStyle=!1,this._style=t):t instanceof yi?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=xh.from(t)):(this.ownsStyle=!0,this._style=new xh(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ko.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ko.defaultMaxWidth=2024,ko.defaultMaxHeight=2024,ko.defaultAutoResolution=!0;const MI=It({__name:"App",setup(r){const{switchCharacter:t,switchSkin:e,captureFrame:i,toggleLive2DVisibility:s,isLive2DHide:n}=Iw();return qt(n,o=>(o?Mw:Rw)()),(o,a)=>(W(),at(Ie,null,[a[4]||(a[4]=vt("div",{id:"live2d"},[vt("div",{id:"live2d-tips"}),vt("canvas",{id:"live2d-canvas"})],-1)),vt("div",{id:"live2d-tools",class:re(K(n)?"hide":"show")},[vt("span",{id:"live2d-tool-quit",class:"live2d-tool hide-live2d",onClick:a[0]||(a[0]=l=>K(s)())},te(K(n)?"Show":"Hide"),1),vt("span",{id:"live2d-tool-switch-model",class:"live2d-tool",style:{"--live2d-tool-bg":"#c3a6cb"},onClick:a[1]||(a[1]=l=>K(t)())}," Tia "),vt("span",{id:"live2d-tool-switch-texture",class:"live2d-tool",style:{"--live2d-tool-bg":"#16a"},onClick:a[2]||(a[2]=l=>K(e)())}," Switch "),vt("span",{id:"live2d-tool-photo",class:"live2d-tool",style:{"--live2d-tool-bg":"orange"},onClick:a[3]||(a[3]=l=>K(i)())}," Save ")],2)],64))}}),kI=me(MI,[["__scopeId","data-v-09c8249c"]]),DI=[{component:xw,props:{id:"2489775340",server:"netease",type:"playlist"}},{component:kI,props:{}}],OI=It({__name:"ValaxyAddons",setup(r){return(t,e)=>(W(!0),at(Ie,null,Dn(K(DI),({component:i,props:s},n)=>(W(),zt(lm(i),Hr({ref_for:!0},s,{key:n}),null,16))),128))}}),BI="valaxy-theme-sakura",LI="0.9.4",FI={email:"3322543587@qq.com",name:"WRXinYue",url:"https://wrxinyue.org"},NI="https://github.com/WRXinYue/valaxy-theme-sakura",UI={type:"git",url:"https://github.com/WRXinYue/valaxy-theme-sakura.git"},$I={"@wrxinyue:registry":"https://npm.pkg.github.com"},GI=["valaxy","theme","sakura","vue"],HI="client/index.ts",zI="types/index.d.ts",jI={"valaxy-addon-hitokoto":"^0.0.1","valaxy-addon-vercount":"^0.0.6"},VI={"@ctrl/tinycolor":"^4.1.0","@iconify-json/fa6-solid":"^1.2.3","@iconify-json/mdi":"^1.2.3",interactjs:"^1.10.27",lenis:"^1.2.3",typeit:"^8.8.7"},WI={"@interactjs/types":"^1.10.27",valaxy:"^0.23.3"},XI={release:"bumpp && npm publish"},YI={name:BI,version:LI,author:FI,homepage:NI,repository:UI,publishConfig:$I,keywords:GI,main:HI,types:zI,peerDependencies:jI,dependencies:VI,devDependencies:WI,scripts:XI},qI={class:"powered",m:"2",translate:"no"},KI=["innerHTML"],ZI=["href","title"],QI=It({__name:"SakuraPowered",props:{pkg:{}},setup(r){const t=r,{t:e}=Yr(),i=Ln(),s=et(()=>t.pkg||i.value.themeConfig.pkg||YI),n=et(()=>e("footer.powered",[`<a href="${Lh.repository.url}" target="_blank" rel="noopener">Valaxy</a> v${Lh.version}`]));return(o,a)=>(W(),at("div",qI,[vt("span",{innerHTML:n.value},null,8,KI),a[0]||(a[0]=ui(" | ")),vt("span",null,[ui(te(K(e)("footer.theme"))+" ",1),vt("a",{href:s.value.homepage,title:`valaxy-theme-${K(i).theme}`,target:"_blank"},te(a0(K(i).theme)),9,ZI),ui(" v"+te(s.value.version),1)])]))}});function ke(){const r=ox();return et(()=>r.value.themeConfig)}function JI(){const r=Xi(),t=et(()=>{var i;return(i=r.meta)==null?void 0:i.layout});function e(i){return typeof i=="boolean"?i:typeof i=="string"?i===t.value:Array.isArray(i)?i.includes(t.value):!1}return{layout:t,isIncludes:e}}function tR(){const r=yt(),t=yt(1),e=yt([]),i=yt(),s=yt(0);return{curPage:r,loadMultiple:t,paginationTargets:e,paginationObserver:i,paginationElementPositionsNumber:s}}function eR(){const r=yt({});function t(i,s){r.value[i]=s}function e(i){return r.value[i]||0}return{positions:r,setScrollPosition:t,getScrollPosition:e}}function rR(){const r=yt(!1);function t(){r.value=!r.value}function e(){r.value=!0}function i(){r.value=!1}return{search:{isOpen:r,toggle:t,open:e,close:i}}}const ga=Object.freeze({IS_SIDEBAR_OPEN:"is-sidebar-open"});function iR(r){return!Number.isNaN(Number.parseFloat(r))&&Number.isFinite(r)}function ry(r,t){try{const e=r.getItem(t);return e===null?null:iR(e)?Number(e):e==="true"?!0:e==="false"?!1:e}catch(e){return console.error("Failed to read from storage:",e),null}}function iy(r,t,e){try{r.setItem(t,e.toString())}catch(i){console.error("Failed to write to storage:",i)}}function sR(r){return ry(localStorage,r)}function nR(r,t){iy(localStorage,r,t)}function oR(r){return ry(sessionStorage,r)}function aR(r,t){iy(sessionStorage,r,t)}function lR(){const r=yt(!1),t=Oa(),e=et(()=>t.value.sidebar!==!1);function i(){r.value=!0}function s(){r.value=!1}function n(){r.value?s():i()}const o=ke().value.sidebarOptions;return(o==null?void 0:o.persistence)==="permanent"?qt(r,()=>nR(ga.IS_SIDEBAR_OPEN,r.value)):(o==null?void 0:o.persistence)==="session"&&qt(r,()=>aR(ga.IS_SIDEBAR_OPEN,r.value)),{sidebar:{isOpen:r,hasSidebar:e,open:i,close:s,toggle:n}}}function hR(){const r=Da("wallpaperKey-hero",0),t=yt(0),e=yt(),i=yt(!1);function s(){e.value="prevMedia",r.value=(r.value-1+t.value)%t.value,setTimeout(()=>{e.value=""},0)}function n(){e.value="nextMedia",r.value=(r.value+1)%t.value,setTimeout(()=>{e.value=""},0)}function o(){i.value=!i.value}return{wallpaperIndex:r,wallpaperLength:t,wallpaperOperation:e,wallpaperIsPlaying:i,prevWallpaper:s,nextWallpaper:n,togglePlayPause:o}}const Bs=Ea("sakura-app",()=>{const r=eR(),t=tR(),e=hR(),i=lR(),s=rR();return{...r,...t,...e,...i,...s}});function Mf(r){if(typeof r=="string")return r;if(Array.isArray(r)&&r.length>0)return r[Math.floor(Math.random()*r.length)]}function mD(r){return/\.(?:mp4|webm|ogg)$/i.test(r)}var cR="1.3.4";function sy(r,t,e){return Math.max(r,Math.min(t,e))}function uR(r,t,e){return(1-e)*r+e*t}function dR(r,t,e,i){return uR(r,t,1-Math.exp(-e*i))}function pR(r,t){return(r%t+t)%t}var fR=class{constructor(){it(this,"isRunning",!1);it(this,"value",0);it(this,"from",0);it(this,"to",0);it(this,"currentTime",0);it(this,"lerp");it(this,"duration");it(this,"easing");it(this,"onUpdate")}advance(r){var e;if(!this.isRunning)return;let t=!1;if(this.duration&&this.easing){this.currentTime+=r;const i=sy(0,this.currentTime/this.duration,1);t=i>=1;const s=t?1:this.easing(i);this.value=this.from+(this.to-this.from)*s}else this.lerp?(this.value=dR(this.value,this.to,this.lerp*60,r),Math.round(this.value)===this.to&&(this.value=this.to,t=!0)):(this.value=this.to,t=!0);t&&this.stop(),(e=this.onUpdate)==null||e.call(this,this.value,t)}stop(){this.isRunning=!1}fromTo(r,t,{lerp:e,duration:i,easing:s,onStart:n,onUpdate:o}){this.from=this.value=r,this.to=t,this.lerp=e,this.duration=i,this.easing=s,this.currentTime=0,this.isRunning=!0,n==null||n(),this.onUpdate=o}};function mR(r,t){let e;return function(...i){let s=this;clearTimeout(e),e=setTimeout(()=>{e=void 0,r.apply(s,i)},t)}}var gR=class{constructor(r,t,{autoResize:e=!0,debounce:i=250}={}){it(this,"width",0);it(this,"height",0);it(this,"scrollHeight",0);it(this,"scrollWidth",0);it(this,"debouncedResize");it(this,"wrapperResizeObserver");it(this,"contentResizeObserver");it(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});it(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});it(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=r,this.content=t,e&&(this.debouncedResize=mR(this.resize,i),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var r,t;(r=this.wrapperResizeObserver)==null||r.disconnect(),(t=this.contentResizeObserver)==null||t.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},ny=class{constructor(){it(this,"events",{})}emit(r,...t){var i;let e=this.events[r]||[];for(let s=0,n=e.length;s<n;s++)(i=e[s])==null||i.call(e,...t)}on(r,t){var e;return(e=this.events[r])!=null&&e.push(t)||(this.events[r]=[t]),()=>{var i;this.events[r]=(i=this.events[r])==null?void 0:i.filter(s=>t!==s)}}off(r,t){var e;this.events[r]=(e=this.events[r])==null?void 0:e.filter(i=>t!==i)}destroy(){this.events={}}},kf=100/6,ti={passive:!1},vR=class{constructor(r,t={wheelMultiplier:1,touchMultiplier:1}){it(this,"touchStart",{x:0,y:0});it(this,"lastDelta",{x:0,y:0});it(this,"window",{width:0,height:0});it(this,"emitter",new ny);it(this,"onTouchStart",r=>{const{clientX:t,clientY:e}=r.targetTouches?r.targetTouches[0]:r;this.touchStart.x=t,this.touchStart.y=e,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:r})});it(this,"onTouchMove",r=>{const{clientX:t,clientY:e}=r.targetTouches?r.targetTouches[0]:r,i=-(t-this.touchStart.x)*this.options.touchMultiplier,s=-(e-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=t,this.touchStart.y=e,this.lastDelta={x:i,y:s},this.emitter.emit("scroll",{deltaX:i,deltaY:s,event:r})});it(this,"onTouchEnd",r=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:r})});it(this,"onWheel",r=>{let{deltaX:t,deltaY:e,deltaMode:i}=r;const s=i===1?kf:i===2?this.window.width:1,n=i===1?kf:i===2?this.window.height:1;t*=s,e*=n,t*=this.options.wheelMultiplier,e*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:t,deltaY:e,event:r})});it(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=r,this.options=t,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,ti),this.element.addEventListener("touchstart",this.onTouchStart,ti),this.element.addEventListener("touchmove",this.onTouchMove,ti),this.element.addEventListener("touchend",this.onTouchEnd,ti)}on(r,t){return this.emitter.on(r,t)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,ti),this.element.removeEventListener("touchstart",this.onTouchStart,ti),this.element.removeEventListener("touchmove",this.onTouchMove,ti),this.element.removeEventListener("touchend",this.onTouchEnd,ti)}},Df=r=>Math.min(1,1.001-Math.pow(2,-10*r)),yR=class{constructor({wrapper:r=window,content:t=document.documentElement,eventsTarget:e=r,smoothWheel:i=!0,syncTouch:s=!1,syncTouchLerp:n=.075,touchInertiaMultiplier:o=35,duration:a,easing:l,lerp:u=.1,infinite:d=!1,orientation:f="vertical",gestureOrientation:m="vertical",touchMultiplier:v=1,wheelMultiplier:y=1,autoResize:b=!0,prevent:w,virtualScroll:E,overscroll:P=!0,autoRaf:S=!1,anchors:M=!1,autoToggle:k=!1,allowNestedScroll:F=!1,__experimental__naiveDimensions:C=!1}={}){it(this,"_isScrolling",!1);it(this,"_isStopped",!1);it(this,"_isLocked",!1);it(this,"_preventNextNativeScrollEvent",!1);it(this,"_resetVelocityTimeout",null);it(this,"__rafID",null);it(this,"isTouching");it(this,"time",0);it(this,"userData",{});it(this,"lastVelocity",0);it(this,"velocity",0);it(this,"direction",0);it(this,"options");it(this,"targetScroll");it(this,"animatedScroll");it(this,"animate",new fR);it(this,"emitter",new ny);it(this,"dimensions");it(this,"virtualScroll");it(this,"onScrollEnd",r=>{r instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&r.stopPropagation()});it(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});it(this,"onTransitionEnd",r=>{if(r.propertyName.includes("overflow")){const t=this.isHorizontal?"overflow-x":"overflow-y",e=getComputedStyle(this.rootElement)[t];["hidden","clip"].includes(e)?this.stop():this.start()}});it(this,"onClick",r=>{const e=r.composedPath().find(i=>{var s,n,o;return i instanceof HTMLAnchorElement&&(((s=i.getAttribute("href"))==null?void 0:s.startsWith("#"))||((n=i.getAttribute("href"))==null?void 0:n.startsWith("/#"))||((o=i.getAttribute("href"))==null?void 0:o.startsWith("./#")))});if(e){const i=e.getAttribute("href");if(i){const s=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0;let n=`#${i.split("#")[1]}`;["#","/#","./#","#top","/#top","./#top"].includes(i)&&(n=0),this.scrollTo(n,s)}}});it(this,"onPointerDown",r=>{r.button===1&&this.reset()});it(this,"onVirtualScroll",r=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(r)===!1)return;const{deltaX:t,deltaY:e,event:i}=r;if(this.emitter.emit("virtual-scroll",{deltaX:t,deltaY:e,event:i}),i.ctrlKey||i.lenisStopPropagation)return;const s=i.type.includes("touch"),n=i.type.includes("wheel");this.isTouching=i.type==="touchstart"||i.type==="touchmove";const o=t===0&&e===0;if(this.options.syncTouch&&s&&i.type==="touchstart"&&o&&!this.isStopped&&!this.isLocked){this.reset();return}const l=this.options.gestureOrientation==="vertical"&&e===0||this.options.gestureOrientation==="horizontal"&&t===0;if(o||l)return;let u=i.composedPath();u=u.slice(0,u.indexOf(this.rootElement));const d=this.options.prevent;if(u.find(w=>{var E,P,S;return w instanceof HTMLElement&&(typeof d=="function"&&(d==null?void 0:d(w))||((E=w.hasAttribute)==null?void 0:E.call(w,"data-lenis-prevent"))||s&&((P=w.hasAttribute)==null?void 0:P.call(w,"data-lenis-prevent-touch"))||n&&((S=w.hasAttribute)==null?void 0:S.call(w,"data-lenis-prevent-wheel"))||this.options.allowNestedScroll&&this.checkNestedScroll(w,{deltaX:t,deltaY:e}))}))return;if(this.isStopped||this.isLocked){i.preventDefault();return}if(!(this.options.syncTouch&&s||this.options.smoothWheel&&n)){this.isScrolling="native",this.animate.stop(),i.lenisStopPropagation=!0;return}let m=e;this.options.gestureOrientation==="both"?m=Math.abs(e)>Math.abs(t)?e:t:this.options.gestureOrientation==="horizontal"&&(m=t),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&e>0||this.animatedScroll===this.limit&&e<0))&&(i.lenisStopPropagation=!0),i.preventDefault();const v=s&&this.options.syncTouch,b=s&&i.type==="touchend"&&Math.abs(m)>5;b&&(m=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+m,{programmatic:!1,...v?{lerp:b?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});it(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const r=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-r,this.direction=Math.sign(this.animatedScroll-r),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});it(this,"raf",r=>{const t=r-(this.time||r);this.time=r,this.animate.advance(t*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=cR,(!r||r===document.documentElement)&&(r=window),typeof a=="number"&&typeof l!="function"?l=Df:typeof l=="function"&&typeof a!="number"&&(a=1),this.options={wrapper:r,content:t,eventsTarget:e,smoothWheel:i,syncTouch:s,syncTouchLerp:n,touchInertiaMultiplier:o,duration:a,easing:l,lerp:u,infinite:d,gestureOrientation:m,orientation:f,touchMultiplier:v,wheelMultiplier:y,autoResize:b,prevent:w,virtualScroll:E,overscroll:P,autoRaf:S,anchors:M,autoToggle:k,allowNestedScroll:F,__experimental__naiveDimensions:C},this.dimensions=new gR(r,t,{autoResize:b}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new vR(e,{touchMultiplier:v,wheelMultiplier:y}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(r,t){return this.emitter.on(r,t)}off(r,t){return this.emitter.off(r,t)}setScroll(r){this.isHorizontal?this.options.wrapper.scrollTo({left:r,behavior:"instant"}):this.options.wrapper.scrollTo({top:r,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(r,{offset:t=0,immediate:e=!1,lock:i=!1,duration:s=this.options.duration,easing:n=this.options.easing,lerp:o=this.options.lerp,onStart:a,onComplete:l,force:u=!1,programmatic:d=!0,userData:f}={}){if(!((this.isStopped||this.isLocked)&&!u)){if(typeof r=="string"&&["top","left","start"].includes(r))r=0;else if(typeof r=="string"&&["bottom","right","end"].includes(r))r=this.limit;else{let m;if(typeof r=="string"?m=document.querySelector(r):r instanceof HTMLElement&&(r!=null&&r.nodeType)&&(m=r),m){if(this.options.wrapper!==window){const y=this.rootElement.getBoundingClientRect();t-=this.isHorizontal?y.left:y.top}const v=m.getBoundingClientRect();r=(this.isHorizontal?v.left:v.top)+this.animatedScroll}}if(typeof r=="number"){if(r+=t,r=Math.round(r),this.options.infinite){if(d){this.targetScroll=this.animatedScroll=this.scroll;const m=r-this.animatedScroll;m>this.limit/2?r=r-this.limit:m<-this.limit/2&&(r=r+this.limit)}}else r=sy(0,r,this.limit);if(r===this.targetScroll){a==null||a(this),l==null||l(this);return}if(this.userData=f??{},e){this.animatedScroll=this.targetScroll=r,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}d||(this.targetScroll=r),typeof s=="number"&&typeof n!="function"?n=Df:typeof n=="function"&&typeof s!="number"&&(s=1),this.animate.fromTo(this.animatedScroll,r,{duration:s,easing:n,lerp:o,onStart:()=>{i&&(this.isLocked=!0),this.isScrolling="smooth",a==null||a(this)},onUpdate:(m,v)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=m-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=m,this.setScroll(this.scroll),d&&(this.targetScroll=m),v||this.emit(),v&&(this.reset(),this.emit(),l==null||l(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(r,{deltaX:t,deltaY:e}){const i=Date.now(),s=r._lenis??(r._lenis={});let n,o,a,l,u,d,f,m;const v=this.options.gestureOrientation;if(i-(s.time??0)>2e3){s.time=Date.now();const k=window.getComputedStyle(r);s.computedStyle=k;const F=k.overflowX,C=k.overflowY;if(n=["auto","overlay","scroll"].includes(F),o=["auto","overlay","scroll"].includes(C),s.hasOverflowX=n,s.hasOverflowY=o,!n&&!o||v==="vertical"&&!o||v==="horizontal"&&!n)return!1;u=r.scrollWidth,d=r.scrollHeight,f=r.clientWidth,m=r.clientHeight,a=u>f,l=d>m,s.isScrollableX=a,s.isScrollableY=l,s.scrollWidth=u,s.scrollHeight=d,s.clientWidth=f,s.clientHeight=m}else a=s.isScrollableX,l=s.isScrollableY,n=s.hasOverflowX,o=s.hasOverflowY,u=s.scrollWidth,d=s.scrollHeight,f=s.clientWidth,m=s.clientHeight;if(!n&&!o||!a&&!l||v==="vertical"&&(!o||!l)||v==="horizontal"&&(!n||!a))return!1;let y;if(v==="horizontal")y="x";else if(v==="vertical")y="y";else{const k=t!==0,F=e!==0;k&&n&&a&&(y="x"),F&&o&&l&&(y="y")}if(!y)return!1;let b,w,E,P,S;if(y==="x")b=r.scrollLeft,w=u-f,E=t,P=n,S=a;else if(y==="y")b=r.scrollTop,w=d-m,E=e,P=o,S=l;else return!1;return(E>0?b<w:b>0)&&P&&S}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const r=this.options.wrapper;return this.isHorizontal?r.scrollX??r.scrollLeft:r.scrollY??r.scrollTop}get scroll(){return this.options.infinite?pR(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(r){this._isScrolling!==r&&(this._isScrolling=r,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(r){this._isStopped!==r&&(this._isStopped=r,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(r){this._isLocked!==r&&(this._isLocked=r,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let r="lenis";return this.options.autoToggle&&(r+=" lenis-autoToggle"),this.isStopped&&(r+=" lenis-stopped"),this.isLocked&&(r+=" lenis-locked"),this.isScrolling&&(r+=" lenis-scrolling"),this.isScrolling==="smooth"&&(r+=" lenis-smooth"),r}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};const Pu=yt();function oy(r){Pu.value.raf(r),requestAnimationFrame(oy)}async function _R(){Pu.value=new yR({lerp:.04}),requestAnimationFrame(oy)}function ay(r={}){const t=ke(),{percentage:e,show:i}=tw({offset:100}),s=r.scrollAnimation??t.value.scrollAnimation,n=r.scrollDamping??t.value.scrollDamping;function o(d){var f;n?(f=Pu.value)==null||f.scrollTo(d,{offset:0,immediate:!s}):window.scrollTo({top:d,behavior:s?"smooth":"auto"})}function a(d,f="--sakura-navbar-height"){f=typeof f=="string"?Number.parseInt($x(f).value||"",10):f;const m=typeof d=="string"?document.querySelector(d):d instanceof Element?d:null;if(!m){console.warn("Target element not found:",d);return}o(m.clientHeight-f)}return{to:a,toTop:()=>o(0),toDown:()=>a(".sakura-hero"),percentage:e,show:i}}function bR(){return ke().value.scrollLock?Vx(Pr?document.body:null):void 0}const Of=yt();function xR(){var r,t;(r=Of.value)==null||r.load(),(t=Of.value)==null||t.dispatchEvent(new Event("load"))}function wR(r){function t(e){e.key.toLowerCase()==="k"&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),r())}Xr(()=>{fe("keydown",t)})}const Bf=yt(!1);function TR(){const r=Bs(),t=Ve(),e=et(()=>t.value.search.type),i=(s=r.search)=>{const n={fuse:()=>wR(s.toggle),algolia:()=>zc(()=>{s.isOpen&&xR()})};(n[e.value]||(()=>(console.warn("Warning: Unsupported search type. Defaulting to Fuse search."),n.fuse())))()};return Bf.value||(i(),Bf.value=!0),r.search}const ER=yt(Pr?location.hash:"");Pr&&window.addEventListener("hashchange",()=>{ER.value=location.hash});const SR={class:"sakura-copyright copyright flex items-center justify-center",p:"1"},AR={itemprop:"copyrightYear"},CR=["href","title"],PR=["src"],IR={itemprop:"copyrightHolder"},ly=It({__name:"SakuraCopyright",props:{footer:{}},setup(r){const t=r,e=Ve(),i=ke(),s=et(()=>t.footer||i.value.footer),n=new Date().getFullYear(),o=et(()=>n===s.value.since),a=et(()=>s.value.icon);return(l,u)=>{var d,f;return W(),at("div",SR,[vt("span",null,[u[0]||(u[0]=ui(" Copyright © ")),vt("span",AR,[o.value?At("v-if",!0):(W(),at(Ie,{key:0},[ui(te(s.value.since)+" - ",1)],64)),ui(" "+te(K(n)),1)])]),(d=s.value.icon)!=null&&d.enable?(W(),at("a",{key:0,m:"x-2",class:"inline-flex animate-pulse",href:a.value.url,target:"_blank",title:a.value.title},[vt("div",{class:re(a.value.name)},null,2)],8,CR)):At("v-if",!0),!((f=s.value.icon)!=null&&f.enable)&&a.value.img?(W(),at("img",{key:1,class:"h-6 w-6 inline-flex animate-pulse",src:a.value.img,title:"Footer Icon Description"},null,8,PR)):At("v-if",!0),vt("span",IR,te(K(e).author.name),1)])}}}),RR={class:"sakura-footer h-$sakura-footer-height",text:"center sm",style:{color:"var(--va-c-text-light)"}},MR=["innerHTML"],kR=It({__name:"SakuraFooter",props:{footer:{},pkg:{}},setup(r){const t=r,e=ke(),i=et(()=>t.footer||e.value.footer);return(s,n)=>{const o=ly,a=QI;return W(),at("footer",RR,[i.value.icp?(W(),at("div",{key:0,class:"icp",p:"y-2",innerHTML:i.value.icp},null,8,MR)):At("v-if",!0),Ht(o),i.value.powered?(W(),zt(a,{key:1})):At("v-if",!0),Nt(s.$slots,"default")])}}});var va={exports:{}};va.exports;(function(r,t){(function(e,i){r.exports=i()})(gs,function(){function e(c,h){var p=Object.keys(c);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(c);h&&(g=g.filter(function(_){return Object.getOwnPropertyDescriptor(c,_).enumerable})),p.push.apply(p,g)}return p}function i(c){for(var h=1;h<arguments.length;h++){var p=arguments[h]!=null?arguments[h]:{};h%2?e(Object(p),!0).forEach(function(g){l(c,g,p[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(p)):e(Object(p)).forEach(function(g){Object.defineProperty(c,g,Object.getOwnPropertyDescriptor(p,g))})}return c}function s(c){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},s(c)}function n(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function o(c,h){for(var p=0;p<h.length;p++){var g=h[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(c,b(g.key),g)}}function a(c,h,p){return h&&o(c.prototype,h),Object.defineProperty(c,"prototype",{writable:!1}),c}function l(c,h,p){return(h=b(h))in c?Object.defineProperty(c,h,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[h]=p,c}function u(c,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(h&&h.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),h&&f(c,h)}function d(c){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},d(c)}function f(c,h){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,g){return p.__proto__=g,p},f(c,h)}function m(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function v(c){var h=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var p,g=d(c);if(h){var _=d(this).constructor;p=Reflect.construct(g,arguments,_)}else p=g.apply(this,arguments);return function(x,T){if(T&&(typeof T=="object"||typeof T=="function"))return T;if(T!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(x)}(this,p)}}function y(){return y=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(c,h,p){var g=function(x,T){for(;!Object.prototype.hasOwnProperty.call(x,T)&&(x=d(x))!==null;);return x}(c,h);if(g){var _=Object.getOwnPropertyDescriptor(g,h);return _.get?_.get.call(arguments.length<3?c:p):_.value}},y.apply(this,arguments)}function b(c){var h=function(p,g){if(typeof p!="object"||p===null)return p;var _=p[Symbol.toPrimitive];if(_!==void 0){var x=_.call(p,g);if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(p)}(c,"string");return typeof h=="symbol"?h:h+""}var w=function(c){return!(!c||!c.Window)&&c instanceof c.Window},E=void 0,P=void 0;function S(c){E=c;var h=c.document.createTextNode("");h.ownerDocument!==c.document&&typeof c.wrap=="function"&&c.wrap(h)===h&&(c=c.wrap(c)),P=c}function M(c){return w(c)?c:(c.ownerDocument||c).defaultView||P.window}typeof window<"u"&&window&&S(window);var k=function(c){return!!c&&s(c)==="object"},F=function(c){return typeof c=="function"},C={window:function(c){return c===P||w(c)},docFrag:function(c){return k(c)&&c.nodeType===11},object:k,func:F,number:function(c){return typeof c=="number"},bool:function(c){return typeof c=="boolean"},string:function(c){return typeof c=="string"},element:function(c){if(!c||s(c)!=="object")return!1;var h=M(c)||P;return/object|function/.test(typeof Element>"u"?"undefined":s(Element))?c instanceof Element||c instanceof h.Element:c.nodeType===1&&typeof c.nodeName=="string"},plainObject:function(c){return k(c)&&!!c.constructor&&/function Object\b/.test(c.constructor.toString())},array:function(c){return k(c)&&c.length!==void 0&&F(c.splice)}};function N(c){var h=c.interaction;if(h.prepared.name==="drag"){var p=h.prepared.axis;p==="x"?(h.coords.cur.page.y=h.coords.start.page.y,h.coords.cur.client.y=h.coords.start.client.y,h.coords.velocity.client.y=0,h.coords.velocity.page.y=0):p==="y"&&(h.coords.cur.page.x=h.coords.start.page.x,h.coords.cur.client.x=h.coords.start.client.x,h.coords.velocity.client.x=0,h.coords.velocity.page.x=0)}}function U(c){var h=c.iEvent,p=c.interaction;if(p.prepared.name==="drag"){var g=p.prepared.axis;if(g==="x"||g==="y"){var _=g==="x"?"y":"x";h.page[_]=p.coords.start.page[_],h.client[_]=p.coords.start.client[_],h.delta[_]=0}}}var H={id:"actions/drag",install:function(c){var h=c.actions,p=c.Interactable,g=c.defaults;p.prototype.draggable=H.draggable,h.map.drag=H,h.methodDict.drag="draggable",g.actions.drag=H.defaults},listeners:{"interactions:before-action-move":N,"interactions:action-resume":N,"interactions:action-move":U,"auto-start:check":function(c){var h=c.interaction,p=c.interactable,g=c.buttons,_=p.options.drag;if(_&&_.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||g&p.options.drag.mouseButtons))return c.action={name:"drag",axis:_.lockAxis==="start"?_.startAxis:_.lockAxis},!1}},draggable:function(c){return C.object(c)?(this.options.drag.enabled=c.enabled!==!1,this.setPerAction("drag",c),this.setOnEvents("drag",c),/^(xy|x|y|start)$/.test(c.lockAxis)&&(this.options.drag.lockAxis=c.lockAxis),/^(xy|x|y)$/.test(c.startAxis)&&(this.options.drag.startAxis=c.startAxis),this):C.bool(c)?(this.options.drag.enabled=c,this):this.options.drag},beforeMove:N,move:U,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"},filterEventType:function(c){return c.search("drag")===0}},Q=H,G={init:function(c){var h=c;G.document=h.document,G.DocumentFragment=h.DocumentFragment||O,G.SVGElement=h.SVGElement||O,G.SVGSVGElement=h.SVGSVGElement||O,G.SVGElementInstance=h.SVGElementInstance||O,G.Element=h.Element||O,G.HTMLElement=h.HTMLElement||G.Element,G.Event=h.Event,G.Touch=h.Touch||O,G.PointerEvent=h.PointerEvent||h.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function O(){}var L=G,z={init:function(c){var h=L.Element,p=c.navigator||{};z.supportsTouch="ontouchstart"in c||C.func(c.DocumentTouch)&&L.document instanceof c.DocumentTouch,z.supportsPointerEvent=p.pointerEnabled!==!1&&!!L.PointerEvent,z.isIOS=/iP(hone|od|ad)/.test(p.platform),z.isIOS7=/iP(hone|od|ad)/.test(p.platform)&&/OS 7[^\d]/.test(p.appVersion),z.isIe9=/MSIE 9/.test(p.userAgent),z.isOperaMobile=p.appName==="Opera"&&z.supportsTouch&&/Presto/.test(p.userAgent),z.prefixedMatchesSelector="matches"in h.prototype?"matches":"webkitMatchesSelector"in h.prototype?"webkitMatchesSelector":"mozMatchesSelector"in h.prototype?"mozMatchesSelector":"oMatchesSelector"in h.prototype?"oMatchesSelector":"msMatchesSelector",z.pEventTypes=z.supportsPointerEvent?L.PointerEvent===c.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,z.wheelEvent=L.document&&"onmousewheel"in L.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},J=z;function Z(c,h){if(c.contains)return c.contains(h);for(;h;){if(h===c)return!0;h=h.parentNode}return!1}function ut(c,h){for(;C.element(c);){if(Y(c,h))return c;c=Tt(c)}return null}function Tt(c){var h=c.parentNode;if(C.docFrag(h)){for(;(h=h.host)&&C.docFrag(h););return h}return h}function Y(c,h){return P!==E&&(h=h.replace(/\/deep\//g," ")),c[J.prefixedMatchesSelector](h)}var tt=function(c){return c.parentNode||c.host};function Rt(c,h){for(var p,g=[],_=c;(p=tt(_))&&_!==h&&p!==_.ownerDocument;)g.unshift(_),_=p;return g}function Ft(c,h,p){for(;C.element(c);){if(Y(c,h))return!0;if((c=Tt(c))===p)return Y(c,h)}return!1}function $t(c){return c.correspondingUseElement||c}function se(c){var h=c instanceof L.SVGElement?c.getBoundingClientRect():c.getClientRects()[0];return h&&{left:h.left,right:h.right,top:h.top,bottom:h.bottom,width:h.width||h.right-h.left,height:h.height||h.bottom-h.top}}function Kt(c){var h,p=se(c);if(!J.isIOS7&&p){var g={x:(h=(h=M(c))||P).scrollX||h.document.documentElement.scrollLeft,y:h.scrollY||h.document.documentElement.scrollTop};p.left+=g.x,p.right+=g.x,p.top+=g.y,p.bottom+=g.y}return p}function oe(c){for(var h=[];c;)h.push(c),c=Tt(c);return h}function ce(c){return!!C.string(c)&&(L.document.querySelector(c),!0)}function lt(c,h){for(var p in h)c[p]=h[p];return c}function le(c,h,p){return c==="parent"?Tt(p):c==="self"?h.getRect(p):ut(p,c)}function Gt(c,h,p,g){var _=c;return C.string(_)?_=le(_,h,p):C.func(_)&&(_=_.apply(void 0,g)),C.element(_)&&(_=Kt(_)),_}function Wt(c){return c&&{x:"x"in c?c.x:c.left,y:"y"in c?c.y:c.top}}function Qt(c){return!c||"x"in c&&"y"in c||((c=lt({},c)).x=c.left||0,c.y=c.top||0,c.width=c.width||(c.right||0)-c.x,c.height=c.height||(c.bottom||0)-c.y),c}function Te(c,h,p){c.left&&(h.left+=p.x),c.right&&(h.right+=p.x),c.top&&(h.top+=p.y),c.bottom&&(h.bottom+=p.y),h.width=h.right-h.left,h.height=h.bottom-h.top}function we(c,h,p){var g=p&&c.options[p];return Wt(Gt(g&&g.origin||c.options.origin,c,h,[c&&h]))||{x:0,y:0}}function De(c,h){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(I){return!0},g=arguments.length>3?arguments[3]:void 0;if(g=g||{},C.string(c)&&c.search(" ")!==-1&&(c=jn(c)),C.array(c))return c.forEach(function(I){return De(I,h,p,g)}),g;if(C.object(c)&&(h=c,c=""),C.func(h)&&p(c))g[c]=g[c]||[],g[c].push(h);else if(C.array(h))for(var _=0,x=h;_<x.length;_++){var T=x[_];De(c,T,p,g)}else if(C.object(h))for(var A in h)De(jn(A).map(function(I){return"".concat(c).concat(I)}),h[A],p,g);return g}function jn(c){return c.trim().split(/ +/)}var hr=function(c,h){return Math.sqrt(c*c+h*h)},Fy=["webkit","moz"];function Vn(c,h){c.__set||(c.__set={});var p=function(_){if(Fy.some(function(x){return _.indexOf(x)===0}))return 1;typeof c[_]!="function"&&_!=="__set"&&Object.defineProperty(c,_,{get:function(){return _ in c.__set?c.__set[_]:c.__set[_]=h[_]},set:function(x){c.__set[_]=x},configurable:!0})};for(var g in h)p(g);return c}function Wn(c,h){c.page=c.page||{},c.page.x=h.page.x,c.page.y=h.page.y,c.client=c.client||{},c.client.x=h.client.x,c.client.y=h.client.y,c.timeStamp=h.timeStamp}function Ou(c){c.page.x=0,c.page.y=0,c.client.x=0,c.client.y=0}function Bu(c){return c instanceof L.Event||c instanceof L.Touch}function Xn(c,h,p){return c=c||"page",(p=p||{}).x=h[c+"X"],p.y=h[c+"Y"],p}function Lu(c,h){return h=h||{x:0,y:0},J.isOperaMobile&&Bu(c)?(Xn("screen",c,h),h.x+=window.scrollX,h.y+=window.scrollY):Xn("page",c,h),h}function Fs(c){return C.number(c.pointerId)?c.pointerId:c.identifier}function Ny(c,h,p){var g=h.length>1?Fu(h):h[0];Lu(g,c.page),function(_,x){x=x||{},J.isOperaMobile&&Bu(_)?Xn("screen",_,x):Xn("client",_,x)}(g,c.client),c.timeStamp=p}function el(c){var h=[];return C.array(c)?(h[0]=c[0],h[1]=c[1]):c.type==="touchend"?c.touches.length===1?(h[0]=c.touches[0],h[1]=c.changedTouches[0]):c.touches.length===0&&(h[0]=c.changedTouches[0],h[1]=c.changedTouches[1]):(h[0]=c.touches[0],h[1]=c.touches[1]),h}function Fu(c){for(var h={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},p=0;p<c.length;p++){var g=c[p];for(var _ in h)h[_]+=g[_]}for(var x in h)h[x]/=c.length;return h}function rl(c){if(!c.length)return null;var h=el(c),p=Math.min(h[0].pageX,h[1].pageX),g=Math.min(h[0].pageY,h[1].pageY),_=Math.max(h[0].pageX,h[1].pageX),x=Math.max(h[0].pageY,h[1].pageY);return{x:p,y:g,left:p,top:g,right:_,bottom:x,width:_-p,height:x-g}}function il(c,h){var p=h+"X",g=h+"Y",_=el(c),x=_[0][p]-_[1][p],T=_[0][g]-_[1][g];return hr(x,T)}function sl(c,h){var p=h+"X",g=h+"Y",_=el(c),x=_[1][p]-_[0][p],T=_[1][g]-_[0][g];return 180*Math.atan2(T,x)/Math.PI}function Nu(c){return C.string(c.pointerType)?c.pointerType:C.number(c.pointerType)?[void 0,void 0,"touch","pen","mouse"][c.pointerType]:/touch/.test(c.type||"")||c instanceof L.Touch?"touch":"mouse"}function Uu(c){var h=C.func(c.composedPath)?c.composedPath():c.path;return[$t(h?h[0]:c.target),$t(c.currentTarget)]}var Yn=function(){function c(h){n(this,c),this.immediatePropagationStopped=!1,this.propagationStopped=!1,this._interaction=h}return a(c,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),c}();Object.defineProperty(Yn.prototype,"interaction",{get:function(){return this._interaction._proxy},set:function(){}});var $u=function(c,h){for(var p=0;p<h.length;p++){var g=h[p];c.push(g)}return c},Gu=function(c){return $u([],c)},Ns=function(c,h){for(var p=0;p<c.length;p++)if(h(c[p],p,c))return p;return-1},Us=function(c,h){return c[Ns(c,h)]},Ji=function(c){u(p,c);var h=v(p);function p(g,_,x){var T;n(this,p),(T=h.call(this,_._interaction)).dropzone=void 0,T.dragEvent=void 0,T.relatedTarget=void 0,T.draggable=void 0,T.propagationStopped=!1,T.immediatePropagationStopped=!1;var A=x==="dragleave"?g.prev:g.cur,I=A.element,D=A.dropzone;return T.type=x,T.target=I,T.currentTarget=I,T.dropzone=D,T.dragEvent=_,T.relatedTarget=_.target,T.draggable=_.interactable,T.timeStamp=_.timeStamp,T}return a(p,[{key:"reject",value:function(){var g=this,_=this._interaction.dropState;if(this.type==="dropactivate"||this.dropzone&&_.cur.dropzone===this.dropzone&&_.cur.element===this.target)if(_.prev.dropzone=this.dropzone,_.prev.element=this.target,_.rejected=!0,_.events.enter=null,this.stopImmediatePropagation(),this.type==="dropactivate"){var x=_.activeDrops,T=Ns(x,function(I){var D=I.dropzone,R=I.element;return D===g.dropzone&&R===g.target});_.activeDrops.splice(T,1);var A=new p(_,this.dragEvent,"dropdeactivate");A.dropzone=this.dropzone,A.target=this.target,this.dropzone.fire(A)}else this.dropzone.fire(new p(_,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),p}(Yn);function Hu(c,h){for(var p=0,g=c.slice();p<g.length;p++){var _=g[p],x=_.dropzone,T=_.element;h.dropzone=x,h.target=T,x.fire(h),h.propagationStopped=h.immediatePropagationStopped=!1}}function nl(c,h){for(var p=function(x,T){for(var A=[],I=0,D=x.interactables.list;I<D.length;I++){var R=D[I];if(R.options.drop.enabled){var B=R.options.drop.accept;if(!(C.element(B)&&B!==T||C.string(B)&&!Y(T,B)||C.func(B)&&!B({dropzone:R,draggableElement:T})))for(var $=0,V=R.getAllElements();$<V.length;$++){var j=V[$];j!==T&&A.push({dropzone:R,element:j,rect:R.getRect(j)})}}}return A}(c,h),g=0;g<p.length;g++){var _=p[g];_.rect=_.dropzone.getRect(_.element)}return p}function zu(c,h,p){for(var g=c.dropState,_=c.interactable,x=c.element,T=[],A=0,I=g.activeDrops;A<I.length;A++){var D=I[A],R=D.dropzone,B=D.element,$=D.rect,V=R.dropCheck(h,p,_,x,B,$);T.push(V?B:null)}var j=function(X){for(var ht,st,mt,St=[],Dt=0;Dt<X.length;Dt++){var xt=X[Dt],Pt=X[ht];if(xt&&Dt!==ht)if(Pt){var Se=tt(xt),Zt=tt(Pt);if(Se!==xt.ownerDocument)if(Zt!==xt.ownerDocument)if(Se!==Zt){St=St.length?St:Rt(Pt);var Oe=void 0;if(Pt instanceof L.HTMLElement&&xt instanceof L.SVGElement&&!(xt instanceof L.SVGSVGElement)){if(xt===Zt)continue;Oe=xt.ownerSVGElement}else Oe=xt;for(var We=Rt(Oe,Pt.ownerDocument),kr=0;We[kr]&&We[kr]===St[kr];)kr++;var io=[We[kr-1],We[kr],St[kr]];if(io[0])for(var Vs=io[0].lastChild;Vs;){if(Vs===io[1]){ht=Dt,St=We;break}if(Vs===io[2])break;Vs=Vs.previousSibling}}else mt=Pt,(parseInt(M(st=xt).getComputedStyle(st).zIndex,10)||0)>=(parseInt(M(mt).getComputedStyle(mt).zIndex,10)||0)&&(ht=Dt);else ht=Dt}else ht=Dt}return ht}(T);return g.activeDrops[j]||null}function ol(c,h,p){var g=c.dropState,_={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return p.type==="dragstart"&&(_.activate=new Ji(g,p,"dropactivate"),_.activate.target=null,_.activate.dropzone=null),p.type==="dragend"&&(_.deactivate=new Ji(g,p,"dropdeactivate"),_.deactivate.target=null,_.deactivate.dropzone=null),g.rejected||(g.cur.element!==g.prev.element&&(g.prev.dropzone&&(_.leave=new Ji(g,p,"dragleave"),p.dragLeave=_.leave.target=g.prev.element,p.prevDropzone=_.leave.dropzone=g.prev.dropzone),g.cur.dropzone&&(_.enter=new Ji(g,p,"dragenter"),p.dragEnter=g.cur.element,p.dropzone=g.cur.dropzone)),p.type==="dragend"&&g.cur.dropzone&&(_.drop=new Ji(g,p,"drop"),p.dropzone=g.cur.dropzone,p.relatedTarget=g.cur.element),p.type==="dragmove"&&g.cur.dropzone&&(_.move=new Ji(g,p,"dropmove"),p.dropzone=g.cur.dropzone)),_}function al(c,h){var p=c.dropState,g=p.activeDrops,_=p.cur,x=p.prev;h.leave&&x.dropzone.fire(h.leave),h.enter&&_.dropzone.fire(h.enter),h.move&&_.dropzone.fire(h.move),h.drop&&_.dropzone.fire(h.drop),h.deactivate&&Hu(g,h.deactivate),p.prev.dropzone=_.dropzone,p.prev.element=_.element}function ju(c,h){var p=c.interaction,g=c.iEvent,_=c.event;if(g.type==="dragmove"||g.type==="dragend"){var x=p.dropState;h.dynamicDrop&&(x.activeDrops=nl(h,p.element));var T=g,A=zu(p,T,_);x.rejected=x.rejected&&!!A&&A.dropzone===x.cur.dropzone&&A.element===x.cur.element,x.cur.dropzone=A&&A.dropzone,x.cur.element=A&&A.element,x.events=ol(p,0,T)}}var Vu={id:"actions/drop",install:function(c){var h=c.actions,p=c.interactStatic,g=c.Interactable,_=c.defaults;c.usePlugin(Q),g.prototype.dropzone=function(x){return function(T,A){if(C.object(A)){if(T.options.drop.enabled=A.enabled!==!1,A.listeners){var I=De(A.listeners),D=Object.keys(I).reduce(function(B,$){return B[/^(enter|leave)/.test($)?"drag".concat($):/^(activate|deactivate|move)/.test($)?"drop".concat($):$]=I[$],B},{}),R=T.options.drop.listeners;R&&T.off(R),T.on(D),T.options.drop.listeners=D}return C.func(A.ondrop)&&T.on("drop",A.ondrop),C.func(A.ondropactivate)&&T.on("dropactivate",A.ondropactivate),C.func(A.ondropdeactivate)&&T.on("dropdeactivate",A.ondropdeactivate),C.func(A.ondragenter)&&T.on("dragenter",A.ondragenter),C.func(A.ondragleave)&&T.on("dragleave",A.ondragleave),C.func(A.ondropmove)&&T.on("dropmove",A.ondropmove),/^(pointer|center)$/.test(A.overlap)?T.options.drop.overlap=A.overlap:C.number(A.overlap)&&(T.options.drop.overlap=Math.max(Math.min(1,A.overlap),0)),"accept"in A&&(T.options.drop.accept=A.accept),"checker"in A&&(T.options.drop.checker=A.checker),T}return C.bool(A)?(T.options.drop.enabled=A,T):T.options.drop}(this,x)},g.prototype.dropCheck=function(x,T,A,I,D,R){return function(B,$,V,j,X,ht,st){var mt=!1;if(!(st=st||B.getRect(ht)))return!!B.options.drop.checker&&B.options.drop.checker($,V,mt,B,ht,j,X);var St=B.options.drop.overlap;if(St==="pointer"){var Dt=we(j,X,"drag"),xt=Lu($);xt.x+=Dt.x,xt.y+=Dt.y;var Pt=xt.x>st.left&&xt.x<st.right,Se=xt.y>st.top&&xt.y<st.bottom;mt=Pt&&Se}var Zt=j.getRect(X);if(Zt&&St==="center"){var Oe=Zt.left+Zt.width/2,We=Zt.top+Zt.height/2;mt=Oe>=st.left&&Oe<=st.right&&We>=st.top&&We<=st.bottom}return Zt&&C.number(St)&&(mt=Math.max(0,Math.min(st.right,Zt.right)-Math.max(st.left,Zt.left))*Math.max(0,Math.min(st.bottom,Zt.bottom)-Math.max(st.top,Zt.top))/(Zt.width*Zt.height)>=St),B.options.drop.checker&&(mt=B.options.drop.checker($,V,mt,B,ht,j,X)),mt}(this,x,T,A,I,D,R)},p.dynamicDrop=function(x){return C.bool(x)?(c.dynamicDrop=x,p):c.dynamicDrop},lt(h.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),h.methodDict.drop="dropzone",c.dynamicDrop=!1,_.actions.drop=Vu.defaults},listeners:{"interactions:before-action-start":function(c){var h=c.interaction;h.prepared.name==="drag"&&(h.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(c,h){var p=c.interaction,g=(c.event,c.iEvent);if(p.prepared.name==="drag"){var _=p.dropState;_.activeDrops=[],_.events={},_.activeDrops=nl(h,p.element),_.events=ol(p,0,g),_.events.activate&&(Hu(_.activeDrops,_.events.activate),h.fire("actions/drop:start",{interaction:p,dragEvent:g}))}},"interactions:action-move":ju,"interactions:after-action-move":function(c,h){var p=c.interaction,g=c.iEvent;if(p.prepared.name==="drag"){var _=p.dropState;al(p,_.events),h.fire("actions/drop:move",{interaction:p,dragEvent:g}),_.events={}}},"interactions:action-end":function(c,h){if(c.interaction.prepared.name==="drag"){var p=c.interaction,g=c.iEvent;ju(c,h),al(p,p.dropState.events),h.fire("actions/drop:end",{interaction:p,dragEvent:g})}},"interactions:stop":function(c){var h=c.interaction;if(h.prepared.name==="drag"){var p=h.dropState;p&&(p.activeDrops=null,p.events=null,p.cur.dropzone=null,p.cur.element=null,p.prev.dropzone=null,p.prev.element=null,p.rejected=!1)}}},getActiveDrops:nl,getDrop:zu,getDropEvents:ol,fireDropEvents:al,filterEventType:function(c){return c.search("drag")===0||c.search("drop")===0},defaults:{enabled:!1,accept:null,overlap:"pointer"}},Uy=Vu;function ll(c){var h=c.interaction,p=c.iEvent,g=c.phase;if(h.prepared.name==="gesture"){var _=h.pointers.map(function(D){return D.pointer}),x=g==="start",T=g==="end",A=h.interactable.options.deltaSource;if(p.touches=[_[0],_[1]],x)p.distance=il(_,A),p.box=rl(_),p.scale=1,p.ds=0,p.angle=sl(_,A),p.da=0,h.gesture.startDistance=p.distance,h.gesture.startAngle=p.angle;else if(T||h.pointers.length<2){var I=h.prevEvent;p.distance=I.distance,p.box=I.box,p.scale=I.scale,p.ds=0,p.angle=I.angle,p.da=0}else p.distance=il(_,A),p.box=rl(_),p.scale=p.distance/h.gesture.startDistance,p.angle=sl(_,A),p.ds=p.scale-h.gesture.scale,p.da=p.angle-h.gesture.angle;h.gesture.distance=p.distance,h.gesture.angle=p.angle,C.number(p.scale)&&p.scale!==1/0&&!isNaN(p.scale)&&(h.gesture.scale=p.scale)}}var hl={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(c){var h=c.actions,p=c.Interactable,g=c.defaults;p.prototype.gesturable=function(_){return C.object(_)?(this.options.gesture.enabled=_.enabled!==!1,this.setPerAction("gesture",_),this.setOnEvents("gesture",_),this):C.bool(_)?(this.options.gesture.enabled=_,this):this.options.gesture},h.map.gesture=hl,h.methodDict.gesture="gesturable",g.actions.gesture=hl.defaults},listeners:{"interactions:action-start":ll,"interactions:action-move":ll,"interactions:action-end":ll,"interactions:new":function(c){c.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(c){if(!(c.interaction.pointers.length<2)){var h=c.interactable.options.gesture;if(h&&h.enabled)return c.action={name:"gesture"},!1}}},defaults:{},getCursor:function(){return""},filterEventType:function(c){return c.search("gesture")===0}},$y=hl;function Gy(c,h,p,g,_,x,T){if(!h)return!1;if(h===!0){var A=C.number(x.width)?x.width:x.right-x.left,I=C.number(x.height)?x.height:x.bottom-x.top;if(T=Math.min(T,Math.abs((c==="left"||c==="right"?A:I)/2)),A<0&&(c==="left"?c="right":c==="right"&&(c="left")),I<0&&(c==="top"?c="bottom":c==="bottom"&&(c="top")),c==="left"){var D=A>=0?x.left:x.right;return p.x<D+T}if(c==="top"){var R=I>=0?x.top:x.bottom;return p.y<R+T}if(c==="right")return p.x>(A>=0?x.right:x.left)-T;if(c==="bottom")return p.y>(I>=0?x.bottom:x.top)-T}return!!C.element(g)&&(C.element(h)?h===g:Ft(g,h,_))}function Wu(c){var h=c.iEvent,p=c.interaction;if(p.prepared.name==="resize"&&p.resizeAxes){var g=h;p.interactable.options.resize.square?(p.resizeAxes==="y"?g.delta.x=g.delta.y:g.delta.y=g.delta.x,g.axes="xy"):(g.axes=p.resizeAxes,p.resizeAxes==="x"?g.delta.y=0:p.resizeAxes==="y"&&(g.delta.x=0))}}var Rr,wi,Mr={id:"actions/resize",before:["actions/drag"],install:function(c){var h=c.actions,p=c.browser,g=c.Interactable,_=c.defaults;Mr.cursors=function(x){return x.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"}}(p),Mr.defaultMargin=p.supportsTouch||p.supportsPointerEvent?20:10,g.prototype.resizable=function(x){return function(T,A,I){return C.object(A)?(T.options.resize.enabled=A.enabled!==!1,T.setPerAction("resize",A),T.setOnEvents("resize",A),C.string(A.axis)&&/^x$|^y$|^xy$/.test(A.axis)?T.options.resize.axis=A.axis:A.axis===null&&(T.options.resize.axis=I.defaults.actions.resize.axis),C.bool(A.preserveAspectRatio)?T.options.resize.preserveAspectRatio=A.preserveAspectRatio:C.bool(A.square)&&(T.options.resize.square=A.square),T):C.bool(A)?(T.options.resize.enabled=A,T):T.options.resize}(this,x,c)},h.map.resize=Mr,h.methodDict.resize="resizable",_.actions.resize=Mr.defaults},listeners:{"interactions:new":function(c){c.interaction.resizeAxes="xy"},"interactions:action-start":function(c){(function(h){var p=h.iEvent,g=h.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var _=p,x=g.rect;g._rects={start:lt({},x),corrected:lt({},x),previous:lt({},x),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},_.edges=g.prepared.edges,_.rect=g._rects.corrected,_.deltaRect=g._rects.delta}})(c),Wu(c)},"interactions:action-move":function(c){(function(h){var p=h.iEvent,g=h.interaction;if(g.prepared.name==="resize"&&g.prepared.edges){var _=p,x=g.interactable.options.resize.invert,T=x==="reposition"||x==="negate",A=g.rect,I=g._rects,D=I.start,R=I.corrected,B=I.delta,$=I.previous;if(lt($,R),T){if(lt(R,A),x==="reposition"){if(R.top>R.bottom){var V=R.top;R.top=R.bottom,R.bottom=V}if(R.left>R.right){var j=R.left;R.left=R.right,R.right=j}}}else R.top=Math.min(A.top,D.bottom),R.bottom=Math.max(A.bottom,D.top),R.left=Math.min(A.left,D.right),R.right=Math.max(A.right,D.left);for(var X in R.width=R.right-R.left,R.height=R.bottom-R.top,R)B[X]=R[X]-$[X];_.edges=g.prepared.edges,_.rect=R,_.deltaRect=B}})(c),Wu(c)},"interactions:action-end":function(c){var h=c.iEvent,p=c.interaction;if(p.prepared.name==="resize"&&p.prepared.edges){var g=h;g.edges=p.prepared.edges,g.rect=p._rects.corrected,g.deltaRect=p._rects.delta}},"auto-start:check":function(c){var h=c.interaction,p=c.interactable,g=c.element,_=c.rect,x=c.buttons;if(_){var T=lt({},h.coords.cur.page),A=p.options.resize;if(A&&A.enabled&&(!h.pointerIsDown||!/mouse|pointer/.test(h.pointerType)||x&A.mouseButtons)){if(C.object(A.edges)){var I={left:!1,right:!1,top:!1,bottom:!1};for(var D in I)I[D]=Gy(D,A.edges[D],T,h._latestPointer.eventTarget,g,_,A.margin||Mr.defaultMargin);I.left=I.left&&!I.right,I.top=I.top&&!I.bottom,(I.left||I.right||I.top||I.bottom)&&(c.action={name:"resize",edges:I})}else{var R=A.axis!=="y"&&T.x>_.right-Mr.defaultMargin,B=A.axis!=="x"&&T.y>_.bottom-Mr.defaultMargin;(R||B)&&(c.action={name:"resize",axes:(R?"x":"")+(B?"y":"")})}return!c.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(c){var h=c.edges,p=c.axis,g=c.name,_=Mr.cursors,x=null;if(p)x=_[g+p];else if(h){for(var T="",A=0,I=["top","bottom","left","right"];A<I.length;A++){var D=I[A];h[D]&&(T+=D)}x=_[T]}return x},filterEventType:function(c){return c.search("resize")===0},defaultMargin:null},Hy=Mr,zy={id:"actions",install:function(c){c.usePlugin($y),c.usePlugin(Hy),c.usePlugin(Q),c.usePlugin(Uy)}},Xu=0,qr={request:function(c){return Rr(c)},cancel:function(c){return wi(c)},init:function(c){if(Rr=c.requestAnimationFrame,wi=c.cancelAnimationFrame,!Rr)for(var h=["ms","moz","webkit","o"],p=0;p<h.length;p++){var g=h[p];Rr=c["".concat(g,"RequestAnimationFrame")],wi=c["".concat(g,"CancelAnimationFrame")]||c["".concat(g,"CancelRequestAnimationFrame")]}Rr=Rr&&Rr.bind(c),wi=wi&&wi.bind(c),Rr||(Rr=function(_){var x=Date.now(),T=Math.max(0,16-(x-Xu)),A=c.setTimeout(function(){_(x+T)},T);return Xu=x+T,A},wi=function(_){return clearTimeout(_)})}},wt={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(c){wt.isScrolling=!0,qr.cancel(wt.i),c.autoScroll=wt,wt.interaction=c,wt.prevTime=wt.now(),wt.i=qr.request(wt.scroll)},stop:function(){wt.isScrolling=!1,wt.interaction&&(wt.interaction.autoScroll=null),qr.cancel(wt.i)},scroll:function(){var c=wt.interaction,h=c.interactable,p=c.element,g=c.prepared.name,_=h.options[g].autoScroll,x=Yu(_.container,h,p),T=wt.now(),A=(T-wt.prevTime)/1e3,I=_.speed*A;if(I>=1){var D={x:wt.x*I,y:wt.y*I};if(D.x||D.y){var R=qu(x);C.window(x)?x.scrollBy(D.x,D.y):x&&(x.scrollLeft+=D.x,x.scrollTop+=D.y);var B=qu(x),$={x:B.x-R.x,y:B.y-R.y};($.x||$.y)&&h.fire({type:"autoscroll",target:p,interactable:h,delta:$,interaction:c,container:x})}wt.prevTime=T}wt.isScrolling&&(qr.cancel(wt.i),wt.i=qr.request(wt.scroll))},check:function(c,h){var p;return(p=c.options[h].autoScroll)==null?void 0:p.enabled},onInteractionMove:function(c){var h=c.interaction,p=c.pointer;if(h.interacting()&&wt.check(h.interactable,h.prepared.name))if(h.simulation)wt.x=wt.y=0;else{var g,_,x,T,A=h.interactable,I=h.element,D=h.prepared.name,R=A.options[D].autoScroll,B=Yu(R.container,A,I);if(C.window(B))T=p.clientX<wt.margin,g=p.clientY<wt.margin,_=p.clientX>B.innerWidth-wt.margin,x=p.clientY>B.innerHeight-wt.margin;else{var $=se(B);T=p.clientX<$.left+wt.margin,g=p.clientY<$.top+wt.margin,_=p.clientX>$.right-wt.margin,x=p.clientY>$.bottom-wt.margin}wt.x=_?1:T?-1:0,wt.y=x?1:g?-1:0,wt.isScrolling||(wt.margin=R.margin,wt.speed=R.speed,wt.start(h))}}};function Yu(c,h,p){return(C.string(c)?le(c,h,p):c)||M(p)}function qu(c){return C.window(c)&&(c=window.document.body),{x:c.scrollLeft,y:c.scrollTop}}var jy={id:"auto-scroll",install:function(c){var h=c.defaults,p=c.actions;c.autoScroll=wt,wt.now=function(){return c.now()},p.phaselessTypes.autoscroll=!0,h.perAction.autoScroll=wt.defaults},listeners:{"interactions:new":function(c){c.interaction.autoScroll=null},"interactions:destroy":function(c){c.interaction.autoScroll=null,wt.stop(),wt.interaction&&(wt.interaction=null)},"interactions:stop":wt.stop,"interactions:action-move":function(c){return wt.onInteractionMove(c)}}},Vy=jy;function $s(c,h){var p=!1;return function(){return p||(P.console.warn(h),p=!0),c.apply(this,arguments)}}function cl(c,h){return c.name=h.name,c.axis=h.axis,c.edges=h.edges,c}function Wy(c){return C.bool(c)?(this.options.styleCursor=c,this):c===null?(delete this.options.styleCursor,this):this.options.styleCursor}function Xy(c){return C.func(c)?(this.options.actionChecker=c,this):c===null?(delete this.options.actionChecker,this):this.options.actionChecker}var Yy={id:"auto-start/interactableMethods",install:function(c){var h=c.Interactable;h.prototype.getAction=function(p,g,_,x){var T=function(A,I,D,R,B){var $=A.getRect(R),V=I.buttons||{0:1,1:4,3:8,4:16}[I.button],j={action:null,interactable:A,interaction:D,element:R,rect:$,buttons:V};return B.fire("auto-start:check",j),j.action}(this,g,_,x,c);return this.options.actionChecker?this.options.actionChecker(p,g,T,this,x,_):T},h.prototype.ignoreFrom=$s(function(p){return this._backCompatOption("ignoreFrom",p)},"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),h.prototype.allowFrom=$s(function(p){return this._backCompatOption("allowFrom",p)},"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),h.prototype.actionChecker=Xy,h.prototype.styleCursor=Wy}};function Ku(c,h,p,g,_){return h.testIgnoreAllow(h.options[c.name],p,g)&&h.options[c.name].enabled&&qn(h,p,c,_)?c:null}function qy(c,h,p,g,_,x,T){for(var A=0,I=g.length;A<I;A++){var D=g[A],R=_[A],B=D.getAction(h,p,c,R);if(B){var $=Ku(B,D,R,x,T);if($)return{action:$,interactable:D,element:R}}}return{action:null,interactable:null,element:null}}function Zu(c,h,p,g,_){var x=[],T=[],A=g;function I(R){x.push(R),T.push(A)}for(;C.element(A);){x=[],T=[],_.interactables.forEachMatch(A,I);var D=qy(c,h,p,x,T,g,_);if(D.action&&!D.interactable.options[D.action.name].manualStart)return D;A=Tt(A)}return{action:null,interactable:null,element:null}}function Qu(c,h,p){var g=h.action,_=h.interactable,x=h.element;g=g||{name:null},c.interactable=_,c.element=x,cl(c.prepared,g),c.rect=_&&g.name?_.getRect(x):null,td(c,p),p.fire("autoStart:prepared",{interaction:c})}function qn(c,h,p,g){var _=c.options,x=_[p.name].max,T=_[p.name].maxPerElement,A=g.autoStart.maxInteractions,I=0,D=0,R=0;if(!(x&&T&&A))return!1;for(var B=0,$=g.interactions.list;B<$.length;B++){var V=$[B],j=V.prepared.name;if(V.interacting()&&(++I>=A||V.interactable===c&&((D+=j===p.name?1:0)>=x||V.element===h&&(R++,j===p.name&&R>=T))))return!1}return A>0}function Ju(c,h){return C.number(c)?(h.autoStart.maxInteractions=c,this):h.autoStart.maxInteractions}function ul(c,h,p){var g=p.autoStart.cursorElement;g&&g!==c&&(g.style.cursor=""),c.ownerDocument.documentElement.style.cursor=h,c.style.cursor=h,p.autoStart.cursorElement=h?c:null}function td(c,h){var p=c.interactable,g=c.element,_=c.prepared;if(c.pointerType==="mouse"&&p&&p.options.styleCursor){var x="";if(_.name){var T=p.options[_.name].cursorChecker;x=C.func(T)?T(_,p,g,c._interacting):h.actions.map[_.name].getCursor(_)}ul(c.element,x||"",h)}else h.autoStart.cursorElement&&ul(h.autoStart.cursorElement,"",h)}var Ky={id:"auto-start/base",before:["actions"],install:function(c){var h=c.interactStatic,p=c.defaults;c.usePlugin(Yy),p.base.actionChecker=null,p.base.styleCursor=!0,lt(p.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),h.maxInteractions=function(g){return Ju(g,c)},c.autoStart={maxInteractions:1/0,withinInteractionLimit:qn,cursorElement:null}},listeners:{"interactions:down":function(c,h){var p=c.interaction,g=c.pointer,_=c.event,x=c.eventTarget;p.interacting()||Qu(p,Zu(p,g,_,x,h),h)},"interactions:move":function(c,h){(function(p,g){var _=p.interaction,x=p.pointer,T=p.event,A=p.eventTarget;_.pointerType!=="mouse"||_.pointerIsDown||_.interacting()||Qu(_,Zu(_,x,T,A,g),g)})(c,h),function(p,g){var _=p.interaction;if(_.pointerIsDown&&!_.interacting()&&_.pointerWasMoved&&_.prepared.name){g.fire("autoStart:before-start",p);var x=_.interactable,T=_.prepared.name;T&&x&&(x.options[T].manualStart||!qn(x,_.element,_.prepared,g)?_.stop():(_.start(_.prepared,x,_.element),td(_,g)))}}(c,h)},"interactions:stop":function(c,h){var p=c.interaction,g=p.interactable;g&&g.options.styleCursor&&ul(p.element,"",h)}},maxInteractions:Ju,withinInteractionLimit:qn,validateAction:Ku},dl=Ky,Zy={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(c,h){var p=c.interaction,g=c.eventTarget,_=c.dx,x=c.dy;if(p.prepared.name==="drag"){var T=Math.abs(_),A=Math.abs(x),I=p.interactable.options.drag,D=I.startAxis,R=T>A?"x":T<A?"y":"xy";if(p.prepared.axis=I.lockAxis==="start"?R[0]:I.lockAxis,R!=="xy"&&D!=="xy"&&D!==R){p.prepared.name=null;for(var B=g,$=function(j){if(j!==p.interactable){var X=p.interactable.options.drag;if(!X.manualStart&&j.testIgnoreAllow(X,B,g)){var ht=j.getAction(p.downPointer,p.downEvent,p,B);if(ht&&ht.name==="drag"&&function(st,mt){if(!mt)return!1;var St=mt.options.drag.startAxis;return st==="xy"||St==="xy"||St===st}(R,j)&&dl.validateAction(ht,j,B,g,h))return j}}};C.element(B);){var V=h.interactables.forEachMatch(B,$);if(V){p.prepared.name="drag",p.interactable=V,p.element=B;break}B=Tt(B)}}}}}};function pl(c){var h=c.prepared&&c.prepared.name;if(!h)return null;var p=c.interactable.options;return p[h].hold||p[h].delay}var Qy={id:"auto-start/hold",install:function(c){var h=c.defaults;c.usePlugin(dl),h.perAction.hold=0,h.perAction.delay=0},listeners:{"interactions:new":function(c){c.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(c){var h=c.interaction,p=pl(h);p>0&&(h.autoStartHoldTimer=setTimeout(function(){h.start(h.prepared,h.interactable,h.element)},p))},"interactions:move":function(c){var h=c.interaction,p=c.duplicate;h.autoStartHoldTimer&&h.pointerWasMoved&&!p&&(clearTimeout(h.autoStartHoldTimer),h.autoStartHoldTimer=null)},"autoStart:before-start":function(c){var h=c.interaction;pl(h)>0&&(h.prepared.name=null)}},getHoldDuration:pl},Jy=Qy,t_={id:"auto-start",install:function(c){c.usePlugin(dl),c.usePlugin(Jy),c.usePlugin(Zy)}},e_=function(c){return/^(always|never|auto)$/.test(c)?(this.options.preventDefault=c,this):C.bool(c)?(this.options.preventDefault=c?"always":"never",this):this.options.preventDefault};function r_(c){var h=c.interaction,p=c.event;h.interactable&&h.interactable.checkAndPreventDefault(p)}var ed={id:"core/interactablePreventDefault",install:function(c){var h=c.Interactable;h.prototype.preventDefault=e_,h.prototype.checkAndPreventDefault=function(p){return function(g,_,x){var T=g.options.preventDefault;if(T!=="never")if(T!=="always"){if(_.events.supportsPassive&&/^touch(start|move)$/.test(x.type)){var A=M(x.target).document,I=_.getDocOptions(A);if(!I||!I.events||I.events.passive!==!1)return}/^(mouse|pointer|touch)*(down|start)/i.test(x.type)||C.element(x.target)&&Y(x.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||x.preventDefault()}else x.preventDefault()}(this,c,p)},c.interactions.docEvents.push({type:"dragstart",listener:function(p){for(var g=0,_=c.interactions.list;g<_.length;g++){var x=_[g];if(x.element&&(x.element===p.target||Z(x.element,p.target)))return void x.interactable.checkAndPreventDefault(p)}}})},listeners:["down","move","up","cancel"].reduce(function(c,h){return c["interactions:".concat(h)]=r_,c},{})};function Kn(c,h){if(h.phaselessTypes[c])return!0;for(var p in h.map)if(c.indexOf(p)===0&&c.substr(p.length)in h.phases)return!0;return!1}function ts(c){var h={};for(var p in c){var g=c[p];C.plainObject(g)?h[p]=ts(g):C.array(g)?h[p]=Gu(g):h[p]=g}return h}var fl=function(){function c(h){n(this,c),this.states=[],this.startOffset={left:0,right:0,top:0,bottom:0},this.startDelta=void 0,this.result=void 0,this.endResult=void 0,this.startEdges=void 0,this.edges=void 0,this.interaction=void 0,this.interaction=h,this.result=Zn(),this.edges={left:!1,right:!1,top:!1,bottom:!1}}return a(c,[{key:"start",value:function(h,p){var g,_,x=h.phase,T=this.interaction,A=function(D){var R=D.interactable.options[D.prepared.name],B=R.modifiers;return B&&B.length?B:["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map(function($){var V=R[$];return V&&V.enabled&&{options:V,methods:V._methods}}).filter(function($){return!!$})}(T);this.prepareStates(A),this.startEdges=lt({},T.edges),this.edges=lt({},this.startEdges),this.startOffset=(g=T.rect,_=p,g?{left:_.x-g.left,top:_.y-g.top,right:g.right-_.x,bottom:g.bottom-_.y}:{left:0,top:0,right:0,bottom:0}),this.startDelta={x:0,y:0};var I=this.fillArg({phase:x,pageCoords:p,preEnd:!1});return this.result=Zn(),this.startAll(I),this.result=this.setAll(I)}},{key:"fillArg",value:function(h){var p=this.interaction;return h.interaction=p,h.interactable=p.interactable,h.element=p.element,h.rect||(h.rect=p.rect),h.edges||(h.edges=this.startEdges),h.startOffset=this.startOffset,h}},{key:"startAll",value:function(h){for(var p=0,g=this.states;p<g.length;p++){var _=g[p];_.methods.start&&(h.state=_,_.methods.start(h))}}},{key:"setAll",value:function(h){var p=h.phase,g=h.preEnd,_=h.skipModifiers,x=h.rect,T=h.edges;h.coords=lt({},h.pageCoords),h.rect=lt({},x),h.edges=lt({},T);for(var A=_?this.states.slice(_):this.states,I=Zn(h.coords,h.rect),D=0;D<A.length;D++){var R,B=A[D],$=B.options,V=lt({},h.coords),j=null;(R=B.methods)!=null&&R.set&&this.shouldDo($,g,p)&&(h.state=B,j=B.methods.set(h),Te(h.edges,h.rect,{x:h.coords.x-V.x,y:h.coords.y-V.y})),I.eventProps.push(j)}lt(this.edges,h.edges),I.delta.x=h.coords.x-h.pageCoords.x,I.delta.y=h.coords.y-h.pageCoords.y,I.rectDelta.left=h.rect.left-x.left,I.rectDelta.right=h.rect.right-x.right,I.rectDelta.top=h.rect.top-x.top,I.rectDelta.bottom=h.rect.bottom-x.bottom;var X=this.result.coords,ht=this.result.rect;if(X&&ht){var st=I.rect.left!==ht.left||I.rect.right!==ht.right||I.rect.top!==ht.top||I.rect.bottom!==ht.bottom;I.changed=st||X.x!==I.coords.x||X.y!==I.coords.y}return I}},{key:"applyToInteraction",value:function(h){var p=this.interaction,g=h.phase,_=p.coords.cur,x=p.coords.start,T=this.result,A=this.startDelta,I=T.delta;g==="start"&&lt(this.startDelta,T.delta);for(var D=0,R=[[x,A],[_,I]];D<R.length;D++){var B=R[D],$=B[0],V=B[1];$.page.x+=V.x,$.page.y+=V.y,$.client.x+=V.x,$.client.y+=V.y}var j=this.result.rectDelta,X=h.rect||p.rect;X.left+=j.left,X.right+=j.right,X.top+=j.top,X.bottom+=j.bottom,X.width=X.right-X.left,X.height=X.bottom-X.top}},{key:"setAndApply",value:function(h){var p=this.interaction,g=h.phase,_=h.preEnd,x=h.skipModifiers,T=this.setAll(this.fillArg({preEnd:_,phase:g,pageCoords:h.modifiedCoords||p.coords.cur.page}));if(this.result=T,!T.changed&&(!x||x<this.states.length)&&p.interacting())return!1;if(h.modifiedCoords){var A=p.coords.cur.page,I={x:h.modifiedCoords.x-A.x,y:h.modifiedCoords.y-A.y};T.coords.x+=I.x,T.coords.y+=I.y,T.delta.x+=I.x,T.delta.y+=I.y}this.applyToInteraction(h)}},{key:"beforeEnd",value:function(h){var p=h.interaction,g=h.event,_=this.states;if(_&&_.length){for(var x=!1,T=0;T<_.length;T++){var A=_[T];h.state=A;var I=A.options,D=A.methods,R=D.beforeEnd&&D.beforeEnd(h);if(R)return this.endResult=R,!1;x=x||!x&&this.shouldDo(I,!0,h.phase,!0)}x&&p.move({event:g,preEnd:!0})}}},{key:"stop",value:function(h){var p=h.interaction;if(this.states&&this.states.length){var g=lt({states:this.states,interactable:p.interactable,element:p.element,rect:null},h);this.fillArg(g);for(var _=0,x=this.states;_<x.length;_++){var T=x[_];g.state=T,T.methods.stop&&T.methods.stop(g)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(h){this.states=[];for(var p=0;p<h.length;p++){var g=h[p],_=g.options,x=g.methods,T=g.name;this.states.push({options:_,methods:x,index:p,name:T})}return this.states}},{key:"restoreInteractionCoords",value:function(h){var p=h.interaction,g=p.coords,_=p.rect,x=p.modification;if(x.result){for(var T=x.startDelta,A=x.result,I=A.delta,D=A.rectDelta,R=0,B=[[g.start,T],[g.cur,I]];R<B.length;R++){var $=B[R],V=$[0],j=$[1];V.page.x-=j.x,V.page.y-=j.y,V.client.x-=j.x,V.client.y-=j.y}_.left-=D.left,_.right-=D.right,_.top-=D.top,_.bottom-=D.bottom}}},{key:"shouldDo",value:function(h,p,g,_){return!(!h||h.enabled===!1||_&&!h.endOnly||h.endOnly&&!p||g==="start"&&!h.setStart)}},{key:"copyFrom",value:function(h){this.startOffset=h.startOffset,this.startDelta=h.startDelta,this.startEdges=h.startEdges,this.edges=h.edges,this.states=h.states.map(function(p){return ts(p)}),this.result=Zn(lt({},h.result.coords),lt({},h.result.rect))}},{key:"destroy",value:function(){for(var h in this)this[h]=null}}]),c}();function Zn(c,h){return{rect:h,coords:c,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function Kr(c,h){var p=c.defaults,g={start:c.start,set:c.set,beforeEnd:c.beforeEnd,stop:c.stop},_=function(x){var T=x||{};for(var A in T.enabled=T.enabled!==!1,p)A in T||(T[A]=p[A]);var I={options:T,methods:g,name:h,enable:function(){return T.enabled=!0,I},disable:function(){return T.enabled=!1,I}};return I};return h&&typeof h=="string"&&(_._defaults=p,_._methods=g),_}function Gs(c){var h=c.iEvent,p=c.interaction.modification.result;p&&(h.modifiers=p.eventProps)}var i_={id:"modifiers/base",before:["actions"],install:function(c){c.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(c){var h=c.interaction;h.modification=new fl(h)},"interactions:before-action-start":function(c){var h=c.interaction,p=c.interaction.modification;p.start(c,h.coords.start.page),h.edges=p.edges,p.applyToInteraction(c)},"interactions:before-action-move":function(c){var h=c.interaction,p=h.modification,g=p.setAndApply(c);return h.edges=p.edges,g},"interactions:before-action-end":function(c){var h=c.interaction,p=h.modification,g=p.beforeEnd(c);return h.edges=p.startEdges,g},"interactions:action-start":Gs,"interactions:action-move":Gs,"interactions:action-end":Gs,"interactions:after-action-start":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-move":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:stop":function(c){return c.interaction.modification.stop(c)}}},rd=i_,id={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}},ml=function(c){u(p,c);var h=v(p);function p(g,_,x,T,A,I,D){var R;n(this,p),(R=h.call(this,g)).relatedTarget=null,R.screenX=void 0,R.screenY=void 0,R.button=void 0,R.buttons=void 0,R.ctrlKey=void 0,R.shiftKey=void 0,R.altKey=void 0,R.metaKey=void 0,R.page=void 0,R.client=void 0,R.delta=void 0,R.rect=void 0,R.x0=void 0,R.y0=void 0,R.t0=void 0,R.dt=void 0,R.duration=void 0,R.clientX0=void 0,R.clientY0=void 0,R.velocity=void 0,R.speed=void 0,R.swipe=void 0,R.axes=void 0,R.preEnd=void 0,A=A||g.element;var B=g.interactable,$=(B&&B.options||id).deltaSource,V=we(B,A,x),j=T==="start",X=T==="end",ht=j?m(R):g.prevEvent,st=j?g.coords.start:X?{page:ht.page,client:ht.client,timeStamp:g.coords.cur.timeStamp}:g.coords.cur;return R.page=lt({},st.page),R.client=lt({},st.client),R.rect=lt({},g.rect),R.timeStamp=st.timeStamp,X||(R.page.x-=V.x,R.page.y-=V.y,R.client.x-=V.x,R.client.y-=V.y),R.ctrlKey=_.ctrlKey,R.altKey=_.altKey,R.shiftKey=_.shiftKey,R.metaKey=_.metaKey,R.button=_.button,R.buttons=_.buttons,R.target=A,R.currentTarget=A,R.preEnd=I,R.type=D||x+(T||""),R.interactable=B,R.t0=j?g.pointers[g.pointers.length-1].downTime:ht.t0,R.x0=g.coords.start.page.x-V.x,R.y0=g.coords.start.page.y-V.y,R.clientX0=g.coords.start.client.x-V.x,R.clientY0=g.coords.start.client.y-V.y,R.delta=j||X?{x:0,y:0}:{x:R[$].x-ht[$].x,y:R[$].y-ht[$].y},R.dt=g.coords.delta.timeStamp,R.duration=R.timeStamp-R.t0,R.velocity=lt({},g.coords.velocity[$]),R.speed=hr(R.velocity.x,R.velocity.y),R.swipe=X||T==="inertiastart"?R.getSwipe():null,R}return a(p,[{key:"getSwipe",value:function(){var g=this._interaction;if(g.prevEvent.speed<600||this.timeStamp-g.prevEvent.timeStamp>150)return null;var _=180*Math.atan2(g.prevEvent.velocityY,g.prevEvent.velocityX)/Math.PI;_<0&&(_+=360);var x=112.5<=_&&_<247.5,T=202.5<=_&&_<337.5;return{up:T,down:!T&&22.5<=_&&_<157.5,left:x,right:!x&&(292.5<=_||_<67.5),angle:_,speed:g.prevEvent.speed,velocity:{x:g.prevEvent.velocityX,y:g.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),p}(Yn);Object.defineProperties(ml.prototype,{pageX:{get:function(){return this.page.x},set:function(c){this.page.x=c}},pageY:{get:function(){return this.page.y},set:function(c){this.page.y=c}},clientX:{get:function(){return this.client.x},set:function(c){this.client.x=c}},clientY:{get:function(){return this.client.y},set:function(c){this.client.y=c}},dx:{get:function(){return this.delta.x},set:function(c){this.delta.x=c}},dy:{get:function(){return this.delta.y},set:function(c){this.delta.y=c}},velocityX:{get:function(){return this.velocity.x},set:function(c){this.velocity.x=c}},velocityY:{get:function(){return this.velocity.y},set:function(c){this.velocity.y=c}}});var s_=a(function c(h,p,g,_,x){n(this,c),this.id=void 0,this.pointer=void 0,this.event=void 0,this.downTime=void 0,this.downTarget=void 0,this.id=h,this.pointer=p,this.event=g,this.downTime=_,this.downTarget=x}),n_=function(c){return c.interactable="",c.element="",c.prepared="",c.pointerIsDown="",c.pointerWasMoved="",c._proxy="",c}({}),sd=function(c){return c.start="",c.move="",c.end="",c.stop="",c.interacting="",c}({}),o_=0,a_=function(){function c(h){var p=this,g=h.pointerType,_=h.scopeFire;n(this,c),this.interactable=null,this.element=null,this.rect=null,this._rects=void 0,this.edges=null,this._scopeFire=void 0,this.prepared={name:null,axis:null,edges:null},this.pointerType=void 0,this.pointers=[],this.downEvent=null,this.downPointer={},this._latestPointer={pointer:null,event:null,eventTarget:null},this.prevEvent=null,this.pointerIsDown=!1,this.pointerWasMoved=!1,this._interacting=!1,this._ending=!1,this._stopped=!0,this._proxy=void 0,this.simulation=null,this.doMove=$s(function(R){this.move(R)},"The interaction.doMove() method has been renamed to interaction.move()"),this.coords={start:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},prev:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},cur:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},delta:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0},velocity:{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},this._id=o_++,this._scopeFire=_,this.pointerType=g;var x=this;this._proxy={};var T=function(R){Object.defineProperty(p._proxy,R,{get:function(){return x[R]}})};for(var A in n_)T(A);var I=function(R){Object.defineProperty(p._proxy,R,{value:function(){return x[R].apply(x,arguments)}})};for(var D in sd)I(D);this._scopeFire("interactions:new",{interaction:this})}return a(c,[{key:"pointerMoveTolerance",get:function(){return 1}},{key:"pointerDown",value:function(h,p,g){var _=this.updatePointer(h,p,g,!0),x=this.pointers[_];this._scopeFire("interactions:down",{pointer:h,event:p,eventTarget:g,pointerIndex:_,pointerInfo:x,type:"down",interaction:this})}},{key:"start",value:function(h,p,g){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<(h.name==="gesture"?2:1)||!p.options[h.name].enabled)&&(cl(this.prepared,h),this.interactable=p,this.element=g,this.rect=p.getRect(g),this.edges=this.prepared.edges?lt({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(h,p,g){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(h,p,g,!1);var _,x,T=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(_=this.coords.cur.client.x-this.coords.start.client.x,x=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=hr(_,x)>this.pointerMoveTolerance);var A,I,D,R=this.getPointerIndex(h),B={pointer:h,pointerIndex:R,pointerInfo:this.pointers[R],event:p,type:"move",eventTarget:g,dx:_,dy:x,duplicate:T,interaction:this};T||(A=this.coords.velocity,I=this.coords.delta,D=Math.max(I.timeStamp/1e3,.001),A.page.x=I.page.x/D,A.page.y=I.page.y/D,A.client.x=I.client.x/D,A.client.y=I.client.y/D,A.timeStamp=D),this._scopeFire("interactions:move",B),T||this.simulation||(this.interacting()&&(B.type=null,this.move(B)),this.pointerWasMoved&&Wn(this.coords.prev,this.coords.cur))}},{key:"move",value:function(h){h&&h.event||Ou(this.coords.delta),(h=lt({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},h||{})).phase="move",this._doPhase(h)}},{key:"pointerUp",value:function(h,p,g,_){var x=this.getPointerIndex(h);x===-1&&(x=this.updatePointer(h,p,g,!1));var T=/cancel$/i.test(p.type)?"cancel":"up";this._scopeFire("interactions:".concat(T),{pointer:h,pointerIndex:x,pointerInfo:this.pointers[x],event:p,eventTarget:g,type:T,curEventTarget:_,interaction:this}),this.simulation||this.end(p),this.removePointer(h,p)}},{key:"documentBlur",value:function(h){this.end(h),this._scopeFire("interactions:blur",{event:h,type:"blur",interaction:this})}},{key:"end",value:function(h){var p;this._ending=!0,h=h||this._latestPointer.event,this.interacting()&&(p=this._doPhase({event:h,interaction:this,phase:"end"})),this._ending=!1,p===!0&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(h){var p=Fs(h);return this.pointerType==="mouse"||this.pointerType==="pen"?this.pointers.length-1:Ns(this.pointers,function(g){return g.id===p})}},{key:"getPointerInfo",value:function(h){return this.pointers[this.getPointerIndex(h)]}},{key:"updatePointer",value:function(h,p,g,_){var x,T,A,I=Fs(h),D=this.getPointerIndex(h),R=this.pointers[D];return _=_!==!1&&(_||/(down|start)$/i.test(p.type)),R?R.pointer=h:(R=new s_(I,h,p,null,null),D=this.pointers.length,this.pointers.push(R)),Ny(this.coords.cur,this.pointers.map(function(B){return B.pointer}),this._now()),x=this.coords.delta,T=this.coords.prev,A=this.coords.cur,x.page.x=A.page.x-T.page.x,x.page.y=A.page.y-T.page.y,x.client.x=A.client.x-T.client.x,x.client.y=A.client.y-T.client.y,x.timeStamp=A.timeStamp-T.timeStamp,_&&(this.pointerIsDown=!0,R.downTime=this.coords.cur.timeStamp,R.downTarget=g,Vn(this.downPointer,h),this.interacting()||(Wn(this.coords.start,this.coords.cur),Wn(this.coords.prev,this.coords.cur),this.downEvent=p,this.pointerWasMoved=!1)),this._updateLatestPointer(h,p,g),this._scopeFire("interactions:update-pointer",{pointer:h,event:p,eventTarget:g,down:_,pointerInfo:R,pointerIndex:D,interaction:this}),D}},{key:"removePointer",value:function(h,p){var g=this.getPointerIndex(h);if(g!==-1){var _=this.pointers[g];this._scopeFire("interactions:remove-pointer",{pointer:h,event:p,eventTarget:null,pointerIndex:g,pointerInfo:_,interaction:this}),this.pointers.splice(g,1),this.pointerIsDown=!1}}},{key:"_updateLatestPointer",value:function(h,p,g){this._latestPointer.pointer=h,this._latestPointer.event=p,this._latestPointer.eventTarget=g}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(h,p,g,_){return new ml(this,h,this.prepared.name,p,this.element,g,_)}},{key:"_fireEvent",value:function(h){var p;(p=this.interactable)==null||p.fire(h),(!this.prevEvent||h.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=h)}},{key:"_doPhase",value:function(h){var p=h.event,g=h.phase,_=h.preEnd,x=h.type,T=this.rect;if(T&&g==="move"&&(Te(this.edges,T,this.coords.delta[this.interactable.options.deltaSource]),T.width=T.right-T.left,T.height=T.bottom-T.top),this._scopeFire("interactions:before-action-".concat(g),h)===!1)return!1;var A=h.iEvent=this._createPreparedEvent(p,g,_,x);return this._scopeFire("interactions:action-".concat(g),h),g==="start"&&(this.prevEvent=A),this._fireEvent(A),this._scopeFire("interactions:after-action-".concat(g),h),!0}},{key:"_now",value:function(){return Date.now()}}]),c}();function nd(c){od(c.interaction)}function od(c){if(!function(p){return!(!p.offset.pending.x&&!p.offset.pending.y)}(c))return!1;var h=c.offset.pending;return gl(c.coords.cur,h),gl(c.coords.delta,h),Te(c.edges,c.rect,h),h.x=0,h.y=0,!0}function l_(c){var h=c.x,p=c.y;this.offset.pending.x+=h,this.offset.pending.y+=p,this.offset.total.x+=h,this.offset.total.y+=p}function gl(c,h){var p=c.page,g=c.client,_=h.x,x=h.y;p.x+=_,p.y+=x,g.x+=_,g.y+=x}sd.offsetBy="";var h_={id:"offset",before:["modifiers","pointer-events","actions","inertia"],install:function(c){c.Interaction.prototype.offsetBy=l_},listeners:{"interactions:new":function(c){c.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(c){return function(h){h.pointerIsDown&&(gl(h.coords.cur,h.offset.total),h.offset.pending.x=0,h.offset.pending.y=0)}(c.interaction)},"interactions:before-action-start":nd,"interactions:before-action-move":nd,"interactions:before-action-end":function(c){var h=c.interaction;if(od(h))return h.move({offset:!0}),h.end(),!1},"interactions:stop":function(c){var h=c.interaction;h.offset.total.x=0,h.offset.total.y=0,h.offset.pending.x=0,h.offset.pending.y=0}}},ad=h_,c_=function(){function c(h){n(this,c),this.active=!1,this.isModified=!1,this.smoothEnd=!1,this.allowResume=!1,this.modification=void 0,this.modifierCount=0,this.modifierArg=void 0,this.startCoords=void 0,this.t0=0,this.v0=0,this.te=0,this.targetOffset=void 0,this.modifiedOffset=void 0,this.currentOffset=void 0,this.lambda_v0=0,this.one_ve_v0=0,this.timeout=void 0,this.interaction=void 0,this.interaction=h}return a(c,[{key:"start",value:function(h){var p=this.interaction,g=Qn(p);if(!g||!g.enabled)return!1;var _=p.coords.velocity.client,x=hr(_.x,_.y),T=this.modification||(this.modification=new fl(p));if(T.copyFrom(p.modification),this.t0=p._now(),this.allowResume=g.allowResume,this.v0=x,this.currentOffset={x:0,y:0},this.startCoords=p.coords.cur.page,this.modifierArg=T.fillArg({pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"}),this.t0-p.coords.cur.timeStamp<50&&x>g.minSpeed&&x>g.endSpeed)this.startInertia();else{if(T.result=T.setAll(this.modifierArg),!T.result.changed)return!1;this.startSmoothEnd()}return p.modification.result.rect=null,p.offsetBy(this.targetOffset),p._doPhase({interaction:p,event:h,phase:"inertiastart"}),p.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),p.modification.result.rect=null,this.active=!0,p.simulation=this,!0}},{key:"startInertia",value:function(){var h=this,p=this.interaction.coords.velocity.client,g=Qn(this.interaction),_=g.resistance,x=-Math.log(g.endSpeed/this.v0)/_;this.targetOffset={x:(p.x-x)/_,y:(p.y-x)/_},this.te=x,this.lambda_v0=_/this.v0,this.one_ve_v0=1-g.endSpeed/this.v0;var T=this.modification,A=this.modifierArg;A.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},T.result=T.setAll(A),T.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+T.result.delta.x,y:this.targetOffset.y+T.result.delta.y}),this.onNextFrame(function(){return h.inertiaTick()})}},{key:"startSmoothEnd",value:function(){var h=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.onNextFrame(function(){return h.smoothEndTick()})}},{key:"onNextFrame",value:function(h){var p=this;this.timeout=qr.request(function(){p.active&&h()})}},{key:"inertiaTick",value:function(){var h,p,g,_,x,T,A,I=this,D=this.interaction,R=Qn(D).resistance,B=(D._now()-this.t0)/1e3;if(B<this.te){var $,V=1-(Math.exp(-R*B)-this.lambda_v0)/this.one_ve_v0;this.isModified?(h=0,p=0,g=this.targetOffset.x,_=this.targetOffset.y,x=this.modifiedOffset.x,T=this.modifiedOffset.y,$={x:ld(A=V,h,g,x),y:ld(A,p,_,T)}):$={x:this.targetOffset.x*V,y:this.targetOffset.y*V};var j={x:$.x-this.currentOffset.x,y:$.y-this.currentOffset.y};this.currentOffset.x+=j.x,this.currentOffset.y+=j.y,D.offsetBy(j),D.move(),this.onNextFrame(function(){return I.inertiaTick()})}else D.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var h=this,p=this.interaction,g=p._now()-this.t0,_=Qn(p).smoothEndDuration;if(g<_){var x={x:hd(g,0,this.targetOffset.x,_),y:hd(g,0,this.targetOffset.y,_)},T={x:x.x-this.currentOffset.x,y:x.y-this.currentOffset.y};this.currentOffset.x+=T.x,this.currentOffset.y+=T.y,p.offsetBy(T),p.move({skipModifiers:this.modifierCount}),this.onNextFrame(function(){return h.smoothEndTick()})}else p.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(h){var p=h.pointer,g=h.event,_=h.eventTarget,x=this.interaction;x.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),x.updatePointer(p,g,_,!0),x._doPhase({interaction:x,event:g,phase:"resume"}),Wn(x.coords.prev,x.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,qr.cancel(this.timeout)}}]),c}();function Qn(c){var h=c.interactable,p=c.prepared;return h&&h.options&&p.name&&h.options[p.name].inertia}var u_={id:"inertia",before:["modifiers","actions"],install:function(c){var h=c.defaults;c.usePlugin(ad),c.usePlugin(rd),c.actions.phases.inertiastart=!0,c.actions.phases.resume=!0,h.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(c){var h=c.interaction;h.inertia=new c_(h)},"interactions:before-action-end":function(c){var h=c.interaction,p=c.event;return(!h._interacting||h.simulation||!h.inertia.start(p))&&null},"interactions:down":function(c){var h=c.interaction,p=c.eventTarget,g=h.inertia;if(g.active)for(var _=p;C.element(_);){if(_===h.element){g.resume(c);break}_=Tt(_)}},"interactions:stop":function(c){var h=c.interaction.inertia;h.active&&h.stop()},"interactions:before-action-resume":function(c){var h=c.interaction.modification;h.stop(c),h.start(c,c.interaction.coords.cur.page),h.applyToInteraction(c)},"interactions:before-action-inertiastart":function(c){return c.interaction.modification.setAndApply(c)},"interactions:action-resume":Gs,"interactions:action-inertiastart":Gs,"interactions:after-action-inertiastart":function(c){return c.interaction.modification.restoreInteractionCoords(c)},"interactions:after-action-resume":function(c){return c.interaction.modification.restoreInteractionCoords(c)}}};function ld(c,h,p,g){var _=1-c;return _*_*h+2*_*c*p+c*c*g}function hd(c,h,p,g){return-p*(c/=g)*(c-2)+h}var d_=u_;function cd(c,h){for(var p=0;p<h.length;p++){var g=h[p];if(c.immediatePropagationStopped)break;g(c)}}var ud=function(){function c(h){n(this,c),this.options=void 0,this.types={},this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.global=void 0,this.options=lt({},h||{})}return a(c,[{key:"fire",value:function(h){var p,g=this.global;(p=this.types[h.type])&&cd(h,p),!h.propagationStopped&&g&&(p=g[h.type])&&cd(h,p)}},{key:"on",value:function(h,p){var g=De(h,p);for(h in g)this.types[h]=$u(this.types[h]||[],g[h])}},{key:"off",value:function(h,p){var g=De(h,p);for(h in g){var _=this.types[h];if(_&&_.length)for(var x=0,T=g[h];x<T.length;x++){var A=T[x],I=_.indexOf(A);I!==-1&&_.splice(I,1)}}}},{key:"getRect",value:function(h){return null}}]),c}(),p_=function(){function c(h){n(this,c),this.currentTarget=void 0,this.originalEvent=void 0,this.type=void 0,this.originalEvent=h,Vn(this,h)}return a(c,[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}]),c}();function Hs(c){return C.object(c)?{capture:!!c.capture,passive:!!c.passive}:{capture:!!c,passive:!1}}function Jn(c,h){return c===h||(typeof c=="boolean"?!!h.capture===c&&!h.passive:!!c.capture==!!h.capture&&!!c.passive==!!h.passive)}var f_={id:"events",install:function(c){var h,p=[],g={},_=[],x={add:T,remove:A,addDelegate:function(R,B,$,V,j){var X=Hs(j);if(!g[$]){g[$]=[];for(var ht=0;ht<_.length;ht++){var st=_[ht];T(st,$,I),T(st,$,D,!0)}}var mt=g[$],St=Us(mt,function(Dt){return Dt.selector===R&&Dt.context===B});St||(St={selector:R,context:B,listeners:[]},mt.push(St)),St.listeners.push({func:V,options:X})},removeDelegate:function(R,B,$,V,j){var X,ht=Hs(j),st=g[$],mt=!1;if(st)for(X=st.length-1;X>=0;X--){var St=st[X];if(St.selector===R&&St.context===B){for(var Dt=St.listeners,xt=Dt.length-1;xt>=0;xt--){var Pt=Dt[xt];if(Pt.func===V&&Jn(Pt.options,ht)){Dt.splice(xt,1),Dt.length||(st.splice(X,1),A(B,$,I),A(B,$,D,!0)),mt=!0;break}}if(mt)break}}},delegateListener:I,delegateUseCapture:D,delegatedEvents:g,documents:_,targets:p,supportsOptions:!1,supportsPassive:!1};function T(R,B,$,V){if(R.addEventListener){var j=Hs(V),X=Us(p,function(ht){return ht.eventTarget===R});X||(X={eventTarget:R,events:{}},p.push(X)),X.events[B]||(X.events[B]=[]),Us(X.events[B],function(ht){return ht.func===$&&Jn(ht.options,j)})||(R.addEventListener(B,$,x.supportsOptions?j:j.capture),X.events[B].push({func:$,options:j}))}}function A(R,B,$,V){if(R.addEventListener&&R.removeEventListener){var j=Ns(p,function(Se){return Se.eventTarget===R}),X=p[j];if(X&&X.events)if(B!=="all"){var ht=!1,st=X.events[B];if(st){if($==="all"){for(var mt=st.length-1;mt>=0;mt--){var St=st[mt];A(R,B,St.func,St.options)}return}for(var Dt=Hs(V),xt=0;xt<st.length;xt++){var Pt=st[xt];if(Pt.func===$&&Jn(Pt.options,Dt)){R.removeEventListener(B,$,x.supportsOptions?Dt:Dt.capture),st.splice(xt,1),st.length===0&&(delete X.events[B],ht=!0);break}}}ht&&!Object.keys(X.events).length&&p.splice(j,1)}else for(B in X.events)X.events.hasOwnProperty(B)&&A(R,B,"all")}}function I(R,B){for(var $=Hs(B),V=new p_(R),j=g[R.type],X=Uu(R)[0],ht=X;C.element(ht);){for(var st=0;st<j.length;st++){var mt=j[st],St=mt.selector,Dt=mt.context;if(Y(ht,St)&&Z(Dt,X)&&Z(Dt,ht)){var xt=mt.listeners;V.currentTarget=ht;for(var Pt=0;Pt<xt.length;Pt++){var Se=xt[Pt];Jn(Se.options,$)&&Se.func(V)}}}ht=Tt(ht)}}function D(R){return I(R,!0)}return(h=c.document)==null||h.createElement("div").addEventListener("test",null,{get capture(){return x.supportsOptions=!0},get passive(){return x.supportsPassive=!0}}),c.events=x,x}},vl={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(c){for(var h=0,p=vl.methodOrder;h<p.length;h++){var g=p[h],_=vl[g](c);if(_)return _}return null},simulationResume:function(c){var h=c.pointerType,p=c.eventType,g=c.eventTarget,_=c.scope;if(!/down|start/i.test(p))return null;for(var x=0,T=_.interactions.list;x<T.length;x++){var A=T[x],I=g;if(A.simulation&&A.simulation.allowResume&&A.pointerType===h)for(;I;){if(I===A.element)return A;I=Tt(I)}}return null},mouseOrPen:function(c){var h,p=c.pointerId,g=c.pointerType,_=c.eventType,x=c.scope;if(g!=="mouse"&&g!=="pen")return null;for(var T=0,A=x.interactions.list;T<A.length;T++){var I=A[T];if(I.pointerType===g){if(I.simulation&&!dd(I,p))continue;if(I.interacting())return I;h||(h=I)}}if(h)return h;for(var D=0,R=x.interactions.list;D<R.length;D++){var B=R[D];if(!(B.pointerType!==g||/down/i.test(_)&&B.simulation))return B}return null},hasPointer:function(c){for(var h=c.pointerId,p=0,g=c.scope.interactions.list;p<g.length;p++){var _=g[p];if(dd(_,h))return _}return null},idle:function(c){for(var h=c.pointerType,p=0,g=c.scope.interactions.list;p<g.length;p++){var _=g[p];if(_.pointers.length===1){var x=_.interactable;if(x&&(!x.options.gesture||!x.options.gesture.enabled))continue}else if(_.pointers.length>=2)continue;if(!_.interacting()&&h===_.pointerType)return _}return null}};function dd(c,h){return c.pointers.some(function(p){return p.id===h})}var m_=vl,yl=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function pd(c,h){return function(p){var g=h.interactions.list,_=Nu(p),x=Uu(p),T=x[0],A=x[1],I=[];if(/^touch/.test(p.type)){h.prevTouchTime=h.now();for(var D=0,R=p.changedTouches;D<R.length;D++){var B=R[D],$={pointer:B,pointerId:Fs(B),pointerType:_,eventType:p.type,eventTarget:T,curEventTarget:A,scope:h},V=fd($);I.push([$.pointer,$.eventTarget,$.curEventTarget,V])}}else{var j=!1;if(!J.supportsPointerEvent&&/mouse/.test(p.type)){for(var X=0;X<g.length&&!j;X++)j=g[X].pointerType!=="mouse"&&g[X].pointerIsDown;j=j||h.now()-h.prevTouchTime<500||p.timeStamp===0}if(!j){var ht={pointer:p,pointerId:Fs(p),pointerType:_,eventType:p.type,curEventTarget:A,eventTarget:T,scope:h},st=fd(ht);I.push([ht.pointer,ht.eventTarget,ht.curEventTarget,st])}}for(var mt=0;mt<I.length;mt++){var St=I[mt],Dt=St[0],xt=St[1],Pt=St[2];St[3][c](Dt,p,xt,Pt)}}}function fd(c){var h=c.pointerType,p=c.scope,g={interaction:m_.search(c),searchDetails:c};return p.fire("interactions:find",g),g.interaction||p.interactions.new({pointerType:h})}function _l(c,h){var p=c.doc,g=c.scope,_=c.options,x=g.interactions.docEvents,T=g.events,A=T[h];for(var I in g.browser.isIOS&&!_.events&&(_.events={passive:!1}),T.delegatedEvents)A(p,I,T.delegateListener),A(p,I,T.delegateUseCapture,!0);for(var D=_&&_.events,R=0;R<x.length;R++){var B=x[R];A(p,B.type,B.listener,D)}}var g_={id:"core/interactions",install:function(c){for(var h={},p=0;p<yl.length;p++){var g=yl[p];h[g]=pd(g,c)}var _,x=J.pEventTypes;function T(){for(var A=0,I=c.interactions.list;A<I.length;A++){var D=I[A];if(D.pointerIsDown&&D.pointerType==="touch"&&!D._interacting)for(var R=function(){var V=$[B];c.documents.some(function(j){return Z(j.doc,V.downTarget)})||D.removePointer(V.pointer,V.event)},B=0,$=D.pointers;B<$.length;B++)R()}}(_=L.PointerEvent?[{type:x.down,listener:T},{type:x.down,listener:h.pointerDown},{type:x.move,listener:h.pointerMove},{type:x.up,listener:h.pointerUp},{type:x.cancel,listener:h.pointerUp}]:[{type:"mousedown",listener:h.pointerDown},{type:"mousemove",listener:h.pointerMove},{type:"mouseup",listener:h.pointerUp},{type:"touchstart",listener:T},{type:"touchstart",listener:h.pointerDown},{type:"touchmove",listener:h.pointerMove},{type:"touchend",listener:h.pointerUp},{type:"touchcancel",listener:h.pointerUp}]).push({type:"blur",listener:function(A){for(var I=0,D=c.interactions.list;I<D.length;I++)D[I].documentBlur(A)}}),c.prevTouchTime=0,c.Interaction=function(A){u(D,A);var I=v(D);function D(){return n(this,D),I.apply(this,arguments)}return a(D,[{key:"pointerMoveTolerance",get:function(){return c.interactions.pointerMoveTolerance},set:function(R){c.interactions.pointerMoveTolerance=R}},{key:"_now",value:function(){return c.now()}}]),D}(a_),c.interactions={list:[],new:function(A){A.scopeFire=function(D,R){return c.fire(D,R)};var I=new c.Interaction(A);return c.interactions.list.push(I),I},listeners:h,docEvents:_,pointerMoveTolerance:1},c.usePlugin(ed)},listeners:{"scope:add-document":function(c){return _l(c,"add")},"scope:remove-document":function(c){return _l(c,"remove")},"interactable:unset":function(c,h){for(var p=c.interactable,g=h.interactions.list.length-1;g>=0;g--){var _=h.interactions.list[g];_.interactable===p&&(_.stop(),h.fire("interactions:destroy",{interaction:_}),_.destroy(),h.interactions.list.length>2&&h.interactions.list.splice(g,1))}}},onDocSignal:_l,doOnInteractions:pd,methodNames:yl},v_=g_,Zr=function(c){return c[c.On=0]="On",c[c.Off=1]="Off",c}(Zr||{}),y_=function(){function c(h,p,g,_){n(this,c),this.target=void 0,this.options=void 0,this._actions=void 0,this.events=new ud,this._context=void 0,this._win=void 0,this._doc=void 0,this._scopeEvents=void 0,this._actions=p.actions,this.target=h,this._context=p.context||g,this._win=M(ce(h)?this._context:h),this._doc=this._win.document,this._scopeEvents=_,this.set(p)}return a(c,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}},{key:"setOnEvents",value:function(h,p){return C.func(p.onstart)&&this.on("".concat(h,"start"),p.onstart),C.func(p.onmove)&&this.on("".concat(h,"move"),p.onmove),C.func(p.onend)&&this.on("".concat(h,"end"),p.onend),C.func(p.oninertiastart)&&this.on("".concat(h,"inertiastart"),p.oninertiastart),this}},{key:"updatePerActionListeners",value:function(h,p,g){var _,x=this,T=(_=this._actions.map[h])==null?void 0:_.filterEventType,A=function(I){return(T==null||T(I))&&Kn(I,x._actions)};(C.array(p)||C.object(p))&&this._onOff(Zr.Off,h,p,void 0,A),(C.array(g)||C.object(g))&&this._onOff(Zr.On,h,g,void 0,A)}},{key:"setPerAction",value:function(h,p){var g=this._defaults;for(var _ in p){var x=_,T=this.options[h],A=p[x];x==="listeners"&&this.updatePerActionListeners(h,T.listeners,A),C.array(A)?T[x]=Gu(A):C.plainObject(A)?(T[x]=lt(T[x]||{},ts(A)),C.object(g.perAction[x])&&"enabled"in g.perAction[x]&&(T[x].enabled=A.enabled!==!1)):C.bool(A)&&C.object(g.perAction[x])?T[x].enabled=A:T[x]=A}}},{key:"getRect",value:function(h){return h=h||(C.element(this.target)?this.target:null),C.string(this.target)&&(h=h||this._context.querySelector(this.target)),Kt(h)}},{key:"rectChecker",value:function(h){var p=this;return C.func(h)?(this.getRect=function(g){var _=lt({},h.apply(p,g));return"width"in _||(_.width=_.right-_.left,_.height=_.bottom-_.top),_},this):h===null?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(h,p){if(ce(p)||C.object(p)){for(var g in this.options[h]=p,this._actions.map)this.options[g][h]=p;return this}return this.options[h]}},{key:"origin",value:function(h){return this._backCompatOption("origin",h)}},{key:"deltaSource",value:function(h){return h==="page"||h==="client"?(this.options.deltaSource=h,this):this.options.deltaSource}},{key:"getAllElements",value:function(){var h=this.target;return C.string(h)?Array.from(this._context.querySelectorAll(h)):C.func(h)&&h.getAllElements?h.getAllElements():C.element(h)?[h]:[]}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(h){return this._context===h.ownerDocument||Z(this._context,h)}},{key:"testIgnoreAllow",value:function(h,p,g){return!this.testIgnore(h.ignoreFrom,p,g)&&this.testAllow(h.allowFrom,p,g)}},{key:"testAllow",value:function(h,p,g){return!h||!!C.element(g)&&(C.string(h)?Ft(g,h,p):!!C.element(h)&&Z(h,g))}},{key:"testIgnore",value:function(h,p,g){return!(!h||!C.element(g))&&(C.string(h)?Ft(g,h,p):!!C.element(h)&&Z(h,g))}},{key:"fire",value:function(h){return this.events.fire(h),this}},{key:"_onOff",value:function(h,p,g,_,x){C.object(p)&&!C.array(p)&&(_=g,g=null);var T=De(p,g,x);for(var A in T){A==="wheel"&&(A=J.wheelEvent);for(var I=0,D=T[A];I<D.length;I++){var R=D[I];Kn(A,this._actions)?this.events[h===Zr.On?"on":"off"](A,R):C.string(this.target)?this._scopeEvents[h===Zr.On?"addDelegate":"removeDelegate"](this.target,this._context,A,R,_):this._scopeEvents[h===Zr.On?"add":"remove"](this.target,A,R,_)}}return this}},{key:"on",value:function(h,p,g){return this._onOff(Zr.On,h,p,g)}},{key:"off",value:function(h,p,g){return this._onOff(Zr.Off,h,p,g)}},{key:"set",value:function(h){var p=this._defaults;for(var g in C.object(h)||(h={}),this.options=ts(p.base),this._actions.methodDict){var _=g,x=this._actions.methodDict[_];this.options[_]={},this.setPerAction(_,lt(lt({},p.perAction),p.actions[_])),this[x](h[_])}for(var T in h)T!=="getRect"?C.func(this[T])&&this[T](h[T]):this.rectChecker(h.getRect);return this}},{key:"unset",value:function(){if(C.string(this.target))for(var h in this._scopeEvents.delegatedEvents)for(var p=this._scopeEvents.delegatedEvents[h],g=p.length-1;g>=0;g--){var _=p[g],x=_.selector,T=_.context,A=_.listeners;x===this.target&&T===this._context&&p.splice(g,1);for(var I=A.length-1;I>=0;I--)this._scopeEvents.removeDelegate(this.target,this._context,h,A[I][0],A[I][1])}else this._scopeEvents.remove(this.target,"all")}}]),c}(),__=function(){function c(h){var p=this;n(this,c),this.list=[],this.selectorMap={},this.scope=void 0,this.scope=h,h.addListeners({"interactable:unset":function(g){var _=g.interactable,x=_.target,T=C.string(x)?p.selectorMap[x]:x[p.scope.id],A=Ns(T,function(I){return I===_});T.splice(A,1)}})}return a(c,[{key:"new",value:function(h,p){p=lt(p||{},{actions:this.scope.actions});var g=new this.scope.Interactable(h,p,this.scope.document,this.scope.events);return this.scope.addDocument(g._doc),this.list.push(g),C.string(h)?(this.selectorMap[h]||(this.selectorMap[h]=[]),this.selectorMap[h].push(g)):(g.target[this.scope.id]||Object.defineProperty(h,this.scope.id,{value:[],configurable:!0}),h[this.scope.id].push(g)),this.scope.fire("interactable:new",{target:h,options:p,interactable:g,win:this.scope._win}),g}},{key:"getExisting",value:function(h,p){var g=p&&p.context||this.scope.document,_=C.string(h),x=_?this.selectorMap[h]:h[this.scope.id];if(x)return Us(x,function(T){return T._context===g&&(_||T.inContext(h))})}},{key:"forEachMatch",value:function(h,p){for(var g=0,_=this.list;g<_.length;g++){var x=_[g],T=void 0;if((C.string(x.target)?C.element(h)&&Y(h,x.target):h===x.target)&&x.inContext(h)&&(T=p(x)),T!==void 0)return T}}}]),c}(),b_=function(){function c(){var h=this;n(this,c),this.id="__interact_scope_".concat(Math.floor(100*Math.random())),this.isInitialized=!1,this.listenerMaps=[],this.browser=J,this.defaults=ts(id),this.Eventable=ud,this.actions={map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}},this.interactStatic=function(g){var _=function x(T,A){var I=g.interactables.getExisting(T,A);return I||((I=g.interactables.new(T,A)).events.global=x.globalEvents),I};return _.getPointerAverage=Fu,_.getTouchBBox=rl,_.getTouchDistance=il,_.getTouchAngle=sl,_.getElementRect=Kt,_.getElementClientRect=se,_.matchesSelector=Y,_.closest=ut,_.globalEvents={},_.version="1.10.27",_.scope=g,_.use=function(x,T){return this.scope.usePlugin(x,T),this},_.isSet=function(x,T){return!!this.scope.interactables.get(x,T&&T.context)},_.on=$s(function(x,T,A){if(C.string(x)&&x.search(" ")!==-1&&(x=x.trim().split(/ +/)),C.array(x)){for(var I=0,D=x;I<D.length;I++){var R=D[I];this.on(R,T,A)}return this}if(C.object(x)){for(var B in x)this.on(B,x[B],T);return this}return Kn(x,this.scope.actions)?this.globalEvents[x]?this.globalEvents[x].push(T):this.globalEvents[x]=[T]:this.scope.events.add(this.scope.document,x,T,{options:A}),this},"The interact.on() method is being deprecated"),_.off=$s(function(x,T,A){if(C.string(x)&&x.search(" ")!==-1&&(x=x.trim().split(/ +/)),C.array(x)){for(var I=0,D=x;I<D.length;I++){var R=D[I];this.off(R,T,A)}return this}if(C.object(x)){for(var B in x)this.off(B,x[B],T);return this}var $;return Kn(x,this.scope.actions)?x in this.globalEvents&&($=this.globalEvents[x].indexOf(T))!==-1&&this.globalEvents[x].splice($,1):this.scope.events.remove(this.scope.document,x,T,A),this},"The interact.off() method is being deprecated"),_.debug=function(){return this.scope},_.supportsTouch=function(){return J.supportsTouch},_.supportsPointerEvent=function(){return J.supportsPointerEvent},_.stop=function(){for(var x=0,T=this.scope.interactions.list;x<T.length;x++)T[x].stop();return this},_.pointerMoveTolerance=function(x){return C.number(x)?(this.scope.interactions.pointerMoveTolerance=x,this):this.scope.interactions.pointerMoveTolerance},_.addDocument=function(x,T){this.scope.addDocument(x,T)},_.removeDocument=function(x){this.scope.removeDocument(x)},_}(this),this.InteractEvent=ml,this.Interactable=void 0,this.interactables=new __(this),this._win=void 0,this.document=void 0,this.window=void 0,this.documents=[],this._plugins={list:[],map:{}},this.onWindowUnload=function(g){return h.removeDocument(g.target)};var p=this;this.Interactable=function(g){u(x,g);var _=v(x);function x(){return n(this,x),_.apply(this,arguments)}return a(x,[{key:"_defaults",get:function(){return p.defaults}},{key:"set",value:function(T){return y(d(x.prototype),"set",this).call(this,T),p.fire("interactable:set",{options:T,interactable:this}),this}},{key:"unset",value:function(){y(d(x.prototype),"unset",this).call(this);var T=p.interactables.list.indexOf(this);T<0||(p.interactables.list.splice(T,1),p.fire("interactable:unset",{interactable:this}))}}]),x}(y_)}return a(c,[{key:"addListeners",value:function(h,p){this.listenerMaps.push({id:p,map:h})}},{key:"fire",value:function(h,p){for(var g=0,_=this.listenerMaps;g<_.length;g++){var x=_[g].map[h];if(x&&x(p,this,h)===!1)return!1}}},{key:"init",value:function(h){return this.isInitialized?this:function(p,g){return p.isInitialized=!0,C.window(g)&&S(g),L.init(g),J.init(g),qr.init(g),p.window=g,p.document=g.document,p.usePlugin(v_),p.usePlugin(f_),p}(this,h)}},{key:"pluginIsInstalled",value:function(h){var p=h.id;return p?!!this._plugins.map[p]:this._plugins.list.indexOf(h)!==-1}},{key:"usePlugin",value:function(h,p){if(!this.isInitialized)return this;if(this.pluginIsInstalled(h))return this;if(h.id&&(this._plugins.map[h.id]=h),this._plugins.list.push(h),h.install&&h.install(this,p),h.listeners&&h.before){for(var g=0,_=this.listenerMaps.length,x=h.before.reduce(function(A,I){return A[I]=!0,A[md(I)]=!0,A},{});g<_;g++){var T=this.listenerMaps[g].id;if(T&&(x[T]||x[md(T)]))break}this.listenerMaps.splice(g,0,{id:h.id,map:h.listeners})}else h.listeners&&this.listenerMaps.push({id:h.id,map:h.listeners});return this}},{key:"addDocument",value:function(h,p){if(this.getDocIndex(h)!==-1)return!1;var g=M(h);p=p?lt({},p):{},this.documents.push({doc:h,options:p}),this.events.documents.push(h),h!==this.document&&this.events.add(g,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:h,window:g,scope:this,options:p})}},{key:"removeDocument",value:function(h){var p=this.getDocIndex(h),g=M(h),_=this.documents[p].options;this.events.remove(g,"unload",this.onWindowUnload),this.documents.splice(p,1),this.events.documents.splice(p,1),this.fire("scope:remove-document",{doc:h,window:g,scope:this,options:_})}},{key:"getDocIndex",value:function(h){for(var p=0;p<this.documents.length;p++)if(this.documents[p].doc===h)return p;return-1}},{key:"getDocOptions",value:function(h){var p=this.getDocIndex(h);return p===-1?null:this.documents[p].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),c}();function md(c){return c&&c.replace(/\/.*$/,"")}var gd=new b_,Ee=gd.interactStatic,x_=typeof globalThis<"u"?globalThis:window;gd.init(x_);var w_=Object.freeze({__proto__:null,edgeTarget:function(){},elements:function(){},grid:function(c){var h=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter(function(g){var _=g[0],x=g[1];return _ in c||x in c}),p=function(g,_){for(var x=c.range,T=c.limits,A=T===void 0?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:T,I=c.offset,D=I===void 0?{x:0,y:0}:I,R={range:x,grid:c,x:null,y:null},B=0;B<h.length;B++){var $=h[B],V=$[0],j=$[1],X=Math.round((g-D.x)/c[V]),ht=Math.round((_-D.y)/c[j]);R[V]=Math.max(A.left,Math.min(A.right,X*c[V]+D.x)),R[j]=Math.max(A.top,Math.min(A.bottom,ht*c[j]+D.y))}return R};return p.grid=c,p.coordFields=h,p}}),T_={id:"snappers",install:function(c){var h=c.interactStatic;h.snappers=lt(h.snappers||{},w_),h.createSnapGrid=h.snappers.grid}},E_=T_,S_={start:function(c){var h=c.state,p=c.rect,g=c.edges,_=c.pageCoords,x=h.options,T=x.ratio,A=x.enabled,I=h.options,D=I.equalDelta,R=I.modifiers;T==="preserve"&&(T=p.width/p.height),h.startCoords=lt({},_),h.startRect=lt({},p),h.ratio=T,h.equalDelta=D;var B=h.linkedEdges={top:g.top||g.left&&!g.bottom,left:g.left||g.top&&!g.right,bottom:g.bottom||g.right&&!g.top,right:g.right||g.bottom&&!g.left};if(h.xIsPrimaryAxis=!(!g.left&&!g.right),h.equalDelta){var $=(B.left?1:-1)*(B.top?1:-1);h.edgeSign={x:$,y:$}}else h.edgeSign={x:B.left?-1:1,y:B.top?-1:1};if(A!==!1&&lt(g,B),R!=null&&R.length){var V=new fl(c.interaction);V.copyFrom(c.interaction.modification),V.prepareStates(R),h.subModification=V,V.startAll(i({},c))}},set:function(c){var h=c.state,p=c.rect,g=c.coords,_=h.linkedEdges,x=lt({},g),T=h.equalDelta?A_:C_;if(lt(c.edges,_),T(h,h.xIsPrimaryAxis,g,p),!h.subModification)return null;var A=lt({},p);Te(_,A,{x:g.x-x.x,y:g.y-x.y});var I=h.subModification.setAll(i(i({},c),{},{rect:A,edges:_,pageCoords:g,prevCoords:g,prevRect:A})),D=I.delta;return I.changed&&(T(h,Math.abs(D.x)>Math.abs(D.y),I.coords,I.rect),lt(g,I.coords)),I.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function A_(c,h,p){var g=c.startCoords,_=c.edgeSign;h?p.y=g.y+(p.x-g.x)*_.y:p.x=g.x+(p.y-g.y)*_.x}function C_(c,h,p,g){var _=c.startRect,x=c.startCoords,T=c.ratio,A=c.edgeSign;if(h){var I=g.width/T;p.y=x.y+(I-_.height)*A.y}else{var D=g.height*T;p.x=x.x+(D-_.width)*A.x}}var P_=Kr(S_,"aspectRatio"),vd=function(){};vd._defaults={};var to=vd;function Ti(c,h,p){return C.func(c)?Gt(c,h.interactable,h.element,[p.x,p.y,h]):Gt(c,h.interactable,h.element)}var eo={start:function(c){var h=c.rect,p=c.startOffset,g=c.state,_=c.interaction,x=c.pageCoords,T=g.options,A=T.elementRect,I=lt({left:0,top:0,right:0,bottom:0},T.offset||{});if(h&&A){var D=Ti(T.restriction,_,x);if(D){var R=D.right-D.left-h.width,B=D.bottom-D.top-h.height;R<0&&(I.left+=R,I.right+=R),B<0&&(I.top+=B,I.bottom+=B)}I.left+=p.left-h.width*A.left,I.top+=p.top-h.height*A.top,I.right+=p.right-h.width*(1-A.right),I.bottom+=p.bottom-h.height*(1-A.bottom)}g.offset=I},set:function(c){var h=c.coords,p=c.interaction,g=c.state,_=g.options,x=g.offset,T=Ti(_.restriction,p,h);if(T){var A=function(I){return!I||"left"in I&&"top"in I||((I=lt({},I)).left=I.x||0,I.top=I.y||0,I.right=I.right||I.left+I.width,I.bottom=I.bottom||I.top+I.height),I}(T);h.x=Math.max(Math.min(A.right-x.right,h.x),A.left+x.left),h.y=Math.max(Math.min(A.bottom-x.bottom,h.y),A.top+x.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}},I_=Kr(eo,"restrict"),yd={top:1/0,left:1/0,bottom:-1/0,right:-1/0},_d={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function bd(c,h){for(var p=0,g=["top","left","bottom","right"];p<g.length;p++){var _=g[p];_ in c||(c[_]=h[_])}return c}var zs={noInner:yd,noOuter:_d,start:function(c){var h,p=c.interaction,g=c.startOffset,_=c.state,x=_.options;x&&(h=Wt(Ti(x.offset,p,p.coords.start.page))),h=h||{x:0,y:0},_.offset={top:h.y+g.top,left:h.x+g.left,bottom:h.y-g.bottom,right:h.x-g.right}},set:function(c){var h=c.coords,p=c.edges,g=c.interaction,_=c.state,x=_.offset,T=_.options;if(p){var A=lt({},h),I=Ti(T.inner,g,A)||{},D=Ti(T.outer,g,A)||{};bd(I,yd),bd(D,_d),p.top?h.y=Math.min(Math.max(D.top+x.top,A.y),I.top+x.top):p.bottom&&(h.y=Math.max(Math.min(D.bottom+x.bottom,A.y),I.bottom+x.bottom)),p.left?h.x=Math.min(Math.max(D.left+x.left,A.x),I.left+x.left):p.right&&(h.x=Math.max(Math.min(D.right+x.right,A.x),I.right+x.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}},R_=Kr(zs,"restrictEdges"),M_=lt({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(c){}},eo.defaults),k_=Kr({start:eo.start,set:eo.set,defaults:M_},"restrictRect"),D_={width:-1/0,height:-1/0},O_={width:1/0,height:1/0},B_=Kr({start:function(c){return zs.start(c)},set:function(c){var h=c.interaction,p=c.state,g=c.rect,_=c.edges,x=p.options;if(_){var T=Qt(Ti(x.min,h,c.coords))||D_,A=Qt(Ti(x.max,h,c.coords))||O_;p.options={endOnly:x.endOnly,inner:lt({},zs.noInner),outer:lt({},zs.noOuter)},_.top?(p.options.inner.top=g.bottom-T.height,p.options.outer.top=g.bottom-A.height):_.bottom&&(p.options.inner.bottom=g.top+T.height,p.options.outer.bottom=g.top+A.height),_.left?(p.options.inner.left=g.right-T.width,p.options.outer.left=g.right-A.width):_.right&&(p.options.inner.right=g.left+T.width,p.options.outer.right=g.left+A.width),zs.set(c),p.options=x}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}},"restrictSize"),bl={start:function(c){var h,p=c.interaction,g=c.interactable,_=c.element,x=c.rect,T=c.state,A=c.startOffset,I=T.options,D=I.offsetWithOrigin?function($){var V=$.interaction.element,j=Wt(Gt($.state.options.origin,null,null,[V])),X=j||we($.interactable,V,$.interaction.prepared.name);return X}(c):{x:0,y:0};if(I.offset==="startCoords")h={x:p.coords.start.page.x,y:p.coords.start.page.y};else{var R=Gt(I.offset,g,_,[p]);(h=Wt(R)||{x:0,y:0}).x+=D.x,h.y+=D.y}var B=I.relativePoints;T.offsets=x&&B&&B.length?B.map(function($,V){return{index:V,relativePoint:$,x:A.left-x.width*$.x+h.x,y:A.top-x.height*$.y+h.y}}):[{index:0,relativePoint:null,x:h.x,y:h.y}]},set:function(c){var h=c.interaction,p=c.coords,g=c.state,_=g.options,x=g.offsets,T=we(h.interactable,h.element,h.prepared.name),A=lt({},p),I=[];_.offsetWithOrigin||(A.x-=T.x,A.y-=T.y);for(var D=0,R=x;D<R.length;D++)for(var B=R[D],$=A.x-B.x,V=A.y-B.y,j=0,X=_.targets.length;j<X;j++){var ht=_.targets[j],st=void 0;(st=C.func(ht)?ht($,V,h._proxy,B,j):ht)&&I.push({x:(C.number(st.x)?st.x:$)+B.x,y:(C.number(st.y)?st.y:V)+B.y,range:C.number(st.range)?st.range:_.range,source:ht,index:j,offset:B})}for(var mt={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},St=0;St<I.length;St++){var Dt=I[St],xt=Dt.range,Pt=Dt.x-A.x,Se=Dt.y-A.y,Zt=hr(Pt,Se),Oe=Zt<=xt;xt===1/0&&mt.inRange&&mt.range!==1/0&&(Oe=!1),mt.target&&!(Oe?mt.inRange&&xt!==1/0?Zt/xt<mt.distance/mt.range:xt===1/0&&mt.range!==1/0||Zt<mt.distance:!mt.inRange&&Zt<mt.distance)||(mt.target=Dt,mt.distance=Zt,mt.range=xt,mt.inRange=Oe,mt.delta.x=Pt,mt.delta.y=Se)}return mt.inRange&&(p.x=mt.target.x,p.y=mt.target.y),g.closest=mt,mt},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}},L_=Kr(bl,"snap"),ro={start:function(c){var h=c.state,p=c.edges,g=h.options;if(!p)return null;c.state={options:{targets:null,relativePoints:[{x:p.left?0:1,y:p.top?0:1}],offset:g.offset||"self",origin:{x:0,y:0},range:g.range}},h.targetFields=h.targetFields||[["width","height"],["x","y"]],bl.start(c),h.offsets=c.state.offsets,c.state=h},set:function(c){var h=c.interaction,p=c.state,g=c.coords,_=p.options,x=p.offsets,T={x:g.x-x[0].x,y:g.y-x[0].y};p.options=lt({},_),p.options.targets=[];for(var A=0,I=_.targets||[];A<I.length;A++){var D=I[A],R=void 0;if(R=C.func(D)?D(T.x,T.y,h):D){for(var B=0,$=p.targetFields;B<$.length;B++){var V=$[B],j=V[0],X=V[1];if(j in R||X in R){R.x=R[j],R.y=R[X];break}}p.options.targets.push(R)}}var ht=bl.set(c);return p.options=_,ht},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}},F_=Kr(ro,"snapSize"),xl={aspectRatio:P_,restrictEdges:R_,restrict:I_,restrictRect:k_,restrictSize:B_,snapEdges:Kr({start:function(c){var h=c.edges;return h?(c.state.targetFields=c.state.targetFields||[[h.left?"left":"right",h.top?"top":"bottom"]],ro.start(c)):null},set:ro.set,defaults:lt(ts(ro.defaults),{targets:void 0,range:void 0,offset:{x:0,y:0}})},"snapEdges"),snap:L_,snapSize:F_,spring:to,avoid:to,transform:to,rubberband:to},N_={id:"modifiers",install:function(c){var h=c.interactStatic;for(var p in c.usePlugin(rd),c.usePlugin(E_),h.modifiers=xl,xl){var g=xl[p],_=g._defaults,x=g._methods;_._methods=x,c.defaults.perAction[p]=_}}},U_=N_,xd=function(c){u(p,c);var h=v(p);function p(g,_,x,T,A,I){var D;if(n(this,p),Vn(m(D=h.call(this,A)),x),x!==_&&Vn(m(D),_),D.timeStamp=I,D.originalEvent=x,D.type=g,D.pointerId=Fs(_),D.pointerType=Nu(_),D.target=T,D.currentTarget=null,g==="tap"){var R=A.getPointerIndex(_);D.dt=D.timeStamp-A.pointers[R].downTime;var B=D.timeStamp-A.tapTime;D.double=!!A.prevTap&&A.prevTap.type!=="doubletap"&&A.prevTap.target===D.target&&B<500}else g==="doubletap"&&(D.dt=_.timeStamp-A.tapTime,D.double=!0);return D}return a(p,[{key:"_subtractOrigin",value:function(g){var _=g.x,x=g.y;return this.pageX-=_,this.pageY-=x,this.clientX-=_,this.clientY-=x,this}},{key:"_addOrigin",value:function(g){var _=g.x,x=g.y;return this.pageX+=_,this.pageY+=x,this.clientX+=_,this.clientY+=x,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}]),p}(Yn),js={id:"pointer-events/base",before:["inertia","modifiers","auto-start","actions"],install:function(c){c.pointerEvents=js,c.defaults.actions.pointerEvents=js.defaults,lt(c.actions.phaselessTypes,js.types)},listeners:{"interactions:new":function(c){var h=c.interaction;h.prevTap=null,h.tapTime=0},"interactions:update-pointer":function(c){var h=c.down,p=c.pointerInfo;!h&&p.hold||(p.hold={duration:1/0,timeout:null})},"interactions:move":function(c,h){var p=c.interaction,g=c.pointer,_=c.event,x=c.eventTarget;c.duplicate||p.pointerIsDown&&!p.pointerWasMoved||(p.pointerIsDown&&wl(c),Qr({interaction:p,pointer:g,event:_,eventTarget:x,type:"move"},h))},"interactions:down":function(c,h){(function(p,g){for(var _=p.interaction,x=p.pointer,T=p.event,A=p.eventTarget,I=p.pointerIndex,D=_.pointers[I].hold,R=oe(A),B={interaction:_,pointer:x,event:T,eventTarget:A,type:"hold",targets:[],path:R,node:null},$=0;$<R.length;$++){var V=R[$];B.node=V,g.fire("pointerEvents:collect-targets",B)}if(B.targets.length){for(var j=1/0,X=0,ht=B.targets;X<ht.length;X++){var st=ht[X].eventable.options.holdDuration;st<j&&(j=st)}D.duration=j,D.timeout=setTimeout(function(){Qr({interaction:_,eventTarget:A,pointer:x,event:T,type:"hold"},g)},j)}})(c,h),Qr(c,h)},"interactions:up":function(c,h){wl(c),Qr(c,h),function(p,g){var _=p.interaction,x=p.pointer,T=p.event,A=p.eventTarget;_.pointerWasMoved||Qr({interaction:_,eventTarget:A,pointer:x,event:T,type:"tap"},g)}(c,h)},"interactions:cancel":function(c,h){wl(c),Qr(c,h)}},PointerEvent:xd,fire:Qr,collectEventTargets:wd,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function Qr(c,h){var p=c.interaction,g=c.pointer,_=c.event,x=c.eventTarget,T=c.type,A=c.targets,I=A===void 0?wd(c,h):A,D=new xd(T,g,_,x,p,h.now());h.fire("pointerEvents:new",{pointerEvent:D});for(var R={interaction:p,pointer:g,event:_,eventTarget:x,targets:I,type:T,pointerEvent:D},B=0;B<I.length;B++){var $=I[B];for(var V in $.props||{})D[V]=$.props[V];var j=we($.eventable,$.node);if(D._subtractOrigin(j),D.eventable=$.eventable,D.currentTarget=$.node,$.eventable.fire(D),D._addOrigin(j),D.immediatePropagationStopped||D.propagationStopped&&B+1<I.length&&I[B+1].node!==D.currentTarget)break}if(h.fire("pointerEvents:fired",R),T==="tap"){var X=D.double?Qr({interaction:p,pointer:g,event:_,eventTarget:x,type:"doubletap"},h):D;p.prevTap=X,p.tapTime=X.timeStamp}return D}function wd(c,h){var p=c.interaction,g=c.pointer,_=c.event,x=c.eventTarget,T=c.type,A=p.getPointerIndex(g),I=p.pointers[A];if(T==="tap"&&(p.pointerWasMoved||!I||I.downTarget!==x))return[];for(var D=oe(x),R={interaction:p,pointer:g,event:_,eventTarget:x,type:T,path:D,targets:[],node:null},B=0;B<D.length;B++){var $=D[B];R.node=$,h.fire("pointerEvents:collect-targets",R)}return T==="hold"&&(R.targets=R.targets.filter(function(V){var j,X;return V.eventable.options.holdDuration===((j=p.pointers[A])==null||(X=j.hold)==null?void 0:X.duration)})),R.targets}function wl(c){var h=c.interaction,p=c.pointerIndex,g=h.pointers[p].hold;g&&g.timeout&&(clearTimeout(g.timeout),g.timeout=null)}var $_=Object.freeze({__proto__:null,default:js});function G_(c){var h=c.interaction;h.holdIntervalHandle&&(clearInterval(h.holdIntervalHandle),h.holdIntervalHandle=null)}var H_={id:"pointer-events/holdRepeat",install:function(c){c.usePlugin(js);var h=c.pointerEvents;h.defaults.holdRepeatInterval=0,h.types.holdrepeat=c.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce(function(c,h){return c["pointerEvents:".concat(h)]=G_,c},{"pointerEvents:new":function(c){var h=c.pointerEvent;h.type==="hold"&&(h.count=(h.count||0)+1)},"pointerEvents:fired":function(c,h){var p=c.interaction,g=c.pointerEvent,_=c.eventTarget,x=c.targets;if(g.type==="hold"&&x.length){var T=x[0].eventable.options.holdRepeatInterval;T<=0||(p.holdIntervalHandle=setTimeout(function(){h.pointerEvents.fire({interaction:p,eventTarget:_,type:"hold",pointer:g,event:g},h)},T))}}})},z_=H_,j_={id:"pointer-events/interactableTargets",install:function(c){var h=c.Interactable;h.prototype.pointerEvents=function(g){return lt(this.events.options,g),this};var p=h.prototype._backCompatOption;h.prototype._backCompatOption=function(g,_){var x=p.call(this,g,_);return x===this&&(this.events.options[g]=_),x}},listeners:{"pointerEvents:collect-targets":function(c,h){var p=c.targets,g=c.node,_=c.type,x=c.eventTarget;h.interactables.forEachMatch(g,function(T){var A=T.events,I=A.options;A.types[_]&&A.types[_].length&&T.testIgnoreAllow(I,g,x)&&p.push({node:g,eventable:A,props:{interactable:T}})})},"interactable:new":function(c){var h=c.interactable;h.events.getRect=function(p){return h.getRect(p)}},"interactable:set":function(c,h){var p=c.interactable,g=c.options;lt(p.events.options,h.pointerEvents.defaults),lt(p.events.options,g.pointerEvents||{})}}},V_=j_,W_={id:"pointer-events",install:function(c){c.usePlugin($_),c.usePlugin(z_),c.usePlugin(V_)}},X_=W_,Y_={id:"reflow",install:function(c){var h=c.Interactable;c.actions.phases.reflow=!0,h.prototype.reflow=function(p){return function(g,_,x){for(var T=g.getAllElements(),A=x.window.Promise,I=A?[]:null,D=function(){var B=T[R],$=g.getRect(B);if(!$)return 1;var V,j=Us(x.interactions.list,function(st){return st.interacting()&&st.interactable===g&&st.element===B&&st.prepared.name===_.name});if(j)j.move(),I&&(V=j._reflowPromise||new A(function(st){j._reflowResolve=st}));else{var X=Qt($),ht=function(st){return{coords:st,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}}({page:{x:X.x,y:X.y},client:{x:X.x,y:X.y},timeStamp:x.now()});V=function(st,mt,St,Dt,xt){var Pt=st.interactions.new({pointerType:"reflow"}),Se={interaction:Pt,event:xt,pointer:xt,eventTarget:St,phase:"reflow"};Pt.interactable=mt,Pt.element=St,Pt.prevEvent=xt,Pt.updatePointer(xt,xt,St,!0),Ou(Pt.coords.delta),cl(Pt.prepared,Dt),Pt._doPhase(Se);var Zt=st.window,Oe=Zt.Promise,We=Oe?new Oe(function(kr){Pt._reflowResolve=kr}):void 0;return Pt._reflowPromise=We,Pt.start(Dt,mt,St),Pt._interacting?(Pt.move(Se),Pt.end(xt)):(Pt.stop(),Pt._reflowResolve()),Pt.removePointer(xt,xt),We}(x,g,B,_,ht)}I&&I.push(V)},R=0;R<T.length&&!D();R++);return I&&A.all(I).then(function(){return g})}(this,p,c)}},listeners:{"interactions:stop":function(c,h){var p=c.interaction;p.pointerType==="reflow"&&(p._reflowResolve&&p._reflowResolve(),function(g,_){g.splice(g.indexOf(_),1)}(h.interactions.list,p))}}},q_=Y_;if(Ee.use(ed),Ee.use(ad),Ee.use(X_),Ee.use(d_),Ee.use(U_),Ee.use(t_),Ee.use(zy),Ee.use(Vy),Ee.use(q_),Ee.default=Ee,s(r)==="object"&&r)try{r.exports=Ee}catch{}return Ee.default=Ee,Ee})})(va,va.exports);var DR=va.exports;const OR=Xc(DR),BR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABmCAMAAABBXBeAAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAvdQTFRFAAAAAAAAAgICAwMDDQsLDg0NCgkJAwICAAAACAcHBwYGFRISQyMecTYtAQAADAsLEQ8PNzU1WVVUaGhob29vdHR0bWpqVVBPJSQkERAQBgUFGBYWEBAQDQsLSkpKkZGRzMzM5OPk9PPz/////fv76enpzs7OpaWlZWVlMjAwExISDg0NAwEBHh4eBQUFBAQESEVEqKio9vb2//7+2dnZYGBgBAQEAgICDgoKKigoh4eH1tXV4ODgAQEBBgICGxkaOTk57e3t+Pj4/v39tLS0xsbGQD4+FBMTCAgIGxISGxgYq6ur/Pr63NzcoaGhmZmZAAAAEg8Pv7+/0tLSlJSUjY2NFRQUFBQUAwAADQwMLx8fISAg8fHxubm5iYmJSC8uBQUFDgwM6+vrenp6g4KCBAEBr6+vFhUVwbKy5+fnnZ2dHRwcybu65tjY6t3c8eno+PT0XFxct6mp5NbV4dPR4dHQ6NnZ9vDwYmJiQkJCGhgXsKWk5tbW4M/P6t/e+vb2DAsLAgEB18PD49TT38zL49PS387N3MjK+/j4zMrKFxYW4cXRZGRk+PHzFxUV0L282tra7uTjFxUVGhkZeXBvFxcXICAgTkBB6Nvb7+Dg9e7skYiHAAAA1L2/2tTU7OLhraGgMCsq08jHFhQUl42LCwoKw7W1BQQE8OflKyIhDgsLpJuagnp48uvpopeWdGtpt6KhqpOSwKWkt5iXrZCOBwcHjGJhgFJQfD87ejcwbTErXCgjYysmdjYujU1KpoJ/YFlYi4B/zra0nmZmfTgxVScig0A6jUE3XiwncjQtfzsyajg1mE5IoFFJpk9BikI2r1RFslZGaTIplUc6ok0/ikdAal5eGwkJgz0zfDsxqlJDkUQ5k0Q5gjsyMxYUiEA1mUg8KBEOhT00ai8pZi4oAwICdDUtBgECQx0bTiIeq1JDnUk9gElGo3Nxi1ZVxampn4B8q42JjnZz2MrJl3x59evqknp3KioqqYmFnJKQDAwMERERhYWFx3P0eAAAAP10Uk5TABA6b6nR6/v//9W8sm8W5vv7//////////9ioe3/////////////////3nkmuPn/////////V0il/////yEzh//////////nQpX///////8cjv//////dQaAif////+hLsn///8L/8P////////////////////////M///////xTf//////////mf///67////Tqv/bUv//////Hv///////7b/a//v///f//////////////X//////////////////////////////////////////////////////////////4X//////////////////////4T//5Ut/xDIcLIAAAotSURBVHic7Zh7VBNnFsDvNxNIJoHMJDRIWCwvNeHhAj7AR5Fqz/qoumK1bba4LdZiT5+7x3ZtD92j7dlt6+LWdte6e1Zqq60Ubeu2i325LRa1SqUVEAIEEBJQwCCQZHgkATKzE94hMyk5/rv3j0zm5s4v93vcxzcIhASNCfeNxbhrr6Cl25hfLe+XiJwAkhGO+8MKoBiQtfuFwdSoC1Tjzkx4ZoQYVMvOFJOIUIOG+3+FzUNNcUPTs2JN2UwwKBVVoBSE7DYvUwzYsPo+Fl9w4ecwK9CtZo3CGNM63SwSWqIQGIEb1vkM9LVPTOLss2jVlUWozsuKCtdjUTKkd3+fVQ6/9BrYJCYTNTVEz2uzeHsMEBeIKlEyKh+5iVYWbTopgNGhC13RTLjXaEaF7L+zOY6AUQwkX7Te9yEvJpxq3tJHC0AAljoll+J65lwElGTuAFC7Kh485o3JRuUNoYGMEAQgA7UYI2NqzUDOll/i7tXdRk8Oh8np+hLLMnQIQ7i1ttxXTKbUmYFdWU67FQrNKY9xoZzrkSejltywm3xhVn8XayCvzzXD0q8fOLO6ysxCkvqIckpooLSrKQsRYrm9fs1utVKU1cqDYTJLaLJ1nhnurF6udyVd5/ZmWJP1Pln+BCa9O0qLBgMRYnAH8VNLpCBmacR5M2QULdcnKZrda8Ho3txVpJ+YG7kD3+UAIOxSLgIL+CNPvbiEziC7L8LqU0v10RWbzrmVkVV9L6K94xhYcVn5G+5COFl5/7d8voxisA0chqHv0t9z3jW2qMNmDXVuHANpV1fdKQMKOQN6TvNPcfycEprJvFEO6rq79Nqmlf8d0y/71hJyb/4YBh78T0qSTInQQIV3OHli4hs1eu38kxjkHI42cT/sPGp85DA7vovz9qQkzXbIzRUmYYx68b9FoNA1nxFt/r4DItd/OWKrUJ7f9TY9htGl5lIvAGO6xD818ExLCR0/p1kPya3qGpE8rBa2Kb8Z9Xz1F515f6THYkq3/A/RT7UWC1BGMIp05xnAyWE6oSPrIGyUO0OHRrbNUtU/30ATEU4egzfzMB+YsNSmGth5s8GQ0MFaYKMWOboj8kb2x5JT4ol8I3/9uV+X4T4wya3DNCRF9hdzGNa61YXFNFK3EDq984AtY9Nk2kq7uqPypg8MToYaYNkd1cY1P7KkaUNYF7f1CQcVuseC/+2xScyKMmpxrQBGkV5Cu1Qc5h5Z16U1P2adNj0bZBDbgTJ/bNMML8ufkkSxwJScVwUxDQaXKqUYtPNaribGfS+2Ps0YwQ7z0ePiXe548PAm75hJGLPT8pMREmL1zSnfPdAA91sGrKz2ech/aiT/TMVsUYgEgkGR3l+8E//aCGvEX7iG+9aVxmnm3Yo6VMG+mzVqMInJLty63vnnyUcp61RMtRHHIoyQGHPBIl9YbnvSrMm1wWTFmsQkvrT7fkVA/iQGYBxE9dwz93CY4d5LsCam9hwTLjG9Wpb2CORJHwMvjPydhz9oVL89+miUO3tRbo7bKcqi1Jaq65ObISymrYVTbVR9bICQ9snkNKVqikTHLyvMn0+fl5HBRZmADJl9bgwN6xn2iEfJm4Ip2EE+TcOS3Z7TMgVGUaZRzgZVfJbuvak/T8GssGpDxVLxLS9/JlmjCf+FTkz+fGyNAAZkrkK9VSoOPsifkMdlazBYig26o0KYV17DdsyyYuQdBoHtMyIbVOBg3z3wkMd/efQ3Mpf2V3KrkrUuOi6QTSFuy012wH7ctk58QhCTuHVfYSnJAE1aFvOD8gysjYGUnBc+0XvoPbutVGd94XcSFygR44iVlym+aYk0AaU2sO4Vsm1Iv9XDoB7QPst6TrBX75fQBOR+e1OgGHOAGLMTRPRIQ8tccFLW+EYpSHoALflTff4XJ3xiIDx/y6rNrRE1cqScg4812MMIY0Sot1LE9gAsDF8LOE6DbwysKMXhX1Gfb0T9QU5JfxDXoVsDYZBCQ4Fdg1cG+tc8adGEkyemP+XdF+uq9z4M0e9bMAqhLq7H5tphhhX1Bdt6WTby5SLIK7js9Qxvly4PsjIVnCMOIKxyJxDGUAwIC1dVUTybfXp9Ps8j/GeG7MK6XpdTaUe4jOljqU4QQUCARRyiGXqUDyKESa2q73W5FM6BQDlCJnVXr9YJTWRowJyVX/HaC2DaYiuGiF6liMWHB264wpFE6kTgCHJp1n3qDwYr2G5ExrCbMsoxIDVpbcGWAXZWQMcsYrt3n+8Dw9W++mtBEmCdv3B29CdXMTKYO3SdMG9KjvJaa1+Y1KpiFbL3u2Jq2SAV2wzRVOeAaigIle/jOb4IY9pia11d/ayGhiGpogOXOZ2sPQIkvZmkX5i0z6JbMDOB9btcJM3iWEdcLcy308plbfz2gt4Yq1OugyVYSdq6aGkgO9y3oD2ciTyS5Rdme2Gx9JYWoL2XUHfbtC5ph8ocJAouDvpprx8Y3VfOMgZnhyFQ1BqK1A67g0DdEcTfpXszSqcHty9MEbPqLcocchMnUOtsOy4KqoHFuQ0toKyenrB8DirN3lAsCXHQoVJUTrkAD5ehfZ9wembxZxI+dwQwUJB3ojWuDte2QbhBW7vofevxUf3yj3hnWQiT+NKjp9JQZTB0L0J7E/dP6F1mnYgnyIUw2eWNHegCpLPwHka0HZ/QZ5QG6HmOgUKYFZdDa85zlWsBVniNsqZVXbGPnZCU1d7HZx/eFCobSzjK27/fgzFA0LERZU6S+N5usvV5nZ59YDIffLT7rGzBod8doBmqE8XXphClCfvi7Sa610LMHKMzVRauEuc9d8DGck0JLgmZFQBc+SMW3ijwBwOvvP7mQ1fb9Q53xaewnrniSq4UxtaQRQYlz1scQYwcDZ644mDG+gYKY6w42MnBgDdO/eW8HxguyKXbZvWM31GY++UFO/+js3wz7AOTLj1ny52mk1Sc3f8Mn7EwBl451XBmwctTbRO/LNp/kTcZ+8BAmsEZ/VS4Y+NbIxtPGfcEPTehkN/UFwbe2XtHPSj2FVw9+cChH+C9AXESz+z+PIaLiccPVh3JdhuVF8ZdvNamF7D7GYzbIv+YZdH7f82Vbkv/7YvF/IVhBpgx+SAnctjW9wjjTyvAI+kvflin6Obdwv5gYFC+sTyms3aL3wvuKUPBoQFRrp4FR28Pg+Tb5h5M+ZwOvD0M5O2Jo1d3f5o986aNV/CANfqoVDHvmvuBSWjaUAF3H1/J1yn5gdn81eoaGKZ2+1OnvEWXmvtwMSSasnbfFibnqGgrd/R9lzfh+IHJ3EFgt49ZW/JEETfPLV18DdfMMdtP3NXMnbJb1/K1xjPGpFYFkdzl7gLe4JwxJreykWsBsN5Qii8DzhSztr3d7Yy8LuaGP23SdElo6tNwl6HO2wvNQblU4X55qbq9RFGwQ7Xu2+XdZzfzV5iZYnKwYyjtBxCodjNfqcwfkfLxf/B2s/5gQNdmaeVtrf3D+JT/Y4Tlf5EfDd6dTIMdAAAAAElFTkSuQmCC",LR="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAMeBAMAAABSNW+wAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAACFQTFRFAAAABgECvkk+AAAABAEBAAAABQUFAgIClTgwAgICBgIC3qD5uQAAAAt0Uk5TAP///wseLjr/SDP8D1UBAAABOElEQVR4nO3QsQnCABRFUQMOYGdhpRu4ihO4jbULuoHBDZLaCCeNCML95ePAhztsFjfsptdy+jDHcd2cH+vm9PzOr3809bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj019bOpjUx+b+tjUx6Y+NvWxqY9NfWzqY1Mfm/rY1MemPjb1samPTX1s6mNTH5v62NTHpj429bGpj83P+mwvh/39dn0fZ/YJP3nrYpeJAAAAAElFTkSuQmCC",FR=["src"],NR=["src"],UR=It({__name:"SakuraScrollToTop",props:{height:{default:600},position:{default:.9},mass:{default:2},gravity:{},friction:{},floatAmplitude:{default:1.3},floatSpeed:{default:.03}},setup(r){const t=r,{y:e}=uu(),{width:i}=Wx(),{toTop:s}=ay();let n,o;const a=[],l=[];let u=null,d=!1;const f=yt(),m=yt(),v=yt(),y=yt(!1);class b{constructor(C,N,U=!1,H=1,Q=15,G=.9){this.x=C,this.y=N,this.oldX=C,this.oldY=N,this.fixed=U,this.mass=H,this.gravity=Q,this.friction=G,this.el=U?m.value:f.value,OR(this.el).draggable({}).on("dragstart",()=>{u=this,d=!0}).on("dragmove",O=>{d&&(n=O.clientX,o=O.clientY)}).on("dragend",()=>{u&&y.value&&s(),u=null,d=!1})}update(){if(!this.fixed){const C=this.x,N=this.y;this.x+=(this.x-this.oldX)*this.friction,this.y+=(this.y-this.oldY)*this.friction+this.gravity,this.oldX=C,this.oldY=N}this.updateElement()}updateElement(){this.el.style.left=`${this.x}px`,this.el.style.top=`${this.y-20}px`}reset(){this.x=0,this.y=0}}class w{constructor(C,N){this.n1=C,this.n2=N;const U=C.x-N.x,H=C.y-N.y;this.dist=Math.sqrt(U*U+H*H),this.el=v.value}solve(){let C=this.n1.x-this.n2.x,N=this.n1.y-this.n2.y;const H=.5*(Math.sqrt(C*C+N*N)-this.dist)/this.dist;C*=H,N*=H;const Q=this.n1.mass+this.n2.mass,G=this.n1.mass/Q,O=this.n2.mass/Q;this.n1.fixed||(this.n1.x-=C*O,this.n1.y-=N*O),this.n2.fixed||(this.n2.x+=C*G,this.n2.y+=N*G),this.updateElement()}updateElement(){const C=this.n1.x,N=this.n1.y,U=this.n2.x,H=this.n2.y,Q=Math.sqrt((U-C)**2+(H-N)**2),G=Math.atan2(-(U-C),H-N)*180/Math.PI;this.el.style.height=`${Q}px`,this.el.style.left=`${C}px`,this.el.style.top=`${N}px`,this.el.style.transform=`rotate(${G}deg)`}}function E(){const{height:F,position:C,mass:N,gravity:U,friction:H}=t,Q=new b(i.value*C,-100,!0),G=new b(i.value*C+F,-100,!1,N,U,H),O=new w(Q,G);a.push(Q),a.push(G),l.push(O),requestAnimationFrame(S)}let P=0;function S(){for(const F of a)F.update();u&&(u.x+=(n-u.x)*.6,u.y+=(o-u.y)*.6);for(const F of l)F.solve(),F.updateElement();d||(P+=t.floatSpeed,a[1].y+=Math.sin(P)*t.floatAmplitude),requestAnimationFrame(S)}function M(){for(const F of l)F.updateElement()}qt([e,i],([F,C])=>{var N;if(F>200)if(C<=kx.lg)y.value=!1;else{if(y.value===!0)return;(N=a[1])==null||N.reset(),y.value=!0}else y.value=!1},{immediate:!0});let k;return qt(i,F=>{clearTimeout(k),k=setTimeout(()=>{var C;a[0].x=F*t.position,(C=a[1])==null||C.reset(),M()},200)}),Xr(()=>setTimeout(()=>E(),0)),(F,C)=>bn((W(),at("div",null,[vt("div",{ref_key:"nodeRef",ref:m},null,512),vt("img",{ref_key:"imgRef",ref:f,class:"sakura-to-top-node",src:K(BR)},null,8,FR),vt("img",{ref_key:"constraintRef",ref:v,class:"sakura-to-top-line",src:K(LR)},null,8,NR)],512)),[[Yo,y.value]])}}),$R=me(UR,[["__scopeId","data-v-dc637608"]]),GR="/assets/iloli.D82BDgdX.gif",HR={class:"mashiro-search-container"},zR={class:"flex-center relative my-4",flex:"~",rounded:""},jR=["placeholder"],VR=It({__name:"SakuraSearch",props:{open:{type:Boolean}},setup(r){const t=r,e=bR(),i=TR(),s=Vc(),{t:n}=Yr(),o=yt(),a=yt(),l=yt();qt(()=>t.open,async()=>{t.open&&setTimeout(()=>{var d;(d=l.value)==null||d.focus()},0)});function u(){s.push({path:"/search",query:{q:o.value}}),i.close()}return(d,f)=>(W(),zt(cm,{name:"fade",onEnter:f[1]||(f[1]=m=>e.value=!0),onAfterLeave:f[2]||(f[2]=m=>e.value=!1)},{default:jt(()=>[d.open?(W(),at("div",{key:0,ref_key:"searchContainer",ref:a,class:"mashiro-search",style:br({"--sakura-search-bg-img":`url('${K(GR)}')`})},[vt("div",HR,[f[4]||(f[4]=vt("p",null," 想要找点什么呢？",-1)),vt("div",zR,[f[3]||(f[3]=vt("div",{class:"i-fa-search absolute left-0 pl-12"},null,-1)),bn(vt("input",{ref_key:"searchInputRef",ref:l,"onUpdate:modelValue":f[0]||(f[0]=m=>o.value=m),class:"mashiro-search-input",placeholder:K(n)("search.placeholder"),onKeyup:hm(u,["enter"])},null,40,jR),[[l0,o.value]])])])],4)):At("v-if",!0)]),_:1}))}}),hy=me(VR,[["__scopeId","data-v-b600617f"]]),WR=Object.freeze(Object.defineProperty({__proto__:null,default:hy},Symbol.toStringTag,{value:"Module"})),XR=["title"],YR={key:0,"i-mdi-search":""},qR={key:1,text:"!2xl","i-mdi-close":""},KR=It({__name:"SakuraSearchBtn",props:{open:{type:Boolean,default:!1}},emits:["close","open"],setup(r,{emit:t}){const e=r,i=t,{t:s}=Yr();function n(){e.open?i("close"):i("open")}return(o,a)=>(W(),at("button",{class:"sakura-icon-btn sakura-search-btn",title:K(s)("menu.search"),onClick:n},[o.open?(W(),at("div",qR)):(W(),at("div",YR))],8,XR))}}),ZR={flex:"center"},QR=It({__name:"SakuraSearchTrigger",setup(r){const t=Bs(),e=Ve(),i=et(()=>e.value.search.type==="algolia"),s=et(()=>e.value.search.type==="fuse"),n=i.value&&h0({loader:()=>pe(()=>import("./SakuraAlgoliaSearch.aUIORlBk.js"),__vite__mapDeps([41,4,3,2,6,5,7])),errorComponent:pe(()=>Promise.resolve().then(()=>WR),void 0)});return(o,a)=>{const l=KR,u=hy;return W(),at("div",ZR,[Ht(l,{open:K(t).search.isOpen&&!i.value,onOpen:K(t).search.open,onClose:K(t).search.close},null,8,["open","onOpen","onClose"]),i.value?(W(),zt(K(n),{key:0,open:K(t).search.isOpen,onClose:K(t).search.close},null,8,["open","onClose"])):s.value?(W(),zt(u,{key:1,open:K(t).search.isOpen,onClose:K(t).search.close},null,8,["open","onClose"])):At("v-if",!0)])}}}),JR=["title"],t2=It({__name:"SakuraToggleLocale",props:{toggleLocaleIcon:{}},setup(r){const t=r,{t:e,locale:i}=Yr(),{toggleLocales:s}=Kx(),n=ke(),o=et(()=>{var a;return t.toggleLocaleIcon||((a=n.value.ui.toggleLocaleButton)==null?void 0:a.icon)});return(a,l)=>(W(),at("button",{class:"sakura-icon-btn sakura-toggle-locale",title:K(e)("button.toggle_langs"),onClick:l[0]||(l[0]=(...u)=>K(s)&&K(s)(...u))},[vt("div",{class:re(["transform transition",[o.value,K(i)==="en"?"rotate-y-180":""]])},null,2)],8,JR))}}),e2=It({__name:"SakuraToggleDark",props:{darkIcon:{},lightIcon:{}},setup(r){const t=r,e=ke(),i=zm(),s=et(()=>{var o;return t.darkIcon||((o=e.value.ui.toggleDarkButton)==null?void 0:o.darkIcon)}),n=et(()=>{var o;return t.lightIcon||((o=e.value.ui.toggleDarkButton)==null?void 0:o.lightIcon)});return(o,a)=>(W(),at("button",{class:"sakura-icon-btn sakura-toggle-dark select-none",type:"button","aria-label":"Toggle Color Scheme",onClick:a[0]||(a[0]=(...l)=>K(i).toggleDarkWithTransition&&K(i).toggleDarkWithTransition(...l))},[vt("div",{class:re(K(i).isDark?s.value:n.value)},null,2)]))}}),r2=["aria-haspopup","aria-expanded"],i2={key:0,class:"sakura-dropdown-menu"},s2=It({__name:"SakuraDropdown",props:{isShow:{type:Boolean,default:!0}},setup(r){const t=yt(!1);return(e,i)=>(W(),at("div",{class:"sakura-dropdown","aria-haspopup":!!e.$slots.menu,"aria-expanded":t.value,onMouseover:i[0]||(i[0]=s=>t.value=!0),onMouseleave:i[1]||(i[1]=s=>t.value=!1)},[Nt(e.$slots,"button",{},void 0,!0),e.isShow&&e.$slots.menu?(W(),at("div",i2,[Nt(e.$slots,"menu",{},void 0,!0)])):At("v-if",!0)],40,r2))}}),n2=me(s2,[["__scopeId","data-v-4c068fa2"]]),o2=["href"],a2={key:0,class:"icon-link inline-block","i-ri-arrow-right-up-line":""},Iu=It({__name:"AppLink",props:{showExternalIcon:{type:Boolean},to:{},href:{}},setup(r){const t=r,e=et(()=>t.href||t.to||"#"),i=et(()=>typeof e.value=="string"&&e.value.startsWith("http"));return(s,n)=>{const o=je("RouterLink");return i.value?(W(),at("a",Hr({key:0},s.$attrs,{href:e.value,target:"_blank"}),[Nt(s.$slots,"default"),s.showExternalIcon?(W(),at("div",a2)):At("v-if",!0)],16,o2)):(W(),zt(o,Hr({key:1},s.$attrs,{to:e.value}),{default:jt(()=>[Nt(s.$slots,"default")]),_:3},16,["to"]))}}}),l2=It({__name:"SakuraNavLink",props:{text:{},locale:{},link:{},icon:{},animated:{},target:{},items:{}},setup(r){const t=r,{t:e}=Yr(),i=et(()=>t.locale?`${t.text??""} ${e(t.locale)}`:t.text);return(s,n)=>{const o=Iu;return W(),zt(o,{class:re(["sakura-nav-link",s.animated]),title:i.value,to:s.link,target:s.target,rel:"noopener"},{default:jt(()=>[s.icon?(W(),at("span",{key:0,class:re([[s.icon],"hvr-icon sakura-icon sakura-nav-link-icon mr-0.5"]),"inline-flex":""},null,2)):At("v-if",!0),i.value?(W(),at("span",{key:1,truncate:"",class:re(["sakura-nav-link-text",[{"<lg:hidden":s.icon}]])},te(i.value),3)):At("v-if",!0),Nt(s.$slots,"default",{},void 0,!0)]),_:3},8,["title","to","target","class"])}}}),cy=me(l2,[["__scopeId","data-v-9e758860"]]),h2={class:"sakura-dropdown-list",flex:"~ col center"},c2=50,u2=It({__name:"SakuraNavbarLinkItem",props:{text:{},locale:{},link:{},icon:{},animated:{},target:{},items:{}},setup(r){const t=r,e=yt(!1),i=yt(null);function s(){e.value=!0,a()}function n(){e.value=!1}function o(){i.value=setTimeout(()=>{n()},c2)}function a(){i.value!==null&&(clearTimeout(i.value),i.value=null)}return(l,u)=>{var m;const d=cy,f=n2;return W(),zt(f,{"is-show":!!((m=l.items)!=null&&m.length),class:"sakura-navbar-link-item",onMouseenter:s,onMouseleave:o},{button:jt(()=>[Ht(d,jc(um(t)),null,16)]),menu:jt(()=>[vt("div",h2,[(W(!0),at(Ie,null,Dn(l.items,v=>(W(),zt(d,Hr({key:v.text},{ref_for:!0},v),null,16))),128))])]),_:1},8,["is-show"])}}}),d2=me(u2,[["__scopeId","data-v-eeb1ce95"]]),p2=It({__name:"SakuraNavbarLink",props:{navbar:{},showMarker:{type:Boolean,default:!1}},setup(r){const t=r,e=Xi(),{locale:i}=Yr(),s=yt(),n=yt(!0),o=yt();function a(){if(!t.showMarker)return;const l=document.querySelector(".sakura-navbar-link .router-link-active"),u=l,d=o.value;if(!l){console.error("Not found: .sakura-navbar-link .router-link-active");return}const f=u.getBoundingClientRect(),m=d.getBoundingClientRect(),v=f.left-m.left;s.value.style.left=`${v}px`,s.value.style.width=`${(l==null?void 0:l.offsetWidth)||0}px`}return qt(()=>e.path,()=>$i(a)),qt(()=>i.value,()=>setTimeout(()=>a(),0)),Xr(()=>{setTimeout(()=>{n.value=!1},500),$i(()=>{a()})}),(l,u)=>{const d=d2;return W(),at("nav",{ref_key:"navLink",ref:o,class:re(["sakura-navbar-link",n.value&&"sakura-preload"])},[(W(!0),at(Ie,null,Dn(l.navbar,(f,m)=>(W(),zt(d,Hr({key:m},{ref_for:!0},f),null,16))),128)),l.showMarker?(W(),at("div",{key:0,ref_key:"marker",ref:s,class:"marker"},null,512)):At("v-if",!0)],2)}}}),f2=me(p2,[["__scopeId","data-v-9a8e7c84"]]),m2={class:"sakura-navbar-brand"},g2=["src"],v2={key:1,class:"navbar-title relative"},y2={key:0},_2={mr1:""},b2={mr1:"",class:"sakura-hvr-rotate"},x2={key:0,class:"navbar-subtitle"},w2=It({__name:"SakuraNavbarBrand",props:{favicon:{type:Boolean},title:{},hamburger:{type:Boolean},subTitle:{}},setup(r){const t=Ve();return(e,i)=>{const s=je("RouterLink");return W(),at("div",m2,[e.favicon?(W(),at("img",{key:0,class:"h-40px w-40px",alt:"logo",src:K(t).favicon},null,8,g2)):At("v-if",!0),e.title?(W(),at("ruby",v2,[Ht(s,{class:"logo-link",to:"/","aria-label":K(t).title},{default:jt(()=>[typeof e.title=="string"?(W(),at("span",y2,te(e.title),1)):(W(),at(Ie,{key:1},[vt("span",_2,te(e.title[0]),1),vt("span",b2,te(e.title[1]),1),vt("span",null,te(e.title[2]),1)],64))]),_:1},8,["aria-label"]),e.subTitle?(W(),at("rt",x2,te(e.subTitle),1)):At("v-if",!0)])):At("v-if",!0)])}}}),T2=me(w2,[["__scopeId","data-v-8d58ab7d"]]),E2=["aria-expanded"],S2=It({__name:"SakuraHamburgerUneven",props:{active:{type:Boolean}},setup(r){return(t,e)=>(W(),at("button",{class:re(["mobile-btn",t.active?"mobile-btn-open":""]),"aria-label":"mobile navigation","aria-expanded":t.active},[At(" TODO: Add more color configurations? "),vt("span",{class:re(t.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2),vt("span",{class:re(t.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2),vt("span",{class:re(t.active?"bg-$sakura-color-primary":"bg-$sakura-color-action")},null,2)],10,E2))}}),A2=me(S2,[["__scopeId","data-v-2637eb86"]]),C2=It({__name:"SakuraHamburgerOld",props:{active:{type:Boolean}},setup(r){return(t,e)=>(W(),at("button",{class:re(["mashiro-burger-menu",t.active&&"mashiro-menu-on"])},e[0]||(e[0]=[vt("div",{class:"mashiro-burger"},null,-1)]),2))}}),P2=me(C2,[["__scopeId","data-v-149e24d8"]]),I2={flex:"~ items-center"},R2={"h-full":"","print:op0":"",flex:"~ center",class:"sakura-navbar-tools"},M2=It({__name:"SakuraNavbar",props:{navbar:{},options:{}},setup(r){const t=r,e=Bs(),i=ke(),{isIncludes:s}=JI(),{y:n}=uu(),o=yt(!0),a=yt(!1),l=et(()=>t.navbar||i.value.navbar),u=et(()=>t.options||i.value.navbarOptions),{autoHide:d,favicon:f,animIn:m,animOut:v,showMarker:y,title:b,subTitle:w,enableHover:E,offset:P}=u.value,S=et(()=>n.value>P),M=et(()=>{if(!s(u.value.autoHide))return!0;const F=s(u.value.invert);return E&&a.value||(F?S.value:!S.value)});return(k,F)=>{const C=P2,N=A2,U=T2,H=f2,Q=e2,G=t2,O=QR;return W(),at(Ie,null,[At(" NOTE: Dynamic :class switching affects triggering the component loader for some reason, not sure why. "),vt("header",{flex:"~",w:"full",fixed:"","top-0":"","z-100":"",class:"sakura-navbar",onMouseover:F[1]||(F[1]=L=>a.value=!0),onMouseleave:F[2]||(F[2]=L=>a.value=!1)},[vt("div",{class:re(["navbar-content sakura-safe-padding",{"active-header":M.value,"has-scrolled":S.value,"no-animation":o.value}]),flex:"~ items-center justify-between",w:"full"},[Nt(k.$slots,"brand",{},()=>{var L;return[vt("div",I2,[((L=K(i).sidebarOptions)==null?void 0:L.position)==="left"?(W(),at("div",{key:0,class:re(["flex-center",!K(i).sidebarOptions.enableOnDesktop&&"md:hidden"])},[K(i).navbarOptions.hamburgerStyle==="old"?(W(),zt(C,{key:0,class:"mr-4",active:K(e).sidebar.isOpen,onClick:K(e).sidebar.toggle},null,8,["active","onClick"])):At("v-if",!0),K(i).navbarOptions.hamburgerStyle==="uneven"?(W(),zt(N,{key:1,class:"mr-4",active:K(e).sidebar.isOpen,onClick:K(e).sidebar.toggle},null,8,["active","onClick"])):At("v-if",!0)],2)):At("v-if",!0),Ht(U,{favicon:K(f),title:K(b),"sub-title":K(w)},null,8,["favicon","title","sub-title"])])]}),Nt(k.$slots,"link",{},()=>[Ht(H,{class:re(K(d)&&(M.value?K(m):K(v))),navbar:l.value,"show-marker":K(y)},null,8,["class","navbar","show-marker"])]),Nt(k.$slots,"tool",{},()=>{var L;return[vt("div",R2,[u.value.tools.includes("toggleDark")?(W(),zt(Q,{key:0})):At("v-if",!0),u.value.tools.includes("toggleLocale")?(W(),zt(G,{key:1})):At("v-if",!0),u.value.tools.includes("search")?(W(),zt(O,{key:2})):At("v-if",!0),((L=K(i).sidebarOptions)==null?void 0:L.position)==="right"?(W(),at("div",{key:3,"i-ri-menu-4-fill":"",onClick:F[0]||(F[0]=(...z)=>K(e).sidebar.toggle&&K(e).sidebar.toggle(...z))})):At("v-if",!0),Nt(k.$slots,"tool-ext")])]})],2)],32)],2112)}}}),k2=It({__name:"SakuraScrollIndicator",setup(r){const t=ay();return(e,i)=>(W(),at("div",{class:"sakura-scroll-indicator",style:br({width:`${K(t).percentage.value*100}%`})},null,4))}}),D2=me(k2,[["__scopeId","data-v-7bd2c8b9"]]),O2={class:"sakura-sidebar-offset sakura-main"},B2=It({__name:"layout",setup(r){const t=Bs(),e=ke(),i=Qm();return(s,n)=>{var f;const o=D2,a=M2,l=je("RouterView"),u=$R,d=kR;return W(),at(Ie,null,[At(" NOTE: Avoid placing sakura-sidebar-offset at the top; it affects absolute positioning "),vt("div",{class:re(["app-container custom-background antialiased",`has-${K(i)}-layout`]),style:br(K(t).sidebar.isOpen?((f=K(e).sidebarOptions)==null?void 0:f.position)==="left"?"--sakura-private-sidebar-offset: var(--sakura-sidebar-offset)":"--sakura-private-sidebar-offset: calc(var(--sakura-sidebar-offset) * -1)":"")},[Nt(s.$slots,"scroll-indicator",{},()=>[K(e).scrollIndicator?(W(),zt(o,{key:0})):At("v-if",!0)],!0),Nt(s.$slots,"navbar",{},()=>[Ht(a,{class:"sakura-sidebar-offset"})],!0),vt("main",O2,[Nt(s.$slots,"default",{},()=>[Ht(l,null,{default:jt(({Component:m})=>[(W(),zt(lm(m),null,{"main-header":jt(()=>[Nt(s.$slots,"main-header",{},void 0,!0)]),"main-header-after":jt(()=>[Nt(s.$slots,"main-header-after",{},void 0,!0)]),main:jt(()=>[Nt(s.$slots,"main",{},void 0,!0)]),"main-content":jt(()=>[Nt(s.$slots,"main-content",{},void 0,!0)]),"main-content-after":jt(()=>[Nt(s.$slots,"main-content-after",{},void 0,!0)]),"main-nav-before":jt(()=>[Nt(s.$slots,"main-nav-before",{},void 0,!0)]),"main-nav-after":jt(()=>[Nt(s.$slots,"main-nav-after",{},void 0,!0)]),"aside-custom":jt(()=>[Nt(s.$slots,"aside-custom",{},void 0,!0)]),footer:jt(()=>[Nt(s.$slots,"footer",{},void 0,!0)]),_:2},1024))]),_:3})],!0)]),Nt(s.$slots,"to-top",{},()=>[K(e).scrollToTop&&(K(e).scrollToTop==="cord"||K(e).scrollToTop===!0)?(W(),zt(u,{key:0})):At("v-if",!0)],!0),Nt(s.$slots,"footer",{},()=>[Ht(d,{class:"sakura-sidebar-offset"})],!0),At(" <SakuraChangSkin /> ")],6)],2112)}}}),L2=me(B2,[["__scopeId","data-v-73ded2f2"]]),F2={key:0,class:"sakura-count"},N2={key:1,class:"sakura-count"},U2={key:2,class:"sakura-count"},$2=It({__name:"SakuraSidebarCount",props:{locale:{}},setup(r){const t=lu(),e=dx(),i=Jx(),s=ke();return(n,o)=>K(s).sidebarOptions.showCounts?(W(),at(Ie,{key:0},[n.locale==="menu.archives"?(W(),at("sup",F2,te(K(t).postList.length),1)):n.locale==="menu.categories"?(W(),at("sup",N2,te(Array.from(K(e).children).length),1)):n.locale==="menu.tags"?(W(),at("sup",U2,te(Array.from(K(i)).length),1)):At("v-if",!0)],64)):At("v-if",!0)}}),G2=me($2,[["__scopeId","data-v-22608c85"]]),H2={key:1,class:"sakura-sidebar-link-items"},z2=It({__name:"SakuraSidebarLinkItem",props:{items:{},item:{}},setup(r){return(t,e)=>{var o;const i=G2,s=cy,n=je("SakuraSidebarLinkItem",!0);return t.item?(W(),zt(s,jc(Hr({key:0},t.item)),{default:jt(()=>[Ht(i,{locale:t.item.locale},null,8,["locale"])]),_:1},16)):(o=t.items)!=null&&o.length?(W(),at("ul",H2,[(W(!0),at(Ie,null,Dn(t.items,(a,l)=>(W(),at("li",{key:l},[Ht(n,{item:a,class:"sakura-sidebar-link-item"},null,8,["item"]),a.items?(W(),zt(n,{key:0,items:a.items,class:"sakura-sidebar-link-sub-items"},null,8,["items"])):At("v-if",!0)]))),128))])):At("v-if",!0)}}}),j2=me(z2,[["__scopeId","data-v-c8f18fb2"]]),V2={class:"sakura-sidebar-link"},W2=It({__name:"SakuraSidebarLink",props:{sidebar:{}},setup(r){const t=r,e=ke(),i=Xi(),s=yt(),n=et(()=>t.sidebar||(Array.isArray(e.value.sidebar)&&e.value.sidebar.length>0?e.value.sidebar:e.value.navbar));qt(()=>i.path,()=>$i(()=>o()));function o(){const a=document.querySelector(".sakura-sidebar-link .router-link-active");s.value.style.top=`${(a==null?void 0:a.offsetTop)||0}px`,s.value.style.height=`${(a==null?void 0:a.offsetHeight)||0}px`}return Xr(()=>{$i(()=>o()),s.value=document.querySelector(".sakura-sidebar #marker")}),(a,l)=>{const u=j2;return W(),at("nav",V2,[Ht(u,{items:n.value,class:"mx-auto"},null,8,["items"]),l[0]||(l[0]=vt("div",{id:"marker"},null,-1))])}}}),X2=me(W2,[["__scopeId","data-v-0bc3e539"]]),Y2={class:"links-of-author"},q2=["href","title"],K2=It({__name:"SakuraSocialLinks",setup(r){const t=Ve();return(e,i)=>(W(),at("div",Y2,[(W(!0),at(Ie,null,Dn(K(t).social,(s,n)=>(W(),at("a",{key:n,class:"sakura-icon-btn links-of-author-item",rel:"noopener",href:s.link,title:s.name,target:"_blank",style:br(`color:${s.color}`)},[vt("div",{class:re(["icon",s.icon])},null,2)],12,q2))),128))]))}}),Z2=me(K2,[["__scopeId","data-v-3450e641"]]),Q2=["src","alt"],J2={key:2,class:"absolute top-0 h-full w-full"},tM=It({__name:"SakuraImageCard",props:{src:{},to:{},alt:{},errorImg:{},scale:{default:1.2},rotate:{default:0},skewX:{default:0},skewY:{default:0},opacity:{default:1},translateX:{default:0},translateY:{default:0},transitionDuration:{default:"var(--va-transition-duration)"},transitionTimingFunction:{default:"ease"},overlay:{type:Boolean,default:!1},overlayColor:{default:"rgba(0, 0, 0, 0.5)"},overlayOpacity:{default:.5},overlayOpacityInitial:{default:0}},setup(r){const t=r,e=ke(),i=yt(!1),s=yt(!1),n=et(()=>{var d;return t.errorImg?Mf(t.errorImg):(d=e.value)==null?void 0:d.notFoundImage}),o=et(()=>i.value?{transform:`scale(${t.scale}) rotate(${t.rotate}deg) skew(${t.skewX}deg, ${t.skewY}deg) translate(${t.translateX}px, ${t.translateY}px)`,opacity:t.opacity,transition:`transform ${t.transitionDuration} ${t.transitionTimingFunction}, opacity ${t.transitionDuration} ${t.transitionTimingFunction}`}:{transition:`transform ${t.transitionDuration} ${t.transitionTimingFunction}, opacity ${t.transitionDuration} ${t.transitionTimingFunction}`}),a=et(()=>({opacity:i.value?t.overlayOpacity:t.overlayOpacityInitial,backgroundColor:t.overlayColor}));function l(d){const f=d.target;if(f.setAttribute("data-src",f.src),!n.value){s.value=!0;return}s.value=!1,f.src=n.value}const u=et(()=>{const d=t.src?Mf(t.src):"";return d&&d.includes("?random")?d.replace("?random",`?random=${Math.random()}`):d});return(d,f)=>{const m=Iu;return W(),at("div",{class:"sakura-image-card relative overflow-hidden",onMouseover:f[0]||(f[0]=v=>i.value=!0),onMouseleave:f[1]||(f[1]=v=>i.value=!1)},[Ht(m,{w:"full",h:"full",to:t.to||"","aria-label":"Go to Post",class:re({"cursor-default":!t.to})},{default:jt(()=>[u.value?bn((W(),at("img",{key:0,class:"h-full w-full object-cover",loading:"lazy",src:u.value,alt:t.alt||"cover",style:br(o.value),onError:l},null,44,Q2)),[[Yo,!s.value]]):At("v-if",!0),bn(vt("div",{class:"h-full w-full bg-$sakura-color-background opacity-70",style:br(o.value),flex:"~ center"},f[2]||(f[2]=[vt("div",{"i-fa6-solid-image":"",w:"30%",h:"30%"},null,-1)]),4),[[Yo,s.value||!u.value]]),d.overlay?(W(),at("div",{key:1,class:"sakura-image-card-overlay",style:br(a.value)},null,4)):At("v-if",!0),d.$slots.default?(W(),at("div",J2,[Nt(d.$slots,"default",{},void 0,!0)])):At("v-if",!0)]),_:3},8,["to","class"])],32)}}}),eM=me(tM,[["__scopeId","data-v-1fae09bc"]]),rM={class:"site-info flex flex-col items-center"},iM=["title"],sM={class:"site-author-name leading-6",m:"t-0 b-4"},nM={key:1,class:"site-name"},oM={key:2,class:"site-subtitle block",text:"xs"},aM={key:3,class:"site-description my-1"},lM=It({__name:"SakuraSiteInfo",setup(r){const t=Ve(),e=Vc();return(i,s)=>{const n=eM,o=je("RouterLink");return W(),at("div",rM,[Ht(o,{class:"site-author-avatar",to:"/about"},{default:jt(()=>[Ht(n,{class:"rounded-full",src:K(t).author.avatar,alt:"avatar"},null,8,["src"]),vt("span",{class:"site-author-status",title:K(t).author.status.message},te(K(t).author.status.emoji),9,iM)]),_:1}),vt("div",sM,[Ht(o,{to:"/about"},{default:jt(()=>[ui(te(K(t).author.name),1)]),_:1})]),K(e).hasRoute("/about/site")?(W(),zt(o,{key:0,to:"/about/site",class:"site-name"},{default:jt(()=>[ui(te(K(t).title),1)]),_:1})):(W(),at("span",nM,te(K(t).title),1)),K(t).subtitle?(W(),at("h4",oM,te(K(t).subtitle),1)):At("v-if",!0),K(t).description?(W(),at("div",aM,te(K(t).description),1)):At("v-if",!0)])}}}),hM={key:0,class:"va-overlay"},cM=It({__name:"ValaxyOverlay",props:{show:{type:Boolean,default:!1}},setup(r){return(t,e)=>(W(),zt(cm,{name:"fade"},{default:jt(()=>[t.show?(W(),at("div",hM)):At("v-if",!0)]),_:1}))}}),uM=It({__name:"SakuraSidebar",props:{position:{}},setup(r){const t=r,e=Bs(),i=ke(),s=yt(t.position??i.value.sidebarOptions.position);return(n,o)=>{const a=cM,l=lM,u=Z2,d=X2,f=ly;return W(),at("div",null,[Ht(a,{class:"bg-$sakura-color-overlay-background md:hidden",show:K(e).sidebar.isOpen,onClick:K(e).sidebar.close},null,8,["show","onClick"]),vt("aside",{class:re(["sakura-sidebar inset-y-0 overflow-y-auto transition",[K(e).sidebar.isOpen&&"open",s.value]]),text:"center",bg:"contain no-repeat"},[Nt(n.$slots,"default",{},()=>[Ht(l),Ht(u),Ht(d,{class:"mt-4"})],!0),Nt(n.$slots,"copyright",{},()=>[Ht(f)],!0)],2)])}}}),dM=me(uM,[["__scopeId","data-v-852b5877"]]),pM=It({__name:"ValaxyThemeApp",setup(r){const t=zm();return Bn({meta:[{name:"theme-color",content:t.themeColor},{name:"msapplication-TileColor",content:t.themeColor}]}),(e,i)=>{const s=dM,n=je("RouterView"),o=L2;return W(),at(Ie,null,[Ht(s,{class:"sakura-app-sidebar"}),Ht(o,null,{default:jt(()=>[Ht(n)]),_:1})],64)}}}),fM=It({render:()=>null}),mM=It({__name:"ValaxyApp",setup(r){const t=Qm();return t.value!=="empty"&&lx(),(e,i)=>{const s=pM,n=OI;return K(t)!=="empty"?(W(),at(Ie,{key:0},[Ht(s),Ht(n),Ht(K(fM))],64)):At("v-if",!0)}}}),gM=It({__name:"App",setup(r){return(t,e)=>{const i=mM;return W(),zt(i)}}});function vM(r){return{page:et(()=>r.currentRoute.value.data),frontmatter:et(()=>r.currentRoute.value.meta.frontmatter)}}function yM(){const r=au();return et(()=>{const t=r.value.addons["valaxy-addon-bangumi"].options;return t?{...t,bilibiliEnabled:t.bilibiliEnabled??!0,bgmEnabled:t.bgmEnabled??!0,pageSize:t.pageSize??15,customEnabled:t.customEnabled??!1,customLabel:t.customLabel??"自定义"}:(console.warn("`valaxy-addon-bangumi` options not found"),{api:""})})}const _M=Object.freeze(Object.defineProperty({__proto__:null,useAddonBangumi:yM},Symbol.toStringTag,{value:"Module"})),bM=`bilibili-bangumi {
  --bbc-primary-color: var(--sakura-color-primary);
  --bbc-label-color: var(--sakura-color-primary);
  --bbc-text-base-color: var(--sakura-color-text);
}

.bbc-header-platform .bbc-tabs {
  /** 0 elements **/
  &:not(:has(*)) {
    display: none;
  }

  /** 1 elements **/
  &:has(> :last-child:nth-child(1)) {
    display: none;
  }

  /** >= 2 elements **/
  &:has(> :last-child:nth-child(2)) {
    display: flex;
  }
}
`;function xM(r,t){if(r.querySelector("style[data-bangumi]"))return;const e=document.createElement("style");e.setAttribute("data-bangumi","true"),e.textContent=t,r.appendChild(e)}function wM(){customElements.whenDefined("bilibili-bangumi").then(()=>{const r=document.querySelector("bilibili-bangumi"),t=r==null?void 0:r.shadowRoot;if(!t){console.warn("bilibili-bangumi element or shadowRoot not found.");return}xM(t,bM)})}function TM(r){const t=Bs(),{isMd:e}=Yx();r.scrollDamping&&!e&&_R();const i=r.sidebarOptions;i.persistence==="permanent"?t.sidebar.isOpen=sR(ga.IS_SIDEBAR_OPEN)||i.initialState:i.persistence==="session"?t.sidebar.isOpen=oR(ga.IS_SIDEBAR_OPEN)||i.initialState:t.sidebar.isOpen=i.initialState,pm(_M)||wM()}const EM=async r=>{const{router:t,isClient:e,app:i}=r,{toScrollPosition:s}=await pe(async()=>{const{toScrollPosition:o}=await import("./rolling.DQdrjCAw.js");return{toScrollPosition:o}},__vite__mapDeps([42,4,43,3,2,6,5,7]));if(!e)return;const n=i.runWithContext(()=>ke().value);t.isReady().then(()=>TM(n)),s(t)},Be={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},Lf={silent:{level:-1},fatal:{level:Be.fatal},error:{level:Be.error},warn:{level:Be.warn},log:{level:Be.log},info:{level:Be.info},success:{level:Be.success},fail:{level:Be.fail},ready:{level:Be.info},start:{level:Be.info},box:{level:Be.info},debug:{level:Be.debug},trace:{level:Be.trace},verbose:{level:Be.verbose}};function wh(r){if(r===null||typeof r!="object")return!1;const t=Object.getPrototypeOf(r);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in r?!1:Symbol.toStringTag in r?Object.prototype.toString.call(r)==="[object Module]":!0}function Dc(r,t,e=".",i){if(!wh(t))return Dc(r,{},e);const s=Object.assign({},t);for(const n in r){if(n==="__proto__"||n==="constructor")continue;const o=r[n];o!=null&&(Array.isArray(o)&&Array.isArray(s[n])?s[n]=[...o,...s[n]]:wh(o)&&wh(s[n])?s[n]=Dc(o,s[n],(e?`${e}.`:"")+n.toString()):s[n]=o)}return s}function SM(r){return(...t)=>t.reduce((e,i)=>Dc(e,i,""),{})}const AM=SM();function CM(r){return Object.prototype.toString.call(r)==="[object Object]"}function PM(r){return!(!CM(r)||!r.message&&!r.args||r.stack)}let Th=!1;const Ff=[];class xe{constructor(t={}){it(this,"options");it(this,"_lastLog");it(this,"_mockFn");const e=t.types||Lf;this.options=AM({...t,defaults:{...t.defaults},level:Eh(t.level,e),reporters:[...t.reporters||[]]},{types:Lf,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const i in e){const s={type:i,...this.options.defaults,...e[i]};this[i]=this._wrapLogFn(s),this[i].raw=this._wrapLogFn(s,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(t){this.options.level=Eh(t,this.options.types,this.options.level)}prompt(t,e){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(t,e)}create(t){const e=new xe({...this.options,...t});return this._mockFn&&e.mockTypes(this._mockFn),e}withDefaults(t){return this.create({...this.options,defaults:{...this.options.defaults,...t}})}withTag(t){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+t:t})}addReporter(t){return this.options.reporters.push(t),this}removeReporter(t){if(t){const e=this.options.reporters.indexOf(t);if(e!==-1)return this.options.reporters.splice(e,1)}else this.options.reporters.splice(0);return this}setReporters(t){return this.options.reporters=Array.isArray(t)?t:[t],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const t in this.options.types)console["__"+t]||(console["__"+t]=console[t]),console[t]=this[t].raw}restoreConsole(){for(const t in this.options.types)console["__"+t]&&(console[t]=console["__"+t],delete console["__"+t])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(t,e){t&&(t.__write||(t.__write=t.write),t.write=i=>{this[e].raw(String(i).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(t){t&&t.__write&&(t.write=t.__write,delete t.__write)}pauseLogs(){Th=!0}resumeLogs(){Th=!1;const t=Ff.splice(0);for(const e of t)e[0]._logFn(e[1],e[2])}mockTypes(t){const e=t||this.options.mockFn;if(this._mockFn=e,typeof e=="function")for(const i in this.options.types)this[i]=e(i,this.options.types[i])||this[i],this[i].raw=this[i]}_wrapLogFn(t,e){return(...i)=>{if(Th){Ff.push([this,t,i,e]);return}return this._logFn(t,i,e)}}_logFn(t,e,i){if((t.level||0)>this.level)return!1;const s={date:new Date,args:[],...t,level:Eh(t.level,this.options.types)};!i&&e.length===1&&PM(e[0])?Object.assign(s,e[0]):s.args=[...e],s.message&&(s.args.unshift(s.message),delete s.message),s.additional&&(Array.isArray(s.additional)||(s.additional=s.additional.split(`
`)),s.args.push(`
`+s.additional.join(`
`)),delete s.additional),s.type=typeof s.type=="string"?s.type.toLowerCase():"log",s.tag=typeof s.tag=="string"?s.tag:"";const n=(a=!1)=>{const l=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&l>0){const u=[...this._lastLog.object.args];l>1&&u.push(`(repeated ${l} times)`),this._log({...this._lastLog.object,args:u}),this._lastLog.count=1}a&&(this._lastLog.object=s,this._log(s))};clearTimeout(this._lastLog.timeout);const o=this._lastLog.time&&s.date?s.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=s.date,o<this.options.throttle)try{const a=JSON.stringify([s.type,s.tag,s.args]),l=this._lastLog.serialized===a;if(this._lastLog.serialized=a,l&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(n,this.options.throttle);return}}catch{}n(!0)}_log(t){for(const e of this.options.reporters)e.log(t,{options:this.options})}}function Eh(r,t={},e=3){return r===void 0?e:typeof r=="number"?r:t[r]&&t[r].level!==void 0?t[r].level:e}xe.prototype.add=xe.prototype.addReporter;xe.prototype.remove=xe.prototype.removeReporter;xe.prototype.clear=xe.prototype.removeReporter;xe.prototype.withScope=xe.prototype.withTag;xe.prototype.mock=xe.prototype.mockTypes;xe.prototype.pause=xe.prototype.pauseLogs;xe.prototype.resume=xe.prototype.resumeLogs;function IM(r={}){return new xe(r)}class RM{constructor(t){it(this,"options");it(this,"defaultColor");it(this,"levelColorMap");it(this,"typeColorMap");this.options={...t},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(t){return t<1?console.__error||console.error:t===1?console.__warn||console.warn:console.__log||console.log}log(t){const e=this._getLogFn(t.level),i=t.type==="log"?"":t.type,s=t.tag||"",o=`
      background: ${this.typeColorMap[t.type]||this.levelColorMap[t.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,a=`%c${[s,i].filter(Boolean).join(":")}`;typeof t.args[0]=="string"?e(`${a}%c ${t.args[0]}`,o,"",...t.args.slice(1)):e(a,o,...t.args)}}function MM(r={}){return IM({reporters:r.reporters||[new RM({})],prompt(e,i={}){return i.type==="confirm"?Promise.resolve(confirm(e)):Promise.resolve(prompt(e))},...r})}MM();const kM=["top","right","bottom","left"],Nf=["start","end"],Uf=kM.reduce((r,t)=>r.concat(t,t+"-"+Nf[0],t+"-"+Nf[1]),[]),Pn=Math.min,Oi=Math.max,DM={left:"right",right:"left",bottom:"top",top:"bottom"},OM={start:"end",end:"start"};function Oc(r,t,e){return Oi(r,Pn(t,e))}function Qi(r,t){return typeof r=="function"?r(t):r}function Cr(r){return r.split("-")[0]}function ir(r){return r.split("-")[1]}function uy(r){return r==="x"?"y":"x"}function Ru(r){return r==="y"?"height":"width"}function Gr(r){return["top","bottom"].includes(Cr(r))?"y":"x"}function Mu(r){return uy(Gr(r))}function dy(r,t,e){e===void 0&&(e=!1);const i=ir(r),s=Mu(r),n=Ru(s);let o=s==="x"?i===(e?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[n]>t.floating[n]&&(o=_a(o)),[o,_a(o)]}function BM(r){const t=_a(r);return[ya(r),t,ya(t)]}function ya(r){return r.replace(/start|end/g,t=>OM[t])}function LM(r,t,e){const i=["left","right"],s=["right","left"],n=["top","bottom"],o=["bottom","top"];switch(r){case"top":case"bottom":return e?t?s:i:t?i:s;case"left":case"right":return t?n:o;default:return[]}}function FM(r,t,e,i){const s=ir(r);let n=LM(Cr(r),e==="start",i);return s&&(n=n.map(o=>o+"-"+s),t&&(n=n.concat(n.map(ya)))),n}function _a(r){return r.replace(/left|right|bottom|top/g,t=>DM[t])}function NM(r){return{top:0,right:0,bottom:0,left:0,...r}}function py(r){return typeof r!="number"?NM(r):{top:r,right:r,bottom:r,left:r}}function gn(r){const{x:t,y:e,width:i,height:s}=r;return{width:i,height:s,top:e,left:t,right:t+i,bottom:e+s,x:t,y:e}}function $f(r,t,e){let{reference:i,floating:s}=r;const n=Gr(t),o=Mu(t),a=Ru(o),l=Cr(t),u=n==="y",d=i.x+i.width/2-s.width/2,f=i.y+i.height/2-s.height/2,m=i[a]/2-s[a]/2;let v;switch(l){case"top":v={x:d,y:i.y-s.height};break;case"bottom":v={x:d,y:i.y+i.height};break;case"right":v={x:i.x+i.width,y:f};break;case"left":v={x:i.x-s.width,y:f};break;default:v={x:i.x,y:i.y}}switch(ir(t)){case"start":v[o]-=m*(e&&u?-1:1);break;case"end":v[o]+=m*(e&&u?-1:1);break}return v}const UM=async(r,t,e)=>{const{placement:i="bottom",strategy:s="absolute",middleware:n=[],platform:o}=e,a=n.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:r,floating:t,strategy:s}),{x:d,y:f}=$f(u,i,l),m=i,v={},y=0;for(let b=0;b<a.length;b++){const{name:w,fn:E}=a[b],{x:P,y:S,data:M,reset:k}=await E({x:d,y:f,initialPlacement:i,placement:m,strategy:s,middlewareData:v,rects:u,platform:o,elements:{reference:r,floating:t}});d=P??d,f=S??f,v={...v,[w]:{...v[w],...M}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:r,floating:t,strategy:s}):k.rects),{x:d,y:f}=$f(u,m,l)),b=-1)}return{x:d,y:f,placement:m,strategy:s,middlewareData:v}};async function Ka(r,t){var e;t===void 0&&(t={});const{x:i,y:s,platform:n,rects:o,elements:a,strategy:l}=r,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:m=!1,padding:v=0}=Qi(t,r),y=py(v),w=a[m?f==="floating"?"reference":"floating":f],E=gn(await n.getClippingRect({element:(e=await(n.isElement==null?void 0:n.isElement(w)))==null||e?w:w.contextElement||await(n.getDocumentElement==null?void 0:n.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),P=f==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(n.getOffsetParent==null?void 0:n.getOffsetParent(a.floating)),M=await(n.isElement==null?void 0:n.isElement(S))?await(n.getScale==null?void 0:n.getScale(S))||{x:1,y:1}:{x:1,y:1},k=gn(n.convertOffsetParentRelativeRectToViewportRelativeRect?await n.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:P,offsetParent:S,strategy:l}):P);return{top:(E.top-k.top+y.top)/M.y,bottom:(k.bottom-E.bottom+y.bottom)/M.y,left:(E.left-k.left+y.left)/M.x,right:(k.right-E.right+y.right)/M.x}}const $M=r=>({name:"arrow",options:r,async fn(t){const{x:e,y:i,placement:s,rects:n,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:d=0}=Qi(r,t)||{};if(u==null)return{};const f=py(d),m={x:e,y:i},v=Mu(s),y=Ru(v),b=await o.getDimensions(u),w=v==="y",E=w?"top":"left",P=w?"bottom":"right",S=w?"clientHeight":"clientWidth",M=n.reference[y]+n.reference[v]-m[v]-n.floating[y],k=m[v]-n.reference[v],F=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let C=F?F[S]:0;(!C||!await(o.isElement==null?void 0:o.isElement(F)))&&(C=a.floating[S]||n.floating[y]);const N=M/2-k/2,U=C/2-b[y]/2-1,H=Pn(f[E],U),Q=Pn(f[P],U),G=H,O=C-b[y]-Q,L=C/2-b[y]/2+N,z=Oc(G,L,O),J=!l.arrow&&ir(s)!=null&&L!==z&&n.reference[y]/2-(L<G?H:Q)-b[y]/2<0,Z=J?L<G?L-G:L-O:0;return{[v]:m[v]+Z,data:{[v]:z,centerOffset:L-z-Z,...J&&{alignmentOffset:Z}},reset:J}}});function GM(r,t,e){return(r?[...e.filter(s=>ir(s)===r),...e.filter(s=>ir(s)!==r)]:e.filter(s=>Cr(s)===s)).filter(s=>r?ir(s)===r||(t?ya(s)!==s:!1):!0)}const HM=function(r){return r===void 0&&(r={}),{name:"autoPlacement",options:r,async fn(t){var e,i,s;const{rects:n,middlewareData:o,placement:a,platform:l,elements:u}=t,{crossAxis:d=!1,alignment:f,allowedPlacements:m=Uf,autoAlignment:v=!0,...y}=Qi(r,t),b=f!==void 0||m===Uf?GM(f||null,v,m):m,w=await Ka(t,y),E=((e=o.autoPlacement)==null?void 0:e.index)||0,P=b[E];if(P==null)return{};const S=dy(P,n,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==P)return{reset:{placement:b[0]}};const M=[w[Cr(P)],w[S[0]],w[S[1]]],k=[...((i=o.autoPlacement)==null?void 0:i.overflows)||[],{placement:P,overflows:M}],F=b[E+1];if(F)return{data:{index:E+1,overflows:k},reset:{placement:F}};const C=k.map(H=>{const Q=ir(H.placement);return[H.placement,Q&&d?H.overflows.slice(0,2).reduce((G,O)=>G+O,0):H.overflows[0],H.overflows]}).sort((H,Q)=>H[1]-Q[1]),U=((s=C.filter(H=>H[2].slice(0,ir(H[0])?2:3).every(Q=>Q<=0))[0])==null?void 0:s[0])||C[0][0];return U!==a?{data:{index:E+1,overflows:k},reset:{placement:U}}:{}}}},zM=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(t){var e,i;const{placement:s,middlewareData:n,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:b=!0,...w}=Qi(r,t);if((e=n.arrow)!=null&&e.alignmentOffset)return{};const E=Cr(s),P=Gr(a),S=Cr(a)===a,M=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=m||(S||!b?[_a(a)]:BM(a)),F=y!=="none";!m&&F&&k.push(...FM(a,b,y,M));const C=[a,...k],N=await Ka(t,w),U=[];let H=((i=n.flip)==null?void 0:i.overflows)||[];if(d&&U.push(N[E]),f){const L=dy(s,o,M);U.push(N[L[0]],N[L[1]])}if(H=[...H,{placement:s,overflows:U}],!U.every(L=>L<=0)){var Q,G;const L=(((Q=n.flip)==null?void 0:Q.index)||0)+1,z=C[L];if(z&&(!(f==="alignment"?P!==Gr(z):!1)||H.every(ut=>ut.overflows[0]>0&&Gr(ut.placement)===P)))return{data:{index:L,overflows:H},reset:{placement:z}};let J=(G=H.filter(Z=>Z.overflows[0]<=0).sort((Z,ut)=>Z.overflows[1]-ut.overflows[1])[0])==null?void 0:G.placement;if(!J)switch(v){case"bestFit":{var O;const Z=(O=H.filter(ut=>{if(F){const Tt=Gr(ut.placement);return Tt===P||Tt==="y"}return!0}).map(ut=>[ut.placement,ut.overflows.filter(Tt=>Tt>0).reduce((Tt,Y)=>Tt+Y,0)]).sort((ut,Tt)=>ut[1]-Tt[1])[0])==null?void 0:O[0];Z&&(J=Z);break}case"initialPlacement":J=a;break}if(s!==J)return{reset:{placement:J}}}return{}}}};async function jM(r,t){const{placement:e,platform:i,elements:s}=r,n=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=Cr(e),a=ir(e),l=Gr(e)==="y",u=["left","top"].includes(o)?-1:1,d=n&&l?-1:1,f=Qi(t,r);let{mainAxis:m,crossAxis:v,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof y=="number"&&(v=a==="end"?y*-1:y),l?{x:v*d,y:m*u}:{x:m*u,y:v*d}}const VM=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(t){var e,i;const{x:s,y:n,placement:o,middlewareData:a}=t,l=await jM(t,r);return o===((e=a.offset)==null?void 0:e.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:n+l.y,data:{...l,placement:o}}}}},WM=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(t){const{x:e,y:i,placement:s}=t,{mainAxis:n=!0,crossAxis:o=!1,limiter:a={fn:w=>{let{x:E,y:P}=w;return{x:E,y:P}}},...l}=Qi(r,t),u={x:e,y:i},d=await Ka(t,l),f=Gr(Cr(s)),m=uy(f);let v=u[m],y=u[f];if(n){const w=m==="y"?"top":"left",E=m==="y"?"bottom":"right",P=v+d[w],S=v-d[E];v=Oc(P,v,S)}if(o){const w=f==="y"?"top":"left",E=f==="y"?"bottom":"right",P=y+d[w],S=y-d[E];y=Oc(P,y,S)}const b=a.fn({...t,[m]:v,[f]:y});return{...b,data:{x:b.x-e,y:b.y-i,enabled:{[m]:n,[f]:o}}}}}},XM=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(t){var e,i;const{placement:s,rects:n,platform:o,elements:a}=t,{apply:l=()=>{},...u}=Qi(r,t),d=await Ka(t,u),f=Cr(s),m=ir(s),v=Gr(s)==="y",{width:y,height:b}=n.floating;let w,E;f==="top"||f==="bottom"?(w=f,E=m===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(E=f,w=m==="end"?"top":"bottom");const P=b-d.top-d.bottom,S=y-d.left-d.right,M=Pn(b-d[w],P),k=Pn(y-d[E],S),F=!t.middlewareData.shift;let C=M,N=k;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(N=S),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(C=P),F&&!m){const H=Oi(d.left,0),Q=Oi(d.right,0),G=Oi(d.top,0),O=Oi(d.bottom,0);v?N=y-2*(H!==0||Q!==0?H+Q:Oi(d.left,d.right)):C=b-2*(G!==0||O!==0?G+O:Oi(d.top,d.bottom))}await l({...t,availableWidth:N,availableHeight:C});const U=await o.getDimensions(a.floating);return y!==U.width||b!==U.height?{reset:{rects:!0}}:{}}}};function He(r){var t;return((t=r.ownerDocument)==null?void 0:t.defaultView)||window}function Er(r){return He(r).getComputedStyle(r)}const Gf=Math.min,vn=Math.max,ba=Math.round;function fy(r){const t=Er(r);let e=parseFloat(t.width),i=parseFloat(t.height);const s=r.offsetWidth,n=r.offsetHeight,o=ba(e)!==s||ba(i)!==n;return o&&(e=s,i=n),{width:e,height:i,fallback:o}}function _i(r){return gy(r)?(r.nodeName||"").toLowerCase():""}let Do;function my(){if(Do)return Do;const r=navigator.userAgentData;return r&&Array.isArray(r.brands)?(Do=r.brands.map(t=>t.brand+"/"+t.version).join(" "),Do):navigator.userAgent}function Sr(r){return r instanceof He(r).HTMLElement}function pi(r){return r instanceof He(r).Element}function gy(r){return r instanceof He(r).Node}function Hf(r){return typeof ShadowRoot>"u"?!1:r instanceof He(r).ShadowRoot||r instanceof ShadowRoot}function Za(r){const{overflow:t,overflowX:e,overflowY:i,display:s}=Er(r);return/auto|scroll|overlay|hidden|clip/.test(t+i+e)&&!["inline","contents"].includes(s)}function YM(r){return["table","td","th"].includes(_i(r))}function Bc(r){const t=/firefox/i.test(my()),e=Er(r),i=e.backdropFilter||e.WebkitBackdropFilter;return e.transform!=="none"||e.perspective!=="none"||!!i&&i!=="none"||t&&e.willChange==="filter"||t&&!!e.filter&&e.filter!=="none"||["transform","perspective"].some(s=>e.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const n=e.contain;return n!=null&&n.includes(s)})}function vy(){return!/^((?!chrome|android).)*safari/i.test(my())}function ku(r){return["html","body","#document"].includes(_i(r))}function yy(r){return pi(r)?r:r.contextElement}const _y={x:1,y:1};function Ss(r){const t=yy(r);if(!Sr(t))return _y;const e=t.getBoundingClientRect(),{width:i,height:s,fallback:n}=fy(t);let o=(n?ba(e.width):e.width)/i,a=(n?ba(e.height):e.height)/s;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function In(r,t,e,i){var s,n;t===void 0&&(t=!1),e===void 0&&(e=!1);const o=r.getBoundingClientRect(),a=yy(r);let l=_y;t&&(i?pi(i)&&(l=Ss(i)):l=Ss(r));const u=a?He(a):window,d=!vy()&&e;let f=(o.left+(d&&((s=u.visualViewport)==null?void 0:s.offsetLeft)||0))/l.x,m=(o.top+(d&&((n=u.visualViewport)==null?void 0:n.offsetTop)||0))/l.y,v=o.width/l.x,y=o.height/l.y;if(a){const b=He(a),w=i&&pi(i)?He(i):i;let E=b.frameElement;for(;E&&i&&w!==b;){const P=Ss(E),S=E.getBoundingClientRect(),M=getComputedStyle(E);S.x+=(E.clientLeft+parseFloat(M.paddingLeft))*P.x,S.y+=(E.clientTop+parseFloat(M.paddingTop))*P.y,f*=P.x,m*=P.y,v*=P.x,y*=P.y,f+=S.x,m+=S.y,E=He(E).frameElement}}return{width:v,height:y,top:m,right:f+v,bottom:m+y,left:f,x:f,y:m}}function fi(r){return((gy(r)?r.ownerDocument:r.document)||window.document).documentElement}function Qa(r){return pi(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function by(r){return In(fi(r)).left+Qa(r).scrollLeft}function Rn(r){if(_i(r)==="html")return r;const t=r.assignedSlot||r.parentNode||Hf(r)&&r.host||fi(r);return Hf(t)?t.host:t}function xy(r){const t=Rn(r);return ku(t)?t.ownerDocument.body:Sr(t)&&Za(t)?t:xy(t)}function xa(r,t){var e;t===void 0&&(t=[]);const i=xy(r),s=i===((e=r.ownerDocument)==null?void 0:e.body),n=He(i);return s?t.concat(n,n.visualViewport||[],Za(i)?i:[]):t.concat(i,xa(i))}function zf(r,t,e){return t==="viewport"?gn(function(i,s){const n=He(i),o=fi(i),a=n.visualViewport;let l=o.clientWidth,u=o.clientHeight,d=0,f=0;if(a){l=a.width,u=a.height;const m=vy();(m||!m&&s==="fixed")&&(d=a.offsetLeft,f=a.offsetTop)}return{width:l,height:u,x:d,y:f}}(r,e)):pi(t)?gn(function(i,s){const n=In(i,!0,s==="fixed"),o=n.top+i.clientTop,a=n.left+i.clientLeft,l=Sr(i)?Ss(i):{x:1,y:1};return{width:i.clientWidth*l.x,height:i.clientHeight*l.y,x:a*l.x,y:o*l.y}}(t,e)):gn(function(i){const s=fi(i),n=Qa(i),o=i.ownerDocument.body,a=vn(s.scrollWidth,s.clientWidth,o.scrollWidth,o.clientWidth),l=vn(s.scrollHeight,s.clientHeight,o.scrollHeight,o.clientHeight);let u=-n.scrollLeft+by(i);const d=-n.scrollTop;return Er(o).direction==="rtl"&&(u+=vn(s.clientWidth,o.clientWidth)-a),{width:a,height:l,x:u,y:d}}(fi(r)))}function jf(r){return Sr(r)&&Er(r).position!=="fixed"?r.offsetParent:null}function Vf(r){const t=He(r);let e=jf(r);for(;e&&YM(e)&&Er(e).position==="static";)e=jf(e);return e&&(_i(e)==="html"||_i(e)==="body"&&Er(e).position==="static"&&!Bc(e))?t:e||function(i){let s=Rn(i);for(;Sr(s)&&!ku(s);){if(Bc(s))return s;s=Rn(s)}return null}(r)||t}function qM(r,t,e){const i=Sr(t),s=fi(t),n=In(r,!0,e==="fixed",t);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(i||!i&&e!=="fixed")if((_i(t)!=="body"||Za(s))&&(o=Qa(t)),Sr(t)){const l=In(t,!0);a.x=l.x+t.clientLeft,a.y=l.y+t.clientTop}else s&&(a.x=by(s));return{x:n.left+o.scrollLeft-a.x,y:n.top+o.scrollTop-a.y,width:n.width,height:n.height}}const KM={getClippingRect:function(r){let{element:t,boundary:e,rootBoundary:i,strategy:s}=r;const n=e==="clippingAncestors"?function(u,d){const f=d.get(u);if(f)return f;let m=xa(u).filter(w=>pi(w)&&_i(w)!=="body"),v=null;const y=Er(u).position==="fixed";let b=y?Rn(u):u;for(;pi(b)&&!ku(b);){const w=Er(b),E=Bc(b);(y?E||v:E||w.position!=="static"||!v||!["absolute","fixed"].includes(v.position))?v=w:m=m.filter(P=>P!==b),b=Rn(b)}return d.set(u,m),m}(t,this._c):[].concat(e),o=[...n,i],a=o[0],l=o.reduce((u,d)=>{const f=zf(t,d,s);return u.top=vn(f.top,u.top),u.right=Gf(f.right,u.right),u.bottom=Gf(f.bottom,u.bottom),u.left=vn(f.left,u.left),u},zf(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(r){let{rect:t,offsetParent:e,strategy:i}=r;const s=Sr(e),n=fi(e);if(e===n)return t;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((s||!s&&i!=="fixed")&&((_i(e)!=="body"||Za(n))&&(o=Qa(e)),Sr(e))){const u=In(e);a=Ss(e),l.x=u.x+e.clientLeft,l.y=u.y+e.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+l.x,y:t.y*a.y-o.scrollTop*a.y+l.y}},isElement:pi,getDimensions:function(r){return Sr(r)?fy(r):r.getBoundingClientRect()},getOffsetParent:Vf,getDocumentElement:fi,getScale:Ss,async getElementRects(r){let{reference:t,floating:e,strategy:i}=r;const s=this.getOffsetParent||Vf,n=this.getDimensions;return{reference:qM(t,await s(e),i),floating:{x:0,y:0,...await n(e)}}},getClientRects:r=>Array.from(r.getClientRects()),isRTL:r=>Er(r).direction==="rtl"},ZM=(r,t,e)=>{const i=new Map,s={platform:KM,...e},n={...s.platform,_c:i};return UM(r,t,{...s,platform:n})};function wy(r,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(typeof t[e]=="object"&&r[e]?wy(r[e],t[e]):r[e]=t[e])}const sr={disabled:!1,distance:5,skidding:0,container:"body",boundary:void 0,instantMove:!1,disposeTimeout:150,popperTriggers:[],strategy:"absolute",preventOverflow:!0,flip:!0,shift:!0,overflowPadding:0,arrowPadding:0,arrowOverflow:!0,autoHideOnMousedown:!1,themes:{tooltip:{placement:"top",triggers:["hover","focus","touch"],hideTriggers:r=>[...r,"click"],delay:{show:200,hide:0},handleResize:!1,html:!1,loadingContent:"..."},dropdown:{placement:"bottom",triggers:["click"],delay:0,handleResize:!0,autoHide:!0},menu:{$extend:"dropdown",triggers:["hover","focus"],popperTriggers:["hover"],delay:{show:0,hide:400}}}};function Mn(r,t){let e=sr.themes[r]||{},i;do i=e[t],typeof i>"u"?e.$extend?e=sr.themes[e.$extend]||{}:(e=null,i=sr[t]):e=null;while(e);return i}function QM(r){const t=[r];let e=sr.themes[r]||{};do e.$extend&&!e.$resetCss?(t.push(e.$extend),e=sr.themes[e.$extend]||{}):e=null;while(e);return t.map(i=>`v-popper--theme-${i}`)}function Wf(r){const t=[r];let e=sr.themes[r]||{};do e.$extend?(t.push(e.$extend),e=sr.themes[e.$extend]||{}):e=null;while(e);return t}let Is=!1;if(typeof window<"u"){Is=!1;try{const r=Object.defineProperty({},"passive",{get(){Is=!0}});window.addEventListener("test",null,r)}catch{}}let Ty=!1;typeof window<"u"&&typeof navigator<"u"&&(Ty=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream);const Ey=["auto","top","bottom","left","right"].reduce((r,t)=>r.concat([t,`${t}-start`,`${t}-end`]),[]),Xf={hover:"mouseenter",focus:"focus",click:"click",touch:"touchstart",pointer:"pointerdown"},Yf={hover:"mouseleave",focus:"blur",click:"click",touch:"touchend",pointer:"pointerup"};function qf(r,t){const e=r.indexOf(t);e!==-1&&r.splice(e,1)}function Sh(){return new Promise(r=>requestAnimationFrame(()=>{requestAnimationFrame(r)}))}const Qe=[];let Ci=null;const Kf={};function Zf(r){let t=Kf[r];return t||(t=Kf[r]=[]),t}let Lc=function(){};typeof window<"u"&&(Lc=window.Element);function Bt(r){return function(t){return Mn(t.theme,r)}}const Ah="__floating-vue__popper",Sy=()=>It({name:"VPopper",provide(){return{[Ah]:{parentPopper:this}}},inject:{[Ah]:{default:null}},props:{theme:{type:String,required:!0},targetNodes:{type:Function,required:!0},referenceNode:{type:Function,default:null},popperNode:{type:Function,required:!0},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:Bt("disabled")},positioningDisabled:{type:Boolean,default:Bt("positioningDisabled")},placement:{type:String,default:Bt("placement"),validator:r=>Ey.includes(r)},delay:{type:[String,Number,Object],default:Bt("delay")},distance:{type:[Number,String],default:Bt("distance")},skidding:{type:[Number,String],default:Bt("skidding")},triggers:{type:Array,default:Bt("triggers")},showTriggers:{type:[Array,Function],default:Bt("showTriggers")},hideTriggers:{type:[Array,Function],default:Bt("hideTriggers")},popperTriggers:{type:Array,default:Bt("popperTriggers")},popperShowTriggers:{type:[Array,Function],default:Bt("popperShowTriggers")},popperHideTriggers:{type:[Array,Function],default:Bt("popperHideTriggers")},container:{type:[String,Object,Lc,Boolean],default:Bt("container")},boundary:{type:[String,Lc],default:Bt("boundary")},strategy:{type:String,validator:r=>["absolute","fixed"].includes(r),default:Bt("strategy")},autoHide:{type:[Boolean,Function],default:Bt("autoHide")},handleResize:{type:Boolean,default:Bt("handleResize")},instantMove:{type:Boolean,default:Bt("instantMove")},eagerMount:{type:Boolean,default:Bt("eagerMount")},popperClass:{type:[String,Array,Object],default:Bt("popperClass")},computeTransformOrigin:{type:Boolean,default:Bt("computeTransformOrigin")},autoMinSize:{type:Boolean,default:Bt("autoMinSize")},autoSize:{type:[Boolean,String],default:Bt("autoSize")},autoMaxSize:{type:Boolean,default:Bt("autoMaxSize")},autoBoundaryMaxSize:{type:Boolean,default:Bt("autoBoundaryMaxSize")},preventOverflow:{type:Boolean,default:Bt("preventOverflow")},overflowPadding:{type:[Number,String],default:Bt("overflowPadding")},arrowPadding:{type:[Number,String],default:Bt("arrowPadding")},arrowOverflow:{type:Boolean,default:Bt("arrowOverflow")},flip:{type:Boolean,default:Bt("flip")},shift:{type:Boolean,default:Bt("shift")},shiftCrossAxis:{type:Boolean,default:Bt("shiftCrossAxis")},noAutoFocus:{type:Boolean,default:Bt("noAutoFocus")},disposeTimeout:{type:Number,default:Bt("disposeTimeout")}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},data(){return{isShown:!1,isMounted:!1,skipTransition:!1,classes:{showFrom:!1,showTo:!1,hideFrom:!1,hideTo:!0},result:{x:0,y:0,placement:"",strategy:this.strategy,arrow:{x:0,y:0,centerOffset:0},transformOrigin:null},randomId:`popper_${[Math.random(),Date.now()].map(r=>r.toString(36).substring(2,10)).join("_")}`,shownChildren:new Set,lastAutoHide:!0,pendingHide:!1,containsGlobalTarget:!1,isDisposed:!0,mouseDownContains:!1}},computed:{popperId(){return this.ariaId!=null?this.ariaId:this.randomId},shouldMountContent(){return this.eagerMount||this.isMounted},slotData(){return{popperId:this.popperId,isShown:this.isShown,shouldMountContent:this.shouldMountContent,skipTransition:this.skipTransition,autoHide:typeof this.autoHide=="function"?this.lastAutoHide:this.autoHide,show:this.show,hide:this.hide,handleResize:this.handleResize,onResize:this.onResize,classes:{...this.classes,popperClass:this.popperClass},result:this.positioningDisabled?null:this.result,attrs:this.$attrs}},parentPopper(){var r;return(r=this[Ah])==null?void 0:r.parentPopper},hasPopperShowTriggerHover(){var r,t;return((r=this.popperTriggers)==null?void 0:r.includes("hover"))||((t=this.popperShowTriggers)==null?void 0:t.includes("hover"))}},watch:{shown:"$_autoShowHide",disabled(r){r?this.dispose():this.init()},async container(){this.isShown&&(this.$_ensureTeleport(),await this.$_computePosition())},triggers:{handler:"$_refreshListeners",deep:!0},positioningDisabled:"$_refreshListeners",...["placement","distance","skidding","boundary","strategy","overflowPadding","arrowPadding","preventOverflow","shift","shiftCrossAxis","flip"].reduce((r,t)=>(r[t]="$_computePosition",r),{})},created(){this.autoMinSize&&console.warn('[floating-vue] `autoMinSize` option is deprecated. Use `autoSize="min"` instead.'),this.autoMaxSize&&console.warn("[floating-vue] `autoMaxSize` option is deprecated. Use `autoBoundaryMaxSize` instead.")},mounted(){this.init(),this.$_detachPopperNode()},activated(){this.$_autoShowHide()},deactivated(){this.hide()},beforeUnmount(){this.dispose()},methods:{show({event:r=null,skipDelay:t=!1,force:e=!1}={}){var i,s;(i=this.parentPopper)!=null&&i.lockedChild&&this.parentPopper.lockedChild!==this||(this.pendingHide=!1,(e||!this.disabled)&&(((s=this.parentPopper)==null?void 0:s.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.$_scheduleShow(r,t),this.$emit("show"),this.$_showFrameLocked=!0,requestAnimationFrame(()=>{this.$_showFrameLocked=!1})),this.$emit("update:shown",!0))},hide({event:r=null,skipDelay:t=!1}={}){var e;if(!this.$_hideInProgress){if(this.shownChildren.size>0){this.pendingHide=!0;return}if(this.hasPopperShowTriggerHover&&this.$_isAimingPopper()){this.parentPopper&&(this.parentPopper.lockedChild=this,clearTimeout(this.parentPopper.lockedChildTimer),this.parentPopper.lockedChildTimer=setTimeout(()=>{this.parentPopper.lockedChild===this&&(this.parentPopper.lockedChild.hide({skipDelay:t}),this.parentPopper.lockedChild=null)},1e3));return}((e=this.parentPopper)==null?void 0:e.lockedChild)===this&&(this.parentPopper.lockedChild=null),this.pendingHide=!1,this.$_scheduleHide(r,t),this.$emit("hide"),this.$emit("update:shown",!1)}},init(){var r;this.isDisposed&&(this.isDisposed=!1,this.isMounted=!1,this.$_events=[],this.$_preventShow=!1,this.$_referenceNode=((r=this.referenceNode)==null?void 0:r.call(this))??this.$el,this.$_targetNodes=this.targetNodes().filter(t=>t.nodeType===t.ELEMENT_NODE),this.$_popperNode=this.popperNode(),this.$_innerNode=this.$_popperNode.querySelector(".v-popper__inner"),this.$_arrowNode=this.$_popperNode.querySelector(".v-popper__arrow-container"),this.$_swapTargetAttrs("title","data-original-title"),this.$_detachPopperNode(),this.triggers.length&&this.$_addEventListeners(),this.shown&&this.show())},dispose(){this.isDisposed||(this.isDisposed=!0,this.$_removeEventListeners(),this.hide({skipDelay:!0}),this.$_detachPopperNode(),this.isMounted=!1,this.isShown=!1,this.$_updateParentShownChildren(!1),this.$_swapTargetAttrs("data-original-title","title"))},async onResize(){this.isShown&&(await this.$_computePosition(),this.$emit("resize"))},async $_computePosition(){if(this.isDisposed||this.positioningDisabled)return;const r={strategy:this.strategy,middleware:[]};(this.distance||this.skidding)&&r.middleware.push(VM({mainAxis:this.distance,crossAxis:this.skidding}));const t=this.placement.startsWith("auto");if(t?r.middleware.push(HM({alignment:this.placement.split("-")[1]??""})):r.placement=this.placement,this.preventOverflow&&(this.shift&&r.middleware.push(WM({padding:this.overflowPadding,boundary:this.boundary,crossAxis:this.shiftCrossAxis})),!t&&this.flip&&r.middleware.push(zM({padding:this.overflowPadding,boundary:this.boundary}))),r.middleware.push($M({element:this.$_arrowNode,padding:this.arrowPadding})),this.arrowOverflow&&r.middleware.push({name:"arrowOverflow",fn:({placement:i,rects:s,middlewareData:n})=>{let o;const{centerOffset:a}=n.arrow;return i.startsWith("top")||i.startsWith("bottom")?o=Math.abs(a)>s.reference.width/2:o=Math.abs(a)>s.reference.height/2,{data:{overflow:o}}}}),this.autoMinSize||this.autoSize){const i=this.autoSize?this.autoSize:this.autoMinSize?"min":null;r.middleware.push({name:"autoSize",fn:({rects:s,placement:n,middlewareData:o})=>{var a;if((a=o.autoSize)!=null&&a.skip)return{};let l,u;return n.startsWith("top")||n.startsWith("bottom")?l=s.reference.width:u=s.reference.height,this.$_innerNode.style[i==="min"?"minWidth":i==="max"?"maxWidth":"width"]=l!=null?`${l}px`:null,this.$_innerNode.style[i==="min"?"minHeight":i==="max"?"maxHeight":"height"]=u!=null?`${u}px`:null,{data:{skip:!0},reset:{rects:!0}}}})}(this.autoMaxSize||this.autoBoundaryMaxSize)&&(this.$_innerNode.style.maxWidth=null,this.$_innerNode.style.maxHeight=null,r.middleware.push(XM({boundary:this.boundary,padding:this.overflowPadding,apply:({availableWidth:i,availableHeight:s})=>{this.$_innerNode.style.maxWidth=i!=null?`${i}px`:null,this.$_innerNode.style.maxHeight=s!=null?`${s}px`:null}})));const e=await ZM(this.$_referenceNode,this.$_popperNode,r);Object.assign(this.result,{x:e.x,y:e.y,placement:e.placement,strategy:e.strategy,arrow:{...e.middlewareData.arrow,...e.middlewareData.arrowOverflow}})},$_scheduleShow(r,t=!1){if(this.$_updateParentShownChildren(!0),this.$_hideInProgress=!1,clearTimeout(this.$_scheduleTimer),Ci&&this.instantMove&&Ci.instantMove&&Ci!==this.parentPopper){Ci.$_applyHide(!0),this.$_applyShow(!0);return}t?this.$_applyShow():this.$_scheduleTimer=setTimeout(this.$_applyShow.bind(this),this.$_computeDelay("show"))},$_scheduleHide(r,t=!1){if(this.shownChildren.size>0){this.pendingHide=!0;return}this.$_updateParentShownChildren(!1),this.$_hideInProgress=!0,clearTimeout(this.$_scheduleTimer),this.isShown&&(Ci=this),t?this.$_applyHide():this.$_scheduleTimer=setTimeout(this.$_applyHide.bind(this),this.$_computeDelay("hide"))},$_computeDelay(r){const t=this.delay;return parseInt(t&&t[r]||t||0)},async $_applyShow(r=!1){clearTimeout(this.$_disposeTimer),clearTimeout(this.$_scheduleTimer),this.skipTransition=r,!this.isShown&&(this.$_ensureTeleport(),await Sh(),await this.$_computePosition(),await this.$_applyShowEffect(),this.positioningDisabled||this.$_registerEventListeners([...xa(this.$_referenceNode),...xa(this.$_popperNode)],"scroll",()=>{this.$_computePosition()}))},async $_applyShowEffect(){if(this.$_hideInProgress)return;if(this.computeTransformOrigin){const t=this.$_referenceNode.getBoundingClientRect(),e=this.$_popperNode.querySelector(".v-popper__wrapper"),i=e.parentNode.getBoundingClientRect(),s=t.x+t.width/2-(i.left+e.offsetLeft),n=t.y+t.height/2-(i.top+e.offsetTop);this.result.transformOrigin=`${s}px ${n}px`}this.isShown=!0,this.$_applyAttrsToTarget({"aria-describedby":this.popperId,"data-popper-shown":""});const r=this.showGroup;if(r){let t;for(let e=0;e<Qe.length;e++)t=Qe[e],t.showGroup!==r&&(t.hide(),t.$emit("close-group"))}Qe.push(this),document.body.classList.add("v-popper--some-open");for(const t of Wf(this.theme))Zf(t).push(this),document.body.classList.add(`v-popper--some-open--${t}`);this.$emit("apply-show"),this.classes.showFrom=!0,this.classes.showTo=!1,this.classes.hideFrom=!1,this.classes.hideTo=!1,await Sh(),this.classes.showFrom=!1,this.classes.showTo=!0,this.noAutoFocus||this.$_popperNode.focus()},async $_applyHide(r=!1){if(this.shownChildren.size>0){this.pendingHide=!0,this.$_hideInProgress=!1;return}if(clearTimeout(this.$_scheduleTimer),!this.isShown)return;this.skipTransition=r,qf(Qe,this),Qe.length===0&&document.body.classList.remove("v-popper--some-open");for(const e of Wf(this.theme)){const i=Zf(e);qf(i,this),i.length===0&&document.body.classList.remove(`v-popper--some-open--${e}`)}Ci===this&&(Ci=null),this.isShown=!1,this.$_applyAttrsToTarget({"aria-describedby":void 0,"data-popper-shown":void 0}),clearTimeout(this.$_disposeTimer);const t=this.disposeTimeout;t!==null&&(this.$_disposeTimer=setTimeout(()=>{this.$_popperNode&&(this.$_detachPopperNode(),this.isMounted=!1)},t)),this.$_removeEventListeners("scroll"),this.$emit("apply-hide"),this.classes.showFrom=!1,this.classes.showTo=!1,this.classes.hideFrom=!0,this.classes.hideTo=!1,await Sh(),this.classes.hideFrom=!1,this.classes.hideTo=!0},$_autoShowHide(){this.shown?this.show():this.hide()},$_ensureTeleport(){if(this.isDisposed)return;let r=this.container;if(typeof r=="string"?r=window.document.querySelector(r):r===!1&&(r=this.$_targetNodes[0].parentNode),!r)throw new Error("No container for popover: "+this.container);r.appendChild(this.$_popperNode),this.isMounted=!0},$_addEventListeners(){const r=e=>{this.isShown&&!this.$_hideInProgress||(e.usedByTooltip=!0,!this.$_preventShow&&this.show({event:e}))};this.$_registerTriggerListeners(this.$_targetNodes,Xf,this.triggers,this.showTriggers,r),this.$_registerTriggerListeners([this.$_popperNode],Xf,this.popperTriggers,this.popperShowTriggers,r);const t=e=>{e.usedByTooltip||this.hide({event:e})};this.$_registerTriggerListeners(this.$_targetNodes,Yf,this.triggers,this.hideTriggers,t),this.$_registerTriggerListeners([this.$_popperNode],Yf,this.popperTriggers,this.popperHideTriggers,t)},$_registerEventListeners(r,t,e){this.$_events.push({targetNodes:r,eventType:t,handler:e}),r.forEach(i=>i.addEventListener(t,e,Is?{passive:!0}:void 0))},$_registerTriggerListeners(r,t,e,i,s){let n=e;i!=null&&(n=typeof i=="function"?i(n):i),n.forEach(o=>{const a=t[o];a&&this.$_registerEventListeners(r,a,s)})},$_removeEventListeners(r){const t=[];this.$_events.forEach(e=>{const{targetNodes:i,eventType:s,handler:n}=e;!r||r===s?i.forEach(o=>o.removeEventListener(s,n)):t.push(e)}),this.$_events=t},$_refreshListeners(){this.isDisposed||(this.$_removeEventListeners(),this.$_addEventListeners())},$_handleGlobalClose(r,t=!1){this.$_showFrameLocked||(this.hide({event:r}),r.closePopover?this.$emit("close-directive"):this.$emit("auto-hide"),t&&(this.$_preventShow=!0,setTimeout(()=>{this.$_preventShow=!1},300)))},$_detachPopperNode(){this.$_popperNode.parentNode&&this.$_popperNode.parentNode.removeChild(this.$_popperNode)},$_swapTargetAttrs(r,t){for(const e of this.$_targetNodes){const i=e.getAttribute(r);i&&(e.removeAttribute(r),e.setAttribute(t,i))}},$_applyAttrsToTarget(r){for(const t of this.$_targetNodes)for(const e in r){const i=r[e];i==null?t.removeAttribute(e):t.setAttribute(e,i)}},$_updateParentShownChildren(r){let t=this.parentPopper;for(;t;)r?t.shownChildren.add(this.randomId):(t.shownChildren.delete(this.randomId),t.pendingHide&&t.hide()),t=t.parentPopper},$_isAimingPopper(){const r=this.$_referenceNode.getBoundingClientRect();if(yn>=r.left&&yn<=r.right&&_n>=r.top&&_n<=r.bottom){const t=this.$_popperNode.getBoundingClientRect(),e=yn-ii,i=_n-si,s=t.left+t.width/2-ii+(t.top+t.height/2)-si+t.width+t.height,n=ii+e*s,o=si+i*s;return Oo(ii,si,n,o,t.left,t.top,t.left,t.bottom)||Oo(ii,si,n,o,t.left,t.top,t.right,t.top)||Oo(ii,si,n,o,t.right,t.top,t.right,t.bottom)||Oo(ii,si,n,o,t.left,t.bottom,t.right,t.bottom)}return!1}},render(){return this.$slots.default(this.slotData)}});if(typeof document<"u"&&typeof window<"u"){if(Ty){const r=Is?{passive:!0,capture:!0}:!0;document.addEventListener("touchstart",t=>Qf(t,!0),r),document.addEventListener("touchend",t=>Jf(t,!0),r)}else window.addEventListener("mousedown",r=>Qf(r,!1),!0),window.addEventListener("click",r=>Jf(r,!1),!0);window.addEventListener("resize",tk)}function Qf(r,t){if(sr.autoHideOnMousedown)Ay(r,t);else for(let e=0;e<Qe.length;e++){const i=Qe[e];try{i.mouseDownContains=i.popperNode().contains(r.target)}catch{}}}function Jf(r,t){sr.autoHideOnMousedown||Ay(r,t)}function Ay(r,t){const e={};for(let i=Qe.length-1;i>=0;i--){const s=Qe[i];try{const n=s.containsGlobalTarget=s.mouseDownContains||s.popperNode().contains(r.target);s.pendingHide=!1,requestAnimationFrame(()=>{if(s.pendingHide=!1,!e[s.randomId]&&tm(s,n,r)){if(s.$_handleGlobalClose(r,t),!r.closeAllPopover&&r.closePopover&&n){let a=s.parentPopper;for(;a;)e[a.randomId]=!0,a=a.parentPopper;return}let o=s.parentPopper;for(;o&&tm(o,o.containsGlobalTarget,r);)o.$_handleGlobalClose(r,t),o=o.parentPopper}})}catch{}}}function tm(r,t,e){return e.closeAllPopover||e.closePopover&&t||JM(r,e)&&!t}function JM(r,t){if(typeof r.autoHide=="function"){const e=r.autoHide(t);return r.lastAutoHide=e,e}return r.autoHide}function tk(){for(let r=0;r<Qe.length;r++)Qe[r].$_computePosition()}let ii=0,si=0,yn=0,_n=0;typeof window<"u"&&window.addEventListener("mousemove",r=>{ii=yn,si=_n,yn=r.clientX,_n=r.clientY},Is?{passive:!0}:void 0);function Oo(r,t,e,i,s,n,o,a){const l=((o-s)*(t-n)-(a-n)*(r-s))/((a-n)*(e-r)-(o-s)*(i-t)),u=((e-r)*(t-n)-(i-t)*(r-s))/((a-n)*(e-r)-(o-s)*(i-t));return l>=0&&l<=1&&u>=0&&u<=1}const ek={extends:Sy()},Ja=(r,t)=>{const e=r.__vccOpts||r;for(const[i,s]of t)e[i]=s;return e};function rk(r,t,e,i,s,n){return W(),at("div",{ref:"reference",class:re(["v-popper",{"v-popper--shown":r.slotData.isShown}])},[Nt(r.$slots,"default",jc(um(r.slotData)))],2)}const ik=Ja(ek,[["render",rk]]);function sk(){var r=window.navigator.userAgent,t=r.indexOf("MSIE ");if(t>0)return parseInt(r.substring(t+5,r.indexOf(".",t)),10);var e=r.indexOf("Trident/");if(e>0){var i=r.indexOf("rv:");return parseInt(r.substring(i+3,r.indexOf(".",i)),10)}var s=r.indexOf("Edge/");return s>0?parseInt(r.substring(s+5,r.indexOf(".",s)),10):-1}let Xo;function Fc(){Fc.init||(Fc.init=!0,Xo=sk()!==-1)}var tl={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){Fc(),$i(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const r=document.createElement("object");this._resizeObject=r,r.setAttribute("aria-hidden","true"),r.setAttribute("tabindex",-1),r.onload=this.addResizeHandlers,r.type="text/html",Xo&&this.$el.appendChild(r),r.data="about:blank",Xo||this.$el.appendChild(r)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!Xo&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const nk=d0();c0("data-v-b329ee4c");const ok={class:"resize-observer",tabindex:"-1"};u0();const ak=nk((r,t,e,i,s,n)=>(W(),zt("div",ok)));tl.render=ak;tl.__scopeId="data-v-b329ee4c";tl.__file="src/components/ResizeObserver.vue";const Cy=(r="theme")=>({computed:{themeClass(){return QM(this[r])}}}),lk=It({name:"VPopperContent",components:{ResizeObserver:tl},mixins:[Cy()],props:{popperId:String,theme:String,shown:Boolean,mounted:Boolean,skipTransition:Boolean,autoHide:Boolean,handleResize:Boolean,classes:Object,result:Object},emits:["hide","resize"],methods:{toPx(r){return r!=null&&!isNaN(r)?`${r}px`:null}}}),hk=["id","aria-hidden","tabindex","data-popper-placement"],ck={ref:"inner",class:"v-popper__inner"},uk=vt("div",{class:"v-popper__arrow-outer"},null,-1),dk=vt("div",{class:"v-popper__arrow-inner"},null,-1),pk=[uk,dk];function fk(r,t,e,i,s,n){const o=je("ResizeObserver");return W(),at("div",{id:r.popperId,ref:"popover",class:re(["v-popper__popper",[r.themeClass,r.classes.popperClass,{"v-popper__popper--shown":r.shown,"v-popper__popper--hidden":!r.shown,"v-popper__popper--show-from":r.classes.showFrom,"v-popper__popper--show-to":r.classes.showTo,"v-popper__popper--hide-from":r.classes.hideFrom,"v-popper__popper--hide-to":r.classes.hideTo,"v-popper__popper--skip-transition":r.skipTransition,"v-popper__popper--arrow-overflow":r.result&&r.result.arrow.overflow,"v-popper__popper--no-positioning":!r.result}]]),style:br(r.result?{position:r.result.strategy,transform:`translate3d(${Math.round(r.result.x)}px,${Math.round(r.result.y)}px,0)`}:void 0),"aria-hidden":r.shown?"false":"true",tabindex:r.autoHide?0:void 0,"data-popper-placement":r.result?r.result.placement:void 0,onKeyup:t[2]||(t[2]=hm(a=>r.autoHide&&r.$emit("hide"),["esc"]))},[vt("div",{class:"v-popper__backdrop",onClick:t[0]||(t[0]=a=>r.autoHide&&r.$emit("hide"))}),vt("div",{class:"v-popper__wrapper",style:br(r.result?{transformOrigin:r.result.transformOrigin}:void 0)},[vt("div",ck,[r.mounted?(W(),at(Ie,{key:0},[vt("div",null,[Nt(r.$slots,"default")]),r.handleResize?(W(),zt(o,{key:0,onNotify:t[1]||(t[1]=a=>r.$emit("resize",a))})):At("",!0)],64)):At("",!0)],512),vt("div",{ref:"arrow",class:"v-popper__arrow-container",style:br(r.result?{left:r.toPx(r.result.arrow.x),top:r.toPx(r.result.arrow.y)}:void 0)},pk,4)],4)],46,hk)}const Py=Ja(lk,[["render",fk]]),Iy={methods:{show(...r){return this.$refs.popper.show(...r)},hide(...r){return this.$refs.popper.hide(...r)},dispose(...r){return this.$refs.popper.dispose(...r)},onResize(...r){return this.$refs.popper.onResize(...r)}}};let Nc=function(){};typeof window<"u"&&(Nc=window.Element);const mk=It({name:"VPopperWrapper",components:{Popper:ik,PopperContent:Py},mixins:[Iy,Cy("finalTheme")],props:{theme:{type:String,default:null},referenceNode:{type:Function,default:null},shown:{type:Boolean,default:!1},showGroup:{type:String,default:null},ariaId:{default:null},disabled:{type:Boolean,default:void 0},positioningDisabled:{type:Boolean,default:void 0},placement:{type:String,default:void 0},delay:{type:[String,Number,Object],default:void 0},distance:{type:[Number,String],default:void 0},skidding:{type:[Number,String],default:void 0},triggers:{type:Array,default:void 0},showTriggers:{type:[Array,Function],default:void 0},hideTriggers:{type:[Array,Function],default:void 0},popperTriggers:{type:Array,default:void 0},popperShowTriggers:{type:[Array,Function],default:void 0},popperHideTriggers:{type:[Array,Function],default:void 0},container:{type:[String,Object,Nc,Boolean],default:void 0},boundary:{type:[String,Nc],default:void 0},strategy:{type:String,default:void 0},autoHide:{type:[Boolean,Function],default:void 0},handleResize:{type:Boolean,default:void 0},instantMove:{type:Boolean,default:void 0},eagerMount:{type:Boolean,default:void 0},popperClass:{type:[String,Array,Object],default:void 0},computeTransformOrigin:{type:Boolean,default:void 0},autoMinSize:{type:Boolean,default:void 0},autoSize:{type:[Boolean,String],default:void 0},autoMaxSize:{type:Boolean,default:void 0},autoBoundaryMaxSize:{type:Boolean,default:void 0},preventOverflow:{type:Boolean,default:void 0},overflowPadding:{type:[Number,String],default:void 0},arrowPadding:{type:[Number,String],default:void 0},arrowOverflow:{type:Boolean,default:void 0},flip:{type:Boolean,default:void 0},shift:{type:Boolean,default:void 0},shiftCrossAxis:{type:Boolean,default:void 0},noAutoFocus:{type:Boolean,default:void 0},disposeTimeout:{type:Number,default:void 0}},emits:{show:()=>!0,hide:()=>!0,"update:shown":r=>!0,"apply-show":()=>!0,"apply-hide":()=>!0,"close-group":()=>!0,"close-directive":()=>!0,"auto-hide":()=>!0,resize:()=>!0},computed:{finalTheme(){return this.theme??this.$options.vPopperTheme}},methods:{getTargetNodes(){return Array.from(this.$el.children).filter(r=>r!==this.$refs.popperContent.$el)}}});function gk(r,t,e,i,s,n){const o=je("PopperContent"),a=je("Popper");return W(),zt(a,Hr({ref:"popper"},r.$props,{theme:r.finalTheme,"target-nodes":r.getTargetNodes,"popper-node":()=>r.$refs.popperContent.$el,class:[r.themeClass],onShow:t[0]||(t[0]=()=>r.$emit("show")),onHide:t[1]||(t[1]=()=>r.$emit("hide")),"onUpdate:shown":t[2]||(t[2]=l=>r.$emit("update:shown",l)),onApplyShow:t[3]||(t[3]=()=>r.$emit("apply-show")),onApplyHide:t[4]||(t[4]=()=>r.$emit("apply-hide")),onCloseGroup:t[5]||(t[5]=()=>r.$emit("close-group")),onCloseDirective:t[6]||(t[6]=()=>r.$emit("close-directive")),onAutoHide:t[7]||(t[7]=()=>r.$emit("auto-hide")),onResize:t[8]||(t[8]=()=>r.$emit("resize"))}),{default:jt(({popperId:l,isShown:u,shouldMountContent:d,skipTransition:f,autoHide:m,show:v,hide:y,handleResize:b,onResize:w,classes:E,result:P})=>[Nt(r.$slots,"default",{shown:u,show:v,hide:y}),Ht(o,{ref:"popperContent","popper-id":l,theme:r.finalTheme,shown:u,mounted:d,"skip-transition":f,"auto-hide":m,"handle-resize":b,classes:E,result:P,onHide:y,onResize:w},{default:jt(()=>[Nt(r.$slots,"popper",{shown:u,hide:y})]),_:2},1032,["popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:3},16,["theme","target-nodes","popper-node","class"])}const Du=Ja(mk,[["render",gk]]),vk={...Du,name:"VDropdown",vPopperTheme:"dropdown"},yk={...Du,name:"VMenu",vPopperTheme:"menu"},_k={...Du,name:"VTooltip",vPopperTheme:"tooltip"},bk=It({name:"VTooltipDirective",components:{Popper:Sy(),PopperContent:Py},mixins:[Iy],inheritAttrs:!1,props:{theme:{type:String,default:"tooltip"},html:{type:Boolean,default:r=>Mn(r.theme,"html")},content:{type:[String,Number,Function],default:null},loadingContent:{type:String,default:r=>Mn(r.theme,"loadingContent")},targetNodes:{type:Function,required:!0}},data(){return{asyncContent:null}},computed:{isContentAsync(){return typeof this.content=="function"},loading(){return this.isContentAsync&&this.asyncContent==null},finalContent(){return this.isContentAsync?this.loading?this.loadingContent:this.asyncContent:this.content}},watch:{content:{handler(){this.fetchContent(!0)},immediate:!0},async finalContent(){await this.$nextTick(),this.$refs.popper.onResize()}},created(){this.$_fetchId=0},methods:{fetchContent(r){if(typeof this.content=="function"&&this.$_isShown&&(r||!this.$_loading&&this.asyncContent==null)){this.asyncContent=null,this.$_loading=!0;const t=++this.$_fetchId,e=this.content(this);e.then?e.then(i=>this.onResult(t,i)):this.onResult(t,e)}},onResult(r,t){r===this.$_fetchId&&(this.$_loading=!1,this.asyncContent=t)},onShow(){this.$_isShown=!0,this.fetchContent()},onHide(){this.$_isShown=!1}}}),xk=["innerHTML"],wk=["textContent"];function Tk(r,t,e,i,s,n){const o=je("PopperContent"),a=je("Popper");return W(),zt(a,Hr({ref:"popper"},r.$attrs,{theme:r.theme,"target-nodes":r.targetNodes,"popper-node":()=>r.$refs.popperContent.$el,onApplyShow:r.onShow,onApplyHide:r.onHide}),{default:jt(({popperId:l,isShown:u,shouldMountContent:d,skipTransition:f,autoHide:m,hide:v,handleResize:y,onResize:b,classes:w,result:E})=>[Ht(o,{ref:"popperContent",class:re({"v-popper--tooltip-loading":r.loading}),"popper-id":l,theme:r.theme,shown:u,mounted:d,"skip-transition":f,"auto-hide":m,"handle-resize":y,classes:w,result:E,onHide:v,onResize:b},{default:jt(()=>[r.html?(W(),at("div",{key:0,innerHTML:r.finalContent},null,8,xk)):(W(),at("div",{key:1,textContent:te(r.finalContent)},null,8,wk))]),_:2},1032,["class","popper-id","theme","shown","mounted","skip-transition","auto-hide","handle-resize","classes","result","onHide","onResize"])]),_:1},16,["theme","target-nodes","popper-node","onApplyShow","onApplyHide"])}const Ek=Ja(bk,[["render",Tk]]),Ry="v-popper--has-tooltip";function Sk(r,t){let e=r.placement;if(!e&&t)for(const i of Ey)t[i]&&(e=i);return e||(e=Mn(r.theme||"tooltip","placement")),e}function My(r,t,e){let i;const s=typeof t;return s==="string"?i={content:t}:t&&s==="object"?i=t:i={content:!1},i.placement=Sk(i,e),i.targetNodes=()=>[r],i.referenceNode=()=>r,i}let Ch,kn,Ak=0;function Ck(){if(Ch)return;kn=yt([]),Ch=am({name:"VTooltipDirectiveApp",setup(){return{directives:kn}},render(){return this.directives.map(t=>p0(Ek,{...t.options,shown:t.shown||t.options.shown,key:t.id}))},devtools:{hide:!0}});const r=document.createElement("div");document.body.appendChild(r),Ch.mount(r)}function Pk(r,t,e){Ck();const i=yt(My(r,t,e)),s=yt(!1),n={id:Ak++,options:i,shown:s};return kn.value.push(n),r.classList&&r.classList.add(Ry),r.$_popper={options:i,item:n,show(){s.value=!0},hide(){s.value=!1}}}function ky(r){if(r.$_popper){const t=kn.value.indexOf(r.$_popper.item);t!==-1&&kn.value.splice(t,1),delete r.$_popper,delete r.$_popperOldShown,delete r.$_popperMountTarget}r.classList&&r.classList.remove(Ry)}function em(r,{value:t,modifiers:e}){const i=My(r,t,e);if(!i.content||Mn(i.theme||"tooltip","disabled"))ky(r);else{let s;r.$_popper?(s=r.$_popper,s.options.value=i):s=Pk(r,t,e),typeof t.shown<"u"&&t.shown!==r.$_popperOldShown&&(r.$_popperOldShown=t.shown,t.shown?s.show():s.hide())}}const Ik={beforeMount:em,updated:em,beforeUnmount(r){ky(r)}};function rm(r){r.addEventListener("mousedown",wa),r.addEventListener("click",wa),r.addEventListener("touchstart",Dy,Is?{passive:!0}:!1)}function im(r){r.removeEventListener("mousedown",wa),r.removeEventListener("click",wa),r.removeEventListener("touchstart",Dy),r.removeEventListener("touchend",Oy),r.removeEventListener("touchcancel",By)}function wa(r){const t=r.currentTarget;r.closePopover=!t.$_vclosepopover_touch,r.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}function Dy(r){if(r.changedTouches.length===1){const t=r.currentTarget;t.$_vclosepopover_touch=!0;const e=r.changedTouches[0];t.$_vclosepopover_touchPoint=e,t.addEventListener("touchend",Oy),t.addEventListener("touchcancel",By)}}function Oy(r){const t=r.currentTarget;if(t.$_vclosepopover_touch=!1,r.changedTouches.length===1){const e=r.changedTouches[0],i=t.$_vclosepopover_touchPoint;r.closePopover=Math.abs(e.screenY-i.screenY)<20&&Math.abs(e.screenX-i.screenX)<20,r.closeAllPopover=t.$_closePopoverModifiers&&!!t.$_closePopoverModifiers.all}}function By(r){const t=r.currentTarget;t.$_vclosepopover_touch=!1}const Rk={beforeMount(r,{value:t,modifiers:e}){r.$_closePopoverModifiers=e,(typeof t>"u"||t)&&rm(r)},updated(r,{value:t,oldValue:e,modifiers:i}){r.$_closePopoverModifiers=i,t!==e&&(typeof t>"u"||t?rm(r):im(r))},beforeUnmount(r){im(r)}};function Mk(r,t={}){r.$_vTooltipInstalled||(r.$_vTooltipInstalled=!0,wy(sr,t),r.directive("tooltip",Ik),r.directive("close-popper",Rk),r.component("VTooltip",_k),r.component("VDropdown",vk),r.component("VMenu",yk))}const kk={version:"5.2.2",install:Mk,options:sr};async function Dk({app:r},t){const e={};r.use(kk,Object.assign(e,t.value.siteConfig.floatingVue||{}))}const Ok=async({head:r,isClient:t})=>{t||r==null||r.use(V0())},Bk={intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Template"}},hi:{t:0,b:{t:2,i:[{t:3}],s:"Hello, Valaxy!"}}}},Lk={intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy 模版"}},hi:{t:0,b:{t:2,i:[{t:3}],s:"你好，Valaxy"}}}},Fk={valaxy_theme_sakura:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy Theme Sakura"}},statistics:{pv:{t:0,b:{t:2,i:[{t:3}],s:"Page views"}}}},Nk={valaxy_theme_sakura:{t:0,b:{t:2,i:[{t:3}],s:"Valaxy 主题 Sakura"}},statistics:{pv:{t:0,b:{t:2,i:[{t:3}],s:"浏览量"}}}},Uk={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}},go:{t:0,b:{t:2,i:[{t:3}],s:"GO"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"Switch to light mode"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"Switch to dark mode"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"Change languages"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"Appearance"}}},intro:{desc:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"Theme Yun"},{t:2,i:[{t:3}],s:"Valaxy"}]}},hi:{t:0,b:{t:2,i:[{t:3,v:"Hi, "},{t:4,k:"name"},{t:3,v:"!"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"Oops! Space collapsed!"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"Archive"}},category:{t:0,b:{t:2,i:[{t:3}],s:"Category"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"Tag"}},album:{t:0,b:{t:2,i:[{t:3}],s:"Album"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"Gallery"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"Menu"}},home:{t:0,b:{t:2,i:[{t:3}],s:"Home"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"Archives"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"Categories"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"Tags"}},about:{t:0,b:{t:2,i:[{t:3}],s:"About"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"Overview"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"Table of Contents"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"Return to top"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"DECRYPT"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"Posted on "}},edited:{t:0,b:{t:2,i:[{t:3}],s:"Edited on "}},created:{t:0,b:{t:2,i:[{t:3}],s:"Created"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"Modified"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"Edit this post"}},more:{t:0,b:{t:2,i:[{t:3}],s:"more"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"Untitled"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"This post does not have a Table of Contents"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"Views"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"Comments"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"Related posts"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"View link"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"READ MORE"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"Cover"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"This article was last updated "},{t:4,k:"ago"},{t:3,v:". The information described in this article may have changed."}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"Post author"}},link:{t:0,b:{t:2,i:[{t:3}],s:"Post link"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"Copyright Notice"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"All articles in this blog are licensed under "},{t:5,i:0},{t:3,v:" unless otherwise stated."}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"Powered by "},{t:5,i:0}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"Theme"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"Total Views"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"Total Visitors"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No posts"},{t:2,i:[{t:3}],s:"1 post"},{t:2,i:[{t:4,k:"count"},{t:3,v:" posts"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No categories"},{t:2,i:[{t:3}],s:"1 category"},{t:2,i:[{t:4,k:"count"},{t:3,v:" categories"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No tags"},{t:2,i:[{t:3}],s:"1 tag"},{t:2,i:[{t:4,k:"count"},{t:3,v:" tags"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No album"},{t:2,i:[{t:3}],s:"1 album"},{t:2,i:[{t:4,k:"count"},{t:3,v:" albums"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"No photo"},{t:2,i:[{t:3}],s:"1 photo"},{t:2,i:[{t:4,k:"count"},{t:3,v:" photos"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"Uncategorized"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"Searching..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"We could not find any results for the search: "},{t:4,k:"query"},{t:3,v:"."}]}},hits_time:{t:0,b:{t:2,i:[{t:4,k:"hits"},{t:3,v:" results found in "},{t:4,k:"time"},{t:3,v:" ms"}]}},hits:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" results found"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:", "}},period:{t:0,b:{t:2,i:[{t:3}],s:". "}},colon:{t:0,b:{t:2,i:[{t:3}],s:": "}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"Donate"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"Back"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"Word count in article"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"Total words"}},time:{t:0,b:{t:2,i:[{t:3}],s:"Reading time"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"Total reading time"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Day"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Days"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Hour"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Hours"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Minute"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Minutes"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 Second"},{t:2,i:[{t:4,k:"count"},{t:3,v:" Seconds"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"Last updated"}}}},$k={button:{about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},back:{t:0,b:{t:2,i:[{t:3}],s:"返回"}},go:{t:0,b:{t:2,i:[{t:3}],s:"确定"}},home:{t:0,b:{t:2,i:[{t:3}],s:"首页"}},toggle_light:{t:0,b:{t:2,i:[{t:3}],s:"切换亮色模式"}},toggle_dark:{t:0,b:{t:2,i:[{t:3}],s:"切换深色模式"}},toggle_langs:{t:0,b:{t:2,i:[{t:3}],s:"切换语言"}},appearance:{t:0,b:{t:2,i:[{t:3}],s:"外观"}}},intro:{desc:{t:0,b:{t:2,i:[{t:3}],s:"主题 Yun"}},hi:{t:0,b:{t:2,i:[{t:3,v:"你好，"},{t:4,k:"name"}]}}},"not-found":{t:0,b:{t:2,i:[{t:3}],s:"未找到页面"}},title:{archive:{t:0,b:{t:2,i:[{t:3}],s:"归档"}},category:{t:0,b:{t:2,i:[{t:3}],s:"分类"}},tag:{t:0,b:{t:2,i:[{t:3}],s:"标签"}},album:{t:0,b:{t:2,i:[{t:3}],s:"相册"}},gallery:{t:0,b:{t:2,i:[{t:3}],s:"图片库"}}},menu:{title:{t:0,b:{t:2,i:[{t:3}],s:"菜单"}},home:{t:0,b:{t:2,i:[{t:3}],s:"首页"}},archives:{t:0,b:{t:2,i:[{t:3}],s:"归档"}},categories:{t:0,b:{t:2,i:[{t:3}],s:"分类"}},tags:{t:0,b:{t:2,i:[{t:3}],s:"标签"}},about:{t:0,b:{t:2,i:[{t:3}],s:"关于"}},search:{t:0,b:{t:2,i:[{t:3}],s:"搜索"}}},sidebar:{overview:{t:0,b:{t:2,i:[{t:3}],s:"站点概览"}},toc:{t:0,b:{t:2,i:[{t:3}],s:"文章目录"}},return_top:{t:0,b:{t:2,i:[{t:3}],s:"返回顶部"}}},post:{decrypt:{t:0,b:{t:2,i:[{t:3}],s:"解密"}},posted:{t:0,b:{t:2,i:[{t:3}],s:"发表于"}},edited:{t:0,b:{t:2,i:[{t:3}],s:"更新于"}},created:{t:0,b:{t:2,i:[{t:3}],s:"创建时间"}},modified:{t:0,b:{t:2,i:[{t:3}],s:"修改时间"}},edit:{t:0,b:{t:2,i:[{t:3}],s:"编辑"}},more:{t:0,b:{t:2,i:[{t:3}],s:"更多"}},untitled:{t:0,b:{t:2,i:[{t:3}],s:"未命名"}},toc_empty:{t:0,b:{t:2,i:[{t:3}],s:"此文章未包含目录"}},pageview_count:{t:0,b:{t:2,i:[{t:3}],s:"阅读次数"}},comment_count:{t:0,b:{t:2,i:[{t:3}],s:"评论数"}},related_posts:{t:0,b:{t:2,i:[{t:3}],s:"相关文章"}},view_link:{t:0,b:{t:2,i:[{t:3}],s:"查看链接"}},read_more:{t:0,b:{t:2,i:[{t:3}],s:"阅读更多"}},cover:{t:0,b:{t:2,i:[{t:3}],s:"封面"}},time_warning:{t:0,b:{t:2,i:[{t:3,v:"本文最后更新于 "},{t:4,k:"ago"},{t:3,v:"，文中所描述的信息可能已发生改变。"}]}},copyright:{author:{t:0,b:{t:2,i:[{t:3}],s:"本文作者"}},link:{t:0,b:{t:2,i:[{t:3}],s:"本文链接"}},license_title:{t:0,b:{t:2,i:[{t:3}],s:"版权声明"}},license_content:{t:0,b:{t:2,i:[{t:3,v:"本博客所有文章除特别声明外，均默认采用 "},{t:5,i:0},{t:3,v:" 许可协议。"}]}}}},footer:{powered:{t:0,b:{t:2,i:[{t:3,v:"由 "},{t:5,i:0},{t:3,v:" 驱动"}]}},theme:{t:0,b:{t:2,i:[{t:3}],s:"主题"}},total_views:{t:0,b:{t:2,i:[{t:3}],s:"总访问量"}},total_visitors:{t:0,b:{t:2,i:[{t:3}],s:"总访客量"}}},counter:{archives:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无文章"},{t:2,i:[{t:3}],s:"共计 1 篇文章"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 篇文章"}]}]}},categories:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无分类"},{t:2,i:[{t:3}],s:"共计 1 个分类"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个分类"}]}]}},tags:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无标签"},{t:2,i:[{t:3}],s:"共计 1 个标签"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个标签"}]}]}},albums:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无相册"},{t:2,i:[{t:3}],s:"共计 1 个相册"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 个相册"}]}]}},photos:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"暂无照片"},{t:2,i:[{t:3}],s:"共计 1 张照片"},{t:2,i:[{t:3,v:"共计 "},{t:4,k:"count"},{t:3,v:" 张照片"}]}]}}},category:{uncategorized:{t:0,b:{t:2,i:[{t:3}],s:"未分类"}}},search:{placeholder:{t:0,b:{t:2,i:[{t:3}],s:"搜索..."}},empty:{t:0,b:{t:2,i:[{t:3,v:"找不到您查询的内容: "},{t:4,k:"query"}]}},hits_time:{t:0,b:{t:2,i:[{t:3,v:"找到 "},{t:4,k:"hits"},{t:3,v:" 条结果（用时 "},{t:4,k:"time"},{t:3,v:" 毫秒）"}]}},hits:{t:0,b:{t:2,i:[{t:3,v:"找到 "},{t:4,k:"count"},{t:3,v:" 条结果"}]}}},symbol:{comma:{t:0,b:{t:2,i:[{t:3}],s:"，"}},period:{t:0,b:{t:2,i:[{t:3}],s:"。"}},colon:{t:0,b:{t:2,i:[{t:3}],s:"："}}},reward:{donate:{t:0,b:{t:2,i:[{t:3}],s:"打赏"}}},accessibility:{back:{t:0,b:{t:2,i:[{t:3}],s:"返回"}}},statistics:{word:{t:0,b:{t:2,i:[{t:3}],s:"本文字数"}},word_total:{t:0,b:{t:2,i:[{t:3}],s:"站点总字数"}},time:{t:0,b:{t:2,i:[{t:3}],s:"阅读时长"}},time_total:{t:0,b:{t:2,i:[{t:3}],s:"站点总阅读时长"}}},time:{day:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 天"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 天"}]}]}},hour:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 小时"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 小时"}]}]}},minute:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 分"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 分"}]}]}},second:{t:0,b:{t:1,c:[{t:2,i:[{t:3}],s:"1 秒"},{t:2,i:[{t:4,k:"count"},{t:3,v:" 秒"}]}]}}},tooltip:{last_updated:{t:0,b:{t:2,i:[{t:3}],s:"最后更新于"}}}},Ne={"zh-CN":{},en:{}},Ls=qc((r,t,e)=>{if(t&&r[t]&&Array.isArray(r[t])&&Array.isArray(e))return r[t]=e,!0});Ne["zh-CN"]=Ls($k,Ne["zh-CN"]);Ne.en=Ls(Uk,Ne.en);Ne["zh-CN"]=Ls(Nk,Ne["zh-CN"]);Ne.en=Ls(Fk,Ne.en);Ne["zh-CN"]=Ls(Lk,Ne["zh-CN"]);Ne.en=Ls(Bk,Ne.en);const sm=T0({locale:"",messages:Ne});async function Gk({app:r,router:t},e){const i=Da("valaxy-locale",(e==null?void 0:e.value.siteConfig.lang)||"en");sm.global.locale.value=i.value,r.use(sm),t.isReady().then(()=>{})}function Hk(r,t){const e=r;Gk(r,t),Ok(r),w0(r),E0(r),Dk(r,t),EM(e)}const Uc=nx();function zk(r){r.app.component("AppLink",Iu)}const{redirectRoutes:jk,useVueRouter:Vk}=Uc.value.runtimeConfig.redirects;Vk&&Wc.push(...jk);Wc.forEach(r=>{var t;(t=r==null?void 0:r.children)==null||t.forEach(e=>{e.path=encodeURI(e.path)})});function Ly(r){return r.filter(t=>{var e,i;return t.children&&(t.children=Ly(t.children)),!((i=(e=t.meta)==null?void 0:e.frontmatter)!=null&&i.draft)})}const Wk=sw(Ly(Wc));uw(gM,{routes:Wk,base:"/",scrollBehavior(r,t){if(r.path!==t.path)return{top:0}}},r=>{const{app:t,router:e}=r,i=vM(e);t.provide(ix,i),t.use(g0,{router:e}),t.provide(Gm,Uc),zk(r),Hk(r,Uc)});export{SC as $,Ae as A,aD as B,cD as C,rD as D,Iu as E,Jx as F,Mf as G,oD as H,kx as I,fe as J,Bn as K,Nd as L,rT as M,dD as N,kt as O,pD as P,uD as Q,or as R,Ur as S,Lt as T,Yt as U,Nn as V,xu as W,dt as X,$v as Y,Fe as Z,eM as _,lu as a,pt as a0,_v as a1,jP as a2,ki as a3,ot as a4,tD as a5,Of as a6,ex as b,lD as c,Jb as d,hD as e,iD as f,sD as g,dx as h,Pr as i,Ve as j,Bs as k,ke as l,Qx as m,ay as n,zm as o,$x as p,mD as q,Rx as r,Dd as s,au as t,yM as u,pm as v,nD as w,Oa as x,ax as y,Qm as z};
