import{_ as K}from"./SakuraPage.vue_vue_type_style_index_0_lang.CjoIdmB9.js";import{_ as N}from"./SakuraPostList.Cb4pQHXo.js";import{c as j,e as D,g as O,a as T,h as U,b as F,d as M}from"./app.NFAAdwm6.js";import{u as W,a as V}from"./chunks/vue-router.CwyAnJZE.js";import{r as L,j as $,f as S,p as J,M as B,O as i,L as a,F as k,S as y,P as b,V as C,y as d,X as P,K as g,a1 as f,u as h,J as X,Y,a0 as z}from"./framework.DzQMb1nT.js";import"./chunks/dayjs.CPPL_t8N.js";import{u as R}from"./chunks/vue-i18n.BMpzDVHc.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.DHaAMvDf.js";import"./SakuraPostDate.DVDv30Iz.js";import"./chunks/pinia.j8_R8H-A.js";import"./chunks/nprogress.D6qpKeA8.js";function G(e){const c=L(!1),{top:p}=j(e);return D(e,([{isIntersecting:s}])=>{c.value=s}),{show:()=>{c.value||window.scrollTo(0,p.value)}}}const H={class:"category-list-item inline-flex cursor-pointer items-center"},Q={key:0,"i-ri-folder-add-line":""},Z={key:1,style:{color:"var(--sakura-c-primary)"},"i-ri-folder-reduce-line":""},I={key:0},ee={m:"l-1",font:"serif black"},te=$({__name:"SakuraCategory",props:{parentKey:{},category:{},level:{},collapsable:{type:Boolean,default:!0}},setup(e){const c=e,p=W(),o=V(),s=S(()=>{const t=o.query.category||"";return Array.isArray(t)?[t]:t.split("/")}),u=L(c.collapsable),{t:m}=R(),{locale:_}=R();function r(t){const n=_.value==="zh-CN"?"zh":_.value;return t[`title_${n}`]?t[`title_${n}`]:t.title}const v=L(),{show:x}=G(v);function w(t){p.push({query:{category:t}}),x()}return J(()=>{const t=document.querySelector(".post-collapse-container");t&&(v.value=t)}),(t,n)=>{const q=B("SakuraCategory",!0),A=B("RouterLink");return a(),i(k,null,[y("li",H,[y("span",{class:"folder-action inline-flex",onClick:n[0]||(n[0]=l=>u.value=!u.value)},[u.value?(a(),i("div",Q)):(a(),i("div",Z))]),y("span",{class:"category-name",m:"l-1",onClick:n[1]||(n[1]=l=>w(e.parentKey))},C(e.category.name==="Uncategorized"?d(m)("category.uncategorized"):e.category.name)+" ["+C(e.category.total)+"] ",1)]),u.value?b("v-if",!0):(a(),i("ul",I,[(a(!0),i(k,null,P(e.category.children.values(),(l,E)=>(a(),i("li",{key:E,class:"sakura-sidebar-item",m:"l-4 y-1"},[d(O)(l)?(a(),g(q,{key:0,"parent-key":e.parentKey?`${e.parentKey}/${l.name}`:l.name,category:l,collapsable:!s.value.includes(l.name)},null,8,["parent-key","category","collapsable"])):(a(),i(k,{key:1},[l.title?(a(),g(A,{key:0,to:l.path||"",class:"inline-flex items-center"},{default:f(()=>[n[2]||(n[2]=y("div",{"i-ri-file-text-line":""},null,-1)),y("span",ee,C(r(l)),1)]),_:2},1032,["to"])):b("v-if",!0)],64))]))),128))]))],64)}}}),ae=$({__name:"SakuraCategories",props:{categories:{},level:{default:0},collapsable:{type:Boolean,default:!0}},setup(e){const c=V(),p=S(()=>{const o=c.query.category||"";return Array.isArray(o)?[o]:o.split("/")});return(o,s)=>{const u=te;return a(!0),i(k,null,P(e.categories.values(),m=>(a(),i("ul",{key:m.name,class:"category-list",m:"l-4"},[h(u,{"parent-key":m.name,category:m,level:e.level+1,collapsable:!p.value.includes(m.name)},null,8,["parent-key","category","level","collapsable"])]))),128)}}}),oe=X(ae,[["__scopeId","data-v-111676b2"]]),se={text:"center",class:"yun-text-light",p:"2"},ne={key:0},re=$({__name:"SakuraCategoriesLayout",setup(e){const c=T(),{t:p}=R(),o=V(),s=S(()=>o.query.category||""),u=U(),m=S(()=>c.postList.filter(r=>r.categories&&s.value!=="Uncategorized"?typeof r.categories=="string"?r.categories===s.value:r.categories.join("/").startsWith(s.value)&&r.categories[0]===s.value.split("/")[0]:!r.categories&&s.value==="Uncategorized"?r.categories===void 0:!1));return(_,r)=>{const v=oe,x=N,w=B("RouterView"),t=K;return a(),g(t,{class:"sakura-categories-page"},{default:f(()=>[h(w,null,{default:f(({Component:n})=>[(a(),g(Y(n),null,{"main-content":f(()=>[z(_.$slots,"content",{},()=>[y("div",null,[y("div",se,C(d(p)("counter.categories",Array.from(d(u).children).length)),1),h(v,{categories:d(u).children},null,8,["categories"])])])]),"main-nav-before":f(()=>[z(_.$slots,"posts",{},()=>[s.value?(a(),i("div",ne,[h(x,{w:"full",posts:m.value},null,8,["posts"])])):b("v-if",!0),b(` <SakuraCard v-if="curCategory" class="post-collapse-container" m="t-4" w="full">
            <SakuraPostCollapse w="full" m="b-4" p="x-20 lt-sm:x-5" :posts="posts" />
          </SakuraCard> `)])]),_:3}))]),_:3})]),_:3})}}}),ve=$({__name:"categories",setup(e){return F([M({"@type":"CollectionPage"})]),(c,p)=>{const o=re;return a(),g(o)}}});export{ve as default};
