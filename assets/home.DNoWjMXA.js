var Xe=Object.defineProperty;var be=s=>{throw TypeError(s)};var Ke=(s,e,t)=>e in s?Xe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var x=(s,e,t)=>Ke(s,typeof e!="symbol"?e+"":e,t),Ae=(s,e,t)=>e.has(s)||be("Cannot "+t);var T=(s,e,t)=>(Ae(s,e,"read from private field"),t?t.call(s):e.get(s)),ue=(s,e,t)=>e.has(s)?be("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);var f=(s,e,t)=>(Ae(s,e,"access private method"),t);import{j as I,f as w,M as et,O as y,L as p,K as A,P as b,a1 as U,S as k,F as E,X as ne,Z as le,V as ve,W as C,r as ye,p as _e,q as Re,y as v,J as $,u as L,U as Le,w as D,a7 as tt,a0 as P,a2 as he,ad as st,a5 as it,ae as nt}from"./framework.DzQMb1nT.js";import{j as ke,k as B,l as H,m as He,_ as rt,n as at,w as ot,o as lt,p as Pe,q as ut,r as ht}from"./app.NFAAdwm6.js";import"./chunks/dayjs.CPPL_t8N.js";import{_ as ct}from"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.DHaAMvDf.js";import{a as dt,_ as pt}from"./SakuraPostList.Cb4pQHXo.js";import{u as ft,a as mt,o as gt}from"./chunks/vue-router.CwyAnJZE.js";import{a as vt}from"./hitokoto.DS5EjaPP.js";import"./chunks/pinia.j8_R8H-A.js";import"./chunks/vue-i18n.BMpzDVHc.js";import"./chunks/nprogress.D6qpKeA8.js";import"./SakuraPostDate.DVDv30Iz.js";function yt(){const s=ft();function e(n){return typeof n=="string"&&n.startsWith("http")}function t(n){e(n)?window.location.href=n:s.push({path:n})}return{isExternalLink:e,to:t}}const _t={class:"pagination"},kt=I({__name:"ValaxyPagination",props:{curPage:{},total:{},pageSize:{}},emits:["pageChange"],setup(s,{emit:e}){const t=s,n=e,a=w(()=>Math.ceil(t.total/t.pageSize)),r=w(()=>t.curPage===1||t.curPage===a.value?3:2);function u(i){return i===1||i===a.value?!0:i>t.curPage-r.value&&i<t.curPage+r.value}function h(i){return n("pageChange",i),i===1?"/":`/page/${i}`}return(i,l)=>{const d=et("RouterLink");return p(),y("nav",_t,[s.curPage!==1?(p(),A(d,{key:0,class:"page-number",to:h(s.curPage-1),"aria-label":"prev"},{default:U(()=>[...l[0]||(l[0]=[k("div",{"i-ri-arrow-left-s-line":""},null,-1)])]),_:1},8,["to"])):b("v-if",!0),(p(!0),y(E,null,ne(a.value,g=>(p(),y(E,null,[u(g)?(p(),A(d,{key:g,class:C(["page-number",s.curPage===g&&"active"]),to:h(g)},{default:U(()=>[le(ve(g),1)]),_:2},1032,["class","to"])):g===s.curPage-r.value?(p(),y("span",{key:`prev-space-${g}`,class:"space",disabled:""}," ... ")):g===s.curPage+r.value?(p(),y("span",{key:`next-space-${g}`,class:"space",disabled:""}," ... ")):b("v-if",!0)],64))),256)),s.curPage!==a.value?(p(),A(d,{key:1,class:"page-number",to:h(s.curPage+1),"aria-label":"next"},{default:U(()=>[...l[1]||(l[1]=[k("div",{"i-ri-arrow-right-s-line":""},null,-1)])]),_:1},8,["to"])):b("v-if",!0)])}}}),wt=I({__name:"SakuraPaginationStandard",props:{pageSize:{},total:{}},setup(s){const e=s,t=ke(),n=B(),a=H(),r=He({type:""}),u=w(()=>r.value),h=w(()=>n.curPage||1),i=w(()=>{var l;return e.pageSize||((l=a.value.pagination)==null?void 0:l.itemsPerPage)||t.value.pageSize});return(l,d)=>{const g=kt;return p(),A(g,{"cur-page":h.value,"page-size":i.value,total:s.total||u.value.length},null,8,["cur-page","page-size","total"])}}}),St={class:"sakura-pagination-scroll mb-17 mt-20 flex justify-center"},Tt={key:1,class:"text-center"},bt=I({__name:"SakuraPaginationInfiniteScroll",setup(s){const e=ke(),t=B(),n=H(),a=He({type:""}),r=n.value.pagination,u=w(()=>(r==null?void 0:r.itemsPerPage)||e.value.pageSize),h=w(()=>a.value),i=w(()=>r!=null&&r.animation?"sakura-fade-up":"identification"),l=ye(Math.ceil(h.value.length/u.value));function d(){var m;t.loadMultiple<l.value&&(t.loadMultiple+=1,(r!=null&&r.animation||(m=r==null?void 0:r.infiniteScrollOptions)!=null&&m.preload)&&S())}function g(m,_){m.forEach(N=>{var R;N.isIntersecting&&!N.target.classList.contains(i.value)&&(N.target.classList.add(i.value),t.paginationElementPositionsNumber+=1,t.paginationElementPositionsNumber===t.paginationTargets.length-1&&((R=r==null?void 0:r.infiniteScrollOptions)!=null&&R.preload)&&d())})}function S(){setTimeout(()=>{t.paginationTargets=Array.from(document.querySelectorAll(".article-list"));for(let m=t.paginationElementPositionsNumber;m<t.paginationTargets.length;m++){const _=document.getElementById(`article-${m}`);if(_===null){console.error(`Element with ID 'article-${m}' not found. This may prevent preload from working properly.`);return}r!=null&&r.animation&&_.classList.add("op-0"),t.paginationObserver.observe(_)}},0)}function c(){t.paginationTargets.forEach(m=>{var _;(_=t.paginationObserver)==null||_.unobserve(m)})}return _e(()=>{var m,_;(r!=null&&r.animation||(m=r==null?void 0:r.infiniteScrollOptions)!=null&&m.preload)&&(t.paginationTargets.length===0&&(t.paginationObserver=new IntersectionObserver(g,{threshold:((_=r.infiniteScrollOptions)==null?void 0:_.threshold)??.01})),S())}),Re(()=>{c()}),(m,_)=>(p(),y("nav",St,[v(t).loadMultiple<l.value?(p(),y("button",{key:0,class:"load-more-button px-8 py-2",onClick:d}," Previous ")):(p(),y("div",Tt," 很高兴你翻到这里，但是真的没有了... "))]))}}),At=$(bt,[["__scopeId","data-v-9fd3a1b2"]]),Pt=I({__name:"SakuraPagination",setup(s){const e=H();return(t,n)=>{const a=At,r=wt;return p(),y(E,null,[v(e).pagination.type==="infinite-scroll"?(p(),A(a,{key:0})):b("v-if",!0),v(e).pagination.type==="standard"?(p(),A(r,{key:1})):b("v-if",!0)],64)}}}),It={key:0,class:"sakura-pinned-post <md:hidden"},Ct={class:"sakura-card sakura-pinned-post-card flex"},xt=I({__name:"SakuraPinnedPost",props:{text:{},entries:{},icon:{}},setup(s){const e=s,t=H(),n=yt(),a=w(()=>{var i;return e.icon??((i=t.value.ui.pinnedPost)==null?void 0:i.icon)}),r=w(()=>{var i;return e.text??((i=t.value.pinnedPost)==null?void 0:i.text)}),u=w(()=>{var i;return e.entries??((i=t.value.pinnedPost)==null?void 0:i.entries)}),h=w(()=>{var i;return(i=t.value.ui.pinnedPost)==null?void 0:i.image});return(i,l)=>{var S;const d=dt,g=rt;return(S=u.value)!=null&&S.length?(p(),y("div",It,[L(d,{icon:a.value,text:r.value},null,8,["icon","text"]),k("div",Ct,[(p(!0),y(E,null,ne(u.value,(c,m)=>(p(),A(g,Le({key:m},{ref_for:!0},h.value,{"data-title":c.title,to:c.link,"data-desc":c.desc,overlay:!0,src:c.img,class:c.link?"cursor-pointer":"",onClick:_=>v(n).to(c.link||"")}),null,16,["data-title","to","data-desc","src","class","onClick"]))),128))])])):b("v-if",!0)}}}),Et=$(xt,[["__scopeId","data-v-41aea0ff"]]),Nt={key:0,m:"b-5 t-10",p5:"",class:"sakura-notice-board sakura-card",flex:"~ items-center"},Rt={class:"notice-board-content relative transition-all duration-500 md:px-8 <md:pt-6"},Lt=["innerHTML"],Ht=I({__name:"SakuraNoticeBoard",props:{icon:{},message:{}},setup(s){const e=s,t=H(),n=w(()=>{var r;return e.message||((r=t.value.notice)==null?void 0:r.message)}),a=w(()=>{var r;return e.icon||((r=t.value.ui.notice)==null?void 0:r.icon)});return(r,u)=>n.value?(p(),y("div",Nt,[k("div",Rt,[k("span",{class:C([a.value,"notice-icon absolute left-1 top-1.3 inline-block transition-all duration-500 <md:left-50% <md:top-0"])},null,2),k("span",{class:"notice-message",innerHTML:n.value},null,8,Lt)])])):b("v-if",!0)}}),Mt=$(Ht,[["__scopeId","data-v-043d2174"]]),Vt=I({__name:"SakuraScrollDown",props:{icon:{}},setup(s){const e=s,t=H(),{toDown:n}=at(),a=w(()=>{var r;return e.icon||((r=t.value.ui.scrollDown)==null?void 0:r.icon)});return(r,u)=>a.value?(p(),y("button",{key:0,class:"sakura-scroll-down",onClick:u[0]||(u[0]=(...h)=>v(n)&&v(n)(...h))},[k("span",{class:C([a.value,"sakura-scroll-down-icon sakura-anim-float inline-block"])},null,2)])):b("v-if",!0)}}),$t=$(Vt,[["__scopeId","data-v-afb75fa8"]]),qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAtFBMVEUAAABdTFRfTlZfTlZeTVVeTVVfTlZfTlZfTlZfTlZfTlZfTlZeTVVfTlZfTlZfTlZfTlZeTVVfTlZfTlbw7+Pf3NN6a26xn5ReTVXy8eW+rJ7p59zj4ddqWmHr6t7d2tDt7ODg3tTm5NrU0Mi9q52Sh4iJfX9vYGVoWF9jUlqqop+mlIvIw73RzcXY183JxL2UiYrMx8C3pZiflZSDdXh/cnXGwbuqmI+aj4+Pg4WyrKismpAMEQlmAAAAFHRSTlMA/Ng36d+lkmYqwRjqhoFAM+jGF+k1jLEAAAG4SURBVDjLjVNpd4IwEIQIHlSttkE2EoIBuSx42/P//69my6W0fe18YN9jJ7PJ7qzWYjTsE0PX56Q/HGnf0RuYOmRpkqQZ6Oag10nfTcbgxZtd6Pthvok9MKZ3N8cfwDsVgjFGqfqI4uSBdSVyT+B8oCqJEJwLRg9nIPfNeQJ7yehqVRKCQCgdGQGZVfUfYB8w6tqcXoEFEVjlPSZwliiPAtcMeYHJV4Gxd8C8ayu4baQs98Z40QGcKOajhULk1hH/vcJA9c9Mn1HcXjw5ztPCriMSCs8caUM95iXBWa8dJDjLpYpKU6xifaj1YcNoSTgerwkKbAN9jWQ7Rm8V1seXirDLiGakYUnAk11CmBqanvi0IXRKUD/R/ybMsUTAedghNCVIlqs5BG5NqC9L1fBYnpH6mawt8eGUBM6peiY2SnRfsawUBDZqZHoF+7nVDFvdGdberWI7LK1n/D5u48uX08owleEaw9gXmJaWsyAKaFBmhFvn+RtYj41pI4mZFitqv6FpW9tfnjnfSnvLpS99zov3Bdq+wcyCZJ9vFcf2fbmVeZyBNftt9Xa4evPp47+Xt7v+xu36fwLwPlAPnsX7kwAAAABJRU5ErkJggg==",Ut="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAABAlBMVEUAAABfTlZeTVVdS1ReTVVeTVVfTlZfTlZfTlZfTlZfTlZeTVVfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlZfTlbw7+Py8eVeTVW9q52akI/u7OHi4NWUgn1qWmHm5Nm+rJ7e29Hr6d7k4tjU0MiJfX9vYGVoWF/g3tSqop+/rZ5jUlrp59yCdXjRzcXIw72RhYbb2s/Y18zNyMHGwLq9t7G5qJqCcnN9b3J8a2x4aGzJxL22pJiViori4dbV0smhl5ayoJWdk5KejIWLf4GId3WxqaalnJq4ppmkkoqYhoGPfHl0ZGjJxb7CvLa1sKq4p5qpl45iU1lqIFriAAAAGXRSTlMA2On8+9+SZjcqGOrFv6akhoE1QTrVMBfpaHUHFAAAAftJREFUOMuNU+dy4jAQtk0PnbST1pFiYxuDOTC99wC55JLr7/8qJ0suhMzN5fuhGe1+23elCJlUQVbicUUupjLSe6STiRi0GvV6owWxRDJ9pr4oZUGzm8uaYdS6TVsDpXxxqr/KgbbrmBhjhNhjdvYa5CqR/lIGd4gw0jcbE3nAaOiCfBnay7CmmMnbus4IguL0QK748XOw1jE6A9Z7kBd5lMDl9sR6y3CmUOL1ZbUhtx/P9n1OJD6jq2W9apOwE4K76ePsC4tFnTbyJZBk/UtoHSy+99Wvc/cHQcIDIbijJTJSKmabyCd8rk5eFuua+FKKiB1LSQXYWSFBVasPr4sn6qeCm1CQ5NYIoSDEaqVW1d9Td2zyqHjZkiWlUcMh4flZZU4mh/lxyAm1hiLF6waKQghUV/ffRp6ZUY//g/AaEUQIEhEm6uSw6A1JEEJudTFq05AweTjMwyS7LMkiNLmHsMzHRZOKtL0yi2eN+vWyuNuKL+u3yRp13mp7RHBAEK1mw9oTcjosjmhYUlppjC0x7qe+UIfjVvhyl8E1uMKj6Xq0MDMoByvXCz2324HeYit3K3FUZOg5b5ZSt/TtEa5vTtZ+OqLWgBoDixq0T+n25xyur6QQlTzU192BtRk4/b4zcL7bfyB/8+70juL0lt7pfSrffvB4/3v+fwF0OGfEMV9avwAAAABJRU5ErkJggg==",Dt=["src"],Ft=I({__name:"SakuraPlayer",setup(s){const e=B(),t=w(()=>e.wallpaperIsPlaying?qt:Ut);return(n,a)=>(p(),y("img",{src:t.value,"z-5":"",class:"sakura-player sakura-anim-fly cursor-pointer",style:{"animation-duration":"2s","--translate-distance":"0.2em"},onClick:a[0]||(a[0]=(...r)=>v(e).togglePlayPause&&v(e).togglePlayPause(...r))},null,8,Dt))}}),Me=s=>Array.isArray(s),Ve=s=>Me(s)?s:[s];let Bt=function(s){let e=function(m){return Ve(m).forEach(_=>{var N;return c.set(Symbol((N=_.char)==null?void 0:N.innerText),a({..._}))}),this},t=()=>i().filter(m=>m.typeable),n=function(m,_){let N=[...c.keys()];c.set(N[m],a(_))},a=m=>(m.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},m),r=function(){c.forEach(m=>delete m.done)},u=function(){c=new Map,e(s)},h=()=>c,i=()=>Array.from(c.values()),l=m=>c.delete(m),d=()=>{const m=[];for(let[,_]of h())_.done||m.push(_);return m},g=(m=!1)=>m?i():i().filter(_=>!_.done),S=(m,_=!1)=>_?c.delete(m):c.get(m).done=!0,c=new Map;return e(s),{add:e,set:n,wipe:u,done:S,reset:r,destroy:l,getItems:g,getQueue:h,getTypeable:t,getPendingQueueItems:d}};const $e="data-typeit-id",F="ti-cursor",Ot="END",zt={started:!1,completed:!1,frozen:!1,destroyed:!1},z={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(s=>({opacity:s})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},Wt=`[${$e}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,ee=s=>document.createElement(s),we=s=>document.createTextNode(s),qe=(s,e="")=>{let t=ee("style");t.id=e,t.appendChild(we(s)),document.head.appendChild(t)},Ie=s=>(Me(s)||(s=[s/2,s/2]),s),Ce=(s,e)=>Math.abs(Math.random()*(s+e-(s-e))+(s-e));let xe=s=>s/2;function Zt(s){let{speed:e,deleteSpeed:t,lifeLike:n}=s;return t=t!==null?t:e/3,n?[Ce(e,xe(e)),Ce(t,xe(t))]:[e,t]}const Ue=s=>Array.from(s);let Se=s=>([...s.childNodes].forEach(e=>{if(e.nodeValue){[...e.nodeValue].forEach(t=>{e.parentNode.insertBefore(we(t),e)}),e.remove();return}Se(e)}),s);const De=s=>{let e=document.implementation.createHTMLDocument();return e.body.innerHTML=s,Se(e.body)};function Fe(s,e=!1,t=!1){let n=s.querySelector(`.${F}`),a=document.createTreeWalker(s,NodeFilter.SHOW_ALL,{acceptNode:h=>{var i,l;if(n&&t){if((i=h.classList)!=null&&i.contains(F))return NodeFilter.FILTER_ACCEPT;if(n.contains(h))return NodeFilter.FILTER_REJECT}return(l=h.classList)!=null&&l.contains(F)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),r,u=[];for(;r=a.nextNode();)r.originalParent||(r.originalParent=r.parentNode),u.push(r);return e?u.reverse():u}function jt(s){return Fe(De(s))}function Gt(s,e=!0){return e?jt(s):Ue(s).map(we)}const Qt=({index:s,newIndex:e,queueItems:t,cleanUp:n})=>{for(let a=s+1;a<e+1;a++)n(t[a][0])},Be=s=>Number.isInteger(s),Ee=({queueItems:s,selector:e,cursorPosition:t,to:n})=>{if(Be(e))return e*-1;let a=new RegExp(Ot,"i").test(n),r=e?[...s].reverse().findIndex(({char:h})=>{let i=h.parentElement,l=i.matches(e);return a&&l?!0:l&&i.firstChild.isSameNode(h)}):-1;r<0&&(r=a?0:s.length-1);let u=a?0:1;return r-t+u},Jt=s=>(s.forEach(clearTimeout),[]),X=(s,e)=>new Array(e).fill(s);let re=s=>new Promise(e=>{requestAnimationFrame(async()=>{e(await s())})}),Oe=s=>s==null?void 0:s.getAnimations().find(e=>e.id===s.dataset.tiAnimationId),ze=({cursor:s,frames:e,options:t})=>{let n=s.animate(e,t);return n.pause(),n.id=s.dataset.tiAnimationId,re(()=>{re(()=>{n.play()})}),n},Yt=({cursor:s,options:e,cursorOptions:t})=>{if(!s||!t)return;let n=Oe(s),a;n&&(e.delay=n.effect.getComputedTiming().delay,a=n.currentTime,n.cancel());let r=ze({cursor:s,frames:t.animation.frames,options:e});return a&&(r.currentTime=a),r},Ne=s=>{var e;return(e=s.func)==null?void 0:e.call(null)},Xt=async({index:s,queueItems:e,wait:t,cursor:n,cursorOptions:a})=>{let r=e[s][1],u=[],h=s,i=r,l=()=>i&&!i.delay,d=r.shouldPauseCursor()&&a.autoPause;for(;l();)u.push(i),l()&&h++,i=e[h]?e[h][1]:null;if(u.length)return await re(async()=>{for(let c of u)await Ne(c)}),h-1;let g=Oe(n),S;return g&&(S={...g.effect.getComputedTiming(),delay:d?a.autoPauseDelay:0}),await t(async()=>{g&&d&&g.cancel(),await re(()=>{Ne(r)})},r.delay),await Yt({cursor:n,options:S,cursorOptions:a}),s};const Kt=(s,e)=>{new IntersectionObserver((n,a)=>{n.forEach(r=>{r.isIntersecting&&(e(),a.unobserve(s))})},{threshold:1}).observe(s)},es=()=>Math.random().toString().substring(2,9),ae=s=>"value"in s;let ts=s=>ae(s)?Ue(s.value):Fe(s,!0).filter(e=>!(e.childNodes.length>0)),O=s=>typeof s=="function"?s():s,Te=(s,e=document,t=!1)=>e[`querySelector${t?"All":""}`](s),ss=s=>/body/i.test(s==null?void 0:s.tagName),is=(s,e)=>{if(ae(s)){s.value=`${s.value}${e.textContent}`;return}e.innerHTML="";let t=ss(e.originalParent)?s:e.originalParent||s,n=Te("."+F,t)||null;n&&n.parentElement!==t&&(t=n.parentElement),t.insertBefore(e,n)};const ns=s=>/<(.+)>(.*?)<\/(.+)>/.test(s.outerHTML),W=(s,e)=>Object.assign({},s,e);let rs=s=>{var e,t;if(typeof s=="object"){let n={},{frames:a,options:r}=z.cursor.animation;return n.animation=s.animation||{},n.animation.frames=((e=s.animation)==null?void 0:e.frames)||a,n.animation.options=W(r,((t=s.animation)==null?void 0:t.options)||{}),n.autoPause=s.autoPause??z.cursor.autoPause,n.autoPauseDelay=s.autoPauseDelay||z.cursor.autoPauseDelay,n}return s===!0?z.cursor:s};const as=(s,e)=>{if(!s)return;let t=s.parentNode;(t.childNodes.length>1||t.isSameNode(e)?s:t).remove()},os=(s,e,t)=>{let n=e[t-1],a=Te(`.${F}`,s);s=(n==null?void 0:n.parentNode)||s,s.insertBefore(a,n||null)};function ls(s){return typeof s=="string"?Te(s):s}let us={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},hs=(s,e)=>{let n=`${`[${$e}='${s}']`} .${F}`,a=getComputedStyle(e),r=Object.entries(us).reduce((u,[h,i])=>`${u} ${h}: var(--ti-cursor-${h}, ${i||a[h]});`,"");qe(`${n} { display: inline-block; width: 0; ${r} }`,s)};function cs(s){return s.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let ds=(s,e,t)=>Math.min(Math.max(e+s,0),t.length),ps=(s,e,t)=>new Promise(n=>{let a=async()=>{await s(),n()};t.push(setTimeout(a,e||0))});var o,We,Z,ce,Ze,de,pe,fe,te,M,je,j,G,Ge,oe,Qe,Je,me,se,Q,ie,q,J,Y,ge,V;class fs{constructor(e,t={}){ue(this,o);x(this,"element");x(this,"timeouts");x(this,"cursorPosition");x(this,"predictedCursorPosition");x(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1,firing:!1});x(this,"opts");x(this,"id");x(this,"queue");x(this,"cursor");x(this,"flushCallback",null);x(this,"unfreeze",()=>{});x(this,"is",function(e){return this.statuses[e]});ue(this,oe,e=>{this.opts.cursor=rs(e.cursor??z.cursor),this.opts.strings=f(this,o,Qe).call(this,Ve(this.opts.strings)),this.opts=W(this.opts,{html:!T(this,o,Y)&&this.opts.html,nextStringDelay:Ie(this.opts.nextStringDelay),loopDelay:Ie(this.opts.loopDelay)})});this.opts=W(z,t),this.element=ls(e),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=W({},zt),this.id=es(),this.queue=Bt([{delay:this.opts.startDelay}]),T(this,oe).call(this,t),this.cursor=f(this,o,Je).call(this),this.element.dataset.typeitId=this.id,qe(Wt),this.opts.strings.length&&f(this,o,Ge).call(this)}go(){return this.statuses.started?this:(f(this,o,fe).call(this),this.opts.waitUntilVisible?(Kt(this.element,f(this,o,Z).bind(this)),this):(f(this,o,Z).call(this),this))}destroy(e=!0){this.timeouts=Jt(this.timeouts),O(e)&&this.cursor&&f(this,o,ie).call(this,this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let t in this.statuses)this.statuses[t]=!1;return this.element[f(this,o,te).call(this)?"value":"innerHTML"]="",this}type(e,t={}){e=O(e);let{instant:n}=t,a=f(this,o,j).call(this,t),u=Gt(e,this.opts.html).map(i=>({func:()=>f(this,o,se).call(this,i),char:i,delay:n||ns(i)?0:f(this,o,q).call(this),typeable:i.nodeType===Node.TEXT_NODE})),h=[a[0],{func:async()=>await this.opts.beforeString(e,this)},...u,{func:async()=>await this.opts.afterString(e,this)},a[1]];return f(this,o,M).call(this,h,t)}break(e={}){return f(this,o,M).call(this,{func:()=>f(this,o,se).call(this,ee("BR")),typeable:!0},e)}move(e,t={}){e=O(e);let n=f(this,o,j).call(this,t),{instant:a,to:r}=t,u=Ee({queueItems:this.queue.getTypeable(),selector:e===null?"":e,to:r,cursorPosition:T(this,o,J)}),h=u<0?-1:1;return this.predictedCursorPosition=T(this,o,J)+u,f(this,o,M).call(this,[n[0],...X({func:()=>f(this,o,ce).call(this,h),delay:a?0:f(this,o,q).call(this),cursorable:!0},Math.abs(u)),n[1]],t)}exec(e,t={}){let n=f(this,o,j).call(this,t);return f(this,o,M).call(this,[n[0],{func:()=>e(this)},n[1]],t)}options(e,t={}){return e=O(e),f(this,o,G).call(this,e),f(this,o,M).call(this,{},t)}pause(e,t={}){return f(this,o,M).call(this,{delay:O(e)},t)}delete(e=null,t={}){e=O(e);let n=f(this,o,j).call(this,t),a=e,{instant:r,to:u}=t,h=this.queue.getTypeable(),i=a===null?h.length:Be(a)?a:Ee({queueItems:h,selector:a,cursorPosition:T(this,o,J),to:u});return f(this,o,M).call(this,[n[0],...X({func:f(this,o,Q).bind(this),delay:r?0:f(this,o,q).call(this,1),deletable:!0},i),n[1]],t)}freeze(){this.statuses.frozen=!0}flush(e=null){return this.flushCallback=e||this.flushCallback,this.statuses.firing?this:(f(this,o,fe).call(this),f(this,o,Z).call(this,!1).then(()=>{if(this.queue.getPendingQueueItems().length>0)return this.flush();this.flushCallback(),this.flushCallback=null}),this)}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return f(this,o,G).call(this,e)}getElement(){return this.element}empty(e={}){return f(this,o,M).call(this,{func:f(this,o,We).bind(this)},e)}}o=new WeakSet,We=async function(){if(f(this,o,te).call(this)){this.element.value="";return}T(this,o,V).forEach(f(this,o,ie).bind(this))},Z=async function(e=!0){this.statuses.started=!0,this.statuses.firing=!0;let t=n=>{this.queue.done(n,!e)};try{let n=[...this.queue.getQueue()];for(let r=0;r<n.length;r++){let[u,h]=n[r];if(!h.done){if(!h.deletable||h.deletable&&T(this,o,V).length){let i=await f(this,o,de).call(this,r,n);Qt({index:r,newIndex:i,queueItems:n,cleanUp:t}),r=i}t(u)}}if(!e)return this.statuses.firing=!1,this;if(this.statuses.completed=!0,this.statuses.firing=!1,await this.opts.afterComplete(this),!this.opts.loop)throw"";let a=this.opts.loopDelay;f(this,o,pe).call(this,async()=>{await f(this,o,Ze).call(this,a[0]),f(this,o,Z).call(this)},a[1])}catch{}return this.statuses.firing=!1,this},ce=async function(e){this.cursorPosition=ds(e,this.cursorPosition,T(this,o,V)),os(this.element,T(this,o,V),this.cursorPosition)},Ze=async function(e){let t=T(this,o,J);t&&await f(this,o,ce).call(this,{value:t});let n=T(this,o,V).map(a=>[Symbol(),{func:f(this,o,Q).bind(this),delay:f(this,o,q).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let a=0;a<n.length;a++)await f(this,o,de).call(this,a,n);this.queue.reset(),this.queue.set(0,{delay:e})},de=function(e,t){return Xt({index:e,queueItems:t,wait:f(this,o,pe).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},pe=async function(e,t,n=!1){this.statuses.frozen&&await new Promise(a=>{this.unfreeze=()=>{this.statuses.frozen=!1,a()}}),n||await this.opts.beforeStep(this),await ps(e,t,this.timeouts),n||await this.opts.afterStep(this)},fe=async function(){if(!f(this,o,te).call(this)&&this.cursor&&this.element.appendChild(this.cursor),T(this,o,ge)){hs(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:t,options:n}=e;ze({frames:t,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...n}})}},te=function(){return ae(this.element)},M=function(e,t){return this.queue.add(e),f(this,o,je).call(this,t),this},je=function(e={}){let t=e.delay;t&&this.queue.add({delay:t})},j=function(e={}){return[{func:()=>f(this,o,G).call(this,e)},{func:()=>f(this,o,G).call(this,this.opts)}]},G=async function(e){this.opts=W(this.opts,e)},Ge=function(){let e=this.opts.strings.filter(t=>!!t);e.forEach((t,n)=>{if(this.type(t),n+1===e.length)return;let a=this.opts.breakLines?[{func:()=>f(this,o,se).call(this,ee("BR")),typeable:!0}]:X({func:f(this,o,Q).bind(this),delay:f(this,o,q).call(this,1)},this.queue.getTypeable().length);f(this,o,me).call(this,a)})},oe=new WeakMap,Qe=function(e){let t=this.element.innerHTML;return t?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=t,Se(this.element),f(this,o,me).call(this,X({func:f(this,o,Q).bind(this),delay:f(this,o,q).call(this,1),deletable:!0},T(this,o,V).length)),e):cs(t).concat(e)):e},Je=function(){if(T(this,o,Y))return null;let e=ee("span");return e.className=F,T(this,o,ge)?(e.innerHTML=De(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)},me=function(e){let t=this.opts.nextStringDelay;this.queue.add([{delay:t[0]},...e,{delay:t[1]}])},se=function(e){is(this.element,e)},Q=function(){T(this,o,V).length&&(T(this,o,Y)?this.element.value=this.element.value.slice(0,-1):f(this,o,ie).call(this,T(this,o,V)[this.cursorPosition]))},ie=function(e){as(e,this.element)},q=function(e=0){return Zt(this.opts)[e]},J=function(){return this.predictedCursorPosition??this.cursorPosition},Y=function(){return ae(this.element)},ge=function(){return!!this.opts.cursor&&!T(this,o,Y)},V=function(){return ts(this.element)};const Ye=I({__name:"SakuraTypewriter",props:{delay:{default:75},deleteSpeed:{},loop:{type:Boolean},pauseFor:{},typeString:{default:""},deleteAll:{type:[Number,Boolean,Array]}},emits:["typingFinished","deletionFinished","allTypingFinished"],setup(s,{emit:e}){const t=s,n=e,a=ye(null);let r=!1,u=null;function h(i){const l={deleteSpeed:t.deleteSpeed,loop:t.loop};u===null&&(u=new fs(a.value,l)),i.forEach((d,g)=>{if(u.type(d),typeof t.pauseFor=="number"?u.pause(t.pauseFor):Array.isArray(t.pauseFor)&&u.pause(t.pauseFor[g]),u.exec(()=>n("typingFinished")),g===i.length-1&&u.exec(()=>n("allTypingFinished")),t.deleteAll===!0)u.delete();else if(typeof t.deleteAll=="number")for(let S=0;S<d.length;S++)u.delete(1,{delay:t.deleteAll});else if(Array.isArray(t.deleteAll))for(let S=0;S<d.length;S++)u.delete(1,{delay:t.deleteAll[g]})}),u.flush(()=>{n("deletionFinished"),r&&(u=u.reset(),h(Array.isArray(t.typeString)?t.typeString:[t.typeString]),r=!1)})}return D(()=>t.typeString,()=>r=!0),_e(()=>{t.typeString?h(Array.isArray(t.typeString)?t.typeString:[t.typeString]):ot(()=>t.typeString,()=>{h(Array.isArray(t.typeString)?t.typeString:[t.typeString])})}),Re(()=>u==null?void 0:u.destroy()),(i,l)=>(p(),y("span",{ref_key:"typewriterElement",ref:a},null,512))}}),ms=["data-text"],gs=I({__name:"SakuraGlitchText",props:{text:{},delay:{},deleteSpeed:{},loop:{type:Boolean},pauseFor:{},typeString:{},deleteAll:{type:[Number,Boolean,Array]}},setup(s){const e=s;return(t,n)=>{const a=Ye;return p(),y("h1",{class:"sakura-glitch-text","data-text":e.text||e.typeString},[e.text?(p(),y(E,{key:0},[le(ve(e.text),1)],64)):e.typeString?(p(),A(a,tt(Le({key:1},e)),null,16)):b("v-if",!0)],8,ms)}}}),vs=$(gs,[["__scopeId","data-v-b572b383"]]),K="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1519637140387'%20class='icon'%20style=''%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1300'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M658.997935%20371.960547l-221.708498-221.709521c-32.652677-32.651654-85.591377-32.651654-118.244055%200-32.652677%2032.652677-32.652677%2085.591377%200%20118.244055l210.686467%20210.243375c15.095813%2017.272385%2017.229406%2044.333718%200%2061.45363L319.045383%20751.324714c-32.652677%2032.652677-32.652677%2085.590354%200%20118.242008%2032.652677%2032.652677%2085.591377%2032.652677%20118.244055%200L658.992819%20647.862317C753.919818%20552.936341%20758.562559%20471.524147%20658.997935%20371.960547L658.997935%20371.960547zM658.997935%20371.960547'%20p-id='1301'%20fill='%231296db'%3e%3c/path%3e%3c/svg%3e",ys={class:"sakura-hero-info-overlay"},_s={class:"px-2 text-lg"},ks={class:"mx-5 mt-4 flex justify-between"},ws=["href"],Ss=["src"],Ts={class:"mx-5 justify-between",flex:"~ center"},bs=["href"],As=["src"],Ps=I({__name:"SakuraHeroInfoOverlay",props:{hero:{}},setup(s){const e=s,t=ke(),n=B(),a=H(),r=w(()=>e.hero||a.value.hero),u=w(()=>r.value.socials||t.value.social),{hitokoto:h,fetchHitokoto:i}=w(()=>{var l;return r.value.enableHitokoto?((l=vt)==null?void 0:l.useAddonHitokoto(a.value.hero.hitokoto))||{}:{hitokoto:void 0,fetchHitokoto:()=>{}}}).value;return(l,d)=>{const g=vs,S=Ye;return p(),y("div",ys,[P(l.$slots,"highlighted-text",{},()=>[L(g,{class:C(v(n).wallpaperIsPlaying?"sakura-fade-out-up":"sakura-fade-in-down"),text:r.value.title},null,8,["class","text"])],!0),k("div",{class:C(["sakura-info-card",v(n).wallpaperIsPlaying?"sakura-anim-slit-out-horizontal":"sakura-anim-slit-in-horizontal"])},[k("div",{class:C(v(a).hero.socialStyle==="merge"&&"sakura-social-card")},[P(l.$slots,"muted-text",{},()=>{var c,m;return[k("div",{class:C(["flex justify-center",v(a).hero.socialStyle==="separate"&&"sakura-social-card"])},[d[5]||(d[5]=k("span",{class:"inline-block","i-fa6-solid-quote-left":""},null,-1)),k("span",_s,[v(a).hero.typewriter?(p(),y(E,{key:0},[r.value.enableHitokoto?(p(),A(S,{key:1,"type-string":(c=v(h))==null?void 0:c.hitokoto,loop:"",delay:100,"pause-for":1e4,"delete-all":100,onAllTypingFinished:d[0]||(d[0]=_=>v(i)())},null,8,["type-string"])):(p(),A(S,{key:0,"type-string":r.value.motto,loop:"",delay:100,"pause-for":1e4,"delete-all":100},null,8,["type-string"]))],64)):(p(),y(E,{key:1},[le(ve(r.value.enableHitokoto?(m=v(h))==null?void 0:m.hitokoto:r.value.motto),1)],64))]),d[6]||(d[6]=k("span",{class:"inline-block","i-fa6-solid-quote-right":""},null,-1))],2)]},!0),v(a).hero.socialStyle==="merge"?P(l.$slots,"social",{key:0},()=>[k("div",ks,[k("img",{class:"sakura-icon","rotate-180":"","cursor-pointer":"",src:K,alt:"Previous media",onClick:d[1]||(d[1]=(...c)=>v(n).prevWallpaper&&v(n).prevWallpaper(...c))}),(p(!0),y(E,null,ne(u.value,c=>(p(),y("a",{key:c==null?void 0:c.name,style:he({"--sakura-color-icon":c==null?void 0:c.color}),href:c==null?void 0:c.link,"aria-label":"icon",target:"_blank"},[c!=null&&c.icon?(p(),y("div",{key:0,class:C([[c.icon],"sakura-icon"])},null,2)):c!=null&&c.img?(p(),y("img",{key:1,src:c.img,class:"sakura-icon"},null,8,Ss)):b("v-if",!0)],12,ws))),128)),k("img",{class:"sakura-icon","cursor-pointer":"",src:K,alt:"Next media",onClick:d[2]||(d[2]=(...c)=>v(n).nextWallpaper&&v(n).nextWallpaper(...c))})])],!0):b("v-if",!0)],2)],2),v(a).hero.socialStyle==="separate"||v(a).hero.socialStyle==="single"?P(l.$slots,"social",{key:0},()=>[k("div",{class:C(["sakura-info-card",v(a).hero.socialStyle==="separate"&&"sakura-social-card"])},[k("div",Ts,[k("img",{class:"sakura-icon","rotate-180":"","cursor-pointer":"",src:K,alt:"Previous media",onClick:d[3]||(d[3]=(...c)=>v(n).prevWallpaper&&v(n).prevWallpaper(...c))}),(p(!0),y(E,null,ne(u.value,c=>(p(),y("a",{key:c==null?void 0:c.name,flex:"~ center",class:C(v(a).hero.socialStyle==="single"&&"sakura-social-card"),style:he({"--sakura-color-icon":c==null?void 0:c.color}),href:c==null?void 0:c.link,"aria-label":"icon",target:"_blank"},[c!=null&&c.icon?(p(),y("div",{key:0,class:C([[c.icon],"sakura-icon"])},null,2)):c!=null&&c.img?(p(),y("img",{key:1,src:c.img,class:"sakura-icon"},null,8,As)):b("v-if",!0)],14,bs))),128)),k("img",{class:"sakura-icon","cursor-pointer":"",src:K,alt:"Next media",onClick:d[4]||(d[4]=(...c)=>v(n).nextWallpaper&&v(n).nextWallpaper(...c))})])],2)],!0):b("v-if",!0)])}}}),Is=$(Ps,[["__scopeId","data-v-65f737e9"]]),Cs={},xs={class:"sakura-waves-ripple",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 24 150 28",preserveAspectRatio:"none","shape-rendering":"auto"};function Es(s,e){return p(),y("svg",xs,[...e[0]||(e[0]=[st('<defs data-v-aac1fc2f><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" data-v-aac1fc2f></path></defs><g class="sakura-waves-ripple-parallax" data-v-aac1fc2f><use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7" data-v-aac1fc2f></use><use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" data-v-aac1fc2f></use><use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" data-v-aac1fc2f></use><use xlink:href="#gentle-wave" x="48" y="7" fill="oklch(100% 0 0)" data-v-aac1fc2f></use></g>',2)])])}const Ns=$(Cs,[["render",Es],["__scopeId","data-v-aac1fc2f"]]),Rs={};function Ls(s,e){return p(),y(E,null,[e[0]||(e[0]=k("div",{class:"front-wave absolute bottom-0 z-0 h-65px w-[400%]"},null,-1)),e[1]||(e[1]=k("div",{class:"foreground-wave absolute bottom-0 z-1 h-80px w-[400%]"},null,-1))],64)}const Hs=$(Rs,[["render",Ls],["__scopeId","data-v-7a064510"]]),Ms={id:"j-fish-skip",class:"absolute bottom--50px h-180px w-full"},Vs=I({__name:"SakuraWaveFish",props:{color:{}},setup(s){const e=s,t=lt();let n;D(()=>t.isDark,async()=>{setTimeout(()=>{n.setFishColor(Pe("--va-c-bg").value)},0)});class a{constructor(i){this.props=i,this.POINT_INTERVAL=5,this.FISH_COUNT=3,this.MAX_INTERVAL_COUNT=50,this.INIT_HEIGHT_RATE=.5,this.THRESHOLD=50,this.WATCH_INTERVAL=100,this.fishColor="",this.points=[],this.fishes=[],this.watchIds=[]}init(){this.setFishColor(this.props.color),this.setParameters(),this.reconstructMethods(),this.setup(),this.bindEvent(),this.render()}setFishColor(i){i?this.fishColor=i:this.fishColor=Pe("--sakura-color-background").value}setParameters(){this.window=window,this.container=document.getElementById("j-fish-skip"),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),this.points=[],this.fishes=[],this.watchIds=[]}createSurfacePoints(){const i=Math.round(this.width/this.POINT_INTERVAL);this.pointInterval=this.width/(i-1),this.points.push(new r(this,0));for(let l=1;l<i;l++){const d=new r(this,l*this.pointInterval),g=this.points[l-1];d.setPreviousPoint(g),g.setNextPoint(d),this.points.push(d)}}reconstructMethods(){this.watchWindowSize=this.watchWindowSize.bind(this),this.jdugeToStopResize=this.jdugeToStopResize.bind(this),this.startEpicenter=this.startEpicenter.bind(this),this.moveEpicenter=this.moveEpicenter.bind(this),this.reverseVertical=this.reverseVertical.bind(this),this.render=this.render.bind(this)}setup(){this.points.length=0,this.fishes.length=0,this.watchIds.length=0,this.intervalCount=this.MAX_INTERVAL_COUNT,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.fishCount=this.FISH_COUNT*this.width/500*this.height/500,this.canvas.setAttribute("width",this.width.toString()),this.canvas.setAttribute("height",this.height.toString()),this.reverse=!1,this.fishes.push(new u(this)),this.createSurfacePoints()}watchWindowSize(){this.clearTimer(),this.tempWidth=window.innerWidth,this.tempHeight=window.innerHeight,this.watchIds.push(setTimeout(this.jdugeToStopResize,this.WATCH_INTERVAL))}clearTimer(){for(;this.watchIds.length>0;)clearTimeout(this.watchIds.pop())}jdugeToStopResize(){const i=window.innerWidth,l=window.innerHeight,d=i===this.tempWidth&&l===this.tempHeight;this.tempWidth=i,this.tempHeight=l,d&&this.setup()}bindEvent(){window.addEventListener("resize",this.watchWindowSize.bind(this)),this.container.addEventListener("mouseenter",this.startEpicenter.bind(this)),this.container.addEventListener("mousemove",this.moveEpicenter.bind(this))}getAxis(i){const l=this.container.getBoundingClientRect();return{x:i.clientX-l.left+window.scrollX,y:i.clientY-l.top+window.scrollY}}startEpicenter(i){this.axis=this.getAxis(i)}moveEpicenter(i){const l=this.getAxis(i);this.axis||(this.axis=l),this.generateEpicenter(l.x,l.y,l.y-this.axis.y),this.axis=l}generateEpicenter(i,l,d){if(!(l<this.height/2-this.THRESHOLD||l>this.height/2+this.THRESHOLD)){const g=Math.round(i/this.pointInterval);g<0||g>=this.points.length||this.points[g].interfere(l,d)}}reverseVertical(){this.reverse=!this.reverse;for(let i=0,l=this.fishes.length;i<l;i++)this.fishes[i].reverseVertical()}controlStatus(){for(let i=0,l=this.points.length;i<l;i++)this.points[i].updateSelf();for(let i=0,l=this.points.length;i<l;i++)this.points[i].updateNeighbors();this.fishes.length<this.fishCount&&--this.intervalCount===0&&(this.intervalCount=this.MAX_INTERVAL_COUNT,this.fishes.push(new u(this)))}render(){requestAnimationFrame(()=>this.render()),this.controlStatus(),this.context.clearRect(0,0,this.width,this.height),this.context.fillStyle=this.fishColor;for(let i=0,l=this.fishes.length;i<l;i++)this.fishes[i].render(this.context);this.context.save(),this.context.globalCompositeOperation="xor",this.context.beginPath(),this.context.moveTo(0,this.reverse?0:this.height);for(let i=0,l=this.points.length;i<l;i++)this.points[i].render(this.context);this.context.lineTo(this.width,this.reverse?0:this.height),this.context.closePath(),this.context.fill(),this.context.restore()}}class r{constructor(i,l){this.SPRING_CONSTANT=.03,this.SPRING_FRICTION=.9,this.WAVE_SPREAD=.3,this.ACCELARATION_RATE=.01,this.renderer=i,this.x=l,this.init()}init(){this.initHeight=this.renderer.height*this.renderer.INIT_HEIGHT_RATE,this.height=this.initHeight,this.fy=0,this.force={previous:0,next:0}}setPreviousPoint(i){this.previous=i}setNextPoint(i){this.next=i}interfere(i,l){this.fy=this.renderer.height*this.ACCELARATION_RATE*(this.renderer.height-this.height-i>=0?-1:1)*Math.abs(l)}updateSelf(){this.fy+=this.SPRING_CONSTANT*(this.initHeight-this.height),this.fy*=this.SPRING_FRICTION,this.height+=this.fy}updateNeighbors(){this.previous&&(this.force.previous=this.WAVE_SPREAD*(this.height-this.previous.height)),this.next&&(this.force.next=this.WAVE_SPREAD*(this.height-this.next.height))}render(i){this.previous&&(this.previous.height+=this.force.previous,this.previous.fy+=this.force.previous),this.next&&(this.next.height+=this.force.next,this.next.fy+=this.force.next),i.lineTo(this.x,this.renderer.height-this.height)}}class u{constructor(i){this.GRAVITY=.4,this.renderer=i,this.init()}init(){this.direction=Math.random()<.5,this.x=this.direction?this.renderer.width+this.renderer.THRESHOLD:-this.renderer.THRESHOLD,this.previousY=this.y,this.vx=this.getRandomValue(4,10)*(this.direction?-1:1),this.renderer.reverse?(this.y=this.getRandomValue(1*this.renderer.height/10,4*this.renderer.height/10),this.vy=this.getRandomValue(2,5),this.ay=this.getRandomValue(.05,.2)):(this.y=this.getRandomValue(6*this.renderer.height/10,9*this.renderer.height/10),this.vy=this.getRandomValue(-5,-2),this.ay=this.getRandomValue(-.2,-.05)),this.isOut=!1,this.theta=0,this.phi=0}getRandomValue(i,l){return i+(l-i)*Math.random()}reverseVertical(){this.isOut=!this.isOut,this.ay*=-1}controlStatus(){this.previousY=this.y,this.x+=this.vx,this.y+=this.vy,this.vy+=this.ay,this.renderer.reverse?this.y>this.renderer.height*this.renderer.INIT_HEIGHT_RATE?(this.vy-=this.GRAVITY,this.isOut=!0):(this.isOut&&(this.ay=this.getRandomValue(.05,.2)),this.isOut=!1):this.y<this.renderer.height*this.renderer.INIT_HEIGHT_RATE?(this.vy+=this.GRAVITY,this.isOut=!0):(this.isOut&&(this.ay=this.getRandomValue(-.2,-.05)),this.isOut=!1),this.isOut||(this.theta+=Math.PI/20,this.theta%=2*Math.PI,this.phi+=Math.PI/30,this.phi%=2*Math.PI),this.renderer.generateEpicenter(this.x+(this.direction?-1:1)*this.renderer.THRESHOLD,this.y,this.y-this.previousY),(this.vx>0&&this.x>this.renderer.width+this.renderer.THRESHOLD||this.vx<0&&this.x<-this.renderer.THRESHOLD)&&this.init()}render(i){i.save(),i.translate(this.x,this.y),i.rotate(Math.PI+Math.atan2(this.vy,this.vx)),i.scale(1,this.direction?1:-1),i.beginPath(),i.moveTo(-30,0),i.bezierCurveTo(-20,15,15,10,40,0),i.bezierCurveTo(15,-10,-20,-15,-30,0),i.fill(),i.save(),i.translate(40,0),i.scale(.9+.2*Math.sin(this.theta),1),i.beginPath(),i.moveTo(0,0),i.quadraticCurveTo(5,10,20,8),i.quadraticCurveTo(12,5,10,0),i.quadraticCurveTo(12,-5,20,-8),i.quadraticCurveTo(5,-10,0,0),i.fill(),i.restore(),i.save(),i.translate(-3,0),i.rotate((Math.PI/3+Math.PI/10*Math.sin(this.phi))*(this.renderer.reverse?-1:1)),i.beginPath(),this.renderer.reverse?(i.moveTo(5,0),i.bezierCurveTo(10,10,10,30,0,40),i.bezierCurveTo(-12,25,-8,10,0,0)):(i.moveTo(-5,0),i.bezierCurveTo(-10,-10,-10,-30,0,-40),i.bezierCurveTo(12,-25,8,-10,0,0)),i.closePath(),i.fill(),i.restore(),i.restore(),this.controlStatus()}}return _e(()=>{n=new a(e),n.init()}),(h,i)=>(p(),y("div",Ms))}}),$s={class:"sakura-hero-background"},qs=["loop","muted","disablePictureInPicture"],Us=["src"],Ds={key:1,class:"sakura-hero-background-default h-full w-full"},Fs=I({__name:"SakuraHeroBackground",props:{urls:{}},setup(s){const e=s,t=ye([]),n=B(),a=H(),r=w(()=>e.urls||a.value.hero.urls||""),u=w(()=>a.value.hero),h=w(()=>{if(typeof r.value=="string")return r.value;if(u.value.randomUrls){let l=null;do{const d=u.value.urls.length;l=Math.floor(Math.random()*d)}while(t.value.includes(l));return r.value[l]}return r.value[n.wallpaperIndex]}),i=w(()=>ut(h.value));return D(()=>n.wallpaperIndex,(l,d)=>{const g=u.value.urls.length;t.value.length===g&&(t.value=[]),t.value.push(d)}),D(()=>n.wallpaperIndex,()=>{n.wallpaperIndex>=r.value.length&&(n.wallpaperIndex=0)},{immediate:!0}),D(()=>r.value.length,l=>{n.wallpaperLength=l},{immediate:!0}),(l,d)=>(p(),y("div",$s,[L(it,{name:v(n).wallpaperOperation==="nextMedia"?"slide-right":v(n).wallpaperOperation==="prevMedia"?"slide-left":"fade",mode:"out-in"},{default:U(()=>[v(n).wallpaperIsPlaying||i.value?(p(),y("video",{key:v(n).wallpaperIsPlaying?u.value.playerUrl:h.value,class:"min-h-full min-w-full object-cover",preload:"auto",autoplay:"",loop:!v(n).wallpaperIsPlaying,muted:!v(n).wallpaperIsPlaying,disablePictureInPicture:u.value.disablePictureInPicture,onEnded:d[0]||(d[0]=g=>v(n).wallpaperIsPlaying=!1)},[k("source",{src:v(n).wallpaperIsPlaying?u.value.playerUrl:h.value,type:"video/mp4"},null,8,Us),d[1]||(d[1]=le(" Your browser does not support video tags ",-1))],40,qs)):(p(),y(E,{key:1},[h.value?(p(),y("div",{key:h.value,class:"sakura-hero-background-img",style:he({backgroundImage:`url(${h.value})`,backgroundAttachment:u.value.fixedImg?"fixed":"scroll"})},null,4)):(p(),y("div",Ds))],64))]),_:1},8,["name"])]))}}),Bs={class:"sakura-hero <md:px-5"},Os={"z-4":"",class:"info-overlay"},zs=I({__name:"SakuraHero",props:{hero:{}},setup(s){const e=s,t=H(),n=B(),a=ht(),r=w(()=>e.hero||t.value.hero),u=w(()=>n.wallpaperIsPlaying?"sakura-fade-out-down":"sakura-fade-in-up");return D(()=>n.wallpaperIsPlaying,h=>{const i=document.querySelector(".sakura-navbar");i==null||i.classList.toggle("sakura-fade-in-down",!h),i==null||i.classList.toggle("sakura-fade-out-up",h);const l=document.querySelector("#live2d-tool-quit"),d=document.querySelector("#live2d-tools");(h&&(d==null?void 0:d.className)==="show"||!h&&(d==null?void 0:d.className)==="hide")&&l instanceof HTMLElement&&l.click()}),(h,i)=>{var N;const l=Fs,d=Vs,g=Hs,S=Ns,c=Is,m=Ft,_=$t;return p(),y("header",Bs,[v(a)?(p(),y(E,{key:0},[k("div",{class:C(["absolute inset-0 overflow-hidden",[!v(n).wallpaperIsPlaying&&r.value.style&&"banner-style",r.value.style]])},[P(h.$slots,"background",{},()=>{var R;return[L(l,{urls:(R=r.value)==null?void 0:R.urls},null,8,["urls"])]}),(N=r.value)!=null&&N.waveTheme?(p(),y("div",{key:0,class:C(u.value)},[P(h.$slots,"overlay-bar",{},()=>[r.value.waveTheme==="fish"?(p(),A(d,{key:0})):r.value.waveTheme==="horizontal"?(p(),A(g,{key:1})):r.value.waveTheme==="ripple"?(p(),A(S,{key:2})):b("v-if",!0)])],2)):b("v-if",!0)],2),k("div",Os,[P(h.$slots,"info-overlay",{},()=>[L(c,{hero:r.value},null,8,["hero"])])]),P(h.$slots,"player",{},()=>{var R;return[(R=r.value)!=null&&R.playerUrl?(p(),A(m,{key:0,class:"absolute bottom-2 right-2 z-4 h-8 w-8"})):b("v-if",!0)]}),k("div",{class:C([u.value,"absolute bottom-12 right-50% z-4"])},[P(h.$slots,"scroll-down",{},()=>{var R;return[(R=v(t).scrollDown)!=null&&R.enable?(p(),A(_,{key:0})):b("v-if",!0)]})],2)],64)):b("v-if",!0)])}}}),Ws={class:"sakura-home",flex:"~ col center"},Zs=I({__name:"SakuraHomeLayout",setup(s){const e=H();return(t,n)=>{const a=zs,r=Mt,u=Et,h=pt,i=ct,l=Pt;return p(),y(E,null,[P(t.$slots,"hero",{},()=>[L(a)]),k("div",Ws,[L(i,{class:"sakura-safe-padding sakura-home-layout sakura-site-content",base:""},nt({default:U(()=>[P(t.$slots,"notice-board",{},()=>[L(r)]),P(t.$slots,"post-pinned",{},()=>[v(e).pinnedPost?(p(),A(u,{key:0})):b("v-if",!0)]),P(t.$slots,"post-list",{},()=>[L(h)])]),_:2},[t.$slots.right?{name:"right",fn:U(()=>[P(t.$slots,"right")]),key:"0"}:void 0,t.$slots.left?{name:"left",fn:U(()=>[P(t.$slots,"left")]),key:"1"}:void 0]),1024),P(t.$slots,"pagination",{},()=>[L(l)])])],64)}}}),ri=I({__name:"home",setup(s){const e=mt(),t=B(),n=w(()=>Number.parseInt(e.params.page));return gt(()=>{const a=document.documentElement.scrollTop;t.setScrollPosition(e.path,a)}),D(()=>n.value,async a=>{t.curPage=a}),(a,r)=>{const u=Zs;return p(),A(u)}}});export{ri as default};
