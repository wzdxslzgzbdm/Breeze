import{_ as D}from"./SakuraPage.vue_vue_type_style_index_0_lang.BqwetR2q.js";import{i as v,l as F,_ as I,x as M}from"./app.Bwy3IvpQ.js";import"./chunks/dayjs.DPscOGnl.js";import{r as V,w as A,j as S,f as E,O as d,L as m,S as i,F as P,X as N,v as f,a2 as R,u as h,U as X,V as x,J as C,M as j,K as k,a1 as g,Y as O}from"./framework.JYNd-MJe.js";import"./SakuraMultiColumns.vue_vue_type_script_setup_true_lang.C_ZnLQF2.js";import"./chunks/vue-router.CysrPoQU.js";import"./chunks/pinia.DXtYSkKd.js";import"./chunks/vue-i18n.CrIghDB1.js";import"./chunks/nprogress.DgNGesC2.js";function T(r,o=!1){const s=V();return A(()=>r,async()=>{let a;if(typeof r=="string"){if(!v)return;a=await fetch(r).then(n=>n.json())||[]}else{if(!v){a=r;return}a=[];const n=async t=>{var _,c,e,p,y;try{const l=await fetch(t.rss);if(l.ok){const w=await l.text(),u=new DOMParser().parseFromString(w,"application/xml"),L=t.blog||((_=u.querySelector("title"))==null?void 0:_.textContent),b=t.name||((c=u.querySelector("author > name"))==null?void 0:c.textContent),$=(e=u.querySelector('link[rel="alternate"]'))==null?void 0:e.getAttribute("href"),q=t.desc||((p=u.querySelector("subtitle"))==null?void 0:p.textContent),B={avatar:t.avatar||((y=u.querySelector("logo"))==null?void 0:y.textContent),name:b,url:$,color:"#EE9CA7",blog:L,desc:q};a.push(B)}else console.error(`Failed to fetch XML from ${t.rss}:`,l.status,l.statusText)}catch(l){console.error(`Error fetching XML from ${t.rss}:`,l)}};await Promise.all(r.map(n))}s.value=o?Array.from(a).sort(()=>Math.random()-.5):a},{immediate:!0}),{data:s}}const U={class:"links"},z={class:"link-items"},J=["href","title"],K={class:"link-left"},Y={class:"link-info",m:"l-2"},G={class:"link-blog",font:"serif black"},H={class:"link-desc"},Q=S({__name:"SakuraLinks",props:{links:{},random:{type:Boolean},errorImg:{}},setup(r){const o=r,s=F(),{data:a}=T(o.links,o.random),n=E(()=>{var t;return(t=s.value.ui.links)==null?void 0:t.image});return(t,_)=>{const c=I;return m(),d("div",U,[i("ul",z,[(m(!0),d(P,null,N(f(a),(e,p)=>(m(),d("li",{key:p,class:"link-item",style:R(`--primary-color: ${e.color}`)},[i("a",{class:"link-url",p:"x-4 y-2",href:e.url,title:e.name,alt:"portrait",rel:"friend",target:"_blank"},[i("div",K,[h(c,X({ref_for:!0},n.value,{class:"link-avatar",width:"64",height:"64",w:"16",h:"16",src:e.avatar,alt:e.name,"error-img":t.errorImg}),null,16,["src","alt","error-img"])]),i("div",Y,[i("div",G,x(e.blog),1),i("div",H,x(e.desc),1)])],8,J)],4))),128))])])}}}),W=C(Q,[["__scopeId","data-v-fb22ebcf"]]),Z=S({__name:"SakuraLinksLayout",setup(r){const o=M();return(s,a)=>{const n=W,t=j("RouterView"),_=D;return m(),k(_,null,{default:g(()=>[h(t,null,{default:g(({Component:c})=>[(m(),k(O(c),null,{"main-content":g(()=>[h(n,{links:f(o).links,random:f(o).random,"error-img":f(o).errorImg},null,8,["links","random","error-img"])]),_:2},1024))]),_:1})]),_:1})}}}),tt={};function et(r,o){const s=Z;return m(),k(s)}const pt=C(tt,[["render",et]]);export{pt as default};
